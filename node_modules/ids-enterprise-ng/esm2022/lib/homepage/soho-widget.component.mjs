import { Component, HostBinding, Input, Output, EventEmitter, } from '@angular/core';
import * as i0 from "@angular/core";
export class SohoWidgetComponent {
    get classList() {
        let tmp = '';
        if (this.widgetWidth && this.widgetWidth !== 'single') {
            tmp += this.widgetWidth + '-width';
        }
        if (this.widgetHeight && this.widgetHeight !== 'single') {
            tmp += tmp ? ' ' : '';
            tmp += this.widgetHeight + '-height';
        }
        if (this.removable != null && this.removable !== true) {
            tmp += tmp ? ' ' : '';
            tmp += 'no-remove';
        }
        return tmp;
    }
    get isNoHeader() {
        return this.noHeader;
    }
    get isNoShadow() {
        return this.noShadow;
    }
    set contentPaddingX(value) {
        this.options.contentPaddingX = value;
        if (this.cards) {
            this.options.contentPaddingX = value;
        }
    }
    set bordered(value) {
        this.options.bordered = value;
        if (this.cards) {
            this.options.bordered = value;
        }
    }
    set contentPaddingY(value) {
        this.options.contentPaddingY = value;
        if (this.cards) {
            this.options.contentPaddingY = value;
        }
    }
    set detailRefId(value) {
        this.options.detailRefId = value;
        if (this.cards) {
            this.options.detailRefId = value;
        }
    }
    constructor(elementRef, ngZone) {
        this.elementRef = elementRef;
        this.ngZone = ngZone;
        this.isWidget = true;
        this.resizecard = new EventEmitter();
        this.reordercard = new EventEmitter();
        this.removecard = new EventEmitter();
        this.options = {};
    }
    ngOnInit() {
        this.ngZone.runOutsideAngular(() => {
            this.jQueryElement = jQuery(this.elementRef.nativeElement);
            if (typeof (this.options.bordered) === 'string' && this.options.bordered !== null) {
                this.bordered = this.options.bordered.toLocaleLowerCase() === 'true';
            }
        });
    }
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            this.jQueryElement = jQuery(this.elementRef.nativeElement);
            this.jQueryElement.cards(this.options);
            this.jQueryElement.cards({
                bordered: this.bordered,
                noHeader: this.noHeader,
                contentPaddingX: this.contentPaddingX,
                contentPaddingY: this.contentPaddingY,
                noShadow: this.noShadow,
                detailRefId: this.detailRefId,
            });
            this.jQueryElement
                .on('resizecard', (_e, card, metadata) => this.onResizeCard(card, metadata))
                .on('reordercard', (_e, card, metadata) => this.onReorderCard(card, metadata))
                .on('removecard', (_e, card, metadata) => this.onRemoveCard(card, metadata));
        });
    }
    onResizeCard(card, metadata) {
        const event = { widget: this, card, metadata };
        this.ngZone.run(() => {
            this.resizecard.emit(event);
        });
    }
    onReorderCard(card, metadata) {
        const event = { widget: this, card, metadata };
        this.ngZone.run(() => {
            this.reordercard.emit(event);
        });
    }
    onRemoveCard(card, metadata) {
        const event = { widget: this, card, metadata };
        this.ngZone.run(() => {
            this.removecard.emit(event);
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoWidgetComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoWidgetComponent, selector: "div[soho-widget]", inputs: { widgetWidth: "widgetWidth", widgetHeight: "widgetHeight", removable: "removable", noHeader: "noHeader", noShadow: "noShadow", contentPaddingX: "contentPaddingX", bordered: "bordered", contentPaddingY: "contentPaddingY", detailRefId: "detailRefId" }, outputs: { resizecard: "resizecard", reordercard: "reordercard", removecard: "removecard" }, host: { properties: { "class": "this.classList", "class.widget": "this.isWidget", "class.no-header": "this.isNoHeader", "class.no-shadow": "this.isNoShadow" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoWidgetComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'div[soho-widget]',
                    template: `<ng-content></ng-content>`,
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { classList: [{
                type: HostBinding,
                args: ['class']
            }], isWidget: [{
                type: HostBinding,
                args: ['class.widget']
            }], isNoHeader: [{
                type: HostBinding,
                args: ['class.no-header']
            }], isNoShadow: [{
                type: HostBinding,
                args: ['class.no-shadow']
            }], widgetWidth: [{
                type: Input
            }], widgetHeight: [{
                type: Input
            }], removable: [{
                type: Input
            }], noHeader: [{
                type: Input
            }], noShadow: [{
                type: Input
            }], contentPaddingX: [{
                type: Input
            }], bordered: [{
                type: Input
            }], contentPaddingY: [{
                type: Input
            }], detailRefId: [{
                type: Input
            }], resizecard: [{
                type: Output
            }], reordercard: [{
                type: Output
            }], removecard: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby13aWRnZXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi9ob21lcGFnZS9zb2hvLXdpZGdldC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxXQUFXLEVBQ1gsS0FBSyxFQUNMLE1BQU0sRUFDTixZQUFZLEdBS2IsTUFBTSxlQUFlLENBQUM7O0FBUXZCLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsSUFBMEIsU0FBUztRQUNqQyxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFFYixJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDLFdBQVcsS0FBSyxRQUFRLEVBQUU7WUFDckQsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDO1NBQ3BDO1FBRUQsSUFBSSxJQUFJLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxZQUFZLEtBQUssUUFBUSxFQUFFO1lBQ3ZELEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3RCLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxHQUFHLFNBQVMsQ0FBQztTQUN0QztRQUVELElBQUksSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxJQUFJLEVBQUU7WUFDckQsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDdEIsR0FBRyxJQUFJLFdBQVcsQ0FBQztTQUNwQjtRQUVELE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztJQUlELElBQW9DLFVBQVU7UUFDNUMsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxJQUFvQyxVQUFVO1FB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UUFBUSxFQUFFLENBQUM7UUFFNUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFO1lBQ25CLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzlCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQzs4R0F0SVUsbUJBQW1CO2tHQUFuQixtQkFBbUIsMmpCQUZwQiwyQkFBMkI7OzJGQUUxQixtQkFBbUI7a0JBSi9CLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLGtCQUFrQjtvQkFDNUIsUUFBUSxFQUFFLDJCQUEyQjtpQkFDdEM7c0hBRTJCLFNBQVM7c0JBQWxDLFdBQVc7dUJBQUMsT0FBTztnQkFvQlMsUUFBUTtzQkFBcEMsV0FBVzt1QkFBQyxjQUFjO2dCQUVTLFVBQVU7c0JBQTdDLFdBQVc7dUJBQUMsaUJBQWlCO2dCQUlNLFVBQVU7c0JBQTdDLFdBQVc7dUJBQUMsaUJBQWlCO2dCQUlyQixXQUFXO3NCQUFuQixLQUFLO2dCQUNHLFlBQVk7c0JBQXBCLEtBQUs7Z0JBQ0csU0FBUztzQkFBakIsS0FBSztnQkFFRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBRU8sZUFBZTtzQkFBM0IsS0FBSztnQkFPTyxRQUFRO3NCQUFwQixLQUFLO2dCQU9PLGVBQWU7c0JBQTNCLEtBQUs7Z0JBT08sV0FBVztzQkFBdkIsS0FBSztnQkFPSSxVQUFVO3NCQUFuQixNQUFNO2dCQUNHLFdBQVc7c0JBQXBCLE1BQU07Z0JBQ0csVUFBVTtzQkFBbkIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgTmdab25lLFxuICBPbkluaXQsXG4gIEVsZW1lbnRSZWYsXG4gIEFmdGVyVmlld0luaXQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5leHBvcnQgdHlwZSBXaWRnZXRTaXplID0gJ3NpbmdsZScgfCAnZG91YmxlJyB8ICd0cmlwbGUnIHwgJ3F1YWQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkaXZbc29oby13aWRnZXRdJywgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gLFxufSlcbmV4cG9ydCBjbGFzcyBTb2hvV2lkZ2V0Q29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25Jbml0IHtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcycpIGdldCBjbGFzc0xpc3QoKTogc3RyaW5nIHtcbiAgICBsZXQgdG1wID0gJyc7XG5cbiAgICBpZiAodGhpcy53aWRnZXRXaWR0aCAmJiB0aGlzLndpZGdldFdpZHRoICE9PSAnc2luZ2xlJykge1xuICAgICAgdG1wICs9IHRoaXMud2lkZ2V0V2lkdGggKyAnLXdpZHRoJztcbiAgICB9XG5cbiAgICBpZiAodGhpcy53aWRnZXRIZWlnaHQgJiYgdGhpcy53aWRnZXRIZWlnaHQgIT09ICdzaW5nbGUnKSB7XG4gICAgICB0bXAgKz0gdG1wID8gJyAnIDogJyc7XG4gICAgICB0bXAgKz0gdGhpcy53aWRnZXRIZWlnaHQgKyAnLWhlaWdodCc7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVtb3ZhYmxlICE9IG51bGwgJiYgdGhpcy5yZW1vdmFibGUgIT09IHRydWUpIHtcbiAgICAgIHRtcCArPSB0bXAgPyAnICcgOiAnJztcbiAgICAgIHRtcCArPSAnbm8tcmVtb3ZlJztcbiAgICB9XG5cbiAgICByZXR1cm4gdG1wO1xuICB9XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy53aWRnZXQnKSBpc1dpZGdldCA9IHRydWU7XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5uby1oZWFkZXInKSBnZXQgaXNOb0hlYWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5ub0hlYWRlcjtcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3Mubm8tc2hhZG93JykgZ2V0IGlzTm9TaGFkb3coKSB7XG4gICAgcmV0dXJuIHRoaXMubm9TaGFkb3c7XG4gIH1cblxuICBASW5wdXQoKSB3aWRnZXRXaWR0aD86IFdpZGdldFNpemU7XG4gIEBJbnB1dCgpIHdpZGdldEhlaWdodD86IFdpZGdldFNpemUgfCAnYXV0byc7XG4gIEBJbnB1dCgpIHJlbW92YWJsZT86IGJvb2xlYW47XG5cbiAgQElucHV0KCkgbm9IZWFkZXI6IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gIEBJbnB1dCgpIG5vU2hhZG93OiBib29sZWFuIHwgdW5kZWZpbmVkO1xuXG4gIEBJbnB1dCgpIHNldCBjb250ZW50UGFkZGluZ1godmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCkge1xuICAgICh0aGlzLm9wdGlvbnMgYXMgYW55KS5jb250ZW50UGFkZGluZ1ggPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5jYXJkcykge1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRlbnRQYWRkaW5nWCA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBib3JkZXJlZCh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgICh0aGlzLm9wdGlvbnMgYXMgYW55KS5ib3JkZXJlZCA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmNhcmRzKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuYm9yZGVyZWQgPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBASW5wdXQoKSBzZXQgY29udGVudFBhZGRpbmdZKHZhbHVlOiBudW1iZXIgfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5vcHRpb25zIGFzIGFueSkuY29udGVudFBhZGRpbmdZID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuY2FyZHMpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZW50UGFkZGluZ1kgPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBASW5wdXQoKSBzZXQgZGV0YWlsUmVmSWQodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgICh0aGlzLm9wdGlvbnMgYXMgYW55KS5kZXRhaWxSZWZJZCA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmNhcmRzKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuZGV0YWlsUmVmSWQgPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBAT3V0cHV0KCkgcmVzaXplY2FyZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgcmVvcmRlcmNhcmQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIHJlbW92ZWNhcmQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBwcml2YXRlIG9wdGlvbnM6IFNvaG9DYXJkT3B0aW9ucyA9IHt9O1xuICBwcml2YXRlIGNhcmRzPzogU29ob0NhcmRTdGF0aWMgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLFxuICApIHsgfVxuXG4gIC8vIFJlZmVyZW5jZSB0byB0aGUgalF1ZXJ5IGVsZW1lbnQuXG4gIHByaXZhdGUgalF1ZXJ5RWxlbWVudD86IEpRdWVyeTtcblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQgPSBqUXVlcnkodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuXG4gICAgICBpZiAodHlwZW9mICh0aGlzLm9wdGlvbnMuYm9yZGVyZWQpID09PSAnc3RyaW5nJyAmJiB0aGlzLm9wdGlvbnMuYm9yZGVyZWQgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5ib3JkZXJlZCA9IHRoaXMub3B0aW9ucy5ib3JkZXJlZC50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50ID0galF1ZXJ5KHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5jYXJkcyh0aGlzLm9wdGlvbnMpO1xuXG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQuY2FyZHMoe1xuICAgICAgICBib3JkZXJlZDogdGhpcy5ib3JkZXJlZCxcbiAgICAgICAgbm9IZWFkZXI6IHRoaXMubm9IZWFkZXIsXG4gICAgICAgIGNvbnRlbnRQYWRkaW5nWDogdGhpcy5jb250ZW50UGFkZGluZ1gsXG4gICAgICAgIGNvbnRlbnRQYWRkaW5nWTogdGhpcy5jb250ZW50UGFkZGluZ1ksXG4gICAgICAgIG5vU2hhZG93OiB0aGlzLm5vU2hhZG93LFxuICAgICAgICBkZXRhaWxSZWZJZDogdGhpcy5kZXRhaWxSZWZJZCxcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudFxuICAgICAgICAub24oJ3Jlc2l6ZWNhcmQnLCAoX2U6IEpRdWVyeS5UcmlnZ2VyZWRFdmVudCwgY2FyZDogSlF1ZXJ5LCBtZXRhZGF0YTogb2JqZWN0KSA9PiB0aGlzLm9uUmVzaXplQ2FyZChjYXJkLCBtZXRhZGF0YSkpXG4gICAgICAgIC5vbigncmVvcmRlcmNhcmQnLCAoX2U6IEpRdWVyeS5UcmlnZ2VyZWRFdmVudCwgY2FyZDogSlF1ZXJ5LCBtZXRhZGF0YTogb2JqZWN0KSA9PiB0aGlzLm9uUmVvcmRlckNhcmQoY2FyZCwgbWV0YWRhdGEpKVxuICAgICAgICAub24oJ3JlbW92ZWNhcmQnLCAoX2U6IEpRdWVyeS5UcmlnZ2VyZWRFdmVudCwgY2FyZDogSlF1ZXJ5LCBtZXRhZGF0YTogb2JqZWN0KSA9PiB0aGlzLm9uUmVtb3ZlQ2FyZChjYXJkLCBtZXRhZGF0YSkpO1xuICAgIH0pO1xuICB9XG5cbiAgb25SZXNpemVDYXJkKGNhcmQ6IEpRdWVyeTxIVE1MRWxlbWVudD4sIG1ldGFkYXRhOiBvYmplY3QpIHtcbiAgICBjb25zdCBldmVudDogU29ob0hvbWVQYWdlV2lkZ2V0RWRpdEV2ZW50ID0geyB3aWRnZXQ6IHRoaXMsIGNhcmQsIG1ldGFkYXRhIH07XG5cbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy5yZXNpemVjYXJkLmVtaXQoZXZlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgb25SZW9yZGVyQ2FyZChjYXJkOiBKUXVlcnk8SFRNTEVsZW1lbnQ+LCBtZXRhZGF0YTogb2JqZWN0KSB7XG4gICAgY29uc3QgZXZlbnQ6IFNvaG9Ib21lUGFnZVdpZGdldEVkaXRFdmVudCA9IHsgd2lkZ2V0OiB0aGlzLCBjYXJkLCBtZXRhZGF0YSB9O1xuXG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMucmVvcmRlcmNhcmQuZW1pdChldmVudCk7XG4gICAgfSk7XG4gIH1cblxuICBvblJlbW92ZUNhcmQoY2FyZDogSlF1ZXJ5PEhUTUxFbGVtZW50PiwgbWV0YWRhdGE6IG9iamVjdCkge1xuICAgIGNvbnN0IGV2ZW50OiBTb2hvSG9tZVBhZ2VXaWRnZXRFZGl0RXZlbnQgPSB7IHdpZGdldDogdGhpcywgY2FyZCwgbWV0YWRhdGEgfTtcblxuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZWNhcmQuZW1pdChldmVudCk7XG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==