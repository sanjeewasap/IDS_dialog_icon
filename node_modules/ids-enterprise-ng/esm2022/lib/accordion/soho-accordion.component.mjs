// tslint:disable-next-line:no-unused-variable
import { ChangeDetectionStrategy, Component, ContentChildren, EventEmitter, Input, Output, forwardRef, } from '@angular/core';
import { SohoAccordionHeaderComponent } from './soho-accordion-header.component';
import { SohoAccordionPaneComponent } from './soho-accordion-pane.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
/**
 * Angular Wrapper for the Soho Accordion control.
 *
 * This component searches for an element, annotated with the `soho-accordion` attribute,
 * and then matches this component to it.
 * <br>
 * The characteristics of the component can be controlled using the set of inputs.
 *
 * The Accordion is a grouped set of collapsible panels used to navigate sections of
 * related content. Each panel consists of two levels: the top level identifies the
 * category or section header, and the second level provides the associated options.
 */
export class SohoAccordionComponent {
    // -------------------------------------------
    // Component Inputs
    // -------------------------------------------
    /**
     * If an Accordion pane is open, and that pane contains sub-headers, only one
     * of the pane's sub-headers can be open at a time.
     *
     * Defaults to true.
     *
     * If set to true, allows only one pane of the accordion to be open at a time.
     */
    set allowOnePane(allowOnePane) {
        this.options.allowOnePane = typeof (allowOnePane) === 'boolean' && allowOnePane;
        if (this.accordion) {
            this.accordion.settings.allowOnePane = this.options.allowOnePane;
            this.markForUpdate();
        }
    }
    get allowOnePane() {
        return this.options.allowOnePane;
    }
    /**
     * Displays a "Chevron" icon that sits off to the right-most side of a top-level accordion header.
     * Used in place of an Expander (+/-) if enabled.
     *
     *
     */
    set displayChevron(displayChevron) {
        this.options.displayChevron = typeof (displayChevron) === 'boolean' && displayChevron;
        if (this.accordion) {
            this.accordion.settings.displayChevron = this.options.displayChevron;
            this.markForUpdate();
        }
    }
    get displayChevron() {
        return this.options.displayChevron;
    }
    /**
     * Changes the iconography used in accordion header expander buttons.
     */
    set expanderDisplay(expanderDisplay) {
        this.options.expanderDisplay = expanderDisplay;
        if (this.accordion) {
            this.accordion.settings.expanderDisplay = this.options.expanderDisplay;
            this.markForUpdate();
        }
    }
    get expanderDisplay() {
        return this.options.expanderDisplay;
    }
    /**
     * Can be set to false if routing is externally handled, otherwise
     * links are handled normally.
     */
    set rerouteOnLinkClick(rerouteOnLinkClick) {
        this.options.rerouteOnLinkClick = typeof (rerouteOnLinkClick) === 'boolean' && rerouteOnLinkClick;
        if (this.accordion) {
            this.accordion.settings.rerouteOnLinkClick = this.options.rerouteOnLinkClick;
            this.markForUpdate();
        }
    }
    get rerouteOnLinkClick() {
        return this.options.rerouteOnLinkClick;
    }
    /**
     * Add a alert badge to the accordion header (used for App menu)
     */
    set notificationBadge(notificationBadge) {
        this.options.notificationBadge = typeof (notificationBadge) === 'boolean' && notificationBadge;
        if (this.accordion) {
            this.accordion.settings.notificationBadge = this.options.notificationBadge;
            this.markForUpdate();
        }
    }
    get notificationBadge() {
        return this.options.notificationBadge;
    }
    /**
     * A callback function that when implemented provided a call back for "ajax loading" of tab contents on open.
     */
    set source(source) {
        this.options.source = source;
        if (this.accordion) {
            this.accordion.settings.source = this.options.source;
            this.markForUpdate();
        }
    }
    get source() {
        return this.options.source;
    }
    /**
     * Display accordion with panels
     */
    set hasPanels(hasPanels) {
        this.options.hasPanels = hasPanels;
        if (this.accordion) {
            this.accordion.settings.hasPanels = this.options.hasPanels;
            this.markForUpdate();
        }
    }
    get hasPanels() {
        return this.options.hasPanels;
    }
    /**
     * Set the color scheme to inverse
     */
    set inverse(inverse) {
        this.options.inverse = inverse;
        if (this.accordion) {
            this.accordion.settings.inverse = this.options.inverse;
            this.markForUpdate();
        }
    }
    get inverse() {
        return this.options.inverse;
    }
    /**
     * Set the color scheme to alternate
     */
    set alternate(bool) {
        this.options.alternate = bool;
        if (this.accordion) {
            this.accordion.settings.alternate = this.options.alternate;
            this.markForUpdate();
        }
    }
    get alternate() {
        return this.options.alternate;
    }
    /**
     * Enables tooltips for longer text that is handled with ellipsis
     */
    set enableTooltips(enableTooltips) {
        this.options.enableTooltips = enableTooltips;
        if (this.accordion) {
            this.accordion.settings.enableTooltips = this.options.enableTooltips;
            this.markForUpdate();
        }
    }
    get enableTooltips() {
        return this.options.enableTooltips;
    }
    /**
     * Constructor.
     *
     * @param elementRef - the element matching the component's selector.
     * @param ngZone - zone access.
     */
    constructor(element, ngZone) {
        this.element = element;
        this.ngZone = ngZone;
        // -------------------------------------------
        // Options Block
        // -------------------------------------------
        this.options = {};
        // -------------------------------------------
        // Component Output
        // -------------------------------------------
        /* eslint-disable @angular-eslint/no-output-rename */
        this.beforeexpandEvent = new EventEmitter();
        this.beforecollapseEvent = new EventEmitter();
        this.beforeselectEvent = new EventEmitter();
        this.selectedEvent = new EventEmitter();
        this.followlinkEvent = new EventEmitter();
        this.expandEvent = new EventEmitter();
        this.afterexpandEvent = new EventEmitter();
        this.collapseEvent = new EventEmitter();
        this.aftercollapseEvent = new EventEmitter();
    }
    // -------------------------------------------
    // Public API
    // -------------------------------------------
    /**
     * Makes provided accordion headers appear "selected"
     */
    select(header) {
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => {
                return this.accordion.select(typeof header === 'string' ? header : header['jQueryElement']);
            });
        }
    }
    /**
     * Makes provided accordion headers appear "deselected"
     */
    deselect(header) {
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => {
                return this.accordion.deselect(typeof header === 'string' ? header : header['jQueryElement']);
            });
        }
    }
    /**
     * Makes all accordion headers appear "deselected"
     */
    deselectAll() {
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => {
                return this.accordion.deselectAll();
            });
        }
    }
    /**
     * Get's the nth header from the accordion.
     *
     * @todo - how best to access the headers?
     *
     * @param index - the index of the accordion header.
     * @return the header at the given index.
     */
    getHeader(index) {
        if (!this.headers) {
            return undefined;
        }
        return this.headers.toArray()[index];
    }
    /**
     * Expand the given Panel on the Accordion.
     *
     * @param header &nbsp;-&nbsp; the header component
     */
    expand(header) {
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => {
                return this.accordion.expand(typeof header === 'string' ? header : header['jQueryElement']);
            });
        }
    }
    /**
     * Collapse the given Panel on the Accordion.
     *
     * @param header &nbsp;-&nbsp; the jquery header element
     */
    collapse(header) {
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => {
                return this.accordion.collapse(typeof header === 'string' ? header : header['jQueryElement']);
            });
        }
    }
    /**
     * Expands all accordion headers, if possible.
     */
    expandAll() {
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => this.accordion.expandAll());
        }
    }
    /**
     * Collapses all the expanded panels.
     *
     *
     */
    collapseAll() {
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => this.accordion.collapseAll());
        }
    }
    /**
     * Disables the control.
     */
    disable() {
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => this.accordion.disable());
        }
    }
    /**
     * Enables the control.
     */
    enable() {
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => this.accordion.enable());
        }
    }
    /**
     * Returns true if the given header is currently disabled or the whole accordion
     * is disabled; otherwise false.
     *
     * @param header the accordion header panel to check.
     */
    isDisabled(header) {
        if (this.accordion) {
            return this.ngZone.runOutsideAngular(() => this.accordion.isDisabled(header.jQueryElement));
        }
        return false;
    }
    /**
     * Returns true if the given header is currently expanded; otherwise
     * false.
     *
     * @param header the accordion header panel to check.
     */
    isExpanded(header) {
        if (this.accordion) {
            return this.ngZone.runOutsideAngular(() => this.accordion.isExpanded(header.jQueryElement));
        }
        return false;
    }
    /**
     * Toggle the given Panel on the Accordion between expanded and collapsed
     *
     * @param header &nbsp;-&nbsp; the jquery header element
     */
    toggle(header) {
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => this.accordion.toggle(header.jQueryElement));
        }
    }
    /**
     * Call to notify the accordion about any dom changes
     */
    updated(headers, settings) {
        if (settings) {
            this.options = Soho.utils.mergeSettings(this.element[0], settings, this.options);
        }
        if (this.accordion) {
            this.ngZone.runOutsideAngular(() => this.accordion.updated(headers, this.options));
        }
    }
    // ------------------------------------------
    // Lifecycle Events
    // ------------------------------------------
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            // Wrap the element in a jQuery selector.
            this.jQueryElement = jQuery(this.element.nativeElement.childNodes[0]);
            // Initialise the event handlers.
            this.jQueryElement
                .on('beforeexpand', (event, anchor) => this.ngZone.run(() => {
                event.anchor = anchor;
                this.beforeexpandEvent.emit(event);
            }))
                .on('beforecollapse', (event, anchor) => this.ngZone.run(() => {
                event.anchor = anchor;
                this.beforecollapseEvent.emit(event);
            }))
                .on('beforeselect', (event, anchor) => this.ngZone.run(() => {
                event.anchor = anchor;
                this.beforeselectEvent.emit(event);
            }))
                .on('selected', (event, anchor) => this.ngZone.run(() => {
                event.anchor = anchor;
                this.selectedEvent.emit(event);
            }))
                .on('followlink', (event, anchor) => this.ngZone.run(() => {
                event.anchor = anchor;
                this.followlinkEvent.emit(event);
            }))
                .on('expand', (event, anchor) => this.ngZone.run(() => {
                event.anchor = anchor;
                this.expandEvent.emit(event);
            }))
                .on('afterexpand', (event, anchor) => this.ngZone.run(() => {
                event.anchor = anchor;
                this.afterexpandEvent.emit(event);
            }))
                .on('collapse', (event, anchor) => this.ngZone.run(() => {
                event.anchor = anchor;
                this.collapseEvent.emit(event);
            }))
                .on('aftercollapse', (event, anchor) => this.ngZone.run(() => {
                event.anchor = anchor;
                this.aftercollapseEvent.emit(event);
            }));
            // Initialise the SohoXi Control
            this.jQueryElement.accordion(this.options);
            // Once the control is initialised, extract the control
            // plug-in from the element.  The element name is
            // defined by the plug-in, but in this case it is 'accordion'.
            this.accordion = this.jQueryElement.data('accordion');
        });
    }
    ngAfterViewChecked() {
        if (this.updateRequired) {
            this.updated();
            this.updateRequired = false;
        }
    }
    /**
     * Destructor.
     */
    ngOnDestroy() {
        // call outside the angular zone so change detection isn't triggered by the soho component.
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
            if (this.accordion) {
                this.accordion?.destroy();
            }
        });
    }
    markForUpdate() {
        this.updateRequired = true;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoAccordionComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoAccordionComponent, selector: "soho-accordion, [soho-accordion]", inputs: { allowOnePane: "allowOnePane", displayChevron: "displayChevron", expanderDisplay: "expanderDisplay", rerouteOnLinkClick: "rerouteOnLinkClick", notificationBadge: "notificationBadge", source: "source", hasPanels: "hasPanels", inverse: "inverse", alternate: "alternate", enableTooltips: "enableTooltips", hasSubheaderSeparators: "hasSubheaderSeparators", moduleNav: "moduleNav" }, outputs: { beforeexpandEvent: "beforeexpand", beforecollapseEvent: "beforecollapse", beforeselectEvent: "beforeselect", selectedEvent: "selected", followlinkEvent: "followlink", expandEvent: "expand", afterexpandEvent: "afterexpand", collapseEvent: "collapse", aftercollapseEvent: "aftercollapse" }, queries: [{ propertyName: "headers", predicate: i0.forwardRef(function () { return SohoAccordionHeaderComponent; }) }, { propertyName: "panes", predicate: i0.forwardRef(function () { return SohoAccordionPaneComponent; }) }], ngImport: i0, template: "<div [ngClass]=\"{\n  'accordion': true,\n  'panel': hasPanels,\n  'alternate': alternate,\n  'inverse': inverse,\n  'has-subheader-separators': hasSubheaderSeparators,\n  'module-nav-accordion': moduleNav }\">\n  <ng-content></ng-content>\n</div>\n", styles: [":host{display:contents}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoAccordionComponent, decorators: [{
            type: Component,
            args: [{ selector: 'soho-accordion, [soho-accordion]', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div [ngClass]=\"{\n  'accordion': true,\n  'panel': hasPanels,\n  'alternate': alternate,\n  'inverse': inverse,\n  'has-subheader-separators': hasSubheaderSeparators,\n  'module-nav-accordion': moduleNav }\">\n  <ng-content></ng-content>\n</div>\n", styles: [":host{display:contents}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { headers: [{
                type: ContentChildren,
                args: [forwardRef(() => SohoAccordionHeaderComponent)]
            }], panes: [{
                type: ContentChildren,
                args: [forwardRef(() => SohoAccordionPaneComponent)]
            }], beforeexpandEvent: [{
                type: Output,
                args: ['beforeexpand']
            }], beforecollapseEvent: [{
                type: Output,
                args: ['beforecollapse']
            }], beforeselectEvent: [{
                type: Output,
                args: ['beforeselect']
            }], selectedEvent: [{
                type: Output,
                args: ['selected']
            }], followlinkEvent: [{
                type: Output,
                args: ['followlink']
            }], expandEvent: [{
                type: Output,
                args: ['expand']
            }], afterexpandEvent: [{
                type: Output,
                args: ['afterexpand']
            }], collapseEvent: [{
                type: Output,
                args: ['collapse']
            }], aftercollapseEvent: [{
                type: Output,
                args: ['aftercollapse']
            }], allowOnePane: [{
                type: Input
            }], displayChevron: [{
                type: Input
            }], expanderDisplay: [{
                type: Input
            }], rerouteOnLinkClick: [{
                type: Input
            }], notificationBadge: [{
                type: Input
            }], source: [{
                type: Input
            }], hasPanels: [{
                type: Input
            }], inverse: [{
                type: Input
            }], alternate: [{
                type: Input
            }], enableTooltips: [{
                type: Input
            }], hasSubheaderSeparators: [{
                type: Input
            }], moduleNav: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1hY2NvcmRpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi9hY2NvcmRpb24vc29oby1hY2NvcmRpb24uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi9hY2NvcmRpb24vc29oby1hY2NvcmRpb24uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsOENBQThDO0FBQzlDLE9BQU8sRUFHTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUNULGVBQWUsRUFFZixZQUFZLEVBQ1osS0FBSyxFQUVMLE1BQU0sRUFFTixVQUFVLEdBQ1gsTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDakYsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0saUNBQWlDLENBQUM7OztBQUU3RTs7Ozs7Ozs7Ozs7R0FXRztBQU9ILE1BQU0sT0FBTyxzQkFBc0I7SUFpRGpDLDhDQUE4QztJQUM5QyxtQkFBbUI7SUFDbkIsOENBQThDO0lBRTlDOzs7Ozs7O09BT0c7SUFDSCxJQUFvQixZQUFZLENBQUMsWUFBaUM7UUFDaEUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxLQUFLLFNBQVMsSUFBSSxZQUFZLENBQUM7UUFDaEYsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBZ0IsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUM7WUFDMUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsWUFBWTtRQUNyQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMs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QXBDLE1BQU07dUJBQUMsWUFBWTtnQkFDRixXQUFXO3NCQUE1QixNQUFNO3VCQUFDLFFBQVE7Z0JBQ08sZ0JBQWdCO3NCQUF0QyxNQUFNO3VCQUFDLGFBQWE7Z0JBQ0QsYUFBYTtzQkFBaEMsTUFBTTt1QkFBQyxVQUFVO2dCQUNPLGtCQUFrQjtzQkFBMUMsTUFBTTt1QkFBQyxlQUFlO2dCQWNILFlBQVk7c0JBQS9CLEtBQUs7Z0JBaUJjLGNBQWM7c0JBQWpDLEtBQUs7Z0JBY2MsZUFBZTtzQkFBbEMsS0FBSztnQkFlYyxrQkFBa0I7c0JBQXJDLEtBQUs7Z0JBY2MsaUJBQWlCO3NCQUFwQyxLQUFLO2dCQWVjLE1BQU07c0JBQXpCLEtBQUs7Z0JBY2MsU0FBUztzQkFBNUIsS0FBSztnQkFlYyxPQUFPO3NCQUExQixLQUFLO2dCQWNjLFNBQVM7c0JBQTVCLEtBQUs7Z0JBZWMsY0FBYztzQkFBakMsS0FBSztnQkFXVSxzQkFBc0I7c0JBQXJDLEtBQUs7Z0JBR1UsU0FBUztzQkFBeEIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby11bnVzZWQtdmFyaWFibGVcbmltcG9ydCB7XG4gIEFmdGVyVmlld0NoZWNrZWQsXG4gIEFmdGVyVmlld0luaXQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCwgTmdab25lLFxuICBPbkRlc3Ryb3ksXG4gIE91dHB1dCxcbiAgUXVlcnlMaXN0LFxuICBmb3J3YXJkUmVmLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgU29ob0FjY29yZGlvbkhlYWRlckNvbXBvbmVudCB9IGZyb20gJy4vc29oby1hY2NvcmRpb24taGVhZGVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTb2hvQWNjb3JkaW9uUGFuZUNvbXBvbmVudCB9IGZyb20gJy4vc29oby1hY2NvcmRpb24tcGFuZS5jb21wb25lbnQnO1xuXG4vKipcbiAqIEFuZ3VsYXIgV3JhcHBlciBmb3IgdGhlIFNvaG8gQWNjb3JkaW9uIGNvbnRyb2wuXG4gKlxuICogVGhpcyBjb21wb25lbnQgc2VhcmNoZXMgZm9yIGFuIGVsZW1lbnQsIGFubm90YXRlZCB3aXRoIHRoZSBgc29oby1hY2NvcmRpb25gIGF0dHJpYnV0ZSxcbiAqIGFuZCB0aGVuIG1hdGNoZXMgdGhpcyBjb21wb25lbnQgdG8gaXQuXG4gKiA8YnI+XG4gKiBUaGUgY2hhcmFjdGVyaXN0aWNzIG9mIHRoZSBjb21wb25lbnQgY2FuIGJlIGNvbnRyb2xsZWQgdXNpbmcgdGhlIHNldCBvZiBpbnB1dHMuXG4gKlxuICogVGhlIEFjY29yZGlvbiBpcyBhIGdyb3VwZWQgc2V0IG9mIGNvbGxhcHNpYmxlIHBhbmVscyB1c2VkIHRvIG5hdmlnYXRlIHNlY3Rpb25zIG9mXG4gKiByZWxhdGVkIGNvbnRlbnQuIEVhY2ggcGFuZWwgY29uc2lzdHMgb2YgdHdvIGxldmVsczogdGhlIHRvcCBsZXZlbCBpZGVudGlmaWVzIHRoZVxuICogY2F0ZWdvcnkgb3Igc2VjdGlvbiBoZWFkZXIsIGFuZCB0aGUgc2Vjb25kIGxldmVsIHByb3ZpZGVzIHRoZSBhc3NvY2lhdGVkIG9wdGlvbnMuXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3NvaG8tYWNjb3JkaW9uLCBbc29oby1hY2NvcmRpb25dJyxcbiAgc3R5bGVVcmxzOiBbJy4vc29oby1hY2NvcmRpb24uY29tcG9uZW50LmNzcyddLFxuICB0ZW1wbGF0ZVVybDogJ3NvaG8tYWNjb3JkaW9uLmNvbXBvbmVudC5odG1sJyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgU29ob0FjY29yZGlvbkNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XG5cbiAgLy8gQWxsIGhlYWRlcnMuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAYW5ndWxhci1lc2xpbnQvbm8tZm9yd2FyZC1yZWZcbiAgQENvbnRlbnRDaGlsZHJlbihmb3J3YXJkUmVmKCgpID0+IFNvaG9BY2NvcmRpb25IZWFkZXJDb21wb25lbnQpKVxuICBoZWFkZXJzITogUXVlcnlMaXN0PFNvaG9BY2NvcmRpb25IZWFkZXJDb21wb25lbnQ+O1xuXG4gIC8vIEFsbCBwYW5lcy5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1mb3J3YXJkLXJlZlxuICBAQ29udGVudENoaWxkcmVuKGZvcndhcmRSZWYoKCkgPT4gU29ob0FjY29yZGlvblBhbmVDb21wb25lbnQpKVxuICBwYW5lcyE6IFF1ZXJ5TGlzdDxTb2hvQWNjb3JkaW9uUGFuZUNvbXBvbmVudD47XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBPcHRpb25zIEJsb2NrXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBwdWJsaWMgb3B0aW9uczogU29ob0FjY29yZGlvbk9wdGlvbnMgPSB7fTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFByaXZhdGUgTWVtYmVyIERhdGFcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8qKiBSZWZlcmVuY2UgdG8gdGhlIGpRdWVyeSBzZWxlY3Rvci4gKi9cbiAgcHJpdmF0ZSBqUXVlcnlFbGVtZW50ITogSlF1ZXJ5IHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBSZWZlcmVuY2VzIHRvIHRoZSBTb2hvIGNvbnRyb2wgYXBpLlxuICAgKi9cbiAgcHJpdmF0ZSBhY2NvcmRpb24hOiBTb2hvQWNjb3JkaW9uU3RhdGljO1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGNhbGwgdXBkYXRlZCBmcm9tIHRoZSBhZnRlclZpZXdDaGVja2VkIGxpZmVjeWNsZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlUmVxdWlyZWQ/OiBib29sZWFuO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gQ29tcG9uZW50IE91dHB1dFxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qIGVzbGludC1kaXNhYmxlIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtcmVuYW1lICovXG4gIEBPdXRwdXQoJ2JlZm9yZWV4cGFuZCcpIGJlZm9yZWV4cGFuZEV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoJ2JlZm9yZWNvbGxhcHNlJykgYmVmb3JlY29sbGFwc2VFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCdiZWZvcmVzZWxlY3QnKSBiZWZvcmVzZWxlY3RFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCdzZWxlY3RlZCcpIHNlbGVjdGVkRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgnZm9sbG93bGluaycpIGZvbGxvd2xpbmtFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCdleHBhbmQnKSBleHBhbmRFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCdhZnRlcmV4cGFuZCcpIGFmdGVyZXhwYW5kRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgnY29sbGFwc2UnKSBjb2xsYXBzZUV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoJ2FmdGVyY29sbGFwc2UnKSBhZnRlcmNvbGxhcHNlRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIENvbXBvbmVudCBJbnB1dHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8qKlxuICAgKiBJZiBhbiBBY2NvcmRpb24gcGFuZSBpcyBvcGVuLCBhbmQgdGhhdCBwYW5lIGNvbnRhaW5zIHN1Yi1oZWFkZXJzLCBvbmx5IG9uZVxuICAgKiBvZiB0aGUgcGFuZSdzIHN1Yi1oZWFkZXJzIGNhbiBiZSBvcGVuIGF0IGEgdGltZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICpcbiAgICogSWYgc2V0IHRvIHRydWUsIGFsbG93cyBvbmx5IG9uZSBwYW5lIG9mIHRoZSBhY2NvcmRpb24gdG8gYmUgb3BlbiBhdCBhIHRpbWUuXG4gICAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2V0IGFsbG93T25lUGFuZShhbGxvd09uZVBhbmU6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLm9wdGlvbnMuYWxsb3dPbmVQYW5lID0gdHlwZW9mIChhbGxvd09uZVBhbmUpID09PSAnYm9vbGVhbicgJiYgYWxsb3dPbmVQYW5lO1xuICAgIGlmICh0aGlzLmFjY29yZGlvbikge1xuICAgICAgKHRoaXMuYWNjb3JkaW9uLnNldHRpbmdzIGFzIGFueSkuYWxsb3dPbmVQYW5lID0gdGhpcy5vcHRpb25zLmFsbG93T25lUGFuZTtcbiAgICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IGFsbG93T25lUGFuZSgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmFsbG93T25lUGFuZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5cyBhIFwiQ2hldnJvblwiIGljb24gdGhhdCBzaXRzIG9mZiB0byB0aGUgcmlnaHQtbW9zdCBzaWRlIG9mIGEgdG9wLWxldmVsIGFjY29yZGlvbiBoZWFkZXIuXG4gICAqIFVzZWQgaW4gcGxhY2Ugb2YgYW4gRXhwYW5kZXIgKCsvLSkgaWYgZW5hYmxlZC5cbiAgICpcbiAgICpcbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgZGlzcGxheUNoZXZyb24oZGlzcGxheUNoZXZyb246IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLm9wdGlvbnMuZGlzcGxheUNoZXZyb24gPSB0eXBlb2YgKGRpc3BsYXlDaGV2cm9uKSA9PT0gJ2Jvb2xlYW4nICYmIGRpc3BsYXlDaGV2cm9uO1xuICAgIGlmICh0aGlzLmFjY29yZGlvbikge1xuICAgICAgKHRoaXMuYWNjb3JkaW9uLnNldHRpbmdzIGFzIGFueSkuZGlzcGxheUNoZXZyb24gPSB0aGlzLm9wdGlvbnMuZGlzcGxheUNoZXZyb247XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBkaXNwbGF5Q2hldnJvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRpc3BsYXlDaGV2cm9uO1xuICB9XG5cbiAgLyoqXG4gICAqIENoYW5nZXMgdGhlIGljb25vZ3JhcGh5IHVzZWQgaW4gYWNjb3JkaW9uIGhlYWRlciBleHBhbmRlciBidXR0b25zLlxuICAgKi9cbiAgQElucHV0KCkgcHVibGljIHNldCBleHBhbmRlckRpc3BsYXkoZXhwYW5kZXJEaXNwbGF5OiBTb2hvQWNjb3JkaW9uRXhwYW5kZXJUeXBlIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5vcHRpb25zLmV4cGFuZGVyRGlzcGxheSA9IGV4cGFuZGVyRGlzcGxheTtcbiAgICBpZiAodGhpcy5hY2NvcmRpb24pIHtcbiAgICAgICh0aGlzLmFjY29yZGlvbi5zZXR0aW5ncyBhcyBhbnkpLmV4cGFuZGVyRGlzcGxheSA9IHRoaXMub3B0aW9ucy5leHBhbmRlckRpc3BsYXk7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBleHBhbmRlckRpc3BsYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5leHBhbmRlckRpc3BsYXk7XG4gIH1cblxuICAvKipcbiAgICogQ2FuIGJlIHNldCB0byBmYWxzZSBpZiByb3V0aW5nIGlzIGV4dGVybmFsbHkgaGFuZGxlZCwgb3RoZXJ3aXNlXG4gICAqIGxpbmtzIGFyZSBoYW5kbGVkIG5vcm1hbGx5LlxuICAgKi9cbiAgQElucHV0KCkgcHVibGljIHNldCByZXJvdXRlT25MaW5rQ2xpY2socmVyb3V0ZU9uTGlua0NsaWNrOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5vcHRpb25zLnJlcm91dGVPbkxpbmtDbGljayA9IHR5cGVvZiAocmVyb3V0ZU9uTGlua0NsaWNrKSA9PT0gJ2Jvb2xlYW4nICYmIHJlcm91dGVPbkxpbmtDbGljaztcbiAgICBpZiAodGhpcy5hY2NvcmRpb24pIHtcbiAgICAgICh0aGlzLmFjY29yZGlvbi5zZXR0aW5ncyBhcyBhbnkpLnJlcm91dGVPbkxpbmtDbGljayA9IHRoaXMub3B0aW9ucy5yZXJvdXRlT25MaW5rQ2xpY2s7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCByZXJvdXRlT25MaW5rQ2xpY2soKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5yZXJvdXRlT25MaW5rQ2xpY2s7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgYWxlcnQgYmFkZ2UgdG8gdGhlIGFjY29yZGlvbiBoZWFkZXIgKHVzZWQgZm9yIEFwcCBtZW51KVxuICAgKi9cbiAgQElucHV0KCkgcHVibGljIHNldCBub3RpZmljYXRpb25CYWRnZShub3RpZmljYXRpb25CYWRnZTogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMub3B0aW9ucy5ub3RpZmljYXRpb25CYWRnZSA9IHR5cGVvZiAobm90aWZpY2F0aW9uQmFkZ2UpID09PSAnYm9vbGVhbicgJiYgbm90aWZpY2F0aW9uQmFkZ2U7XG4gICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICAodGhpcy5hY2NvcmRpb24uc2V0dGluZ3MgYXMgYW55KS5ub3RpZmljYXRpb25CYWRnZSA9IHRoaXMub3B0aW9ucy5ub3RpZmljYXRpb25CYWRnZTtcbiAgICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IG5vdGlmaWNhdGlvbkJhZGdlKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMubm90aWZpY2F0aW9uQmFkZ2U7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2hlbiBpbXBsZW1lbnRlZCBwcm92aWRlZCBhIGNhbGwgYmFjayBmb3IgXCJhamF4IGxvYWRpbmdcIiBvZiB0YWIgY29udGVudHMgb24gb3Blbi5cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgc291cmNlKHNvdXJjZTogRnVuY3Rpb24gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLm9wdGlvbnMuc291cmNlID0gc291cmNlO1xuICAgIGlmICh0aGlzLmFjY29yZGlvbikge1xuICAgICAgKHRoaXMuYWNjb3JkaW9uLnNldHRpbmdzIGFzIGFueSkuc291cmNlID0gdGhpcy5vcHRpb25zLnNvdXJjZTtcbiAgICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IHNvdXJjZSgpOiBGdW5jdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5zb3VyY2U7XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheSBhY2NvcmRpb24gd2l0aCBwYW5lbHNcbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgaGFzUGFuZWxzKGhhc1BhbmVsczogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMub3B0aW9ucy5oYXNQYW5lbHMgPSBoYXNQYW5lbHM7XG4gICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICAodGhpcy5hY2NvcmRpb24uc2V0dGluZ3MgYXMgYW55KS5oYXNQYW5lbHMgPSB0aGlzLm9wdGlvbnMuaGFzUGFuZWxzO1xuICAgICAgdGhpcy5tYXJrRm9yVXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBoYXNQYW5lbHMoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5oYXNQYW5lbHM7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjb2xvciBzY2hlbWUgdG8gaW52ZXJzZVxuICAgKi9cbiAgQElucHV0KCkgcHVibGljIHNldCBpbnZlcnNlKGludmVyc2U6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLm9wdGlvbnMuaW52ZXJzZSA9IGludmVyc2U7XG4gICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICAodGhpcy5hY2NvcmRpb24uc2V0dGluZ3MgYXMgYW55KS5pbnZlcnNlID0gdGhpcy5vcHRpb25zLmludmVyc2U7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBpbnZlcnNlKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaW52ZXJzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNvbG9yIHNjaGVtZSB0byBhbHRlcm5hdGVcbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgYWx0ZXJuYXRlKGJvb2w6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLm9wdGlvbnMuYWx0ZXJuYXRlID0gYm9vbDtcbiAgICBpZiAodGhpcy5hY2NvcmRpb24pIHtcbiAgICAgICh0aGlzLmFjY29yZGlvbi5zZXR0aW5ncyBhcyBhbnkpLmFsdGVybmF0ZSA9IHRoaXMub3B0aW9ucy5hbHRlcm5hdGU7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IGFsdGVybmF0ZSgpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmFsdGVybmF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGVzIHRvb2x0aXBzIGZvciBsb25nZXIgdGV4dCB0aGF0IGlzIGhhbmRsZWQgd2l0aCBlbGxpcHNpc1xuICAgKi9cbiAgQElucHV0KCkgcHVibGljIHNldCBlbmFibGVUb29sdGlwcyhlbmFibGVUb29sdGlwczogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMub3B0aW9ucy5lbmFibGVUb29sdGlwcyA9IGVuYWJsZVRvb2x0aXBzO1xuICAgIGlmICh0aGlzLmFjY29yZGlvbikge1xuICAgICAgKHRoaXMuYWNjb3JkaW9uLnNldHRpbmdzIGFzIGFueSkuZW5hYmxlVG9vbHRpcHMgPSB0aGlzLm9wdGlvbnMuZW5hYmxlVG9vbHRpcHM7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBlbmFibGVUb29sdGlwcygpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmVuYWJsZVRvb2x0aXBzO1xuICB9XG5cbiAgQElucHV0KCkgcHVibGljIGhhc1N1YmhlYWRlclNlcGFyYXRvcnM/OiBib29sZWFuO1xuXG4gIC8qKiBFbmFibGVzIE1vZHVsZSBOYXYgdmFyaWFudCAqL1xuICBASW5wdXQoKSBwdWJsaWMgbW9kdWxlTmF2PzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50UmVmIC0gdGhlIGVsZW1lbnQgbWF0Y2hpbmcgdGhlIGNvbXBvbmVudCdzIHNlbGVjdG9yLlxuICAgKiBAcGFyYW0gbmdab25lIC0gem9uZSBhY2Nlc3MuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnRSZWYsIHByaXZhdGUgbmdab25lOiBOZ1pvbmUpIHsgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gUHVibGljIEFQSVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLyoqXG4gICAqIE1ha2VzIHByb3ZpZGVkIGFjY29yZGlvbiBoZWFkZXJzIGFwcGVhciBcInNlbGVjdGVkXCJcbiAgICovXG4gIHB1YmxpYyBzZWxlY3QoaGVhZGVyOiBTb2hvQWNjb3JkaW9uSGVhZGVyQ29tcG9uZW50IHwgc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY29yZGlvbi5zZWxlY3QodHlwZW9mIGhlYWRlciA9PT0gJ3N0cmluZycgPyBoZWFkZXIgOiBoZWFkZXJbJ2pRdWVyeUVsZW1lbnQnXSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWFrZXMgcHJvdmlkZWQgYWNjb3JkaW9uIGhlYWRlcnMgYXBwZWFyIFwiZGVzZWxlY3RlZFwiXG4gICAqL1xuICBwdWJsaWMgZGVzZWxlY3QoaGVhZGVyOiBTb2hvQWNjb3JkaW9uSGVhZGVyQ29tcG9uZW50IHwgc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY29yZGlvbi5kZXNlbGVjdCh0eXBlb2YgaGVhZGVyID09PSAnc3RyaW5nJyA/IGhlYWRlciA6IGhlYWRlclsnalF1ZXJ5RWxlbWVudCddKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlcyBhbGwgYWNjb3JkaW9uIGhlYWRlcnMgYXBwZWFyIFwiZGVzZWxlY3RlZFwiXG4gICAqL1xuICBwdWJsaWMgZGVzZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY29yZGlvbi5kZXNlbGVjdEFsbCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCdzIHRoZSBudGggaGVhZGVyIGZyb20gdGhlIGFjY29yZGlvbi5cbiAgICpcbiAgICogQHRvZG8gLSBob3cgYmVzdCB0byBhY2Nlc3MgdGhlIGhlYWRlcnM/XG4gICAqXG4gICAqIEBwYXJhbSBpbmRleCAtIHRoZSBpbmRleCBvZiB0aGUgYWNjb3JkaW9uIGhlYWRlci5cbiAgICogQHJldHVybiB0aGUgaGVhZGVyIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICovXG4gIHB1YmxpYyBnZXRIZWFkZXIoaW5kZXg6IG51bWJlcik6IFNvaG9BY2NvcmRpb25IZWFkZXJDb21wb25lbnQgfCB1bmRlZmluZWQge1xuICAgIGlmICghdGhpcy5oZWFkZXJzKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5oZWFkZXJzLnRvQXJyYXkoKVtpbmRleF07XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIHRoZSBnaXZlbiBQYW5lbCBvbiB0aGUgQWNjb3JkaW9uLlxuICAgKlxuICAgKiBAcGFyYW0gaGVhZGVyICZuYnNwOy0mbmJzcDsgdGhlIGhlYWRlciBjb21wb25lbnRcbiAgICovXG4gIHB1YmxpYyBleHBhbmQoaGVhZGVyOiBTb2hvQWNjb3JkaW9uSGVhZGVyQ29tcG9uZW50IHwgc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY29yZGlvbi5leHBhbmQodHlwZW9mIGhlYWRlciA9PT0gJ3N0cmluZycgPyBoZWFkZXIgOiBoZWFkZXJbJ2pRdWVyeUVsZW1lbnQnXSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29sbGFwc2UgdGhlIGdpdmVuIFBhbmVsIG9uIHRoZSBBY2NvcmRpb24uXG4gICAqXG4gICAqIEBwYXJhbSBoZWFkZXIgJm5ic3A7LSZuYnNwOyB0aGUganF1ZXJ5IGhlYWRlciBlbGVtZW50XG4gICAqL1xuICBwdWJsaWMgY29sbGFwc2UoaGVhZGVyOiBTb2hvQWNjb3JkaW9uSGVhZGVyQ29tcG9uZW50IHwgc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY29yZGlvbi5jb2xsYXBzZSh0eXBlb2YgaGVhZGVyID09PSAnc3RyaW5nJyA/IGhlYWRlciA6IGhlYWRlclsnalF1ZXJ5RWxlbWVudCddKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmRzIGFsbCBhY2NvcmRpb24gaGVhZGVycywgaWYgcG9zc2libGUuXG4gICAqL1xuICBwdWJsaWMgZXhwYW5kQWxsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFjY29yZGlvbikge1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy5hY2NvcmRpb24uZXhwYW5kQWxsKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZXMgYWxsIHRoZSBleHBhbmRlZCBwYW5lbHMuXG4gICAqXG4gICAqXG4gICAqL1xuICBwdWJsaWMgY29sbGFwc2VBbGwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLmFjY29yZGlvbi5jb2xsYXBzZUFsbCgpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZXMgdGhlIGNvbnRyb2wuXG4gICAqL1xuICBwdWJsaWMgZGlzYWJsZSgpIHtcbiAgICBpZiAodGhpcy5hY2NvcmRpb24pIHtcbiAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMuYWNjb3JkaW9uLmRpc2FibGUoKSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFbmFibGVzIHRoZSBjb250cm9sLlxuICAgKi9cbiAgcHVibGljIGVuYWJsZSgpIHtcbiAgICBpZiAodGhpcy5hY2NvcmRpb24pIHtcbiAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMuYWNjb3JkaW9uLmVuYWJsZSgpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBoZWFkZXIgaXMgY3VycmVudGx5IGRpc2FibGVkIG9yIHRoZSB3aG9sZSBhY2NvcmRpb25cbiAgICogaXMgZGlzYWJsZWQ7IG90aGVyd2lzZSBmYWxzZS5cbiAgICpcbiAgICogQHBhcmFtIGhlYWRlciB0aGUgYWNjb3JkaW9uIGhlYWRlciBwYW5lbCB0byBjaGVjay5cbiAgICovXG4gIHB1YmxpYyBpc0Rpc2FibGVkKGhlYWRlcjogU29ob0FjY29yZGlvbkhlYWRlckNvbXBvbmVudCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLmFjY29yZGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMuYWNjb3JkaW9uLmlzRGlzYWJsZWQoaGVhZGVyLmpRdWVyeUVsZW1lbnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gaGVhZGVyIGlzIGN1cnJlbnRseSBleHBhbmRlZDsgb3RoZXJ3aXNlXG4gICAqIGZhbHNlLlxuICAgKlxuICAgKiBAcGFyYW0gaGVhZGVyIHRoZSBhY2NvcmRpb24gaGVhZGVyIHBhbmVsIHRvIGNoZWNrLlxuICAgKi9cbiAgcHVibGljIGlzRXhwYW5kZWQoaGVhZGVyOiBTb2hvQWNjb3JkaW9uSGVhZGVyQ29tcG9uZW50KTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy5hY2NvcmRpb24uaXNFeHBhbmRlZChoZWFkZXIualF1ZXJ5RWxlbWVudCkpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBnaXZlbiBQYW5lbCBvbiB0aGUgQWNjb3JkaW9uIGJldHdlZW4gZXhwYW5kZWQgYW5kIGNvbGxhcHNlZFxuICAgKlxuICAgKiBAcGFyYW0gaGVhZGVyICZuYnNwOy0mbmJzcDsgdGhlIGpxdWVyeSBoZWFkZXIgZWxlbWVudFxuICAgKi9cbiAgcHVibGljIHRvZ2dsZShoZWFkZXI6IFNvaG9BY2NvcmRpb25IZWFkZXJDb21wb25lbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hY2NvcmRpb24pIHtcbiAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMuYWNjb3JkaW9uLnRvZ2dsZShoZWFkZXIualF1ZXJ5RWxlbWVudCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIHRvIG5vdGlmeSB0aGUgYWNjb3JkaW9uIGFib3V0IGFueSBkb20gY2hhbmdlc1xuICAgKi9cbiAgcHVibGljIHVwZGF0ZWQoaGVhZGVycz86IEpRdWVyeVtdLCBzZXR0aW5ncz86IFNvaG9BY2NvcmRpb25PcHRpb25zKTogdm9pZCB7XG4gICAgaWYgKHNldHRpbmdzKSB7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBTb2hvLnV0aWxzLm1lcmdlU2V0dGluZ3MoKHRoaXMuZWxlbWVudCBhcyBhbnkpWzBdLCBzZXR0aW5ncywgdGhpcy5vcHRpb25zKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY2NvcmRpb24pIHtcbiAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMuYWNjb3JkaW9uLnVwZGF0ZWQoaGVhZGVycywgdGhpcy5vcHRpb25zKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIExpZmVjeWNsZSBFdmVudHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAvLyBXcmFwIHRoZSBlbGVtZW50IGluIGEgalF1ZXJ5IHNlbGVjdG9yLlxuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50ID0galF1ZXJ5KHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmNoaWxkTm9kZXNbMF0pO1xuXG4gICAgICAvLyBJbml0aWFsaXNlIHRoZSBldmVudCBoYW5kbGVycy5cbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudFxuICAgICAgICAub24oJ2JlZm9yZWV4cGFuZCcsIChldmVudDogU29ob0FjY29yZGlvbkV2ZW50LCBhbmNob3IpID0+XG4gICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LmFuY2hvciA9IGFuY2hvcjsgdGhpcy5iZWZvcmVleHBhbmRFdmVudC5lbWl0KGV2ZW50KTtcbiAgICAgICAgICB9KSlcbiAgICAgICAgLm9uKCdiZWZvcmVjb2xsYXBzZScsIChldmVudDogU29ob0FjY29yZGlvbkV2ZW50LCBhbmNob3IpID0+XG4gICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LmFuY2hvciA9IGFuY2hvcjsgdGhpcy5iZWZvcmVjb2xsYXBzZUV2ZW50LmVtaXQoZXZlbnQpO1xuICAgICAgICAgIH0pKVxuICAgICAgICAub24oJ2JlZm9yZXNlbGVjdCcsIChldmVudDogU29ob0FjY29yZGlvbkV2ZW50LCBhbmNob3IpID0+XG4gICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LmFuY2hvciA9IGFuY2hvcjsgdGhpcy5iZWZvcmVzZWxlY3RFdmVudC5lbWl0KGV2ZW50KTtcbiAgICAgICAgICB9KSlcbiAgICAgICAgLm9uKCdzZWxlY3RlZCcsIChldmVudDogU29ob0FjY29yZGlvbkV2ZW50LCBhbmNob3IpID0+XG4gICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LmFuY2hvciA9IGFuY2hvcjsgdGhpcy5zZWxlY3RlZEV2ZW50LmVtaXQoZXZlbnQpO1xuICAgICAgICAgIH0pKVxuICAgICAgICAub24oJ2ZvbGxvd2xpbmsnLCAoZXZlbnQ6IFNvaG9BY2NvcmRpb25FdmVudCwgYW5jaG9yKSA9PlxuICAgICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICBldmVudC5hbmNob3IgPSBhbmNob3I7IHRoaXMuZm9sbG93bGlua0V2ZW50LmVtaXQoZXZlbnQpO1xuICAgICAgICAgIH0pKVxuICAgICAgICAub24oJ2V4cGFuZCcsIChldmVudDogU29ob0FjY29yZGlvbkV2ZW50LCBhbmNob3IpID0+XG4gICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LmFuY2hvciA9IGFuY2hvcjsgdGhpcy5leHBhbmRFdmVudC5lbWl0KGV2ZW50KTtcbiAgICAgICAgICB9KSlcbiAgICAgICAgLm9uKCdhZnRlcmV4cGFuZCcsIChldmVudDogU29ob0FjY29yZGlvbkV2ZW50LCBhbmNob3IpID0+XG4gICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LmFuY2hvciA9IGFuY2hvcjsgdGhpcy5hZnRlcmV4cGFuZEV2ZW50LmVtaXQoZXZlbnQpO1xuICAgICAgICAgIH0pKVxuICAgICAgICAub24oJ2NvbGxhcHNlJywgKGV2ZW50OiBTb2hvQWNjb3JkaW9uRXZlbnQsIGFuY2hvcikgPT5cbiAgICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQuYW5jaG9yID0gYW5jaG9yOyB0aGlzLmNvbGxhcHNlRXZlbnQuZW1pdChldmVudCk7XG4gICAgICAgICAgfSkpXG4gICAgICAgIC5vbignYWZ0ZXJjb2xsYXBzZScsIChldmVudDogU29ob0FjY29yZGlvbkV2ZW50LCBhbmNob3IpID0+XG4gICAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LmFuY2hvciA9IGFuY2hvcjsgdGhpcy5hZnRlcmNvbGxhcHNlRXZlbnQuZW1pdChldmVudCk7XG4gICAgICAgICAgfSkpO1xuXG4gICAgICAvLyBJbml0aWFsaXNlIHRoZSBTb2hvWGkgQ29udHJvbFxuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50LmFjY29yZGlvbih0aGlzLm9wdGlvbnMpO1xuXG4gICAgICAvLyBPbmNlIHRoZSBjb250cm9sIGlzIGluaXRpYWxpc2VkLCBleHRyYWN0IHRoZSBjb250cm9sXG4gICAgICAvLyBwbHVnLWluIGZyb20gdGhlIGVsZW1lbnQuICBUaGUgZWxlbWVudCBuYW1lIGlzXG4gICAgICAvLyBkZWZpbmVkIGJ5IHRoZSBwbHVnLWluLCBidXQgaW4gdGhpcyBjYXNlIGl0IGlzICdhY2NvcmRpb24nLlxuICAgICAgdGhpcy5hY2NvcmRpb24gPSB0aGlzLmpRdWVyeUVsZW1lbnQuZGF0YSgnYWNjb3JkaW9uJyk7XG4gICAgfSk7XG4gIH1cbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgIGlmICh0aGlzLnVwZGF0ZVJlcXVpcmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZWQoKTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJ1Y3Rvci5cbiAgICovXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIC8vIGNhbGwgb3V0c2lkZSB0aGUgYW5ndWxhciB6b25lIHNvIGNoYW5nZSBkZXRlY3Rpb24gaXNuJ3QgdHJpZ2dlcmVkIGJ5IHRoZSBzb2hvIGNvbXBvbmVudC5cbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vZmYoKTtcbiAgICAgICAgdGhpcy5qUXVlcnlFbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYWNjb3JkaW9uKSB7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uPy5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIG1hcmtGb3JVcGRhdGUoKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gIH1cbn1cbiIsIjxkaXYgW25nQ2xhc3NdPVwie1xuICAnYWNjb3JkaW9uJzogdHJ1ZSxcbiAgJ3BhbmVsJzogaGFzUGFuZWxzLFxuICAnYWx0ZXJuYXRlJzogYWx0ZXJuYXRlLFxuICAnaW52ZXJzZSc6IGludmVyc2UsXG4gICdoYXMtc3ViaGVhZGVyLXNlcGFyYXRvcnMnOiBoYXNTdWJoZWFkZXJTZXBhcmF0b3JzLFxuICAnbW9kdWxlLW5hdi1hY2NvcmRpb24nOiBtb2R1bGVOYXYgfVwiPlxuICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG48L2Rpdj5cbiJdfQ==