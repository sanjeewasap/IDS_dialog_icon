import { Component, EventEmitter, HostBinding, Input, Output, } from '@angular/core';
import * as i0 from "@angular/core";
export class SohoSearchFieldWrapperComponent {
    get isSearchfieldWrapper() {
        return true;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoSearchFieldWrapperComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoSearchFieldWrapperComponent, selector: "[soho-searchfield-wrapper]", host: { properties: { "class.searchfield-wrapper": "this.isSearchfieldWrapper" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoSearchFieldWrapperComponent, decorators: [{
            type: Component,
            args: [{
                    selector: '[soho-searchfield-wrapper]',
                    template: `<ng-content></ng-content>`
                }]
        }], propDecorators: { isSearchfieldWrapper: [{
                type: HostBinding,
                args: ['class.searchfield-wrapper']
            }] } });
export class SohoSearchFieldComponent {
    set allResultsCallback(value) {
        this.options.allResultsCallback = value;
    }
    /** Displays a dropdown containing categories that can be used to filter results. */
    set categories(value) {
        this.options.categories = value;
    }
    /** If true, creates a multiselectable Categories list. */
    set categoryMultiselect(value) {
        this.options.categoryMultiselect = value;
    }
    /** Has an X to clear. */
    set clearable(value) {
        this.options.clearable = value;
    }
    set showAllResults(value) {
        this.options.showAllResults = value;
    }
    /** Show any available categories that are selected to teh left of the Dropdown field. */
    set showCategoryText(value) {
        this.options.showCategoryText = value;
    }
    /** Extra button available to show. */
    set button(value) {
        this.options.button = value;
    }
    /** AutoComplete : Source Function/Data/Url/Array */
    set source(value) {
        this.options.source = value;
    }
    /** Template that can be passed */
    set template(value) {
        this.options.template = value;
    }
    /** Number representing a size that will be used when a collapsible Searchfield becomes collapsed. */
    set collapseSize(value) {
        this.options.collapseSize = value;
    }
    /** Set the input to tabbable */
    set tabbable(value) {
        this.options.tabbable = value;
    }
    get isSearchField() {
        return true;
    }
    constructor(element, ngZone) {
        this.element = element;
        this.ngZone = ngZone;
        /** Options. */
        this.options = {};
        // ------------------------------------------------------------
        this.selected = new EventEmitter();
        this.cleared = new EventEmitter();
    }
    ngAfterViewInit() {
        // TODO: Figure out what element to send to jQuery to init the component
        this.jQueryElement = jQuery(this.element.nativeElement);
        this.jQueryElement.searchfield(this.options);
        /**
         * Bind to jQueryElement's events
         */
        this.jQueryElement.on('selected', (...args) => this.selected.emit(args));
        this.jQueryElement.on('cleared', (...args) => this.ngZone.run(() => this.cleared.emit(args)));
        this.searchfield = this.jQueryElement.data('searchfield');
    }
    ngOnDestroy() {
        // Necessary clean up step (add additional here)
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                // clean up attached events.
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
            if (this.searchfield) {
                this.searchfield.destroy();
                this.searchfield = null;
            }
        });
    }
    clear() {
        this.ngZone.runOutsideAngular(() => this.searchfield?.clear());
    }
    /**  Gets a complete list of categories in jQuery-collection form. */
    getCategories() {
        return this.ngZone.runOutsideAngular(() => {
            return this.searchfield?.getCategories();
        });
    }
    /** Gets the categories as data. Passing true will return only the selected category data.*/
    getCategoryData(onlySelected) {
        return this.ngZone.runOutsideAngular(() => {
            return this.searchfield?.getCategoryData(onlySelected);
        });
    }
    /**  Gets a complete list of categories in jQuery-collection form. */
    getSelectedCategories() {
        return this.ngZone.runOutsideAngular(() => {
            return this.searchfield?.getSelectedCategories();
        });
    }
    /** Gets the currently selected list of categories in jQuery-collection form. */
    setCategoryButtonText(textContent) {
        this.ngZone.runOutsideAngular(() => this.searchfield?.setCategoryButtonText());
    }
    updated(settings) {
        this.ngZone.runOutsideAngular(() => this.searchfield?.updated(settings));
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoSearchFieldComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoSearchFieldComponent, selector: "input[soho-searchfield]", inputs: { options: "options", allResultsCallback: "allResultsCallback", categories: "categories", categoryMultiselect: "categoryMultiselect", clearable: "clearable", showAllResults: "showAllResults", showCategoryText: "showCategoryText", button: "button", source: "source", template: "template", collapseSize: "collapseSize", tabbable: "tabbable" }, outputs: { selected: "selected", cleared: "cleared" }, host: { properties: { "class.searchfield": "this.isSearchField" } }, ngImport: i0, template: '<ng-content></ng-content>', isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoSearchFieldComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'input[soho-searchfield]',
                    template: '<ng-content></ng-content>'
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { options: [{
                type: Input
            }], allResultsCallback: [{
                type: Input
            }], categories: [{
                type: Input
            }], categoryMultiselect: [{
                type: Input
            }], clearable: [{
                type: Input
            }], showAllResults: [{
                type: Input
            }], showCategoryText: [{
                type: Input
            }], button: [{
                type: Input
            }], source: [{
                type: Input
            }], template: [{
                type: Input
            }], collapseSize: [{
                type: Input
            }], tabbable: [{
                type: Input
            }], selected: [{
                type: Output
            }], cleared: [{
                type: Output
            }], isSearchField: [{
                type: HostBinding,
                args: ['class.searchfield']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1zZWFyY2hmaWVsZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9pZHMtZW50ZXJwcmlzZS1uZy9zcmMvbGliL3NlYXJjaGZpZWxkL3NvaG8tc2VhcmNoZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFTCxTQUFTLEVBRVQsWUFBWSxFQUNaLFdBQVcsRUFDWCxLQUFLLEVBR0wsTUFBTSxHQUNQLE1BQU0sZUFBZSxDQUFDOztBQU12QixNQUFNLE9BQU8sK0JBQStCO0lBQzFDLElBQThDLG9CQUFvQjtRQUNoRSxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7OEdBSFUsK0JBQStCO2tHQUEvQiwrQkFBK0Isc0pBRmhDLDJCQUEyQjs7MkZBRTFCLCtCQUErQjtrQkFKM0MsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsNEJBQTRCO29CQUN0QyxRQUFRLEVBQUUsMkJBQTJCO2lCQUN0Qzs4QkFFK0Msb0JBQW9CO3NCQUFqRSxXQUFXO3VCQUFDLDJCQUEyQjs7QUFTMUMsTUFBTSxPQUFPLHdCQUF3QjtJQUluQyxJQUFhLGtCQUFrQixDQUFDLEtBQW1DO1FBQ2pFLElBQUksQ0FBQyxPQUFPLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDO0lBQzFDLENBQUM7SUFDRCxvRkFBb0Y7SUFDcEYsSUFBYSxVQUFVLENBQUMsS0FBb0M7UUFDMUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO0lBQ2xDLENBQUM7SUFFRCwwREFBMEQ7SUFDMUQsSUFBYSxtQkFBbUIsQ0FBQyxLQUFjO1FBQzdDLElBQUksQ0FBQyxPQUFPLENBQUMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDO0lBQzNDLENBQUM7SUFFRCx5QkFBeUI7SUFDekIsSUFBYSxTQUFTLENBQUMsS0FBYztRQUNuQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxL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M0UsQ0FBQzs4R0ExSVUsd0JBQXdCO2tHQUF4Qix3QkFBd0IseWhCQUZ6QiwyQkFBMkI7OzJGQUUxQix3QkFBd0I7a0JBSnBDLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLHlCQUF5QjtvQkFDbkMsUUFBUSxFQUFFLDJCQUEyQjtpQkFDdEM7c0hBR1UsT0FBTztzQkFBZixLQUFLO2dCQUVPLGtCQUFrQjtzQkFBOUIsS0FBSztnQkFJTyxVQUFVO3NCQUF0QixLQUFLO2dCQUtPLG1CQUFtQjtzQkFBL0IsS0FBSztnQkFLTyxTQUFTO3NCQUFyQixLQUFLO2dCQUlPLGNBQWM7c0JBQTFCLEtBQUs7Z0JBS08sZ0JBQWdCO3NCQUE1QixLQUFLO2dCQUtPLE1BQU07c0JBQWxCLEtBQUs7Z0JBS08sTUFBTTtzQkFBbEIsS0FBSztnQkFLTyxRQUFRO3NCQUFwQixLQUFLO2dCQUtPLFlBQVk7c0JBQXhCLEtBQUs7Z0JBS08sUUFBUTtzQkFBcEIsS0FBSztnQkFNSSxRQUFRO3NCQUFqQixNQUFNO2dCQUNHLE9BQU87c0JBQWhCLE1BQU07Z0JBRStCLGFBQWE7c0JBQWxELFdBQVc7dUJBQUMsbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIEhvc3RCaW5kaW5nLFxuICBJbnB1dCxcbiAgTmdab25lLFxuICBPbkRlc3Ryb3ksXG4gIE91dHB1dCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ1tzb2hvLXNlYXJjaGZpZWxkLXdyYXBwZXJdJywgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9TZWFyY2hGaWVsZFdyYXBwZXJDb21wb25lbnQge1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnNlYXJjaGZpZWxkLXdyYXBwZXInKSBnZXQgaXNTZWFyY2hmaWVsZFdyYXBwZXIoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnaW5wdXRbc29oby1zZWFyY2hmaWVsZF0nLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHRlbXBsYXRlOiAnPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50Pidcbn0pXG5leHBvcnQgY2xhc3MgU29ob1NlYXJjaEZpZWxkQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcbiAgLyoqIE9wdGlvbnMuICovXG4gIEBJbnB1dCgpIG9wdGlvbnM6IFNvaG9TZWFyY2hGaWVsZE9wdGlvbnMgPSB7fTtcblxuICBASW5wdXQoKSBzZXQgYWxsUmVzdWx0c0NhbGxiYWNrKHZhbHVlOiAoc2VhcmNoVGVybTogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5vcHRpb25zLmFsbFJlc3VsdHNDYWxsYmFjayA9IHZhbHVlO1xuICB9XG4gIC8qKiBEaXNwbGF5cyBhIGRyb3Bkb3duIGNvbnRhaW5pbmcgY2F0ZWdvcmllcyB0aGF0IGNhbiBiZSB1c2VkIHRvIGZpbHRlciByZXN1bHRzLiAqL1xuICBASW5wdXQoKSBzZXQgY2F0ZWdvcmllcyh2YWx1ZTogU29ob1NlYXJjaEZpZWxkQ2F0ZWdvcnlUeXBlW10pIHtcbiAgICB0aGlzLm9wdGlvbnMuY2F0ZWdvcmllcyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqIElmIHRydWUsIGNyZWF0ZXMgYSBtdWx0aXNlbGVjdGFibGUgQ2F0ZWdvcmllcyBsaXN0LiAqL1xuICBASW5wdXQoKSBzZXQgY2F0ZWdvcnlNdWx0aXNlbGVjdCh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5jYXRlZ29yeU11bHRpc2VsZWN0ID0gdmFsdWU7XG4gIH1cblxuICAvKiogSGFzIGFuIFggdG8gY2xlYXIuICovXG4gIEBJbnB1dCgpIHNldCBjbGVhcmFibGUodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLm9wdGlvbnMuY2xlYXJhYmxlID0gdmFsdWU7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgc2hvd0FsbFJlc3VsdHModmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLm9wdGlvbnMuc2hvd0FsbFJlc3VsdHMgPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKiBTaG93IGFueSBhdmFpbGFibGUgY2F0ZWdvcmllcyB0aGF0IGFyZSBzZWxlY3RlZCB0byB0ZWggbGVmdCBvZiB0aGUgRHJvcGRvd24gZmllbGQuICovXG4gIEBJbnB1dCgpIHNldCBzaG93Q2F0ZWdvcnlUZXh0KHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNob3dDYXRlZ29yeVRleHQgPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKiBFeHRyYSBidXR0b24gYXZhaWxhYmxlIHRvIHNob3cuICovXG4gIEBJbnB1dCgpIHNldCBidXR0b24odmFsdWU6IFNvaG9TZWFyY2hGaWVsZEV4dHJhQnV0dG9uKSB7XG4gICAgdGhpcy5vcHRpb25zLmJ1dHRvbiA9IHZhbHVlO1xuICB9XG5cbiAgLyoqIEF1dG9Db21wbGV0ZSA6IFNvdXJjZSBGdW5jdGlvbi9EYXRhL1VybC9BcnJheSAqL1xuICBASW5wdXQoKSBzZXQgc291cmNlKHZhbHVlOiBTb2hvQXV0b0NvbXBsZXRlU291cmNlKSB7XG4gICAgdGhpcy5vcHRpb25zLnNvdXJjZSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqIFRlbXBsYXRlIHRoYXQgY2FuIGJlIHBhc3NlZCAqL1xuICBASW5wdXQoKSBzZXQgdGVtcGxhdGUodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMub3B0aW9ucy50ZW1wbGF0ZSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqIE51bWJlciByZXByZXNlbnRpbmcgYSBzaXplIHRoYXQgd2lsbCBiZSB1c2VkIHdoZW4gYSBjb2xsYXBzaWJsZSBTZWFyY2hmaWVsZCBiZWNvbWVzIGNvbGxhcHNlZC4gKi9cbiAgQElucHV0KCkgc2V0IGNvbGxhcHNlU2l6ZSh2YWx1ZTogKChhcGk6IFNvaG9TZWFyY2hGaWVsZFN0YXRpYykgPT4gbnVtYmVyKSB8IG51bWJlcikge1xuICAgIHRoaXMub3B0aW9ucy5jb2xsYXBzZVNpemUgPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKiBTZXQgdGhlIGlucHV0IHRvIHRhYmJhYmxlICovXG4gIEBJbnB1dCgpIHNldCB0YWJiYWJsZSh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy50YWJiYWJsZSA9IHZhbHVlO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgQE91dHB1dCgpIHNlbGVjdGVkOiBFdmVudEVtaXR0ZXI8T2JqZWN0W10+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3RbXT4oKTtcbiAgQE91dHB1dCgpIGNsZWFyZWQ6IEV2ZW50RW1pdHRlcjxPYmplY3RbXT4gPSBuZXcgRXZlbnRFbWl0dGVyPE9iamVjdFtdPigpO1xuXG4gIEBIb3N0QmluZGluZygnY2xhc3Muc2VhcmNoZmllbGQnKSBnZXQgaXNTZWFyY2hGaWVsZCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2NhbCB2YXJpYWJsZXNcbiAgICovXG4gIHByaXZhdGUgalF1ZXJ5RWxlbWVudD86IEpRdWVyeTtcbiAgcHJpdmF0ZSBzZWFyY2hmaWVsZD86IFNvaG9TZWFyY2hGaWVsZFN0YXRpYyB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmVcbiAgKSB7IH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgLy8gVE9ETzogRmlndXJlIG91dCB3aGF0IGVsZW1lbnQgdG8gc2VuZCB0byBqUXVlcnkgdG8gaW5pdCB0aGUgY29tcG9uZW50XG4gICAgdGhpcy5qUXVlcnlFbGVtZW50ID0galF1ZXJ5KHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50KTtcblxuICAgIHRoaXMualF1ZXJ5RWxlbWVudC5zZWFyY2hmaWVsZCh0aGlzLm9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQmluZCB0byBqUXVlcnlFbGVtZW50J3MgZXZlbnRzXG4gICAgICovXG4gICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdzZWxlY3RlZCcsICguLi5hcmdzKSA9PiB0aGlzLnNlbGVjdGVkLmVtaXQoYXJncykpO1xuICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vbignY2xlYXJlZCcsICguLi5hcmdzKSA9PiB0aGlzLm5nWm9uZS5ydW4oKCkgPT4gdGhpcy5jbGVhcmVkLmVtaXQoYXJncykpKTtcblxuICAgIHRoaXMuc2VhcmNoZmllbGQgPSB0aGlzLmpRdWVyeUVsZW1lbnQuZGF0YSgnc2VhcmNoZmllbGQnKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIC8vIE5lY2Vzc2FyeSBjbGVhbiB1cCBzdGVwIChhZGQgYWRkaXRpb25hbCBoZXJlKVxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICAgLy8gY2xlYW4gdXAgYXR0YWNoZWQgZXZlbnRzLlxuICAgICAgICB0aGlzLmpRdWVyeUVsZW1lbnQub2ZmKCk7XG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNlYXJjaGZpZWxkKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoZmllbGQuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnNlYXJjaGZpZWxkID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMuc2VhcmNoZmllbGQ/LmNsZWFyKCkpO1xuICB9XG5cbiAgLyoqICBHZXRzIGEgY29tcGxldGUgbGlzdCBvZiBjYXRlZ29yaWVzIGluIGpRdWVyeS1jb2xsZWN0aW9uIGZvcm0uICovXG4gIGdldENhdGVnb3JpZXMoKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoZmllbGQ/LmdldENhdGVnb3JpZXMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBHZXRzIHRoZSBjYXRlZ29yaWVzIGFzIGRhdGEuIFBhc3NpbmcgdHJ1ZSB3aWxsIHJldHVybiBvbmx5IHRoZSBzZWxlY3RlZCBjYXRlZ29yeSBkYXRhLiovXG4gIGdldENhdGVnb3J5RGF0YShvbmx5U2VsZWN0ZWQ6IGJvb2xlYW4pOiBTb2hvU2VhcmNoRmllbGRDYXRlZ29yeVtdIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoZmllbGQ/LmdldENhdGVnb3J5RGF0YShvbmx5U2VsZWN0ZWQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqICBHZXRzIGEgY29tcGxldGUgbGlzdCBvZiBjYXRlZ29yaWVzIGluIGpRdWVyeS1jb2xsZWN0aW9uIGZvcm0uICovXG4gIGdldFNlbGVjdGVkQ2F0ZWdvcmllcygpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5zZWFyY2hmaWVsZD8uZ2V0U2VsZWN0ZWRDYXRlZ29yaWVzKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogR2V0cyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGxpc3Qgb2YgY2F0ZWdvcmllcyBpbiBqUXVlcnktY29sbGVjdGlvbiBmb3JtLiAqL1xuICBzZXRDYXRlZ29yeUJ1dHRvblRleHQodGV4dENvbnRlbnQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLnNlYXJjaGZpZWxkPy5zZXRDYXRlZ29yeUJ1dHRvblRleHQoKSk7XG4gIH1cblxuICB1cGRhdGVkKHNldHRpbmdzPzogU29ob1NlYXJjaEZpZWxkT3B0aW9ucykge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMuc2VhcmNoZmllbGQ/LnVwZGF0ZWQoc2V0dGluZ3MpKTtcbiAgfVxufVxuIl19