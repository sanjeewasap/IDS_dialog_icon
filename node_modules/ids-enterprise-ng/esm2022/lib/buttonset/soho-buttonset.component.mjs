import { ChangeDetectionStrategy, Component, Input, } from '@angular/core';
import * as i0 from "@angular/core";
export class SohoButtonsetComponent {
    /**
     * Constructor.
     *
     * @param element - the element matching the component's selector.
     * @param ref - change detector reference for the component.
     * @param ngZone - angular zone.
     */
    constructor(element, ref, ngZone) {
        this.element = element;
        this.ref = ref;
        this.ngZone = ngZone;
        /** Settings (options) */
        this.settings = {};
    }
    // ------------------------------------------
    // Inputs
    // ------------------------------------------
    /**
     * The list of buttons definitions.
     *
     * @params buttons - list of modal button definitions to use.
     */
    set buttons(buttons) {
        this.settings.buttons = buttons;
        if (this.buttonset) {
            this.markForRefresh();
        }
    }
    get buttons() {
        if (this.buttonset) {
            return this.buttonset.settings.buttons;
        }
        else {
            return this.settings.buttons;
        }
    }
    /**
     * Detect existing buttons in the markup rather than generating
     * new button markup.
     */
    set detectHTMLButtons(value) {
        this.settings.detectHTMLButtons = value;
        if (this.buttonset) {
            this.markForRefresh();
        }
    }
    get detectHTMLButtons() {
        if (this.buttonset) {
            return this.buttonset.settings.detectHTMLButtons;
        }
        else {
            return this.settings.detectHTMLButtons;
        }
    }
    /**
     * Styles to add to any generated button markup.
     */
    set style(style) {
        this.settings.style = style;
        if (this.buttonset) {
            this.markForRefresh();
        }
    }
    get style() {
        if (this.buttonset) {
            return this.buttonset.settings.style;
        }
        else {
            return this.settings.style;
        }
    }
    get buttonAPIs() {
        return this.buttonset.buttons;
    }
    /**
     * Disable all the buttons on the buttonset.
     *
     * @param val whether or not the Buttonset is disabled.
     */
    set disabled(val) {
        if (this.buttonset) {
            this.ngZone.runOutsideAngular(() => {
                this.buttonset.disabled = val;
            });
        }
    }
    /**
     * Adds a new button to the Buttonset.
     *
     * @param button button definition.
     * @param [doAddDOM=false] if true, appends the new element to the Buttonset container after creation/update.
     */
    add(button, doAddDOM) {
        if (this.buttonset) {
            this.ngZone.runOutsideAngular(() => {
                this.buttonset.add(button, doAddDOM);
            });
        }
        else {
            throw Error('buttonset not initialised');
        }
    }
    /**
     * Removes a button from the buttonset, based on the API, HTML Element or element id.
     *
     * @param buttonAPI a button, an html element, or button id.
     * @param [doRemoveDOM=false] if true, removes the button's HTML from the page.
     */
    remove(buttonAPI, doRemoveDOM) {
        if (this.buttonset) {
            this.ngZone.runOutsideAngular(() => {
                this.buttonset.remove(buttonAPI, doRemoveDOM);
            });
        }
        else {
            throw Error('buttonset not initialised');
        }
    }
    /**
     * Removes ALL buttons from the buttonset
     *
     * @param [doRemoveDOM=false] if true, removes the button's HTML from the page.
     */
    removeAll(doRemoveDOM) {
        if (this.buttonset) {
            this.ngZone.runOutsideAngular(() => {
                this.buttonset.removeAll(doRemoveDOM);
            });
        }
        else {
            throw Error('buttonset not initialised');
        }
    }
    /**
     * Returns a ButtonSet API in a specified place in the buttons array.
     *
     * @param idx index to target
     * @returns the Button API at the given index
     */
    at(idx) {
        if (this.buttonset) {
            return this.ngZone.runOutsideAngular(() => {
                return this.buttonset.at(idx);
            });
        }
        else {
            throw Error('buttonset not initialised');
        }
    }
    /**
     * Provides a JSON-compatible data representation of this button component for use with
     * higher-level components.
     *
     * @param addContextElement if true, adds a reference to this button element to the return data (NOT JSON-compatible).
     * @returns JSON-compatible representation of this button's configuration.
     */
    toData(addContextElement) {
        if (this.buttonset) {
            return this.ngZone.runOutsideAngular(() => {
                return this.buttonset.toData(addContextElement);
            });
        }
        else {
            throw Error('buttonset not initialised');
        }
    }
    /**
     * Update the component with new settings.
     *
     * @param settings The settings you would like to modify.
     * @returns This component's API.
     */
    updated(settings) {
        // Merge the settings.
        if (settings) {
            this.settings = Soho.utils.mergeSettings(this.element[0], settings, this.settings);
        }
        if (this.buttonset) {
            this.ngZone.runOutsideAngular(() => {
                this.buttonset?.updated(this.settings);
            });
            return this.buttonset;
        }
        else {
            throw Error('buttonset not initialised');
        }
    }
    /**
     * Teardown and remove any added markup and events.
     */
    destroy() {
        if (this.buttonset) {
            this.ngZone.runOutsideAngular(() => {
                this.buttonset?.destroy();
            });
            this.buttonset = null;
        }
        else {
            throw Error('buttonset not initialised');
        }
    }
    // ------------------------------------------
    // Lifecycle Events
    // ------------------------------------------
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            // Wrap the element in a jQuery selector.
            this.jQueryElement = jQuery(this.element.nativeElement);
            // Initialise the Soho control.
            this.jQueryElement.buttonset(this.settings);
            // Once the control is initialised, extract the control
            // plug-in from the element.s  The element name is defined
            // by the plug-in, but in this case is 'button'.
            this.buttonset = this.jQueryElement.data('buttonset');
        });
        // There are no 'extra' event handlers for buttonset.
    }
    ngAfterViewChecked() {
        if (this.runUpdatedOnCheck) {
            this.ngZone.runOutsideAngular(() => {
                this.updated(this.settings);
                this.runUpdatedOnCheck = false;
            });
        }
    }
    /**
     * Destructor.
     */
    ngOnDestroy() {
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
            if (this.buttonset) {
                this.buttonset.destroy();
                this.buttonset = null;
            }
        });
    }
    /**
     * Marks the components as requiring a rebuild after the next update.
     */
    markForRefresh() {
        // Run updated on the next updated check.
        this.runUpdatedOnCheck = true;
        // ... make sure the change detector kicks in, otherwise if the inputs
        // were change programmatially the component may not be eligible for
        // updating.
        this.ref.markForCheck();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoButtonsetComponent, deps: [{ token: i0.ElementRef }, { token: i0.ChangeDetectorRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoButtonsetComponent, selector: "div[soho-buttonset]", inputs: { buttons: "buttons", detectHTMLButtons: "detectHTMLButtons", style: "style", disabled: "disabled" }, ngImport: i0, template: '<ng-content></ng-content>', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoButtonsetComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'div[soho-buttonset]',
                    template: '<ng-content></ng-content>',
                    changeDetection: ChangeDetectionStrategy.OnPush
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.ChangeDetectorRef }, { type: i0.NgZone }]; }, propDecorators: { buttons: [{
                type: Input
            }], detectHTMLButtons: [{
                type: Input
            }], style: [{
                type: Input
            }], disabled: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1idXR0b25zZXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi9idXR0b25zZXQvc29oby1idXR0b25zZXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUlULEtBQUssR0FHTixNQUFNLGVBQWUsQ0FBQzs7QUFPdkIsTUFBTSxPQUFPLHNCQUFzQjtJQWtCakM7Ozs7OztPQU1HO0lBQ0gsWUFDVSxPQUFtQixFQUNuQixHQUFzQixFQUN0QixNQUFjO1FBRmQsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQUNuQixRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUN0QixXQUFNLEdBQU4sTUFBTSxDQUFRO1FBaEJ4Qix5QkFBeUI7UUFDakIsYUFBUSxHQUF5QixFQUFFLENBQUM7SUFnQjVDLENBQUM7SUFFRCw2Q0FBNkM7SUFDN0MsU0FBUztJQUNULDZDQUE2QztJQUU3Qzs7OztPQUlHO0lBQ0gsSUFDVyxPQUFPLENBQUMsT0FBd0M7UUFDekQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ2hDLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNsQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDdkI7SUFDSCxDQUFDO0lBRUQsSUFBVyxPQUFPO1FBQ2hCLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNsQixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQztTQUN4QzthQUFNO1lBQ0wsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQztTQUM5QjtJQUNILENBQUM7SUFFRDs7O09BR0c7SUFDSCxJQUNJLGlCQUFpQixDQUFDLEtBQTBCO1FBQzlDLElBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlC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QUksQ0FBQyxhQUFhLEVBQUU7Z0JBQ3RCLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQ3pCLElBQUksQ0FBQyxhQUFhLEdBQUcsU0FBUyxDQUFDO2FBQ2hDO1lBQ0QsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO2dCQUNsQixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN6QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQzthQUN2QjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVEOztPQUVHO0lBQ0ssY0FBYztRQUNwQix5Q0FBeUM7UUFDekMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztRQUU5QixzRUFBc0U7UUFDdEUsb0VBQW9FO1FBQ3BFLFlBQVk7UUFDWixJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzFCLENBQUM7OEdBOVJVLHNCQUFzQjtrR0FBdEIsc0JBQXNCLHlLQUh2QiwyQkFBMkI7OzJGQUcxQixzQkFBc0I7a0JBTGxDLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLHFCQUFxQjtvQkFDL0IsUUFBUSxFQUFFLDJCQUEyQjtvQkFDckMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07aUJBQ2hEO3NKQTBDWSxPQUFPO3NCQURqQixLQUFLO2dCQXFCRixpQkFBaUI7c0JBRHBCLEtBQUs7Z0JBb0JGLEtBQUs7c0JBRFIsS0FBSztnQkEwQkYsUUFBUTtzQkFEWCxLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgTmdab25lLFxuICBPbkRlc3Ryb3ksXG4gIElucHV0LFxuICBBZnRlclZpZXdDaGVja2VkLFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Rpdltzb2hvLWJ1dHRvbnNldF0nLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHRlbXBsYXRlOiAnPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PicsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9CdXR0b25zZXRDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBBZnRlclZpZXdDaGVja2VkLCBPbkRlc3Ryb3kge1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gUHJpdmF0ZSBNZW1iZXIgRGF0YVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLyoqIFJlZmVyZW5jZSB0byB0aGUgalF1ZXJ5IGNvbnRyb2wuICovXG4gIHByaXZhdGUgalF1ZXJ5RWxlbWVudD86IEpRdWVyeTtcblxuICAvKiogUmVmZXJlbmNlIHRvIHRoZSBTb2hvIGJ1dHRvbnNldCBhcGkuICovXG4gIHByaXZhdGUgYnV0dG9uc2V0PzogU29ob0J1dHRvbnNldFN0YXRpYyB8IG51bGw7XG5cbiAgLyoqIFNldHRpbmdzIChvcHRpb25zKSAqL1xuICBwcml2YXRlIHNldHRpbmdzOiBTb2hvQnV0dG9uc2V0T3B0aW9ucyA9IHt9O1xuXG4gIC8qKiBGbGFnIHRvIGZvcmNlIGFuIHVwZGF0ZSBvZiB0aGUgY29udHJvbCBhZnRlciB0aGUgdmlldyBpcyBjcmVhdGVkLiAqL1xuICBwcml2YXRlIHJ1blVwZGF0ZWRPbkNoZWNrPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50IC0gdGhlIGVsZW1lbnQgbWF0Y2hpbmcgdGhlIGNvbXBvbmVudCdzIHNlbGVjdG9yLlxuICAgKiBAcGFyYW0gcmVmIC0gY2hhbmdlIGRldGVjdG9yIHJlZmVyZW5jZSBmb3IgdGhlIGNvbXBvbmVudC5cbiAgICogQHBhcmFtIG5nWm9uZSAtIGFuZ3VsYXIgem9uZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZWxlbWVudDogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkge1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIElucHV0c1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgYnV0dG9ucyBkZWZpbml0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtcyBidXR0b25zIC0gbGlzdCBvZiBtb2RhbCBidXR0b24gZGVmaW5pdGlvbnMgdG8gdXNlLlxuICAgKi9cbiAgQElucHV0KClcbiAgcHVibGljIHNldCBidXR0b25zKGJ1dHRvbnM6IFNvaG9CdXR0b25PcHRpb25zW10gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldHRpbmdzLmJ1dHRvbnMgPSBidXR0b25zO1xuICAgIGlmICh0aGlzLmJ1dHRvbnNldCkge1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQgYnV0dG9ucygpOiBTb2hvQnV0dG9uT3B0aW9uc1tdIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5idXR0b25zZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbnNldC5zZXR0aW5ncy5idXR0b25zO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5idXR0b25zO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlY3QgZXhpc3RpbmcgYnV0dG9ucyBpbiB0aGUgbWFya3VwIHJhdGhlciB0aGFuIGdlbmVyYXRpbmdcbiAgICogbmV3IGJ1dHRvbiBtYXJrdXAuXG4gICAqL1xuICBASW5wdXQoKVxuICBzZXQgZGV0ZWN0SFRNTEJ1dHRvbnModmFsdWU6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldHRpbmdzLmRldGVjdEhUTUxCdXR0b25zID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuYnV0dG9uc2V0KSB7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRldGVjdEhUTUxCdXR0b25zKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmJ1dHRvbnNldCkge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uc2V0LnNldHRpbmdzLmRldGVjdEhUTUxCdXR0b25zO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5kZXRlY3RIVE1MQnV0dG9ucztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3R5bGVzIHRvIGFkZCB0byBhbnkgZ2VuZXJhdGVkIGJ1dHRvbiBtYXJrdXAuXG4gICAqL1xuICBASW5wdXQoKVxuICBzZXQgc3R5bGUoc3R5bGU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0dGluZ3Muc3R5bGUgPSBzdHlsZTtcbiAgICBpZiAodGhpcy5idXR0b25zZXQpIHtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICBnZXQgc3R5bGUoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5idXR0b25zZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbnNldC5zZXR0aW5ncy5zdHlsZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3Muc3R5bGU7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGJ1dHRvbkFQSXMoKTogU29ob0J1dHRvblN0YXRpY1tdIHtcbiAgICByZXR1cm4gKHRoaXMuYnV0dG9uc2V0IGFzIGFueSkuYnV0dG9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNhYmxlIGFsbCB0aGUgYnV0dG9ucyBvbiB0aGUgYnV0dG9uc2V0LlxuICAgKlxuICAgKiBAcGFyYW0gdmFsIHdoZXRoZXIgb3Igbm90IHRoZSBCdXR0b25zZXQgaXMgZGlzYWJsZWQuXG4gICAqL1xuICBASW5wdXQoKVxuICBzZXQgZGlzYWJsZWQodmFsOiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMuYnV0dG9uc2V0KSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICh0aGlzLmJ1dHRvbnNldCBhcyBhbnkpLmRpc2FibGVkID0gdmFsO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBuZXcgYnV0dG9uIHRvIHRoZSBCdXR0b25zZXQuXG4gICAqXG4gICAqIEBwYXJhbSBidXR0b24gYnV0dG9uIGRlZmluaXRpb24uXG4gICAqIEBwYXJhbSBbZG9BZGRET009ZmFsc2VdIGlmIHRydWUsIGFwcGVuZHMgdGhlIG5ldyBlbGVtZW50IHRvIHRoZSBCdXR0b25zZXQgY29udGFpbmVyIGFmdGVyIGNyZWF0aW9uL3VwZGF0ZS5cbiAgICovXG4gIHB1YmxpYyBhZGQoYnV0dG9uOiBTb2hvQnV0dG9uT3B0aW9ucywgZG9BZGRET00/OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYnV0dG9uc2V0KSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICh0aGlzLmJ1dHRvbnNldCBhcyBhbnkpLmFkZChidXR0b24sIGRvQWRkRE9NKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcignYnV0dG9uc2V0IG5vdCBpbml0aWFsaXNlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgYnV0dG9uIGZyb20gdGhlIGJ1dHRvbnNldCwgYmFzZWQgb24gdGhlIEFQSSwgSFRNTCBFbGVtZW50IG9yIGVsZW1lbnQgaWQuXG4gICAqXG4gICAqIEBwYXJhbSBidXR0b25BUEkgYSBidXR0b24sIGFuIGh0bWwgZWxlbWVudCwgb3IgYnV0dG9uIGlkLlxuICAgKiBAcGFyYW0gW2RvUmVtb3ZlRE9NPWZhbHNlXSBpZiB0cnVlLCByZW1vdmVzIHRoZSBidXR0b24ncyBIVE1MIGZyb20gdGhlIHBhZ2UuXG4gICAqL1xuICBwdWJsaWMgcmVtb3ZlKGJ1dHRvbkFQST86IFNvaG9CdXR0b25TdGF0aWMgfCBIVE1MQnV0dG9uRWxlbWVudCB8IHN0cmluZywgZG9SZW1vdmVET00/OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYnV0dG9uc2V0KSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICh0aGlzLmJ1dHRvbnNldCBhcyBhbnkpLnJlbW92ZShidXR0b25BUEksIGRvUmVtb3ZlRE9NKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcignYnV0dG9uc2V0IG5vdCBpbml0aWFsaXNlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIEFMTCBidXR0b25zIGZyb20gdGhlIGJ1dHRvbnNldFxuICAgKlxuICAgKiBAcGFyYW0gW2RvUmVtb3ZlRE9NPWZhbHNlXSBpZiB0cnVlLCByZW1vdmVzIHRoZSBidXR0b24ncyBIVE1MIGZyb20gdGhlIHBhZ2UuXG4gICAqL1xuICBwdWJsaWMgcmVtb3ZlQWxsKGRvUmVtb3ZlRE9NPzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICh0aGlzLmJ1dHRvbnNldCkge1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAodGhpcy5idXR0b25zZXQgYXMgYW55KS5yZW1vdmVBbGwoZG9SZW1vdmVET00pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVycm9yKCdidXR0b25zZXQgbm90IGluaXRpYWxpc2VkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBCdXR0b25TZXQgQVBJIGluIGEgc3BlY2lmaWVkIHBsYWNlIGluIHRoZSBidXR0b25zIGFycmF5LlxuICAgKlxuICAgKiBAcGFyYW0gaWR4IGluZGV4IHRvIHRhcmdldFxuICAgKiBAcmV0dXJucyB0aGUgQnV0dG9uIEFQSSBhdCB0aGUgZ2l2ZW4gaW5kZXhcbiAgICovXG4gIHB1YmxpYyBhdChpZHg6IG51bWJlcik6IFNvaG9CdXR0b25TdGF0aWMge1xuICAgIGlmICh0aGlzLmJ1dHRvbnNldCkge1xuICAgICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmJ1dHRvbnNldCBhcyBhbnkpLmF0KGlkeCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgRXJyb3IoJ2J1dHRvbnNldCBub3QgaW5pdGlhbGlzZWQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZXMgYSBKU09OLWNvbXBhdGlibGUgZGF0YSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGJ1dHRvbiBjb21wb25lbnQgZm9yIHVzZSB3aXRoXG4gICAqIGhpZ2hlci1sZXZlbCBjb21wb25lbnRzLlxuICAgKlxuICAgKiBAcGFyYW0gYWRkQ29udGV4dEVsZW1lbnQgaWYgdHJ1ZSwgYWRkcyBhIHJlZmVyZW5jZSB0byB0aGlzIGJ1dHRvbiBlbGVtZW50IHRvIHRoZSByZXR1cm4gZGF0YSAoTk9UIEpTT04tY29tcGF0aWJsZSkuXG4gICAqIEByZXR1cm5zIEpTT04tY29tcGF0aWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGJ1dHRvbidzIGNvbmZpZ3VyYXRpb24uXG4gICAqL1xuICBwdWJsaWMgdG9EYXRhKGFkZENvbnRleHRFbGVtZW50OiBib29sZWFuKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5idXR0b25zZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIHJldHVybiAodGhpcy5idXR0b25zZXQgYXMgYW55KS50b0RhdGEoYWRkQ29udGV4dEVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVycm9yKCdidXR0b25zZXQgbm90IGluaXRpYWxpc2VkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgY29tcG9uZW50IHdpdGggbmV3IHNldHRpbmdzLlxuICAgKlxuICAgKiBAcGFyYW0gc2V0dGluZ3MgVGhlIHNldHRpbmdzIHlvdSB3b3VsZCBsaWtlIHRvIG1vZGlmeS5cbiAgICogQHJldHVybnMgVGhpcyBjb21wb25lbnQncyBBUEkuXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlZChzZXR0aW5nczogU29ob0J1dHRvbnNldE9wdGlvbnMpOiBTb2hvQnV0dG9uc2V0U3RhdGljIHtcbiAgICAvLyBNZXJnZSB0aGUgc2V0dGluZ3MuXG4gICAgaWYgKHNldHRpbmdzKSB7XG4gICAgICB0aGlzLnNldHRpbmdzID0gU29oby51dGlscy5tZXJnZVNldHRpbmdzKCh0aGlzLmVsZW1lbnQgYXMgYW55KVswXSwgc2V0dGluZ3MsIHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmJ1dHRvbnNldCkge1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICB0aGlzLmJ1dHRvbnNldD8udXBkYXRlZCh0aGlzLnNldHRpbmdzKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uc2V0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcignYnV0dG9uc2V0IG5vdCBpbml0aWFsaXNlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUZWFyZG93biBhbmQgcmVtb3ZlIGFueSBhZGRlZCBtYXJrdXAgYW5kIGV2ZW50cy5cbiAgICovXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmJ1dHRvbnNldCkge1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICB0aGlzLmJ1dHRvbnNldD8uZGVzdHJveSgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmJ1dHRvbnNldCA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVycm9yKCdidXR0b25zZXQgbm90IGluaXRpYWxpc2VkJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIExpZmVjeWNsZSBFdmVudHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIC8vIFdyYXAgdGhlIGVsZW1lbnQgaW4gYSBqUXVlcnkgc2VsZWN0b3IuXG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQgPSBqUXVlcnkodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xuXG4gICAgICAvLyBJbml0aWFsaXNlIHRoZSBTb2hvIGNvbnRyb2wuXG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQuYnV0dG9uc2V0KHRoaXMuc2V0dGluZ3MpO1xuXG4gICAgICAvLyBPbmNlIHRoZSBjb250cm9sIGlzIGluaXRpYWxpc2VkLCBleHRyYWN0IHRoZSBjb250cm9sXG4gICAgICAvLyBwbHVnLWluIGZyb20gdGhlIGVsZW1lbnQucyAgVGhlIGVsZW1lbnQgbmFtZSBpcyBkZWZpbmVkXG4gICAgICAvLyBieSB0aGUgcGx1Zy1pbiwgYnV0IGluIHRoaXMgY2FzZSBpcyAnYnV0dG9uJy5cbiAgICAgIHRoaXMuYnV0dG9uc2V0ID0gdGhpcy5qUXVlcnlFbGVtZW50LmRhdGEoJ2J1dHRvbnNldCcpO1xuICAgIH0pO1xuXG4gICAgLy8gVGhlcmUgYXJlIG5vICdleHRyYScgZXZlbnQgaGFuZGxlcnMgZm9yIGJ1dHRvbnNldC5cbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICBpZiAodGhpcy5ydW5VcGRhdGVkT25DaGVjaykge1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZWQodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIHRoaXMucnVuVXBkYXRlZE9uQ2hlY2sgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cnVjdG9yLlxuICAgKi9cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgICB0aGlzLmpRdWVyeUVsZW1lbnQub2ZmKCk7XG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmJ1dHRvbnNldCkge1xuICAgICAgICB0aGlzLmJ1dHRvbnNldC5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuYnV0dG9uc2V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJrcyB0aGUgY29tcG9uZW50cyBhcyByZXF1aXJpbmcgYSByZWJ1aWxkIGFmdGVyIHRoZSBuZXh0IHVwZGF0ZS5cbiAgICovXG4gIHByaXZhdGUgbWFya0ZvclJlZnJlc2goKSB7XG4gICAgLy8gUnVuIHVwZGF0ZWQgb24gdGhlIG5leHQgdXBkYXRlZCBjaGVjay5cbiAgICB0aGlzLnJ1blVwZGF0ZWRPbkNoZWNrID0gdHJ1ZTtcblxuICAgIC8vIC4uLiBtYWtlIHN1cmUgdGhlIGNoYW5nZSBkZXRlY3RvciBraWNrcyBpbiwgb3RoZXJ3aXNlIGlmIHRoZSBpbnB1dHNcbiAgICAvLyB3ZXJlIGNoYW5nZSBwcm9ncmFtbWF0aWFsbHkgdGhlIGNvbXBvbmVudCBtYXkgbm90IGJlIGVsaWdpYmxlIGZvclxuICAgIC8vIHVwZGF0aW5nLlxuICAgIHRoaXMucmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG59XG4iXX0=