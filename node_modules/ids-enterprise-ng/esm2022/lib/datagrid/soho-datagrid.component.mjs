import { ChangeDetectionStrategy, Component, Output, EventEmitter, HostBinding, Input, Optional, Injector } from '@angular/core';
import { ArgumentHelper } from '../utils/argument.helper';
import * as i0 from "@angular/core";
import * as i1 from "./soho-datagrid.service";
export class SohoAngularEditorAdapter {
    constructor(component, args) {
        this.component = component;
        this.args = args;
        // Use the direct value from the dataset vs the formatted value
        this.useValue = true;
    }
    init(componentRef) {
        // Store the component.
        this.componentRef = componentRef;
        // The Soho datagrid wants an input control, otherwise it wont accept the editor
        // as a component.
        // @todo talk to Tim about removing this requirement.
        this.input = $(this.componentRef.location.nativeElement).find('input:first');
        this.className = this.componentRef.instance
            && this.componentRef.instance.className
            ? this.componentRef.instance.className : '.editor';
    }
    val(value) {
        return this.componentRef?.instance.val(value);
    }
    focus() {
        this.componentRef?.instance.focus();
    }
    destroy() {
        if (this.componentRef) {
            setTimeout(() => {
                this.componentRef?.destroy();
                this.componentRef = null;
            });
        }
    }
}
/**
 * Internal refresh hints used to determine what type of "refresh" is
 * required after the change detection process has completed and the
 * AfterViewChecked method is called.
 *
 * @todo resolve no-shadow
 */
// eslint-disable-next-line no-shadow
var RefreshHintFlags;
(function (RefreshHintFlags) {
    // No refresh required.
    RefreshHintFlags[RefreshHintFlags["None"] = 0] = "None";
    // The rows needs to be re-rendered.
    RefreshHintFlags[RefreshHintFlags["RenderRows"] = 1] = "RenderRows";
    // The header needs to be re-renendered.
    RefreshHintFlags[RefreshHintFlags["RenderHeader"] = 2] = "RenderHeader";
    // A full rebuild is required.
    RefreshHintFlags[RefreshHintFlags["Rebuild"] = 4] = "Rebuild";
})(RefreshHintFlags || (RefreshHintFlags = {}));
/**
 * Angular Wrapper for the Soho Data Grid Component.
 *
 * This component searches for an element with the attribute
 * 'soho-datagrid' in the parent's DOM tree, initialising it with
 * the Soho datagrid control.
 *
 * The data is provided either by a component input or an implementation
 * of the DataGridService interface, by specifying an implementation
 * on the hosting component, i.e.
 *
 * providers: [ provide: DataGridService, useClass: DataGridDemoService} ]
 */
export class SohoDataGridComponent {
    // -------------------------------------------
    // Soho Data Grid Types
    // -------------------------------------------
    // "auto" where columns and rows are obtained from the injected service
    // (if defined) or via the Inputs, otherwise.
    static { this.AUTO = 'auto'; }
    // 'content-only' where table elements are used to define the
    // columns and rows.
    static { this.CONTENT_ONLY = 'content-only'; }
    // -------------------------------------------
    // Component Inputs
    // -------------------------------------------
    /**
     * Sets the grid options for the data grid, marking this components
     * as requiring a full rebuild at the end of the change lifecycle.
     *
     * @param gridOptions - not null grid options.
     */
    set gridOptions(gridOptions) {
        ArgumentHelper.checkNotNull('gridOptions', gridOptions);
        this._gridOptions = gridOptions;
        this.checkForComponentEditors();
        this.checkForSummaryRowSettings();
        if (this.jQueryElement) {
            // No need to set the 'settings' as the Rebuild will create
            // a new control with the _gridOptions.
            this.markForRefresh('gridOptions', RefreshHintFlags.Rebuild);
        }
    }
    get gridOptions() {
        if (this.datagrid) {
            return this.datagrid.settings;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions;
    }
    /**
     * Defines which property in the data rows is to be used as the id of each
     * row of the data.
     *
     * @param idProperty string id
     */
    set idProperty(idProperty) {
        this._gridOptions.idProperty = idProperty;
        if (this.datagrid) {
            this.datagrid.settings.idProperty = idProperty;
            this.markForRefresh('idProperty', RefreshHintFlags.Rebuild);
        }
    }
    get idProperty() {
        if (this.datagrid) {
            return this.datagrid.settings.idProperty;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.idProperty;
    }
    /**
     * The value of the frozenColumns option - returns the requested
     * value if the control has not been created yet.
     */
    get frozenColumns() {
        if (this.datagrid) {
            return this.datagrid.settings.frozenColumns;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.frozenColumns;
    }
    /**
     * Sets the frozenColumns settings - will force a grid rebuild if the component has already been
     * created.
     *
     * @param frozenColumns - the frozenColumns settings.
     */
    set frozenColumns(frozenColumns) {
        this._gridOptions.frozenColumns = frozenColumns;
        if (this.datagrid) {
            this.datagrid.settings.frozenColumns = frozenColumns;
            // Force all a full rebuild of the control.
            this.markForRefresh('frozenColumns', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * If true allows
     */
    set cellNavigation(cellNavigation) {
        this._gridOptions.cellNavigation = cellNavigation;
        if (this.jQueryElement) {
            this.datagrid.settings.cellNavigation = cellNavigation;
            this.markForRefresh('cellNavigation', RefreshHintFlags.RenderRows);
        }
    }
    get cellNavigation() {
        if (this.datagrid) {
            return this.datagrid.settings.cellNavigation;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.cellNavigation;
    }
    get isVerticalScrollToEnd() {
        if (this.datagrid) {
            return this.datagrid.isVerticalScrollToEnd;
        }
        return false;
    }
    /**
     * Changes the row navigation setting of the data grid. If rowNavigation
     * is "false” then a border is not displayed around the row.
     *
     * Defaults to true.
     *
     * @param rowlNavigation i "false” then grid will NOT show a border around the row.
     */
    set rowNavigation(rowNavigation) {
        this._gridOptions.rowNavigation = rowNavigation;
        if (this.jQueryElement) {
            this.datagrid.settings.rowNavigation = rowNavigation;
            this.markForRefresh('rowNavigation', RefreshHintFlags.RenderRows);
        }
    }
    get rowNavigation() {
        if (this.datagrid) {
            return this.datagrid.settings.rowNavigation;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.rowNavigation;
    }
    /**
     * If true, displays the rows in the grid using alternate shading, otherwise
     * all the rows use the same shading.
     */
    set alternateRowShading(alternateRowShading) {
        this._gridOptions.alternateRowShading = alternateRowShading;
        if (this.jQueryElement) {
            this.datagrid.settings.alternateRowShading = alternateRowShading;
            this.markForRefresh('alternateRowShading', RefreshHintFlags.RenderRows);
        }
    }
    get alternateRowShading() {
        if (this.datagrid) {
            return this.datagrid.settings.rowNavigation;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.alternateRowShading;
    }
    /**
     * The data to be displayed provided as an array
     * of json objects compatible with the column meta
     * data provided.
     *
     * @param dataset - array of json objects
     */
    set dataset(dataset) {
        this._gridOptions.dataset = dataset;
        if (this.jQueryElement) {
            const pagerInfo = {};
            this.datagrid.settings.dataset = dataset;
            this.ngZone.runOutsideAngular(() => {
                // @todo do we need hints as this may be bundled up with other changes.
                this.datagrid.updateDataset(dataset, pagerInfo);
            });
        }
    }
    /**
     * Return the dataset currently displayed by the datagrid.
     *
     * @return an array of objects.
     */
    get dataset() {
        // If the Soho control has been created, then the dataset
        // in the settings object will contain the rows currently
        // on display.
        if (this.datagrid) {
            return this.datagrid.settings.dataset;
        }
        // ... we've been called before the component has completed
        // initialisation, so no data has been set (or potentially
        // retrieved from a service), so the only option is the
        // Input dataset, which may be undefined.
        return this._gridOptions.dataset || [];
    }
    /**
     * If true the columns can be reorders; otherwise if false they are fixed.
     */
    set columnReorder(columnReorder) {
        this._gridOptions.columnReorder = columnReorder;
        if (this.datagrid) {
            this.datagrid.settings.columnReorder = columnReorder;
            this.markForRefresh('columnReorder', RefreshHintFlags.RenderHeader);
        }
    }
    get columnReorder() {
        if (this.datagrid) {
            return this.datagrid.settings.columnReorder;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.columnReorder;
    }
    set disableClientSort(disableClientSort) {
        this._gridOptions.disableClientSort = disableClientSort;
        if (this.datagrid) {
            this.datagrid.settings.disableClientSort = disableClientSort;
        }
    }
    get disableClientSort() {
        if (this.datagrid) {
            return this.datagrid.settings.disableClientSort;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.disableClientSort;
    }
    set disableClientFilter(disableClientFilter) {
        this._gridOptions.disableClientFilter = disableClientFilter;
        if (this.datagrid) {
            this.datagrid.settings.disableClientFilter = disableClientFilter;
        }
    }
    get disableClientFilter() {
        if (this.datagrid) {
            return this.datagrid.settings.disableClientFilter;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.disableClientFilter;
    }
    set resultsText(resultsText) {
        this._gridOptions.resultsText = resultsText;
        if (this.jQueryElement && this.datagrid) {
            this.datagrid.settings.resultsText = resultsText;
        }
    }
    set showFilterTotal(showFilterTotal) {
        this._gridOptions.showFilterTotal = showFilterTotal;
        if (this.datagrid) {
            this.datagrid.settings.showFilterTotal = showFilterTotal;
        }
    }
    get showFilterTotal() {
        if (this.datagrid) {
            return this.datagrid.settings.showFilterTotal;
        }
        return this._gridOptions.showFilterTotal;
    }
    /**
     * If true, the grid allows edits, otherwise if false edits are disabled.
     */
    set editable(editable) {
        this._gridOptions.editable = editable;
        if (this.datagrid) {
            this.datagrid.settings.editable = editable;
            this.markForRefresh('editable', RefreshHintFlags.Rebuild);
        }
    }
    get editable() {
        if (this.datagrid) {
            return this.datagrid.settings.editable;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.editable;
    }
    /**
     * Input that defines a function which is used to determine if a row is disabled, or not.
     */
    set isRowDisabled(isRowDisabled) {
        this._gridOptions.isRowDisabled = isRowDisabled;
        if (this.datagrid) {
            this.datagrid.settings.isRowDisabled = isRowDisabled;
            this.markForRefresh('isRowDisabled', RefreshHintFlags.RenderRows);
        }
    }
    get isRowDisabled() {
        if (this.datagrid) {
            return this.datagrid.settings.isRowDisabled;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.isRowDisabled;
    }
    set allowOneExpandedRow(allowOneExpandedRow) {
        this._gridOptions.allowOneExpandedRow = allowOneExpandedRow;
        if (this.datagrid) {
            this.datagrid.settings.allowOneExpandedRow = allowOneExpandedRow;
        }
    }
    get allowOneExpandedRow() {
        if (this.datagrid) {
            return this.datagrid.settings.allowOneExpandedRow;
        }
        return this._gridOptions.allowOneExpandedRow;
    }
    set rowTemplate(rowTemplate) {
        this._gridOptions.rowTemplate = rowTemplate;
        if (this.datagrid) {
            this.datagrid.settings.rowTemplate = rowTemplate;
        }
    }
    get rowTemplate() {
        if (this.datagrid) {
            return this.datagrid.settings.rowTemplate;
        }
        return this._gridOptions.rowTemplate;
    }
    set rowTemplateComponent(rowTemplateComponent) {
        this._gridOptions.rowTemplateComponent = rowTemplateComponent;
        if (this.datagrid) {
            this.datagrid.settings.rowTemplateComponent = rowTemplateComponent;
        }
    }
    get rowTemplateComponent() {
        if (this.datagrid) {
            return this.datagrid.settings.rowTemplateComponent;
        }
        return this._gridOptions.rowTemplateComponent;
    }
    set rowTemplateComponentInputs(rowTemplateComponentInputs) {
        this._gridOptions.rowTemplateComponentInputs = rowTemplateComponentInputs;
        if (this.datagrid) {
            this.datagrid.settings.rowTemplateComponentInputs = rowTemplateComponentInputs;
        }
    }
    get rowTemplateComponentInputs() {
        if (this.datagrid) {
            return this.datagrid.settings.rowTemplateComponentInputs;
        }
        return this._gridOptions.rowTemplateComponentInputs;
    }
    set rowTemplateField(rowTemplateField) {
        this._gridOptions.rowTemplateField = rowTemplateField;
        if (this.datagrid) {
            this.datagrid.settings.rowTemplateField = rowTemplateField;
        }
    }
    get rowTemplateField() {
        if (this.datagrid) {
            return this.datagrid.settings.rowTemplateField;
        }
        return this._gridOptions.rowTemplateField;
    }
    /**
     * If true, will select the cell text soon as entering edit mode
     */
    set selectOnEdit(selectOnEdit) {
        this._gridOptions.selectOnEdit = selectOnEdit;
        if (this.datagrid) {
            this.datagrid.settings.selectOnEdit = selectOnEdit;
            this.markForRefresh('editable', RefreshHintFlags.Rebuild);
        }
    }
    get selectOnEdit() {
        if (this.datagrid) {
            return this.datagrid.settings.selectOnEdit;
        }
        return this._gridOptions.selectOnEdit;
    }
    set isList(isList) {
        this._gridOptions.isList = isList;
        if (this.jQueryElement) {
            this.datagrid.settings.isList = isList;
            // calling rebuild as a brute force way of udpating the view.
            this.markForRefresh('isList', RefreshHintFlags.Rebuild);
        }
    }
    get isList() {
        if (this.datagrid) {
            return this.datagrid.settings.isList;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.isList;
    }
    set menuId(menuId) {
        this._gridOptions.menuId = menuId;
        if (this.jQueryElement) {
            this.datagrid.settings.menuId = menuId;
            this.markForRefresh('menuId', RefreshHintFlags.Rebuild);
        }
    }
    /** beforeOpen - ajax callback for open event */
    set menuBeforeOpen(menuBeforeOpen) {
        this._gridOptions.menuBeforeOpen = menuBeforeOpen;
        if (this.jQueryElement) {
            this.datagrid.settings.menuBeforeOpen = menuBeforeOpen;
            this.markForRefresh('menuBeforeOpen', RefreshHintFlags.Rebuild);
        }
    }
    get menuBeforeOpen() {
        return this._gridOptions.settings.menuBeforeOpen;
    }
    /**
     * Sets the row height for the grid, to be one of the supported options.
     *
     * @param rowHeight - 'extra-small' | 'small' | 'medium' | 'large'
     */
    set rowHeight(rowHeight) {
        this._gridOptions.rowHeight = rowHeight;
        if (this.jQueryElement) {
            this.datagrid.settings.rowHeight = rowHeight;
            this.ngZone.runOutsideAngular(() => {
                this.datagrid.rowHeight(rowHeight);
            });
        }
    }
    /**
     * Sets the height of the row to something other then the three built in rowHeights.
     *
     * @param fixedRowHeight Any integer
     */
    set fixedRowHeight(fixedRowHeight) {
        this._gridOptions.fixedRowHeight = fixedRowHeight;
        if (this.jQueryElement) {
            this.datagrid.settings.fixedRowHeight = fixedRowHeight;
            this.markForRefresh('fixedRowHeight', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * Whether selection is enabled.
     *
     * @param selectable valid values are: 'multiple', 'single', 'mixed', 'siblings' and false.
     */
    set selectable(selectable) {
        this._gridOptions.selectable = selectable;
        if (this.jQueryElement) {
            // Just changing the datagrid.settings.selectable updates the datagrid view.
            this.datagrid.settings.selectable = selectable;
            this.markForRefresh('selectable', RefreshHintFlags.RenderRows);
        }
    }
    get selectable() {
        if (this.datagrid) {
            return this.datagrid.settings.selectable;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.selectable;
    }
    set showSelectAllCheckBox(showSelectAllCheckBox) {
        this._gridOptions.showSelectAllCheckBox = showSelectAllCheckBox;
        if (this.jQueryElement) {
            // Just changing the datagrid.settings.selectable updates the datagrid view.
            this.datagrid.settings.showSelectAllCheckBox = showSelectAllCheckBox;
            this.markForRefresh('showSelectAllCheckBox', RefreshHintFlags.Rebuild);
        }
    }
    get showSelectAllCheckBox() {
        return this._gridOptions.showSelectAllCheckBox;
    }
    set clickToSelect(clickToSelect) {
        this._gridOptions.clickToSelect = clickToSelect;
        if (this.jQueryElement) {
            this.datagrid.settings.clickToSelect = clickToSelect;
            this.markForRefresh('clickToSelect', RefreshHintFlags.RenderRows);
        }
    }
    get clickToSelect() {
        if (this.datagrid) {
            return this.datagrid.settings.clickToSelect;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.clickToSelect;
    }
    set toolbar(toolbar) {
        this._gridOptions.toolbar = toolbar;
        if (this.jQueryElement) {
            this.datagrid.settings.toolbar = toolbar;
            this.markForRefresh('toolbar', RefreshHintFlags.Rebuild);
        }
    }
    set initializeToolbar(initializeToolbar) {
        this._gridOptions.initializeToolbar = initializeToolbar;
        if (this.jQueryElement && this.datagrid) {
            this.datagrid.settings.initializeToolbar = initializeToolbar;
        }
    }
    get initializeToolbar() {
        if (this.datagrid) {
            return this.datagrid.settings.initializeToolbar;
        }
        return this._gridOptions.initializeToolbar;
    }
    set saveUserSettings(settingsForSave) {
        this._gridOptions.saveUserSettings = settingsForSave;
        if (this.jQueryElement) {
            this.datagrid.settings.saveUserSettings = settingsForSave;
        }
    }
    set paging(paging) {
        this._gridOptions.paging = paging;
        if (this.jQueryElement) {
            this.datagrid.settings.paging = paging;
            // todo: update soho data grids view - this.updatePagingInfo()?
            this.markForRefresh('paging', RefreshHintFlags.Rebuild);
        }
    }
    get paging() {
        if (this.datagrid) {
            return this.datagrid.settings.paging;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.paging;
    }
    set pagesize(pagesize) {
        this._gridOptions.pagesize = pagesize;
        if (this.jQueryElement) {
            this.datagrid.settings.pagesize = pagesize;
            this.markForRefresh('pagesize', RefreshHintFlags.Rebuild);
        }
    }
    set pagesizes(pagesizes) {
        this._gridOptions.pagesizes = pagesizes;
        if (this.jQueryElement) {
            this.datagrid.settings.pagesizes = pagesizes;
            this.markForRefresh('pagesizes', RefreshHintFlags.Rebuild);
        }
    }
    set indeterminate(indeterminate) {
        this._gridOptions.indeterminate = indeterminate;
        if (this.jQueryElement) {
            this.datagrid.settings.indeterminate = indeterminate;
            this.markForRefresh('indeterminate', RefreshHintFlags.Rebuild);
        }
    }
    set actionableMode(actionableMode) {
        this._gridOptions.actionableMode = actionableMode;
        if (this.jQueryElement) {
            this.datagrid.settings.actionableMode = actionableMode;
            this.markForRefresh('actionableMode', RefreshHintFlags.Rebuild);
        }
    }
    get actionableMode() {
        if (this.datagrid) {
            return this.datagrid.settings.actionableMode;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.actionableMode;
    }
    set saveColumns(saveColumns) {
        this._gridOptions.saveColumns = saveColumns;
        if (this.jQueryElement) {
            this.datagrid.settings.saveColumns = saveColumns;
            this.markForRefresh('saveColumns', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * Input for the source function.
     *
     * @param source the dataset's source function.
     */
    set source(source) {
        this.updateSource(source);
        if (this.jQueryElement) {
            this.datagrid.settings.source = source;
            this.markForRefresh('source', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * Enables or disables the filter bar on the grid.
     *
     * @param filterable if true, the filter bar is displayed; otherwise no filter bar is displayed.
     */
    set filterable(filterable) {
        this._gridOptions.filterable = filterable;
        if (this.jQueryElement) {
            this.datagrid.settings.filterable = filterable;
            this.markForRefresh('filterable', RefreshHintFlags.Rebuild);
        }
    }
    get filterable() {
        if (this.datagrid) {
            return this.datagrid.settings.filterable;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.filterable;
    }
    set filterWhenTyping(filterWhenTyping) {
        this._gridOptions.filterWhenTyping = filterWhenTyping;
        if (this.jQueryElement && this.datagrid) {
            this.datagrid.settings.filterWhenTyping = filterWhenTyping;
        }
    }
    get filterWhenTyping() {
        if (this.datagrid) {
            return this.datagrid.settings.filterWhenTyping;
        }
        return this._gridOptions.filterWhenTyping;
    }
    /**
     * If true the datagrid is displayed as a tree, otherwise
     * the grid is displayed as flat rows.
     *
     * This field is dynamic, and will cause the grid to be rebuilt
     * if changed.
     *
     * @param treeGrid - boolean flag indicating if the data is hierarchical.
     */
    set treeGrid(treeGrid) {
        if (treeGrid !== this._gridOptions.treeGrid) {
            this._gridOptions.treeGrid = treeGrid;
            // If the jQuery control has been initialised, update it.
            if (this.jQueryElement) {
                this.datagrid.settings.treeGrid = treeGrid;
                this.markForRefresh('treeGrid', RefreshHintFlags.Rebuild);
            }
        }
    }
    get treeGrid() {
        if (this.datagrid) {
            return this.datagrid.settings.treeGrid;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.treeGrid;
    }
    /**
     * Returns the unqiue identifier; which may be undefined.
     */
    get uniqueId() {
        if (this.datagrid) {
            return this.datagrid.settings.uniqueId;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.uniqueId;
    }
    /**
     * Sets the unqiueId - will force a grid rebuild if the component has already been
     * created.
     *
     * @param unqiueId - the new id.
     */
    set uniqueId(uniqueId) {
        this._gridOptions.uniqueId = uniqueId;
        if (this.datagrid) {
            this.datagrid.settings.uniqueId = uniqueId;
            // Force all a full rebuild of the control.
            this.markForRefresh('uniqueId', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * The value of the rowReorder flag - returns the requested value if the control has not been created yet.
     */
    get rowReorder() {
        if (this.datagrid) {
            return this.datagrid.settings.rowReorder;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.rowReorder;
    }
    /**
     * Sets the rowReorder flag - will force a grid rebuild if the component has already been
     * created.
     *
     * @param rowReorder - if true the rows will be reorderable; otherwise they will not.
     */
    set rowReorder(value) {
        this._gridOptions.rowReorder = value;
        if (this.datagrid) {
            this.datagrid.settings.rowReorder = value;
            // Force all a full rebuild of the control.
            this.markForRefresh('rowReorder', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * The value of the showDirty flag - returns the requested value if the control has not been created yet.
     */
    get showDirty() {
        if (this.datagrid) {
            return this.datagrid.settings.showDirty;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.showDirty;
    }
    /**
     * Sets the showDirty flag - will force a grid rebuild if the component has already been
     * created.
     *
     * @param showDirty - if true then dirty rows will be highlighted; otherwise they will not.
     */
    set showDirty(value) {
        this._gridOptions.showDirty = value;
        if (this.datagrid) {
            this.datagrid.settings.showDirty = value;
            // Force all a full rebuild of the control.
            this.markForRefresh('showDirty', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * Sets the resizeMode option to changes the column resize behavior.
     *
     * @param resizeMode - if true then dirty rows will be highlighted; otherwise they will not.
     */
    set resizeMode(value) {
        this._gridOptions.resizeMode = value;
        if (this.datagrid) {
            this.datagrid.settings.resizeMode = value;
            this.markForRefresh('resizeMode', RefreshHintFlags.None);
        }
    }
    /**
     * Sets the datagrid header background color, either dark or light.
     * @param headerBackgroundColor - default value is 'dark'
     */
    set headerBackgroundColor(value) {
        this._gridOptions.headerBackgroundColor = value;
        if (this.datagrid) {
            this.datagrid.settings.headerBackgroundColor = value;
        }
    }
    set headerMenuId(value) {
        this._gridOptions.headerMenuId = value;
        if (this.datagrid) {
            this.datagrid.settings.headerMenuId = value;
        }
    }
    get headerMenuId() {
        if (this.datagrid) {
            return this.datagrid.settings.headerMenuId;
        }
        return this._gridOptions.headerMenuId;
    }
    set headerMenuSelected(headerMenuSelected) {
        this._gridOptions.headerMenuSelected = headerMenuSelected;
        if (this.jQueryElement && this.datagrid) {
            this.datagrid.settings.headerMenuSelected = headerMenuSelected;
        }
    }
    set headerMenuBeforeOpen(headerMenuBeforeOpen) {
        this._gridOptions.headerMenuBeforeOpen = headerMenuBeforeOpen;
        if (this.jQueryElement && this.datagrid) {
            this.datagrid.settings.headerMenuBeforeOpen = headerMenuBeforeOpen;
        }
    }
    get disableRowDeactivation() {
        if (this.datagrid) {
            return this.datagrid.settings.disableRowDeactivation;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.disableRowDeactivation;
    }
    set disableRowDeactivation(value) {
        this._gridOptions.disableRowDeactivation = value;
        if (this.datagrid) {
            this.datagrid.settings.disableRowDeactivation = value;
        }
    }
    get disableRowDeselection() {
        if (this.datagrid) {
            return this.datagrid.settings.disableRowDeselection;
        }
        return this._gridOptions.disableRowDeselection;
    }
    set disableRowDeselection(value) {
        this._gridOptions.disableRowDeselection = value;
        if (this.datagrid) {
            this.datagrid.settings.disableRowDeselection = value;
        }
    }
    /**
     * Used to hold an object that can be referenced in formatters
     * and editors or anywhere else a datagrid reference is available
     */
    set userObject(userObject) {
        this._gridOptions.userObject = userObject;
        if (this.datagrid) {
            this.datagrid.settings.userObject = userObject;
        }
    }
    get userObject() {
        if (this.datagrid) {
            return this.datagrid.settings.userObject;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.userObject;
    }
    /**
     * The value of the groupable option - returns the requested
     * value if the control has not been created yet.
     */
    get groupable() {
        if (this.datagrid) {
            return this.datagrid.settings.groupable;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._gridOptions.groupable;
    }
    /**
     * Sets the groupable settings - will force a grid rebuild if the component has already been
     * created.
     *
     * @param groupable - the groupable settings.
     */
    set groupable(value) {
        this._gridOptions.groupable = value;
        if (this.datagrid) {
            this.datagrid.settings.groupable = value;
            // Force all a full rebuild of the control.
            this.markForRefresh('groupable', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * The array of data to display in the grid.
     *
     * @param an array of objects matching the column definition.
     *
     * As this method can be called before the control is
     * initialised, stash the data for later, and only
     * call loadData on the control api if ready.
     */
    set data(data) {
        this.gridData = data;
        if (data && this.jQueryElement) {
            this.ngZone.runOutsideAngular(() => {
                // @todo add hints for this too, as other changes may force a rebuild?
                this.datagrid?.loadData(data);
            });
        }
    }
    /**
     * The array of columns to display in the grid.
     *
     * As this method can be called before the control is
     * initialised, stash the data for later, and only
     * call loadData on the control api if ready.
     */
    set columns(columns) {
        this._gridOptions.columns = columns || [];
        this.checkForComponentEditors();
        if (columns && this.jQueryElement) {
            this.ngZone.runOutsideAngular(() => {
                this.datagrid?.updateColumns(this._gridOptions.columns, this._gridOptions.columnGroups);
                this.datagrid.setOriginalColumns();
            });
        }
    }
    /**
     *
     * Summary row columns settingss
     */
    set summaryRowColumns(summaryRowColumns) {
        this._gridOptions.summaryRowColumns = summaryRowColumns;
        this.checkForSummaryRowSettings();
        if (this._gridOptions.columns && this.jQueryElement) {
            this.ngZone.runOutsideAngular(() => this.datagrid?.updateColumns(this._gridOptions.columns, this._gridOptions.columnGroups));
        }
    }
    /**
     * If true an extra column will be added to the end that fills the space.
     * This allows columns to not stretch to fill so they are a constant size.
     * This setting cannot be used with percent columns.
     */
    set spacerColumn(spacerColumn) {
        this._gridOptions.spacerColumn = spacerColumn;
        if (this.jQueryElement) {
            this.datagrid.settings.spacerColumn = spacerColumn;
            this.markForRefresh('spacerColumn', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * If true an extra column is currently added to the end that fills the space.
     */
    get spacerColumn() {
        return this._gridOptions?.spacerColumn;
    }
    set sizeColumnsEqually(sizeColumnsEqually) {
        this._gridOptions.sizeColumnsEqually = sizeColumnsEqually;
        if (this.jQueryElement && this.datagrid) {
            this.datagrid.settings.sizeColumnsEqually = sizeColumnsEqually;
        }
    }
    get sizeColumnsEqually() {
        if (this.datagrid) {
            return this.datagrid.settings.sizeColumnsEqually;
        }
        return this._gridOptions.sizeColumnsEqually;
    }
    set expandableRow(expandableRow) {
        this._gridOptions.expandableRow = expandableRow;
        if (this.jQueryElement && this.datagrid) {
            this.datagrid.settings.expandableRow = expandableRow;
        }
    }
    get expandableRow() {
        if (this.datagrid) {
            return this.datagrid.settings.expandableRow;
        }
        return this._gridOptions.expandableRow;
    }
    set redrawOnResize(redrawOnResize) {
        this._gridOptions.redrawOnResize = redrawOnResize;
        if (this.jQueryElement && this.datagrid) {
            this.datagrid.settings.redrawOnResize = redrawOnResize;
        }
    }
    get redrawOnResize() {
        if (this.datagrid) {
            return this.datagrid.settings.redrawOnResize;
        }
        return this._gridOptions.redrawOnResize;
    }
    set exportConvertNegative(exportConvertNegative) {
        this._gridOptions.exportConvertNegative = exportConvertNegative;
        if (this.jQueryElement && this.datagrid) {
            this.datagrid.settings.exportConvertNegative = exportConvertNegative;
        }
    }
    get exportConvertNegative() {
        if (this.datagrid) {
            return this.datagrid.settings.exportConvertNegative;
        }
        return this._gridOptions.exportConvertNegative;
    }
    /* Experimental Feature to stick on the top of the page. This feature has numerous limitations. */
    set stickyHeader(stickyHeader) {
        this._gridOptions.stickyHeader = stickyHeader;
        if (this.jQueryElement) {
            this.datagrid.settings.stickyHeader = stickyHeader;
            this.markForRefresh('stickyHeader', RefreshHintFlags.Rebuild);
        }
    }
    /* Experimental Feature to stick on the top of the page. This feature has numerous limitations. */
    set attributes(attributes) {
        this._gridOptions.attributes = attributes;
        if (this.jQueryElement) {
            this.datagrid.settings.attributes = attributes;
            this.markForRefresh('attributes', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * Determines the sizing method for the auto sizing columns.
     */
    set columnSizing(columnSizing) {
        this._gridOptions.columnSizing = columnSizing;
        if (this.jQueryElement) {
            this.datagrid.settings.columnSizing = columnSizing;
            this.markForRefresh('columnSizing', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * Determines the sizing method for the auto sizing columns.
     */
    get columnSizing() {
        return this._gridOptions.columnSizing;
    }
    /**
     * The name of the column stretched to fill the width of the datagrid,
     * or 'last' where the last column will be stretched to fill the
     * remaining space.
     *
     * @param stretchColumn - the name of the column to stretch; or 'last',
     */
    set stretchColumn(stretchColumn) {
        this._gridOptions.stretchColumn = stretchColumn;
        if (this.jQueryElement) {
            this.datagrid.settings.stretchColumn = stretchColumn;
            this.markForRefresh('stretchColumn', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * The name of the column to stretch, or 'last' if the
     * last column is stretched.
     */
    get stretchColumn() {
        return this._gridOptions.stretchColumn;
    }
    /**
     * If true, column will recalculate its width and stretch if required on column change.
     *
     * @param stretchColumnOnChange - If false stretch logic wont run on column change.
     */
    set stretchColumnOnChange(stretchColumnOnChange) {
        this._gridOptions.stretchColumnOnChange = stretchColumnOnChange;
        if (this.jQueryElement) {
            this.datagrid.settings.stretchColumnOnChange = stretchColumnOnChange;
            this.markForRefresh('stretchColumnOnChange', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * The current value of stretchColumnOnChange.
     */
    get stretchColumnOnChange() {
        return this._gridOptions.stretchColumnOnChange;
    }
    /**
     * Whether to show the page size selector or not.
     */
    set showPageSizeSelector(showPageSizeSelector) {
        this._gridOptions.showPageSizeSelector = showPageSizeSelector;
        if (this.jQueryElement) {
            this.datagrid.settings.showPageSizeSelector = showPageSizeSelector;
            // todo: need a function in datagrid.js that allows toggling of the page size selector. for now I have to rebuild the datagrid.
            this.markForRefresh('showPageSizeSelector', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * If true, hides the pager if there's only one page worth of results.
     */
    set hidePagerOnOnePage(hidePagerOnOnePage) {
        this._gridOptions.hidePagerOnOnePage = hidePagerOnOnePage;
        if (this.jQueryElement) {
            this.datagrid.settings.hidePagerOnOnePage = hidePagerOnOnePage;
            this.markForRefresh('hidePagerOnOnePage', RefreshHintFlags.Rebuild);
        }
    }
    /**
     * The column groups
     *
     * As this method can be called before the control is
     * initialised, stash the data for later, and only
     * call loadData on the control api if ready.
     */
    set columnGroup(columnGroups) {
        this._gridOptions.columnGroups = columnGroups || [];
        if (columnGroups && this._gridOptions.columns && this.jQueryElement) {
            // @todo add hints for this too, as other changes may force a rebuild?
            this.datagrid.updateColumns(this._gridOptions.columns, columnGroups);
        }
    }
    get columnGroup() {
        if (this.datagrid) {
            return this.datagrid.settings.columnGroups || [];
        }
        return this._gridOptions.columnGroups || [];
    }
    /**
     * The `emptyMessage` data grid option.
     * Use null or undefined to remove any empty message.
     */
    set emptyMessage(emptyMessage) {
        // Check for undefined/null and reset to the default message
        if (!emptyMessage) {
            // soho only takes a null here so making it so any !emptyMessage gets set to null
            emptyMessage = null;
        }
        this._gridOptions.emptyMessage = emptyMessage;
        if (this.jQueryElement) {
            this.datagrid.settings.emptyMessage = emptyMessage;
            this.ngZone.runOutsideAngular(() => {
                this.datagrid?.setEmptyMessage(emptyMessage);
            });
        }
    }
    get emptyMessage() {
        return this._gridOptions.emptyMessage;
    }
    /**
     * Enable toolips on the cell values, at a cost of performance.
     */
    set enableTooltips(value) {
        this._gridOptions.enableTooltips = value;
        if (this.jQueryElement) {
            this.datagrid.settings.enableTooltips = value;
            this.markForRefresh('enableTooltips', RefreshHintFlags.Rebuild);
        }
    }
    get enableTooltips() {
        return this._gridOptions.enableTooltips;
    }
    set selectChildren(selectChildren) {
        this._gridOptions.selectChildren = selectChildren;
        if (this.jQueryElement) {
            this.datagrid.settings.selectChildren = selectChildren;
            this.markForRefresh('selectChildren', RefreshHintFlags.RenderRows);
        }
    }
    get selectChildren() {
        if (this.datagrid) {
            return this.datagrid.settings.selectChildren;
        }
        return this._gridOptions.selectChildren;
    }
    set allowChildExpandOnMatch(allowChildExpandOnMatch) {
        this._gridOptions.allowChildExpandOnMatch = allowChildExpandOnMatch;
        if (this.jQueryElement && this.datagrid) {
            this.datagrid.settings.allowChildExpandOnMatch = allowChildExpandOnMatch;
        }
    }
    get allowChildExpandOnMatch() {
        if (this.datagrid) {
            return this.datagrid.settings.allowChildExpandOnMatch;
        }
        return this._gridOptions.allowChildExpandOnMatch;
    }
    /**
     * Defines the source type of the grid, either:
     *
     * - "content-only" where table elements are provided in the body.
     * - "auto" where columns and rows are obtained for an
     *   injected service (if defined) or via the Inputs if not.
     *
     * Allow the input to be overriden, to match the component selector.
     */
    // eslint-disable-next-line @angular-eslint/no-input-rename
    set sohoDatagrid(datagridType) {
        this.datagridType = datagridType && datagridType.toString() != '' ? datagridType : SohoDataGridComponent.AUTO;
    }
    /**
     * Sets the role for the grid.
     */
    get datagridRole() {
        if (this._gridOptions.treeGrid) {
            return 'treegrid';
        }
        else {
            return 'datagrid';
        }
    }
    /**
     * Constructor.
     *
     * @param ngZone - the angular zone for this component.
     * @param elementRef - the element matching the component's selector.
     * @param changeDetector - the component's change detector.
     * @param resolver - component factory resolver (for editors/formatters).
     * @param injector - dynamic component injector (for editors/formatters).
     * @param datagridService - service for obtaining data (optional)
     */
    constructor(ngZone, elementRef, changeDetector, resolver, injector, app, datagridService) {
        this.ngZone = ngZone;
        this.elementRef = elementRef;
        this.changeDetector = changeDetector;
        this.resolver = resolver;
        this.injector = injector;
        this.app = app;
        this.datagridService = datagridService;
        // -------------------------------------------
        // Component Output
        // -------------------------------------------
        // This event is fired when a row (or rows) are selected.
        this.selected = new EventEmitter();
        // This event is fired when a cell is changed.
        this.cellchange = new EventEmitter();
        // This event is fired when a row is removed.
        this.rowRemove = new EventEmitter();
        // This event is fired when a row is added.
        this.rowAdd = new EventEmitter();
        // This event is fired when the grid is filtered.
        this.filtered = new EventEmitter();
        // This event is fired when a row in the grid is expanded.
        this.expandrow = new EventEmitter();
        /**
         * This event is fired when a key is pressed
         *
         * @todo remove override of native attribute
         */
        // eslint-disable-next-line @angular-eslint/no-output-native
        this.keydown = new EventEmitter();
        // This event is fired when edit mode is exited.
        this.exiteditmode = new EventEmitter();
        // This event is fired before edit mode is started.
        this.beforeentereditmode = new EventEmitter();
        /**
         * This event is fired when edit mode is entered.
         */
        this.entereditmode = new EventEmitter();
        // This event is fired when a row in the grid is collapsed.
        this.collapserow = new EventEmitter();
        this.sorted = new EventEmitter();
        this.nextPage = new EventEmitter();
        this.previousPage = new EventEmitter();
        this.firstPage = new EventEmitter();
        this.lastPage = new EventEmitter();
        this.pageSizeChange = new EventEmitter();
        this.beforePaging = new EventEmitter();
        this.afterPaging = new EventEmitter();
        this.beforeRowActivated = new EventEmitter();
        this.rowActivated = new EventEmitter();
        this.rowDeactivated = new EventEmitter();
        this.rowClicked = new EventEmitter();
        this.rowDoubleClicked = new EventEmitter();
        this.contextMenu = new EventEmitter();
        this.rowReordered = new EventEmitter();
        this.openFilterRow = new EventEmitter();
        this.closeFilterRow = new EventEmitter();
        this.settingsChanged = new EventEmitter();
        this.rendered = new EventEmitter();
        this.afterRender = new EventEmitter();
        this.verticalScroll = new EventEmitter();
        this.filteroperatorchanged = new EventEmitter();
        // -------------------------------------------
        // Host Bindings
        // -------------------------------------------
        // Set the enable / disabled class (not working)
        this.isDisabled = false;
        // An internal gridOptions object that gets updated by using
        // the component's Inputs()
        this._gridOptions = {
            stretchColumn: 'last',
            enableTooltips: false
        };
        // Provides hints to the component after the next refresh.
        this.refreshHint = RefreshHintFlags.None;
        // List of option names changed (for debugging).
        this.changedOptions = [];
        // List of dynamic formatter components - keyed by the original args.
        this.cellComponents = [];
        // List of dynamic rowtemplate components - keyed by the original args.
        this.rowTemplateComponents = [];
    }
    // -------------------------------------------
    // Public API
    // -------------------------------------------
    getColumnGroup(idx) {
        return this.datagrid.getColumnGroup(idx);
    }
    getColumnById(idx) {
        return this.datagrid.getColumnGroup(idx);
    }
    /**
     * Overrides the sort function used by the datagrid,
     * can only be used once the grid has been created.
     *
     * @todo this should made lazy.
     */
    setSortFunction(sortFunction) {
        if (this.datagrid) {
            this.datagrid.sortFunction = sortFunction;
        }
        else {
            throw new Error('datagrid not initialized.');
        }
    }
    /**
     * Sets the column and direction to sort the dataset on.
     *
     * Can only be used once the grid has been initialised, otherwise
     * an error is thrown.
     *
     * @param columnId the id of the column to sort on; must be non-null.
     * @param ascending if true sort ascending, otherwise descending.  If not supplied the setting is toggled.
     */
    setSortColumn(columnId, ascending) {
        if (this.datagrid) {
            this.ngZone.runOutsideAngular(() => {
                this.datagrid.setSortColumn(columnId, ascending);
            });
        }
        else {
            throw new Error('datagrid not initialized');
        }
    }
    /**
     * Used to set the sort indicator on a column when disableClientSort is set to true.
     */
    setSortIndicator(columnId, ascending) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid.setSortIndicator(columnId, ascending);
        });
    }
    pageSize() {
        return this.datagrid?.pagerAPI.settings.pagesize;
    }
    updatePagingInfo(pageInfo) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.pagerAPI.updatePagingInfo(pageInfo);
        });
    }
    enable() {
        this.isDisabled = false;
    }
    disable() {
        this.isDisabled = true;
    }
    updateRow(idx, row) {
        ArgumentHelper.checkNotNull('row', row);
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.updateRow(idx, row);
        });
    }
    hideColumn(id) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.hideColumn(id);
        });
    }
    showColumn(id) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.showColumn(id);
        });
    }
    columnById(id) {
        return this.datagrid.columnById(id);
    }
    getColumns() {
        return this.datagrid.settings.columns;
    }
    getColumnGroups() {
        return this.datagrid.settings.columnGroups;
    }
    /** Get the column index from the col's id */
    columnIdxById(columnId) {
        return this.datagrid.columnIdxById(columnId);
    }
    getHeaderRowColumn(fld) {
        return this.datagrid.getHeaderRowColumn(fld);
    }
    /**
     * Adds a row of data to the datagrid at the given optional location.
     *
     * @param data the row of data to add.
     * @param location the optional location, 'top' or 'bottom' or a number.
     */
    addRow(data, location) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid.addRow(data, location);
        });
    }
    /**
     * Adds multiple rows of data to the datagrid at the given optional location.
     * @param data Array of data to add.
     * @param location the optional location, 'top' or 'bottom' or a number.
     */
    addRows(data, location) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid.addRows(data, location);
        });
    }
    /**
     * Removes a row matching the rowIndex passed in from the data and grid.
     *
     * @param rowIndex the index of the row to remove.
     */
    removeRow(rowIndex, noSync, noTrigger) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.removeRow(rowIndex, noSync, noTrigger);
        });
    }
    /**
     * Returns an array of the dirty rows in the grid.
     *
     * @return an array of the dirty rows in the grid.
     */
    dirtyRows() {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid.dirtyRows();
        });
    }
    /**
     * Returns an array of the dirty cells in the grid.
     *
     * @return an array of the dirty cells in the grid.
     */
    dirtyCells() {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid.dirtyCells();
        });
    }
    /**
     * Clear all dirty cells.
     */
    clearDirty() {
        return this.ngZone.runOutsideAngular(() => {
            this.datagrid?.clearDirty();
        });
    }
    /**
     * Commit the cell that's currently in edit mode.
     */
    commitCellEdit() {
        return this.ngZone.runOutsideAngular(() => {
            this.datagrid?.commitCellEdit();
        });
    }
    /**
     * Clear all dirty cells in given row.
     *
     * @param row - the row number (idx) of the row.
     */
    clearDirtyRow(row) {
        return this.ngZone.runOutsideAngular(() => {
            this.datagrid?.clearDirtyRow(row);
        });
    }
    /**
     * Clear dirty on given cell.
     *
     * @param row - the row number (idx) of the row
     * @param cell - the cell number (idx) of the cell
     */
    clearDirtyCell(row, cell) {
        return this.ngZone.runOutsideAngular(() => {
            this.datagrid?.clearDirtyCell(row, cell);
        });
    }
    /**
     * Clear all error for a given cell in a row
     *
     * @param row The row index.
     * @param cell The cell index.
     */
    clearAllCellError(row, cell) {
        this.ngZone.runOutsideAngular(() => this.datagrid?.clearAllCellError(row, cell));
    }
    /**
     * Clear a cell with an error of a given type
     *
     * @param row The row index.
     * @param cell The cell index.
     * @param type of error.
     */
    clearCellError(row, cell, type) {
        this.ngZone.runOutsideAngular(() => this.datagrid?.clearCellError(row, cell, type));
    }
    /**
     * Clear a row level all errors, alerts, info messages
     *
     * @param row The row index.
     */
    clearRowError(row) {
        this.ngZone.runOutsideAngular(() => this.datagrid?.clearRowError(row));
    }
    /**
     * Clear all errors, alerts and info messages in entire datagrid.
     */
    clearAllErrors() {
        this.ngZone.runOutsideAngular(() => this.datagrid?.clearAllErrors());
    }
    /** Validate all rows and cells in the entire grid if they have validation on the column */
    showRowError(row, message, type) {
        this.ngZone.runOutsideAngular(() => this.datagrid?.showRowError(row, message, type));
    }
    /** Validate all cells in a specific row */
    validateRow(row) {
        this.ngZone.runOutsideAngular(() => this.datagrid?.validateRow(row));
    }
    /**
     * Set and show a message/error on the given row.
     */
    validateAll() {
        this.ngZone.runOutsideAngular(() => this.datagrid?.validateAll());
    }
    /**
     * Sets the status of a given row in the grid.
     *
     * @param idx - the row number (idx) of the row
     * @param status - status class name e.g. 'error'
     * @param tooltip - string value for tooltip message e.g. 'Error'
     */
    rowStatus(idx, status, tooltip) {
        return this.ngZone.runOutsideAngular(() => {
            this.datagrid?.rowStatus(idx, status, tooltip);
        });
    }
    /**
     * Return an array containing all of the currently modified rows, the type of modification
     * and the cells that are dirty and the data.
     *
     * @returns An keyed object showing the dirty row info.
     */
    getModifiedRows() {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid.getModifiedRows();
        });
    }
    /**
     * Set a cell to dirty and add the dirty icon visually.
     *
     * @param row The row index
     * @param cell The cell index
     * @param toggle True to set it and false to remove it
     * @param data Adds dirty data to the internal tracker
     */
    setDirtyIndicator(row, cell, toggle, data) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.setDirtyIndicator(row, cell, toggle, data);
        });
    }
    /**
     * Removes all selected rows
     */
    removeSelected() {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.removeSelected();
        });
    }
    /**
     * Toggles the display of the filter row.
     */
    toggleFilterRow() {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.toggleFilterRow();
        });
    }
    /**
     * Accept conditions from outside or pull from filter row
     */
    applyFilter(conditions) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.applyFilter(conditions);
        });
    }
    /**
     * Set the filter row from passed data / settings
     */
    setFilterConditions(conditions) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.setFilterConditions(conditions);
        });
    }
    /**
     * Get filter conditions in array form from the UI
     */
    filterConditions() {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid.filterConditions();
        });
    }
    /**
     * Clears any filter defined, for this datagrid.
     */
    clearFilter() {
        this.ngZone.runOutsideAngular(() => {
            if (this.datagrid) {
                this.datagrid.clearFilter();
            }
        });
    }
    /**
     * Returns the rows currently selected on the data grid.
     *
     * @return an array of SohoDataGridSelectedRow instances.
     * @deprecated use selectedRows instead.
     */
    getSelectedRows() {
        return this.ngZone.runOutsideAngular(() => this.selectedRows());
    }
    /**
     * Returns the rows currently selected on the data grid.
     *
     * @return an array of SohoDataGridSelectedRow instances.
     */
    selectedRows() {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid.selectedRows();
        });
    }
    /**
     * Selects all the rows in the grid.
     */
    selectAllRows() {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.selectAllRows();
        });
    }
    /**
     * Unselects all the rows in the grid.
     */
    unSelectAllRows() {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.unSelectAllRows();
        });
    }
    /**
     * Sets the selected status of the specified row in the data grid.
     *
     * @param idx - the row number (idx) of the row to select.
     * @deprecated - use selectRows instead.
     */
    selectRow(idx) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.selectRow(idx);
        });
    }
    /**
     * Deselects the specified row in the data grid.
     *
     * @param idx - the row number (idx) of the row to deselect.
     */
    unselectRow(idx) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.unselectRow(idx);
        });
    }
    /**
     * Selects a range of rows based on the provided row indexes.
     *
     * @param start - the start index
     * @param end - then end index
     */
    selectRange(start, end) {
        const range = [start, end];
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.selectRowsBetweenIndexes(range);
        });
    }
    /**
     * Set the selected rows by passing the row index or an array of row indexes
     */
    selectRows(row) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.selectRows(row);
        });
    }
    /**
     * Set the status of the checkbox on the header.
     *
     * @param state 'all', 'partial' or 'all'.
     */
    setHeaderCheckboxState(state) {
        const headerCheckbox = this.jQueryElement?.find('.datagrid-header').find('.datagrid-checkbox');
        if (headerCheckbox) {
            if (state === 'partial') {
                headerCheckbox.data('selected', 'partial')
                    .addClass('is-checked is-partial');
            }
            if (state === 'all') {
                headerCheckbox.data('selected', 'all')
                    .addClass('is-checked').removeClass('is-partial');
            }
            if (state === 'none') {
                headerCheckbox.data('selected', 'none')
                    .removeClass('is-checked is-partial');
            }
        }
    }
    /**
     * Activate the row of the passed-in idx.
     * NOTE: valid only when selection mode is 'mixed'
     */
    activateRow(idx) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.activateRow(idx);
        });
    }
    /**
     * Deactivate the currently activated row.
     *
     * NOTE: valid only when selection mode is 'mixed'
     */
    deactivateRow() {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.deactivateRow();
        });
    }
    /**
     * Get the currently activated row.
     * NOTE: valid only when selection mode is 'mixed'
     */
    activatedRow() {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid.activatedRow();
        });
    }
    /**
     * Sets the active cell.
     *
     * @param idx The index of the row of the cell to set active.
     * @param idx2 The index of the cell to set active.
     */
    setActiveCell(idx, idx2) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.setActiveCell(idx, idx2);
        });
    }
    /**
     * Gets the active cell info
     */
    getActiveCell() {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid?.activeCell;
        });
    }
    /**
     * Scrolls the row at <b>idx</b> into view in the view port.
     *
     * @param idx The index of the row to scroll into view.
     */
    scrollRowIntoView(idx) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.setActiveCell(idx, 0);
        });
    }
    /**
     * Returns an array of row numbers for the rows containing the value for the specified field.
     *
     * @param fieldName The field name to search.
     * @param value The value to use in search.
     */
    findRowsByValue(fieldName, value) {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid.findRowsByValue(fieldName, value);
        });
    }
    /**
     * Programmatically trigger a call to the datagrid.settings.source
     * function with the given pagerType.
     *
     * @param pagerType - a valid pager type.
     */
    triggerSource(pagerType, callback) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.triggerSource(pagerType, callback);
        });
    }
    /**
     * Trigger export of grid data to Excel.
     *
     * @param fileName The prefix name to be used for the exported file.
     * @param worksheetName The name to be used for the worksheet.
     * @param customDs A datasource to override the default (deprecated)
     */
    exportToExcel(fileName, worksheetName, customDs) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.exportToExcel(fileName, worksheetName, customDs);
        });
    }
    /**
     * Trigger export of grid data to CSV formatted file.
     *
     * @param fileName The prefix name to be used for the exported file.
     * @param customDs A datasource to override the default.
     * @param separator The separator to use in the cvs file, defaults to 'sep=,'
     * @param format if true, date and number values will be formatted based on the locale
     */
    exportToCsv(fileName, customDs, separator = 'sep=,', format) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.exportToCsv(fileName, customDs, separator, format);
        });
    }
    /**
     * Updates the columns and columnGroups displayed on the grid.
     *
     * @param columns The datagrid columns to update.
     * @param columnGroups The column groups to update.
     */
    updateColumns(columns, columnGroups) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.updateColumns(columns, columnGroups);
        });
    }
    /**
     * Parse a JSON array with columns and return the column object.
     *
     * @param columnStr The json represntation of the column object.
     * @return  The array of columns.
     */
    columnsFromString(columns) {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid.columnsFromString(columns);
        });
    }
    /**
     * Reset columns to their defaults (used on restore menu item).
     */
    resetColumns() {
        return this.ngZone.runOutsideAngular(() => {
            this.datagrid?.resetColumns();
        });
    }
    /**
     * Open the personalize dialog.
     */
    personalizeColumns() {
        return this.ngZone.runOutsideAngular(() => {
            this.datagrid?.personalizeColumns();
        });
    }
    /**
     * Restore the user settings from local Storage or as passed in.
     *
     * @param settings The object containing the settings to use.
     */
    restoreUserSettings(settings) {
        this.ngZone.runOutsideAngular(() => {
            this.datagrid?.restoreUserSettings(settings);
        });
    }
    // -------------------------------------------
    // Event Handlers
    // -------------------------------------------
    /**
     * Handle a request to load the data for the grid from the service.
     *
     * @todo paging - not yet fully implemented?
     */
    onDataRequest(request, response) {
        // The request for data is made by the datagrid, so jump back into the angular zone ...
        this.ngZone.run(() => 
        // ... request the data from the service ...
        this.datagridService.getData(request)
            .subscribe((results) => {
            // .. on receipt, pass the data back to the datagrid but
            // outside the angular zone.
            this.ngZone.runOutsideAngular(() => response(results, request));
        }));
    }
    /**
     * Event fired after a child row has been expanded.
     */
    onExpandRowHandler(args) {
        const event = { grid: this, ...args };
        if (this.gridOptions.rowTemplateComponent) {
            this.buildRowTemplateComponent(event);
        }
        this.ngZone.run(() => {
            this.expandrow.next(event);
        });
    }
    /**
     * Build component for rowTemplate
     */
    buildRowTemplateComponent(event) {
        if (!this.gridOptions.rowTemplateComponent) {
            return;
        }
        const componentFactory = this.resolver.resolveComponentFactory(this.gridOptions.rowTemplateComponent);
        // Remove component if it exists
        const idx = this.rowTemplateComponents.findIndex((c) => event.row === c.row);
        if (idx > -1) {
            this.rowTemplateComponents[idx].component.destroy();
            this.rowTemplateComponents.splice(idx, 1);
        }
        const containerParent = event.detail[0].querySelector('.datagrid-row-detail-padding');
        containerParent.innerHTML = '<div class="datagrid-cell-layout"></div>';
        const container = containerParent.querySelector('.datagrid-cell-layout');
        container.innerHTML = '';
        let dataComponent;
        if (event.item.hasOwnProperty(this.gridOptions.rowTemplateField)) {
            dataComponent = event.item[this.gridOptions.rowTemplateField];
        }
        else {
            dataComponent = undefined;
        }
        const injector = Injector.create({
            providers: [
                {
                    provide: 'args',
                    useValue: { inputsData: this.gridOptions.rowTemplateComponentInputs, data: dataComponent, ...event },
                }
            ],
            parent: this.injector,
        });
        // Create the component, in the container.
        const component = componentFactory.create(injector, [], container);
        event['rowTemplateComponent'] = component;
        // ... attach to the app ...
        this.app.attachView(component.hostView);
        // ... update for changes ...
        component.changeDetectorRef.detectChanges();
        // ... finally store the created component for later, we'll delete it when
        // requested, or when the grid is destroyed.
        this.rowTemplateComponents.push({ row: event.row, component });
    }
    /**
     * Event fired after a context menu is opened
     */
    onKeyDownHandler(e, args, response) {
        const event = { e, args, response };
        this.ngZone.run(() => {
            this.keydown.next(event);
        });
        if (e.key === 'F10' && e.shiftKey) {
            $(e.currentTarget).trigger('contextmenu');
        }
    }
    /**
     * Event fired after a child row has been expanded.
     *
     * @param idProperty string id
     */
    set onBeforeSelect(beforeSelectFunction) {
        this._gridOptions.onBeforeSelect = beforeSelectFunction;
        if (this.datagrid) {
            this.datagrid.settings.onBeforeSelect = beforeSelectFunction;
            this.markForRefresh('onBeforeSelect', RefreshHintFlags.Rebuild);
        }
    }
    get onBeforeSelect() {
        if (this.datagrid) {
            return this.datagrid.settings.onBeforeSelect;
        }
        return this._gridOptions.onBeforeSelect;
    }
    /**
     *  Makes it possible to save selections when changing pages on server side paging.
     *  You may want to also use showSelectAllCheckBox: false
     */
    set allowSelectAcrossPages(allowSelectAcrossPages) {
        this._gridOptions.allowSelectAcrossPages = allowSelectAcrossPages;
        if (this.datagrid) {
            this.datagrid.settings.allowSelectAcrossPages = allowSelectAcrossPages;
            this.markForRefresh('allowSelectAcrossPages', RefreshHintFlags.None);
        }
    }
    get allowSelectAcrossPages() {
        if (this.datagrid) {
            return this.datagrid.settings.allowSelectAcrossPages;
        }
        return this._gridOptions.allowSelectAcrossPages;
    }
    /**
     *  Select all will effect only on current page and its for client side paging only.
     */
    set selectAllCurrentPage(selectAllCurrentPage) {
        this._gridOptions.selectAllCurrentPage = selectAllCurrentPage;
        if (this.datagrid) {
            this.datagrid.settings.selectAllCurrentPage = selectAllCurrentPage;
            this.markForRefresh('selectAllCurrentPage', RefreshHintFlags.None);
        }
    }
    get selectAllCurrentPage() {
        if (this.datagrid) {
            return this.datagrid.settings.selectAllCurrentPage;
        }
        return this._gridOptions.selectAllCurrentPage;
    }
    /**
     * An array of column IDs used to define aria descriptors for selection checkboxes.
     */
    set columnIds(columnIds) {
        this._gridOptions.columnIds = columnIds;
        if (this.datagrid) {
            this.datagrid.settings.columnIds = columnIds;
            this.markForRefresh('columnIds', RefreshHintFlags.None);
        }
    }
    get columnIds() {
        if (this.datagrid) {
            return this.datagrid.settings.columnIds;
        }
        return this._gridOptions.columnIds;
    }
    /**
     *If true, the new row indicator will display after adding a row
     *
     * @param showNewRowIndicator boolean show new indicator setting
     */
    set showNewRowIndicator(showNewRowIndicator) {
        this._gridOptions.showNewRowIndicator = showNewRowIndicator;
        if (this.datagrid) {
            this.datagrid.settings.showNewRowIndicator = showNewRowIndicator;
            this.markForRefresh('showNewRowIndicator', RefreshHintFlags.None);
        }
    }
    get showNewRowIndicator() {
        if (this.datagrid) {
            return this.datagrid.settings.showNewRowIndicator;
        }
        return this._gridOptions.showNewRowIndicator;
    }
    set onExpandChildren(expandChildrenFunction) {
        this._gridOptions.onExpandChildren = expandChildrenFunction;
        if (this.datagrid) {
            this.datagrid.settings.onExpandChildren = expandChildrenFunction;
            this.markForRefresh('onExpandChildren', RefreshHintFlags.Rebuild);
        }
    }
    get onExpandChildren() {
        if (this.datagrid) {
            return this.datagrid.settings.onExpandChildren;
        }
        return this._gridOptions.onExpandChildren;
    }
    set onCollapseChildren(collapseChildrenFunction) {
        this._gridOptions.onCollapseChildren = collapseChildrenFunction;
        if (this.datagrid) {
            this.datagrid.settings.onCollapseChildren = collapseChildrenFunction;
            this.markForRefresh('onCollapseChildren', RefreshHintFlags.Rebuild);
        }
    }
    get onCollapseChildren() {
        if (this.datagrid) {
            return this.datagrid.settings.onCollapseChildren;
        }
        return this._gridOptions.onCollapseChildren;
    }
    set onPostRenderCell(onPostRenderCell) {
        const postRenderCell = (e, args) => {
            this.onPostRenderCellHandler(e, args);
            onPostRenderCell(e, args);
        };
        this._gridOptions.onPostRenderCell = postRenderCell;
        if (this.datagrid) {
            this.datagrid.settings.onPostRenderCell = postRenderCell;
        }
    }
    set onDestroyCell(onDestroyCell) {
        const destroyCell = (e, args) => {
            this.onDestroyCellHandler(args);
            onDestroyCell(e, args);
        };
        this._gridOptions.onDestroyCell = destroyCell;
        if (this.datagrid) {
            this.datagrid.settings.onDestroyCell = destroyCell;
        }
    }
    set onEditCell(onEditCell) {
        const editCell = (editor) => {
            this.onEditCellHandler(editor);
            onEditCell(editor);
        };
        this._gridOptions.onEditCell = editCell;
        if (this.datagrid) {
            this.datagrid.settings.onEditCell = editCell;
        }
    }
    set onKeyDown(onKeyDown) {
        const keyDown = (e, args, response) => {
            this.onKeyDownHandler(e, args, response);
            onKeyDown(e, args, response);
        };
        this._gridOptions.onKeyDown = keyDown;
        if (this.datagrid) {
            this.datagrid.settings.onKeyDown = keyDown;
        }
    }
    set onExpandRow(onExpandRow) {
        this._gridOptions.onExpandRow = onExpandRow;
        if (this.datagrid) {
            this.datagrid.settings.onExpandRow = onExpandRow;
        }
    }
    /* Icon name for fallbacks if the image does not load */
    set fallbackImage(fallbackImage) {
        this._gridOptions.fallbackImage = fallbackImage;
        if (this.datagrid) {
            this.datagrid.settings.fallbackImage = fallbackImage;
            this.markForRefresh('fallbackImage', RefreshHintFlags.Rebuild);
        }
    }
    get fallbackImage() {
        if (this.datagrid) {
            return this.datagrid.settings.fallbackImage;
        }
        return this._gridOptions.fallbackImage;
    }
    /* Tooltip to show if it the fallback appears */
    set fallbackTooltip(fallbackTooltip) {
        this._gridOptions.fallbackTooltip = fallbackTooltip;
        if (this.datagrid) {
            this.datagrid.settings.fallbackTooltip = fallbackTooltip;
            this.markForRefresh('fallbackTooltip', RefreshHintFlags.Rebuild);
        }
    }
    get fallbackTooltip() {
        if (this.datagrid) {
            return this.datagrid.settings.fallbackTooltip;
        }
        return this._gridOptions.fallbackTooltip;
    }
    /**
     * Event fired after edit mode is activated on an editor.
     *
     * @param args the event arguments
     */
    onExitEditMode(args) {
        const event = { grid: this, ...args };
        this.ngZone.run(() => {
            this.exiteditmode.next(event);
        });
    }
    /**
     * Event fired before edit mode is activated on an editor.
     *
     * @param args the event arguments
     */
    onBeforeEnterEditMode(args) {
        const event = { grid: this, ...args };
        this.ngZone.run(() => {
            this.beforeentereditmode.next(event);
        });
    }
    /**
     * Event fired when edit mode is activated on an editor.
     *
     * @param args the event arguments
     */
    onEnterEditMode(args) {
        const event = { grid: this, ...args };
        this.ngZone.run(() => {
            this.entereditmode.next(event);
        });
    }
    /**
     * Event fired after a child row has been collapsed.
     */
    onCollapseRow(args) {
        const event = { grid: this, ...args };
        this.ngZone.run(() => {
            this.collapserow.next(event);
        });
    }
    /**
     * Event fired when a row has been added.
     */
    onRowAdd(args) {
        this.ngZone.run(() => {
            this.rowAdd.next(args);
        });
    }
    /**
     * Event fired when a cell has changed.
     */
    onCellChange(args) {
        this.ngZone.run(() => {
            this.cellchange.next(args);
        });
    }
    /**
     * Event fired when a row has been clicked.
     */
    onRowClicked(args) {
        this.ngZone.run(() => {
            this.rowClicked.next(args);
        });
    }
    /**
     * Event fired when the filter row is closed.
     */
    onCloseFilterRow(args) {
        this.ngZone.run(() => {
            this.closeFilterRow.next(args);
        });
    }
    /**
     * Event fired when a context menu is is clicked.
     */
    onContextMenu(args) {
        this.ngZone.run(() => {
            this.contextMenu?.next(args);
        });
    }
    /**
     * Event fired when a context menu is is clicked.
     */
    onDoubleClick(args) {
        this.ngZone.run(() => {
            this.rowDoubleClicked.next(args);
        });
    }
    /**
     * Event fired when the data is filtered.
     */
    onFiltered(args) {
        this.ngZone.run(() => {
            this.filtered.next(args);
        });
    }
    /**
     * Event fired when filter row opened.
     */
    onOpenFilterRow(args) {
        this.ngZone.run(() => {
            this.openFilterRow.next(args);
        });
    }
    /**
     * Event fired when a row is removed.
     */
    onRowRemove(args) {
        this.ngZone.run(() => {
            this.rowRemove.next(args);
        });
    }
    /**
     * Event fired when the data is rendered
     */
    onRendered(args) {
        this.ngZone.run(() => {
            this.rendered.next(args);
        });
    }
    /**
     * Event fired when the data is filtered.
     */
    onAfterRender(args) {
        this.ngZone.run(() => {
            this.afterRender.next(args);
        });
    }
    /**
     * Event fired before a row is activated.
     */
    onBeforeRowActivated(args) {
        this.ngZone.run(() => {
            this.beforeRowActivated.next(args);
        });
    }
    /**
     * Event fired when a row is activated.
     */
    onRowActivated(args) {
        this.ngZone.run(() => {
            this.rowActivated.next(args);
        });
    }
    /**
     * Event fired when a row is deactivated.
     */
    onRowDeactivated(args) {
        this.ngZone.run(() => {
            this.rowDeactivated.next(args);
        });
    }
    /**
     * Event fired when a row is reordered.
     */
    onRowReordered(args) {
        this.ngZone.run(() => {
            this.rowReordered.next(args);
        });
    }
    /**
     * Event fired when a row is selected or deselected.
     */
    onSelected(args) {
        this.ngZone.run(() => {
            this.selected.next(args);
        });
    }
    /**
     * Event fired when settings are changed on the grid.
     */
    onSettingsChanged(args) {
        this.ngZone.run(() => {
            this.settingsChanged.next(args);
        });
    }
    /**
     * Event fired when the data is sorted.
     */
    onSorted(args) {
        this.ngZone.run(() => {
            this.sorted.next(args);
        });
    }
    /**
     * Event fired when using built-in pager to next page.
     */
    onNextPage(args) {
        this.ngZone.run(() => {
            this.nextPage.next(args);
        });
    }
    /**
       * Event fired when using built-in pager to previous page.
       */
    onPreviousPage(args) {
        this.ngZone.run(() => {
            this.previousPage.next(args);
        });
    }
    /**
       * Event fired when using built-in pager to first page.
       */
    onFirstPage(args) {
        this.ngZone.run(() => {
            this.firstPage.next(args);
        });
    }
    /**
       * Event fired when using built-in pager to last page.
       */
    onLastPage(args) {
        this.ngZone.run(() => {
            this.lastPage.next(args);
        });
    }
    /**
     * Event fired on paging size change
     */
    onPageSizeChange(args) {
        this.ngZone.run(() => {
            this.pageSizeChange.next(args);
        });
    }
    /**
     * Event fired before paging
     */
    onBeforePaging(args) {
        this.ngZone.run(() => {
            this.beforePaging.next(args);
        });
    }
    /**
     * Event fired after paging
     */
    onAfterPaging(args) {
        this.ngZone.run(() => {
            this.afterPaging.next(args);
        });
    }
    /**
     * Event fired after vertical scroll
     */
    onVerticalScroll(args) {
        this.ngZone.run(() => {
            this.verticalScroll.next(args);
        });
    }
    /**
     * Event fired after vertical scroll
     */
    onFilterOperatorChanged(args) {
        this.ngZone.run(() => {
            this.filteroperatorchanged.next(args);
        });
    }
    /**
     * Returns the row dom jQuery node.
     *
     * @param  row The row index.
     * @param  includeGroups If true groups are taken into account.
     * @return The dom jQuery node
     */
    rowNode(row, includeGroups) {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid?.rowNode(row, includeGroups);
        });
    }
    /**
     * Returns the cell dom node.
     *
     * @param  row The row index.
     * @param  cell The cell index.
     * @param  includeGroups If true groups are taken into account.
     * @return The dom node
     */
    cellNode(row, cell, includeGroups) {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid?.cellNode(row, cell, includeGroups);
        });
    }
    /**
     * Expand Detail Row Or Tree Row
     * @param {number} dataRowIndex The row to toggle
     */
    toggleRowDetail(dataRowIndex) {
        return this.ngZone.runOutsideAngular(() => {
            return this.datagrid?.toggleRowDetail(dataRowIndex);
        });
    }
    // ------------------------------------------
    // Lifecycle Events
    // ------------------------------------------
    /**
     * Initialize the component after Angular initializes the data-bound input properties.
     */
    ngOnInit() {
        this.updateSource(this._gridOptions.source);
    }
    /**
     * Called after Angular projects external content into its view.
     */
    ngAfterViewInit() {
        // Once the view is created and ready, initiaise the data grid component.
        this.buildDataGrid();
    }
    /**
     *
     */
    ngAfterViewChecked() {
        if (this.refreshHint !== RefreshHintFlags.None) {
            this.updated(this._gridOptions);
        }
    }
    /**
     * Cleanup just before Angular destroys the component.
     *
     * Unsubscribe observables, detach event handlers and remove other resources to avoid memory leaks.
     */
    ngOnDestroy() {
        this.destroyDataGrid();
    }
    // -------------------------------------------
    // Private Members
    // -------------------------------------------
    /**
     * Destroys the jQuery control (and any other resources)
     * associated with this component.
     */
    destroyDataGrid() {
        // Remove any remaining dynamic components.
        this.cellComponents.forEach((c) => {
            c.component.destroy();
        });
        // Clear the cache.
        this.cellComponents = [];
        // Remove rowTemplate dynamic components.
        if (this.rowTemplateComponents && this.rowTemplateComponents.length > 0) {
            this.rowTemplateComponents.forEach((c) => {
                c.component.destroy();
            });
            this.rowTemplateComponents = [];
        }
        // Now destroy the grid.
        if (this.datagrid) {
            if (this.datagrid.destroy) {
                this.ngZone.runOutsideAngular(() => {
                    this.datagrid?.destroy();
                });
            }
            this.datagrid = null;
        }
    }
    /**
     * Handles the 'postCellRender' event.
     *
     * @param container the container to host the element.
     * @param args the formatter arguments.
     */
    onPostRenderCellHandler(container, args) {
        // Pre-conditions
        if (!args.col.component) {
            return; // throw Error(`Missing 'component' in column ${args.col.id}`);
        }
        // Get the factory for the component specified on the column.
        const factory = this.resolver.resolveComponentFactory(args.col.component);
        // Create an injector that will provide the arguments for the
        // component.
        // const injector = ReflectiveInjector.resolveAndCreate([{ provide: 'args', useValue: args }], this.injector);
        const injector = Injector.create({ providers: [{ provide: 'args', useValue: args }], parent: this.injector });
        // Create the component, in the container.
        const component = factory.create(injector, [], container);
        // Copy into it any column level Inputs, these are optional but allow
        // column specific overrides to be defined.
        Object.assign(component.instance, args.col.componentInputs);
        // ... attach to the app ...
        this.app.attachView(component.hostView);
        // ... update for changes ...
        component.changeDetectorRef.detectChanges();
        // Do this at the end?
        // ... finally store the created component for later, we'll delete it when
        // requested, or when the grid is destroyed.
        this.cellComponents.push({ row: args.row, cell: args.cell, component });
    }
    /**
     * Handles the 'destroyCell' event.
     *
     * @param container the container.
     * @param args the args
     */
    onDestroyCellHandler(args) {
        const idx = this.cellComponents.findIndex((c) => args.row === c.row && args.cell === c.cell);
        if (idx > -1) {
            this.cellComponents[idx].component.destroy();
            this.cellComponents.splice(idx, 1);
        }
    }
    onEditCellHandler(editor) {
        // Pre-conditions
        if (!editor.component) {
            return; // throw Error(`Missing 'component' in column ${args.col.id}`);
        }
        // Get the factory for the component specified on the column.
        const factory = this.resolver.resolveComponentFactory(editor.component);
        // Create an injector that will provide the arguments for the
        // component.
        // const i = ReflectiveInjector.resolveAndCreate([{ provide: 'args', useValue: editor.args }], this.injector);
        const i = Injector.create({
            providers: [{ provide: 'args', useValue: editor.args }],
            parent: this.injector
        });
        // Warning!! the dynamic component is not added inside the container,
        // but as a sibling, so when it's destroyed it takes any siblings  with
        // it.  It is not clear why this - so to work around this issue, add
        // a single child to the cell container.
        const transientContainer = $('<div></div>').appendTo(editor.args.container);
        // Create the component, in the container.
        const componentRef = factory.create(i, [], transientContainer[0]);
        // Copy into it any column level Inputs, these are optional but allow
        // column specific overrides to be defined.
        Object.assign(componentRef.instance, editor.args.col.editorComponentInputs);
        // ... attach to the app ...
        this.app.attachView(componentRef.hostView);
        // ... update for changes ...
        componentRef.changeDetectorRef.detectChanges();
        // Give the component to the editor.
        editor.init(componentRef);
    }
    buildDataGrid() {
        // call outside the angular zone so change detection
        // isn't triggered by the soho component.
        this.ngZone.runOutsideAngular(() => {
            // Wrap the element in a jQuery selector.
            this.jQueryElement = jQuery(this.elementRef.nativeElement);
            // Add the onPostCellRenderer
            if (!this._gridOptions.onPostRenderCell) {
                this._gridOptions.onPostRenderCell = (c, args) => {
                    this.onPostRenderCellHandler(c, args);
                };
            }
            // Add the destroy cell callback.
            if (!this._gridOptions.onDestroyCell) {
                this._gridOptions.onDestroyCell = (_, args) => {
                    this.onDestroyCellHandler(args);
                };
            }
            // Add the edit cell callback.
            if (!this._gridOptions.onEditCell) {
                this._gridOptions.onEditCell = (editor) => {
                    this.onEditCellHandler(editor);
                };
            }
            // Add the keydown callback.
            if (!this._gridOptions.onKeyDown) {
                this._gridOptions.onKeyDown = (e, args, response) => {
                    this.onKeyDownHandler(e, args, response);
                };
            }
            // Initialise any event handlers.
            this.jQueryElement
                .on('addrow', (_e, args) => this.onRowAdd(args))
                .on('cellchange', (_e, args) => this.onCellChange(args))
                .on('click', (_e, args) => this.onRowClicked(args))
                .on('closefilterrow', (_e, args) => this.onCloseFilterRow(args))
                .on('collapserow', (_e, args) => this.onCollapseRow(args))
                .on('contextmenu', (_e, args) => this.onContextMenu(args))
                .on('dblclick', (_e, args) => this.onDoubleClick(args))
                .on('beforeentereditmode', (_e, args) => this.onBeforeEnterEditMode(args))
                .on('exiteditmode', (_e, args) => this.onExitEditMode(args))
                .on('entereditmode', (_e, args) => this.onEnterEditMode(args))
                .on('expandrow', (_e, args) => this.onExpandRowHandler(args))
                .on('filtered', (_e, args) => this.onFiltered(args))
                .on('openfilterrow', (_e, args) => this.onOpenFilterRow(args))
                .on('rowremove', (_e, args) => this.onRowRemove(args))
                .on('rendered', (_e, args) => this.onRendered(args))
                .on('afterrender', (_e, args) => this.onAfterRender(args))
                .on('beforerowactivated', (_e, args) => this.onBeforeRowActivated(args))
                .on('rowactivated', (_e, args) => this.onRowActivated(args))
                .on('rowdeactivated', (_e, args) => this.onRowDeactivated(args))
                .on('rowreorder', (_e, args) => this.onRowReordered(args))
                .on('selected', (e, args, type, rowData) => this.onSelected({ e, rows: args, type, rowData }))
                .on('settingschanged', (_e, args) => this.onSettingsChanged(args))
                .on('sorted', (_e, args) => this.onSorted(args))
                .on('beforepaging', (_e, args) => this.onBeforePaging(args))
                .on('afterpaging', (_e, args) => this.onAfterPaging(args))
                .on('scroll', (_e, args) => this.onVerticalScroll(args))
                .on('filteroperatorchanged', (_e, args) => this.onFilterOperatorChanged(args))
                .on('nextpage', (_e, args) => this.onNextPage(args))
                .on('previouspage', (_e, args) => this.onPreviousPage(args))
                .on('firstpage', (_e, args) => this.onFirstPage(args))
                .on('lastpage', (_e, args) => this.onLastPage(args))
                .on('pagesizechange', (_e, args) => this.onPageSizeChange(args));
        });
        // Initialise the SohoXi control.
        this.jQueryElement?.datagrid(this._gridOptions);
        this.jQueryElement?.removeAttr('role');
        // Once the control is initialised, extract the control
        // plug-in from the element.  The element name is
        // defined by the plug-in, but in this case is 'datagrid'.
        this.datagrid = this.jQueryElement?.data('datagrid');
        // If "auto" and there's a service, get the columns from it.
        // (may want to check if columns have already been set? Error?)
        if (this.datagridType === SohoDataGridComponent.AUTO && this.datagridService) {
            // Bootstrap from service, note this is not async.
            this.columns = this.datagridService.getColumns();
            // Once the columns are set, request the data (paging?)
            this.datagridService.getData(null)
                .subscribe((data) => {
                this.ngZone.runOutsideAngular(() => {
                    this.datagrid?.loadData(data);
                });
            });
        }
        else if (this.gridData) {
            // Not using a service, so use the pre-loaded data.
            this.ngZone.runOutsideAngular(() => {
                this.datagrid?.loadData(this.gridData);
            });
        }
    }
    /**
     * Marks the components as requiring a rebuild after the next update.
     *
     * @todo possible add hints? Rebuild, Update, SetOption
     *
     * @param optionName - the option that was updated, (allowing specific handling)
     * @param hint - the type of refresh required, update?.
     */
    markForRefresh(optionName, hint) {
        // Merge in the hint.
        this.refreshHint |= hint; // eslint-disable-line
        // ... so we can use it later
        this.changedOptions.push(optionName);
        // ... make sure the change detector kicks in, otherwise if the inputs
        // were change programmatially the component may not be eligible for
        // updating.
        this.changeDetector.markForCheck();
    }
    /**
     * Stop gap method to update the current datagrid and rebuild it again.
     *
     * This is required whilst there is no method found that can update the view
     * for a particular input.
     */
    updated(settings) {
        if (settings) {
            this._gridOptions = Soho.utils.mergeSettings(this.elementRef[0], settings, this._gridOptions);
        }
        this.ngZone.runOutsideAngular(() => {
            if (!this.refreshHint) {
                this.datagrid?.updated(this._gridOptions);
            }
            else if (settings && this.refreshHint & RefreshHintFlags.Rebuild) {
                this.datagrid?.updated(this._gridOptions);
            }
            else if (this.refreshHint & RefreshHintFlags.Rebuild) {
                this.datagrid?.renderHeader();
                this.datagrid?.renderRows();
            }
            else if (this.refreshHint & RefreshHintFlags.RenderHeader) { // eslint-disable-line
                this.datagrid?.renderHeader();
            }
            else if (this.refreshHint & RefreshHintFlags.RenderRows) { // eslint-disable-line
                this.datagrid?.renderRows();
            }
        });
        // Reset the flags.
        this.refreshHint = RefreshHintFlags.None;
        this.changedOptions = [];
    }
    /**
     * Updates the source setting/function to use source input if set.
     * Otherwise use dataGridService if that is set.
     *
     * @param source the function
     */
    updateSource(source) {
        // If a source property has not been defined, and a service has
        // use the data service to load the data dynamically for paging.
        if (!source && this.datagridService) {
            this._gridOptions.source = (request, response) => {
                this.onDataRequest(request, response);
            };
        }
        else if (source && typeof source === 'function') {
            this._gridOptions.source = (request, response) => {
                this.ngZone.run(() => source(request, response));
            };
        }
    }
    checkForComponentEditors() {
        // Add an adapter for all the columns using an component as an editor.
        this._gridOptions.columns.forEach((c) => {
            if (c.editorComponent) {
                // Use a `function expression` rather than an `arrow function` as the editor is used
                // as constructor.
                // teslint-disable-next-line max-len
                c.editor = function (row, cell, value, container, col, e, api, item) {
                    // @ts-ignore
                    return new SohoAngularEditorAdapter(c.editorComponent, { row, cell, value, container: container[0], col, e, api, item });
                };
            }
        });
    }
    checkForSummaryRowSettings() {
        if (!this._gridOptions.summaryRowColumns || this._gridOptions.summaryRowColumns.length === 0) {
            this._gridOptions.columns.forEach((c) => {
                c.summaryRowFormatter = undefined;
                c.summaryText = undefined;
                c.aggregator = undefined;
                c.summaryTextPlacement = undefined;
            });
        }
        else {
            this._gridOptions.summaryRowColumns.forEach((sc) => {
                const column = this._gridOptions.columns.find((c) => c.field === sc.field);
                column.summaryRowFormatter = sc.summaryRowFormatter;
                column.summaryText = sc.summaryText;
                column.aggregator = sc.aggregator;
                column.summaryTextPlacement = sc.summaryTextPlacement;
            });
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoDataGridComponent, deps: [{ token: i0.NgZone }, { token: i0.ElementRef }, { token: i0.ChangeDetectorRef }, { token: i0.ComponentFactoryResolver }, { token: i0.Injector }, { token: i0.ApplicationRef }, { token: i1.SohoDataGridService, optional: true }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoDataGridComponent, selector: "[soho-datagrid]", inputs: { gridOptions: "gridOptions", idProperty: "idProperty", frozenColumns: "frozenColumns", cellNavigation: "cellNavigation", rowNavigation: "rowNavigation", alternateRowShading: "alternateRowShading", dataset: "dataset", columnReorder: "columnReorder", disableClientSort: "disableClientSort", disableClientFilter: "disableClientFilter", resultsText: "resultsText", showFilterTotal: "showFilterTotal", editable: "editable", isRowDisabled: "isRowDisabled", allowOneExpandedRow: "allowOneExpandedRow", rowTemplate: "rowTemplate", rowTemplateComponent: "rowTemplateComponent", rowTemplateComponentInputs: "rowTemplateComponentInputs", rowTemplateField: "rowTemplateField", selectOnEdit: "selectOnEdit", isList: "isList", menuId: "menuId", menuBeforeOpen: "menuBeforeOpen", rowHeight: "rowHeight", fixedRowHeight: "fixedRowHeight", selectable: "selectable", showSelectAllCheckBox: "showSelectAllCheckBox", clickToSelect: "clickToSelect", toolbar: "toolbar", initializeToolbar: "initializeToolbar", saveUserSettings: "saveUserSettings", paging: "paging", pagesize: "pagesize", pagesizes: "pagesizes", indeterminate: "indeterminate", actionableMode: "actionableMode", saveColumns: "saveColumns", source: "source", filterable: "filterable", filterWhenTyping: "filterWhenTyping", treeGrid: "treeGrid", uniqueId: "uniqueId", rowReorder: "rowReorder", showDirty: "showDirty", resizeMode: "resizeMode", headerBackgroundColor: "headerBackgroundColor", headerMenuId: "headerMenuId", headerMenuSelected: "headerMenuSelected", headerMenuBeforeOpen: "headerMenuBeforeOpen", disableRowDeactivation: "disableRowDeactivation", disableRowDeselection: "disableRowDeselection", userObject: "userObject", groupable: "groupable", data: "data", columns: "columns", summaryRowColumns: "summaryRowColumns", spacerColumn: "spacerColumn", sizeColumnsEqually: "sizeColumnsEqually", expandableRow: "expandableRow", redrawOnResize: "redrawOnResize", exportConvertNegative: "exportConvertNegative", stickyHeader: "stickyHeader", attributes: "attributes", columnSizing: "columnSizing", stretchColumn: "stretchColumn", stretchColumnOnChange: "stretchColumnOnChange", showPageSizeSelector: "showPageSizeSelector", hidePagerOnOnePage: "hidePagerOnOnePage", columnGroup: "columnGroup", emptyMessage: "emptyMessage", enableTooltips: "enableTooltips", selectChildren: "selectChildren", allowChildExpandOnMatch: "allowChildExpandOnMatch", sohoDatagrid: ["soho-datagrid", "sohoDatagrid"], onBeforeSelect: "onBeforeSelect", allowSelectAcrossPages: "allowSelectAcrossPages", selectAllCurrentPage: "selectAllCurrentPage", columnIds: "columnIds", showNewRowIndicator: "showNewRowIndicator", onExpandChildren: "onExpandChildren", onCollapseChildren: "onCollapseChildren", onPostRenderCell: "onPostRenderCell", onDestroyCell: "onDestroyCell", onEditCell: "onEditCell", onKeyDown: "onKeyDown", onExpandRow: "onExpandRow", fallbackImage: "fallbackImage", fallbackTooltip: "fallbackTooltip" }, outputs: { selected: "selected", cellchange: "cellchange", rowRemove: "rowRemove", rowAdd: "rowAdd", filtered: "filtered", expandrow: "expandrow", keydown: "keydown", exiteditmode: "exiteditmode", beforeentereditmode: "beforeentereditmode", entereditmode: "entereditmode", collapserow: "collapserow", sorted: "sorted", nextPage: "nextPage", previousPage: "previousPage", firstPage: "firstPage", lastPage: "lastPage", pageSizeChange: "pageSizeChange", beforePaging: "beforePaging", afterPaging: "afterPaging", beforeRowActivated: "beforeRowActivated", rowActivated: "rowActivated", rowDeactivated: "rowDeactivated", rowClicked: "rowClicked", rowDoubleClicked: "rowDoubleClicked", contextMenu: "contextMenu", rowReordered: "rowReordered", openFilterRow: "openFilterRow", closeFilterRow: "closeFilterRow", settingsChanged: "settingsChanged", rendered: "rendered", afterRender: "afterRender", verticalScroll: "verticalScroll", filteroperatorchanged: "filteroperatorchanged" }, host: { properties: { "class.is-disabled": "this.isDisabled", "attr.role": "this.datagridRole" } }, ngImport: i0, template: ' <ng-content></ng-content>', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoDataGridComponent, decorators: [{
            type: Component,
            args: [{
                    selector: '[soho-datagrid]',
                    template: ' <ng-content></ng-content>',
                    changeDetection: ChangeDetectionStrategy.OnPush
                }]
        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: i0.ElementRef }, { type: i0.ChangeDetectorRef }, { type: i0.ComponentFactoryResolver }, { type: i0.Injector }, { type: i0.ApplicationRef }, { type: i1.SohoDataGridService, decorators: [{
                    type: Optional
                }] }]; }, propDecorators: { gridOptions: [{
                type: Input
            }], idProperty: [{
                type: Input
            }], frozenColumns: [{
                type: Input
            }], cellNavigation: [{
                type: Input
            }], rowNavigation: [{
                type: Input
            }], alternateRowShading: [{
                type: Input
            }], dataset: [{
                type: Input
            }], columnReorder: [{
                type: Input
            }], disableClientSort: [{
                type: Input
            }], disableClientFilter: [{
                type: Input
            }], resultsText: [{
                type: Input
            }], showFilterTotal: [{
                type: Input
            }], editable: [{
                type: Input
            }], isRowDisabled: [{
                type: Input
            }], allowOneExpandedRow: [{
                type: Input
            }], rowTemplate: [{
                type: Input
            }], rowTemplateComponent: [{
                type: Input
            }], rowTemplateComponentInputs: [{
                type: Input
            }], rowTemplateField: [{
                type: Input
            }], selectOnEdit: [{
                type: Input
            }], isList: [{
                type: Input
            }], menuId: [{
                type: Input
            }], menuBeforeOpen: [{
                type: Input
            }], rowHeight: [{
                type: Input
            }], fixedRowHeight: [{
                type: Input
            }], selectable: [{
                type: Input
            }], showSelectAllCheckBox: [{
                type: Input
            }], clickToSelect: [{
                type: Input
            }], toolbar: [{
                type: Input
            }], initializeToolbar: [{
                type: Input
            }], saveUserSettings: [{
                type: Input
            }], paging: [{
                type: Input
            }], pagesize: [{
                type: Input
            }], pagesizes: [{
                type: Input
            }], indeterminate: [{
                type: Input
            }], actionableMode: [{
                type: Input
            }], saveColumns: [{
                type: Input
            }], source: [{
                type: Input
            }], filterable: [{
                type: Input
            }], filterWhenTyping: [{
                type: Input
            }], treeGrid: [{
                type: Input
            }], uniqueId: [{
                type: Input
            }], rowReorder: [{
                type: Input
            }], showDirty: [{
                type: Input
            }], resizeMode: [{
                type: Input
            }], headerBackgroundColor: [{
                type: Input
            }], headerMenuId: [{
                type: Input
            }], headerMenuSelected: [{
                type: Input
            }], headerMenuBeforeOpen: [{
                type: Input
            }], disableRowDeactivation: [{
                type: Input
            }], disableRowDeselection: [{
                type: Input
            }], userObject: [{
                type: Input
            }], groupable: [{
                type: Input
            }], data: [{
                type: Input
            }], columns: [{
                type: Input
            }], summaryRowColumns: [{
                type: Input
            }], spacerColumn: [{
                type: Input
            }], sizeColumnsEqually: [{
                type: Input
            }], expandableRow: [{
                type: Input
            }], redrawOnResize: [{
                type: Input
            }], exportConvertNegative: [{
                type: Input
            }], stickyHeader: [{
                type: Input
            }], attributes: [{
                type: Input
            }], columnSizing: [{
                type: Input
            }], stretchColumn: [{
                type: Input
            }], stretchColumnOnChange: [{
                type: Input
            }], showPageSizeSelector: [{
                type: Input
            }], hidePagerOnOnePage: [{
                type: Input
            }], columnGroup: [{
                type: Input
            }], emptyMessage: [{
                type: Input
            }], enableTooltips: [{
                type: Input
            }], selectChildren: [{
                type: Input
            }], allowChildExpandOnMatch: [{
                type: Input
            }], sohoDatagrid: [{
                type: Input,
                args: ['soho-datagrid']
            }], selected: [{
                type: Output
            }], cellchange: [{
                type: Output
            }], rowRemove: [{
                type: Output
            }], rowAdd: [{
                type: Output
            }], filtered: [{
                type: Output
            }], expandrow: [{
                type: Output
            }], keydown: [{
                type: Output
            }], exiteditmode: [{
                type: Output
            }], beforeentereditmode: [{
                type: Output
            }], entereditmode: [{
                type: Output
            }], collapserow: [{
                type: Output
            }], sorted: [{
                type: Output
            }], nextPage: [{
                type: Output
            }], previousPage: [{
                type: Output
            }], firstPage: [{
                type: Output
            }], lastPage: [{
                type: Output
            }], pageSizeChange: [{
                type: Output
            }], beforePaging: [{
                type: Output
            }], afterPaging: [{
                type: Output
            }], beforeRowActivated: [{
                type: Output
            }], rowActivated: [{
                type: Output
            }], rowDeactivated: [{
                type: Output
            }], rowClicked: [{
                type: Output
            }], rowDoubleClicked: [{
                type: Output
            }], contextMenu: [{
                type: Output
            }], rowReordered: [{
                type: Output
            }], openFilterRow: [{
                type: Output
            }], closeFilterRow: [{
                type: Output
            }], settingsChanged: [{
                type: Output
            }], rendered: [{
                type: Output
            }], afterRender: [{
                type: Output
            }], verticalScroll: [{
                type: Output
            }], filteroperatorchanged: [{
                type: Output
            }], isDisabled: [{
                type: HostBinding,
                args: ['class.is-disabled']
            }], datagridRole: [{
                type: HostBinding,
                args: ['attr.role']
            }], onBeforeSelect: [{
                type: Input
            }], allowSelectAcrossPages: [{
                type: Input
            }], selectAllCurrentPage: [{
                type: Input
            }], columnIds: [{
                type: Input
            }], showNewRowIndicator: [{
                type: Input
            }], onExpandChildren: [{
                type: Input
            }], onCollapseChildren: [{
                type: Input
            }], onPostRenderCell: [{
                type: Input
            }], onDestroyCell: [{
                type: Input
            }], onEditCell: [{
                type: Input
            }], onKeyDown: [{
                type: Input
            }], onExpandRow: [{
                type: Input
            }], fallbackImage: [{
                type: Input
            }], fallbackTooltip: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1kYXRhZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9pZHMtZW50ZXJwcmlzZS1uZy9zcmMvbGliL2RhdGFncmlkL3NvaG8tZGF0YWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFTCx1QkFBdUIsRUFFdkIsU0FBUyxFQUdULE1BQU0sRUFDTixZQUFZLEVBQ1osV0FBVyxFQUNYLEtBQUssRUFDTCxRQUFRLEVBSVIsUUFBUSxFQUtULE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQzs7O0FBb0MxRCxNQUFNLE9BQU8sd0JBQXdCO0lBV25DLFlBQ1MsU0FBdUMsRUFDdkMsSUFBc0M7UUFEdEMsY0FBUyxHQUFULFNBQVMsQ0FBOEI7UUFDdkMsU0FBSSxHQUFKLElBQUksQ0FBa0M7UUFSL0MsK0RBQStEO1FBQy9ELGFBQVEsR0FBRyxJQUFJLENBQUM7SUFRaEIsQ0FBQztJQUVELElBQUksQ0FBQyxZQUFrRDtRQUNyRCx1QkFBdUI7UUFDdkIsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFFakMsZ0ZBQWdGO1FBQ2hGLGtCQUFrQjtRQUNsQixxREFBcUQ7UUFDckQsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRO2VBQ3RDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFNBQVM7WUFDdkMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBQ3ZELENBQUM7SUFF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SztnQkFhTyxhQUFhO3NCQUF6QixLQUFLO2dCQWFPLFVBQVU7c0JBQXRCLEtBQUs7Z0JBYU8sU0FBUztzQkFBckIsS0FBSztnQkFhTyxXQUFXO3NCQUF2QixLQUFLO2dCQVNPLGFBQWE7c0JBQXpCLEtBQUs7Z0JBZ0JPLGVBQWU7c0JBQTNCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENvbXBvbmVudCxcbiAgQWZ0ZXJWaWV3Q2hlY2tlZCxcbiAgRWxlbWVudFJlZixcbiAgT3V0cHV0LFxuICBFdmVudEVtaXR0ZXIsXG4gIEhvc3RCaW5kaW5nLFxuICBJbnB1dCxcbiAgT3B0aW9uYWwsXG4gIE9uSW5pdCxcbiAgT25EZXN0cm95LFxuICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gIEluamVjdG9yLFxuICBBcHBsaWNhdGlvblJlZixcbiAgQ29tcG9uZW50UmVmLFxuICBUeXBlLFxuICBOZ1pvbmVcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IEFyZ3VtZW50SGVscGVyIH0gZnJvbSAnLi4vdXRpbHMvYXJndW1lbnQuaGVscGVyJztcbmltcG9ydCB7IFNvaG9EYXRhR3JpZFNlcnZpY2UgfSBmcm9tICcuL3NvaG8tZGF0YWdyaWQuc2VydmljZSc7XG5cbmV4cG9ydCB0eXBlIFNvaG9EYXRhR3JpZFR5cGUgPSAnYXV0bycgfCAnY29udGVudC1vbmx5JztcblxuLyoqXG4gKiBDb250cmFjdCBmb3IgY2VsbCBlZGl0b3JzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEV4dGVuZGVkU29ob0RhdGFHcmlkQ2VsbEVkaXRvciBleHRlbmRzIFNvaG9EYXRhR3JpZENlbGxFZGl0b3Ige1xuICAvLyBUaGUgdHlwZSBvZiB0aGUgY29tcG9uZW50LlxuICBjb21wb25lbnQ6IFR5cGU8U29ob0RhdGFHcmlkQ2VsbEVkaXRvcj47XG5cbiAgLy8gVGhlIGFyZ3MgcGFzc2VkIHRvIHRoZSBlZGl0b3JcbiAgYXJnczogU29ob0RhdGFHcmlkRWRpdENlbGxGdW5jdGlvbkFyZ3M7XG5cbiAgLy8gVGhpcyBpcyB0aGUgaW5wdXQgZWxlbWVudCAoc2luZ2xlKSB3aXRoaW4gdGhlIGZpZWxkXG4gIGlucHV0PzogSlF1ZXJ5PEhUTUxFbGVtZW50PjtcblxuICAvLyBVc2UgdGhlIGRpcmVjdCB2YWx1ZSBmcm9tIHRoZSBkYXRhc2V0IHZzIHRoZSBmb3JtYXR0ZWQgdmFsdWVcbiAgdXNlVmFsdWU6IGJvb2xlYW47XG5cbiAgLy8gVGhlIHBhcmVudCBjbGFzcyBvZiB0aGUgaW5uZXIgZWRpdG9yLiBVc2VkIHRvIGRldGVybWluZSBpZiBvcGVuIG9yIG5vdC5cbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXNlIHRoZSBlZGl0IGNvbnRyb2wgd2l0aCB0aGUgZ2l2ZW4gY29tcG9uZW50LiAgVGhlIGNvbnRyb2xcbiAgICogbWlzdCBjb25mb3JtIHRvIHRoZSBTb2hvRGF0YUdyaWRDZWxsRWRpdG9yIGNvbnRyYWN0LlxuICAgKi9cbiAgaW5pdChjb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxTb2hvRGF0YUdyaWRDZWxsRWRpdG9yPik6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgdGhlIGVkaXRvci5cbiAgICovXG4gIGRlc3Ryb3koKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIFNvaG9Bbmd1bGFyRWRpdG9yQWRhcHRlciBpbXBsZW1lbnRzIEV4dGVuZGVkU29ob0RhdGFHcmlkQ2VsbEVkaXRvciB7XG4gIGNvbXBvbmVudFJlZj86IENvbXBvbmVudFJlZjxTb2hvRGF0YUdyaWRDZWxsRWRpdG9yPiB8IG51bGw7XG5cbiAgaW5wdXQ/OiBKUXVlcnk8SFRNTEVsZW1lbnQ+O1xuXG4gIC8vIFVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gdGhlIGRhdGFzZXQgdnMgdGhlIGZvcm1hdHRlZCB2YWx1ZVxuICB1c2VWYWx1ZSA9IHRydWU7XG5cbiAgLy8gVGhlIHBhcmVudCBjbGFzcyBvZiB0aGUgaW5uZXIgZWRpdG9yLiBVc2VkIHRvIGRldGVybWluZSBpZiBvcGVuIG9yIG5vdC5cbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBjb21wb25lbnQ6IFR5cGU8U29ob0RhdGFHcmlkQ2VsbEVkaXRvcj4sXG4gICAgcHVibGljIGFyZ3M6IFNvaG9EYXRhR3JpZEVkaXRDZWxsRnVuY3Rpb25BcmdzKSB7XG4gIH1cblxuICBpbml0KGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPFNvaG9EYXRhR3JpZENlbGxFZGl0b3I+KSB7XG4gICAgLy8gU3RvcmUgdGhlIGNvbXBvbmVudC5cbiAgICB0aGlzLmNvbXBvbmVudFJlZiA9IGNvbXBvbmVudFJlZjtcblxuICAgIC8vIFRoZSBTb2hvIGRhdGFncmlkIHdhbnRzIGFuIGlucHV0IGNvbnRyb2wsIG90aGVyd2lzZSBpdCB3b250IGFjY2VwdCB0aGUgZWRpdG9yXG4gICAgLy8gYXMgYSBjb21wb25lbnQuXG4gICAgLy8gQHRvZG8gdGFsayB0byBUaW0gYWJvdXQgcmVtb3ZpbmcgdGhpcyByZXF1aXJlbWVudC5cbiAgICB0aGlzLmlucHV0ID0gJCh0aGlzLmNvbXBvbmVudFJlZi5sb2NhdGlvbi5uYXRpdmVFbGVtZW50KS5maW5kKCdpbnB1dDpmaXJzdCcpO1xuICAgIHRoaXMuY2xhc3NOYW1lID0gdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2VcbiAgICAgICYmIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmNsYXNzTmFtZVxuICAgICAgPyB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5jbGFzc05hbWUgOiAnLmVkaXRvcic7XG4gIH1cblxuICB2YWwodmFsdWU/OiBhbnkpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudFJlZj8uaW5zdGFuY2UudmFsKHZhbHVlKTtcbiAgfVxuXG4gIGZvY3VzKCk6IHZvaWQge1xuICAgIHRoaXMuY29tcG9uZW50UmVmPy5pbnN0YW5jZS5mb2N1cygpO1xuICB9XG5cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb21wb25lbnRSZWYpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmNvbXBvbmVudFJlZj8uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudFJlZiA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBJbnRlcm5hbCByZWZyZXNoIGhpbnRzIHVzZWQgdG8gZGV0ZXJtaW5lIHdoYXQgdHlwZSBvZiBcInJlZnJlc2hcIiBpc1xuICogcmVxdWlyZWQgYWZ0ZXIgdGhlIGNoYW5nZSBkZXRlY3Rpb24gcHJvY2VzcyBoYXMgY29tcGxldGVkIGFuZCB0aGVcbiAqIEFmdGVyVmlld0NoZWNrZWQgbWV0aG9kIGlzIGNhbGxlZC5cbiAqXG4gKiBAdG9kbyByZXNvbHZlIG5vLXNoYWRvd1xuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2hhZG93XG5lbnVtIFJlZnJlc2hIaW50RmxhZ3Mge1xuICAvLyBObyByZWZyZXNoIHJlcXVpcmVkLlxuICBOb25lID0gMCxcbiAgLy8gVGhlIHJvd3MgbmVlZHMgdG8gYmUgcmUtcmVuZGVyZWQuXG4gIFJlbmRlclJvd3MgPSAxLFxuICAvLyBUaGUgaGVhZGVyIG5lZWRzIHRvIGJlIHJlLXJlbmVuZGVyZWQuXG4gIFJlbmRlckhlYWRlciA9IDIsXG4gIC8vIEEgZnVsbCByZWJ1aWxkIGlzIHJlcXVpcmVkLlxuICBSZWJ1aWxkID0gNFxufVxuXG4vKipcbiAqIEFuZ3VsYXIgV3JhcHBlciBmb3IgdGhlIFNvaG8gRGF0YSBHcmlkIENvbXBvbmVudC5cbiAqXG4gKiBUaGlzIGNvbXBvbmVudCBzZWFyY2hlcyBmb3IgYW4gZWxlbWVudCB3aXRoIHRoZSBhdHRyaWJ1dGVcbiAqICdzb2hvLWRhdGFncmlkJyBpbiB0aGUgcGFyZW50J3MgRE9NIHRyZWUsIGluaXRpYWxpc2luZyBpdCB3aXRoXG4gKiB0aGUgU29obyBkYXRhZ3JpZCBjb250cm9sLlxuICpcbiAqIFRoZSBkYXRhIGlzIHByb3ZpZGVkIGVpdGhlciBieSBhIGNvbXBvbmVudCBpbnB1dCBvciBhbiBpbXBsZW1lbnRhdGlvblxuICogb2YgdGhlIERhdGFHcmlkU2VydmljZSBpbnRlcmZhY2UsIGJ5IHNwZWNpZnlpbmcgYW4gaW1wbGVtZW50YXRpb25cbiAqIG9uIHRoZSBob3N0aW5nIGNvbXBvbmVudCwgaS5lLlxuICpcbiAqIHByb3ZpZGVyczogWyBwcm92aWRlOiBEYXRhR3JpZFNlcnZpY2UsIHVzZUNsYXNzOiBEYXRhR3JpZERlbW9TZXJ2aWNlfSBdXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ1tzb2hvLWRhdGFncmlkXScsIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgdGVtcGxhdGU6ICcgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PicsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9EYXRhR3JpZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBBZnRlclZpZXdDaGVja2VkIHtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFNvaG8gRGF0YSBHcmlkIFR5cGVzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBcImF1dG9cIiB3aGVyZSBjb2x1bW5zIGFuZCByb3dzIGFyZSBvYnRhaW5lZCBmcm9tIHRoZSBpbmplY3RlZCBzZXJ2aWNlXG4gIC8vIChpZiBkZWZpbmVkKSBvciB2aWEgdGhlIElucHV0cywgb3RoZXJ3aXNlLlxuICBzdGF0aWMgQVVUTzogU29ob0RhdGFHcmlkVHlwZSA9ICdhdXRvJztcblxuICAvLyAnY29udGVudC1vbmx5JyB3aGVyZSB0YWJsZSBlbGVtZW50cyBhcmUgdXNlZCB0byBkZWZpbmUgdGhlXG4gIC8vIGNvbHVtbnMgYW5kIHJvd3MuXG4gIHN0YXRpYyBDT05URU5UX09OTFk6IFNvaG9EYXRhR3JpZFR5cGUgPSAnY29udGVudC1vbmx5JztcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIENvbXBvbmVudCBJbnB1dHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBncmlkIG9wdGlvbnMgZm9yIHRoZSBkYXRhIGdyaWQsIG1hcmtpbmcgdGhpcyBjb21wb25lbnRzXG4gICAqIGFzIHJlcXVpcmluZyBhIGZ1bGwgcmVidWlsZCBhdCB0aGUgZW5kIG9mIHRoZSBjaGFuZ2UgbGlmZWN5Y2xlLlxuICAgKlxuICAgKiBAcGFyYW0gZ3JpZE9wdGlvbnMgLSBub3QgbnVsbCBncmlkIG9wdGlvbnMuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgZ3JpZE9wdGlvbnMoZ3JpZE9wdGlvbnM6IFNvaG9EYXRhR3JpZE9wdGlvbnMpIHtcbiAgICBBcmd1bWVudEhlbHBlci5jaGVja05vdE51bGwoJ2dyaWRPcHRpb25zJywgZ3JpZE9wdGlvbnMpO1xuXG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMgPSBncmlkT3B0aW9ucztcblxuICAgIHRoaXMuY2hlY2tGb3JDb21wb25lbnRFZGl0b3JzKCk7XG4gICAgdGhpcy5jaGVja0ZvclN1bW1hcnlSb3dTZXR0aW5ncygpO1xuXG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgLy8gTm8gbmVlZCB0byBzZXQgdGhlICdzZXR0aW5ncycgYXMgdGhlIFJlYnVpbGQgd2lsbCBjcmVhdGVcbiAgICAgIC8vIGEgbmV3IGNvbnRyb2wgd2l0aCB0aGUgX2dyaWRPcHRpb25zLlxuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnZ3JpZE9wdGlvbnMnLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuICBnZXQgZ3JpZE9wdGlvbnMoKTogU29ob0RhdGFHcmlkT3B0aW9ucyB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzO1xuICAgIH1cblxuICAgIC8vIC4uLiB3ZSd2ZSBiZWVuIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBoYXMgY29tcGxldGVkXG4gICAgLy8gaW5pdGlhbGlzYXRpb24sIHNvIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZVxuICAgIC8vIG9wdGlvbnMuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZXMgd2hpY2ggcHJvcGVydHkgaW4gdGhlIGRhdGEgcm93cyBpcyB0byBiZSB1c2VkIGFzIHRoZSBpZCBvZiBlYWNoXG4gICAqIHJvdyBvZiB0aGUgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIGlkUHJvcGVydHkgc3RyaW5nIGlkXG4gICAqL1xuICBASW5wdXQoKSBzZXQgaWRQcm9wZXJ0eShpZFByb3BlcnR5OiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5pZFByb3BlcnR5ID0gaWRQcm9wZXJ0eTtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5pZFByb3BlcnR5ID0gaWRQcm9wZXJ0eTtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ2lkUHJvcGVydHknLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpZFByb3BlcnR5KCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmlkUHJvcGVydHk7XG4gICAgfVxuXG4gICAgLy8gLi4uIHdlJ3ZlIGJlZW4gY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGhhcyBjb21wbGV0ZWRcbiAgICAvLyBpbml0aWFsaXNhdGlvbiwgc28gcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlXG4gICAgLy8gb3B0aW9ucy5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuaWRQcm9wZXJ0eTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgb2YgdGhlIGZyb3plbkNvbHVtbnMgb3B0aW9uIC0gcmV0dXJucyB0aGUgcmVxdWVzdGVkXG4gICAqIHZhbHVlIGlmIHRoZSBjb250cm9sIGhhcyBub3QgYmVlbiBjcmVhdGVkIHlldC5cbiAgICovXG4gIGdldCBmcm96ZW5Db2x1bW5zKCk6IFNvaG9EYXRhR3JpZEZyb3plbkNvbHVtbnMgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5mcm96ZW5Db2x1bW5zO1xuICAgIH1cblxuICAgIC8vIC4uLiB3ZSd2ZSBiZWVuIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBoYXMgY29tcGxldGVkXG4gICAgLy8gaW5pdGlhbGlzYXRpb24sIHNvIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZVxuICAgIC8vIG9wdGlvbnMuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLmZyb3plbkNvbHVtbnM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZnJvemVuQ29sdW1ucyBzZXR0aW5ncyAtIHdpbGwgZm9yY2UgYSBncmlkIHJlYnVpbGQgaWYgdGhlIGNvbXBvbmVudCBoYXMgYWxyZWFkeSBiZWVuXG4gICAqIGNyZWF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSBmcm96ZW5Db2x1bW5zIC0gdGhlIGZyb3plbkNvbHVtbnMgc2V0dGluZ3MuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgZnJvemVuQ29sdW1ucyhmcm96ZW5Db2x1bW5zOiBTb2hvRGF0YUdyaWRGcm96ZW5Db2x1bW5zIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuZnJvemVuQ29sdW1ucyA9IGZyb3plbkNvbHVtbnM7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZnJvemVuQ29sdW1ucyA9IGZyb3plbkNvbHVtbnM7XG5cbiAgICAgIC8vIEZvcmNlIGFsbCBhIGZ1bGwgcmVidWlsZCBvZiB0aGUgY29udHJvbC5cbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ2Zyb3plbkNvbHVtbnMnLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0cnVlIGFsbG93c1xuICAgKi9cbiAgQElucHV0KCkgc2V0IGNlbGxOYXZpZ2F0aW9uKGNlbGxOYXZpZ2F0aW9uOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuY2VsbE5hdmlnYXRpb24gPSBjZWxsTmF2aWdhdGlvbjtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLmNlbGxOYXZpZ2F0aW9uID0gY2VsbE5hdmlnYXRpb247XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdjZWxsTmF2aWdhdGlvbicsIFJlZnJlc2hIaW50RmxhZ3MuUmVuZGVyUm93cyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGNlbGxOYXZpZ2F0aW9uKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5jZWxsTmF2aWdhdGlvbjtcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5jZWxsTmF2aWdhdGlvbjtcbiAgfVxuXG4gIGdldCBpc1ZlcnRpY2FsU2Nyb2xsVG9FbmQoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLmlzVmVydGljYWxTY3JvbGxUb0VuZDtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQ2hhbmdlcyB0aGUgcm93IG5hdmlnYXRpb24gc2V0dGluZyBvZiB0aGUgZGF0YSBncmlkLiBJZiByb3dOYXZpZ2F0aW9uXG4gICAqIGlzIFwiZmFsc2XigJ0gdGhlbiBhIGJvcmRlciBpcyBub3QgZGlzcGxheWVkIGFyb3VuZCB0aGUgcm93LlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byB0cnVlLlxuICAgKlxuICAgKiBAcGFyYW0gcm93bE5hdmlnYXRpb24gaSBcImZhbHNl4oCdIHRoZW4gZ3JpZCB3aWxsIE5PVCBzaG93IGEgYm9yZGVyIGFyb3VuZCB0aGUgcm93LlxuICAgKi9cbiAgQElucHV0KCkgc2V0IHJvd05hdmlnYXRpb24ocm93TmF2aWdhdGlvbjogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnJvd05hdmlnYXRpb24gPSByb3dOYXZpZ2F0aW9uO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3Mucm93TmF2aWdhdGlvbiA9IHJvd05hdmlnYXRpb247XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdyb3dOYXZpZ2F0aW9uJywgUmVmcmVzaEhpbnRGbGFncy5SZW5kZXJSb3dzKTtcbiAgICB9XG4gIH1cblxuICBnZXQgcm93TmF2aWdhdGlvbigpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3Mucm93TmF2aWdhdGlvbjtcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5yb3dOYXZpZ2F0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRydWUsIGRpc3BsYXlzIHRoZSByb3dzIGluIHRoZSBncmlkIHVzaW5nIGFsdGVybmF0ZSBzaGFkaW5nLCBvdGhlcndpc2VcbiAgICogYWxsIHRoZSByb3dzIHVzZSB0aGUgc2FtZSBzaGFkaW5nLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGFsdGVybmF0ZVJvd1NoYWRpbmcoYWx0ZXJuYXRlUm93U2hhZGluZzogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmFsdGVybmF0ZVJvd1NoYWRpbmcgPSBhbHRlcm5hdGVSb3dTaGFkaW5nO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MuYWx0ZXJuYXRlUm93U2hhZGluZyA9IGFsdGVybmF0ZVJvd1NoYWRpbmc7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdhbHRlcm5hdGVSb3dTaGFkaW5nJywgUmVmcmVzaEhpbnRGbGFncy5SZW5kZXJSb3dzKTtcbiAgICB9XG4gIH1cblxuICBnZXQgYWx0ZXJuYXRlUm93U2hhZGluZygpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3Mucm93TmF2aWdhdGlvbjtcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5hbHRlcm5hdGVSb3dTaGFkaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkYXRhIHRvIGJlIGRpc3BsYXllZCBwcm92aWRlZCBhcyBhbiBhcnJheVxuICAgKiBvZiBqc29uIG9iamVjdHMgY29tcGF0aWJsZSB3aXRoIHRoZSBjb2x1bW4gbWV0YVxuICAgKiBkYXRhIHByb3ZpZGVkLlxuICAgKlxuICAgKiBAcGFyYW0gZGF0YXNldCAtIGFycmF5IG9mIGpzb24gb2JqZWN0c1xuICAgKi9cbiAgQElucHV0KCkgc2V0IGRhdGFzZXQoZGF0YXNldDogQXJyYXk8YW55PiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHBhZ2VySW5mbzogU29ob1BhZ2VyUGFnaW5nSW5mbyA9IHt9O1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5kYXRhc2V0ID0gZGF0YXNldDtcblxuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAvLyBAdG9kbyBkbyB3ZSBuZWVkIGhpbnRzIGFzIHRoaXMgbWF5IGJlIGJ1bmRsZWQgdXAgd2l0aCBvdGhlciBjaGFuZ2VzLlxuICAgICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnVwZGF0ZURhdGFzZXQoKGRhdGFzZXQgYXMgYW55KSwgcGFnZXJJbmZvKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRhdGFzZXQgY3VycmVudGx5IGRpc3BsYXllZCBieSB0aGUgZGF0YWdyaWQuXG4gICAqXG4gICAqIEByZXR1cm4gYW4gYXJyYXkgb2Ygb2JqZWN0cy5cbiAgICovXG4gIGdldCBkYXRhc2V0KCk6IGFueVtdIHwgdW5kZWZpbmVkIHtcblxuICAgIC8vIElmIHRoZSBTb2hvIGNvbnRyb2wgaGFzIGJlZW4gY3JlYXRlZCwgdGhlbiB0aGUgZGF0YXNldFxuICAgIC8vIGluIHRoZSBzZXR0aW5ncyBvYmplY3Qgd2lsbCBjb250YWluIHRoZSByb3dzIGN1cnJlbnRseVxuICAgIC8vIG9uIGRpc3BsYXkuXG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmRhdGFzZXQ7XG4gICAgfVxuXG4gICAgLy8gLi4uIHdlJ3ZlIGJlZW4gY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGhhcyBjb21wbGV0ZWRcbiAgICAvLyBpbml0aWFsaXNhdGlvbiwgc28gbm8gZGF0YSBoYXMgYmVlbiBzZXQgKG9yIHBvdGVudGlhbGx5XG4gICAgLy8gcmV0cmlldmVkIGZyb20gYSBzZXJ2aWNlKSwgc28gdGhlIG9ubHkgb3B0aW9uIGlzIHRoZVxuICAgIC8vIElucHV0IGRhdGFzZXQsIHdoaWNoIG1heSBiZSB1bmRlZmluZWQuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLmRhdGFzZXQgfHwgW107XG4gIH1cblxuICAvKipcbiAgICogSWYgdHJ1ZSB0aGUgY29sdW1ucyBjYW4gYmUgcmVvcmRlcnM7IG90aGVyd2lzZSBpZiBmYWxzZSB0aGV5IGFyZSBmaXhlZC5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBjb2x1bW5SZW9yZGVyKGNvbHVtblJlb3JkZXI6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5jb2x1bW5SZW9yZGVyID0gY29sdW1uUmVvcmRlcjtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5jb2x1bW5SZW9yZGVyID0gY29sdW1uUmVvcmRlcjtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ2NvbHVtblJlb3JkZXInLCBSZWZyZXNoSGludEZsYWdzLlJlbmRlckhlYWRlcik7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGNvbHVtblJlb3JkZXIoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmNvbHVtblJlb3JkZXI7XG4gICAgfVxuXG4gICAgLy8gLi4uIHdlJ3ZlIGJlZW4gY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGhhcyBjb21wbGV0ZWRcbiAgICAvLyBpbml0aWFsaXNhdGlvbiwgc28gcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlXG4gICAgLy8gb3B0aW9ucy5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuY29sdW1uUmVvcmRlcjtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBkaXNhYmxlQ2xpZW50U29ydChkaXNhYmxlQ2xpZW50U29ydDogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmRpc2FibGVDbGllbnRTb3J0ID0gZGlzYWJsZUNsaWVudFNvcnQ7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZGlzYWJsZUNsaWVudFNvcnQgPSBkaXNhYmxlQ2xpZW50U29ydDtcbiAgICB9XG4gIH1cblxuICBnZXQgZGlzYWJsZUNsaWVudFNvcnQoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmRpc2FibGVDbGllbnRTb3J0O1xuICAgIH1cblxuICAgIC8vIC4uLiB3ZSd2ZSBiZWVuIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBoYXMgY29tcGxldGVkXG4gICAgLy8gaW5pdGlhbGlzYXRpb24sIHNvIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZVxuICAgIC8vIG9wdGlvbnMuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLmRpc2FibGVDbGllbnRTb3J0O1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGRpc2FibGVDbGllbnRGaWx0ZXIoZGlzYWJsZUNsaWVudEZpbHRlcjogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmRpc2FibGVDbGllbnRGaWx0ZXIgPSBkaXNhYmxlQ2xpZW50RmlsdGVyO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmRpc2FibGVDbGllbnRGaWx0ZXIgPSBkaXNhYmxlQ2xpZW50RmlsdGVyO1xuICAgIH1cbiAgfVxuXG4gIGdldCBkaXNhYmxlQ2xpZW50RmlsdGVyKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5kaXNhYmxlQ2xpZW50RmlsdGVyO1xuICAgIH1cblxuICAgIC8vIC4uLiB3ZSd2ZSBiZWVuIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBoYXMgY29tcGxldGVkXG4gICAgLy8gaW5pdGlhbGlzYXRpb24sIHNvIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZVxuICAgIC8vIG9wdGlvbnMuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLmRpc2FibGVDbGllbnRGaWx0ZXI7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgcmVzdWx0c1RleHQocmVzdWx0c1RleHQ6IFNvaG9EYXRhR3JpZFJlc3VsdHNUZXh0RnVuY3Rpb24pIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5yZXN1bHRzVGV4dCA9IHJlc3VsdHNUZXh0O1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQgJiYgdGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5yZXN1bHRzVGV4dCA9IHJlc3VsdHNUZXh0O1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBzaG93RmlsdGVyVG90YWwoc2hvd0ZpbHRlclRvdGFsOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuc2hvd0ZpbHRlclRvdGFsID0gc2hvd0ZpbHRlclRvdGFsO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnNob3dGaWx0ZXJUb3RhbCA9IHNob3dGaWx0ZXJUb3RhbDtcbiAgICB9XG4gIH1cblxuICBnZXQgc2hvd0ZpbHRlclRvdGFsKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5zaG93RmlsdGVyVG90YWw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLnNob3dGaWx0ZXJUb3RhbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0cnVlLCB0aGUgZ3JpZCBhbGxvd3MgZWRpdHMsIG90aGVyd2lzZSBpZiBmYWxzZSBlZGl0cyBhcmUgZGlzYWJsZWQuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgZWRpdGFibGUoZWRpdGFibGU6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5lZGl0YWJsZSA9IGVkaXRhYmxlO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmVkaXRhYmxlID0gZWRpdGFibGU7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdlZGl0YWJsZScsIFJlZnJlc2hIaW50RmxhZ3MuUmVidWlsZCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGVkaXRhYmxlKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5lZGl0YWJsZTtcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5lZGl0YWJsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnB1dCB0aGF0IGRlZmluZXMgYSBmdW5jdGlvbiB3aGljaCBpcyB1c2VkIHRvIGRldGVybWluZSBpZiBhIHJvdyBpcyBkaXNhYmxlZCwgb3Igbm90LlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGlzUm93RGlzYWJsZWQoaXNSb3dEaXNhYmxlZDogU29ob0lzUm93RGlzYWJsZWRGdW5jdGlvbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmlzUm93RGlzYWJsZWQgPSBpc1Jvd0Rpc2FibGVkO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmlzUm93RGlzYWJsZWQgPSBpc1Jvd0Rpc2FibGVkO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnaXNSb3dEaXNhYmxlZCcsIFJlZnJlc2hIaW50RmxhZ3MuUmVuZGVyUm93cyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzUm93RGlzYWJsZWQoKTogU29ob0lzUm93RGlzYWJsZWRGdW5jdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmlzUm93RGlzYWJsZWQ7XG4gICAgfVxuXG4gICAgLy8gLi4uIHdlJ3ZlIGJlZW4gY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGhhcyBjb21wbGV0ZWRcbiAgICAvLyBpbml0aWFsaXNhdGlvbiwgc28gcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlXG4gICAgLy8gb3B0aW9ucy5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuaXNSb3dEaXNhYmxlZDtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBhbGxvd09uZUV4cGFuZGVkUm93KGFsbG93T25lRXhwYW5kZWRSb3c6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5hbGxvd09uZUV4cGFuZGVkUm93ID0gYWxsb3dPbmVFeHBhbmRlZFJvdztcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5hbGxvd09uZUV4cGFuZGVkUm93ID0gYWxsb3dPbmVFeHBhbmRlZFJvdztcbiAgICB9XG4gIH1cblxuICBnZXQgYWxsb3dPbmVFeHBhbmRlZFJvdygpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuYWxsb3dPbmVFeHBhbmRlZFJvdztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuYWxsb3dPbmVFeHBhbmRlZFJvdztcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCByb3dUZW1wbGF0ZShyb3dUZW1wbGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMucm93VGVtcGxhdGUgPSByb3dUZW1wbGF0ZTtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5yb3dUZW1wbGF0ZSA9IHJvd1RlbXBsYXRlO1xuICAgIH1cbiAgfVxuXG4gIGdldCByb3dUZW1wbGF0ZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5yb3dUZW1wbGF0ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMucm93VGVtcGxhdGU7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgcm93VGVtcGxhdGVDb21wb25lbnQocm93VGVtcGxhdGVDb21wb25lbnQ6IGFueSkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnJvd1RlbXBsYXRlQ29tcG9uZW50ID0gcm93VGVtcGxhdGVDb21wb25lbnQ7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3Mucm93VGVtcGxhdGVDb21wb25lbnQgPSByb3dUZW1wbGF0ZUNvbXBvbmVudDtcbiAgICB9XG4gIH1cblxuICBnZXQgcm93VGVtcGxhdGVDb21wb25lbnQoKTogYW55IHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3Mucm93VGVtcGxhdGVDb21wb25lbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLnJvd1RlbXBsYXRlQ29tcG9uZW50O1xuICB9XG5cbiAgQElucHV0KCkgc2V0IHJvd1RlbXBsYXRlQ29tcG9uZW50SW5wdXRzKHJvd1RlbXBsYXRlQ29tcG9uZW50SW5wdXRzOiBhbnkpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5yb3dUZW1wbGF0ZUNvbXBvbmVudElucHV0cyA9IHJvd1RlbXBsYXRlQ29tcG9uZW50SW5wdXRzO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnJvd1RlbXBsYXRlQ29tcG9uZW50SW5wdXRzID0gcm93VGVtcGxhdGVDb21wb25lbnRJbnB1dHM7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHJvd1RlbXBsYXRlQ29tcG9uZW50SW5wdXRzKCk6IGFueSB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnJvd1RlbXBsYXRlQ29tcG9uZW50SW5wdXRzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5yb3dUZW1wbGF0ZUNvbXBvbmVudElucHV0cztcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCByb3dUZW1wbGF0ZUZpZWxkKHJvd1RlbXBsYXRlRmllbGQ6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnJvd1RlbXBsYXRlRmllbGQgPSByb3dUZW1wbGF0ZUZpZWxkO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnJvd1RlbXBsYXRlRmllbGQgPSByb3dUZW1wbGF0ZUZpZWxkO1xuICAgIH1cbiAgfVxuXG4gIGdldCByb3dUZW1wbGF0ZUZpZWxkKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnJvd1RlbXBsYXRlRmllbGQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLnJvd1RlbXBsYXRlRmllbGQ7XG4gIH1cblxuICAvKipcbiAgICogSWYgdHJ1ZSwgd2lsbCBzZWxlY3QgdGhlIGNlbGwgdGV4dCBzb29uIGFzIGVudGVyaW5nIGVkaXQgbW9kZVxuICAgKi9cbiAgQElucHV0KCkgc2V0IHNlbGVjdE9uRWRpdChzZWxlY3RPbkVkaXQ6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5zZWxlY3RPbkVkaXQgPSBzZWxlY3RPbkVkaXQ7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3Muc2VsZWN0T25FZGl0ID0gc2VsZWN0T25FZGl0O1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnZWRpdGFibGUnLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzZWxlY3RPbkVkaXQoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnNlbGVjdE9uRWRpdDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLnNlbGVjdE9uRWRpdDtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBpc0xpc3QoaXNMaXN0OiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuaXNMaXN0ID0gaXNMaXN0O1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MuaXNMaXN0ID0gaXNMaXN0O1xuXG4gICAgICAvLyBjYWxsaW5nIHJlYnVpbGQgYXMgYSBicnV0ZSBmb3JjZSB3YXkgb2YgdWRwYXRpbmcgdGhlIHZpZXcuXG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdpc0xpc3QnLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpc0xpc3QoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmlzTGlzdDtcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5pc0xpc3Q7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgbWVudUlkKG1lbnVJZDogYW55KSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMubWVudUlkID0gbWVudUlkO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MubWVudUlkID0gbWVudUlkO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnbWVudUlkJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICAvKiogYmVmb3JlT3BlbiAtIGFqYXggY2FsbGJhY2sgZm9yIG9wZW4gZXZlbnQgKi9cbiAgQElucHV0KCkgc2V0IG1lbnVCZWZvcmVPcGVuKG1lbnVCZWZvcmVPcGVuOiBTb2hvUG9wdXBNZW51U291cmNlRnVuY3Rpb24pIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5tZW51QmVmb3JlT3BlbiA9IG1lbnVCZWZvcmVPcGVuO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MubWVudUJlZm9yZU9wZW4gPSBtZW51QmVmb3JlT3BlbjtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ21lbnVCZWZvcmVPcGVuJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICBnZXQgbWVudUJlZm9yZU9wZW4oKTogU29ob1BvcHVwTWVudVNvdXJjZUZ1bmN0aW9uIHtcbiAgICByZXR1cm4gKHRoaXMuX2dyaWRPcHRpb25zIGFzIGFueSkuc2V0dGluZ3MubWVudUJlZm9yZU9wZW47XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgcm93IGhlaWdodCBmb3IgdGhlIGdyaWQsIHRvIGJlIG9uZSBvZiB0aGUgc3VwcG9ydGVkIG9wdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSByb3dIZWlnaHQgLSAnZXh0cmEtc21hbGwnIHwgJ3NtYWxsJyB8ICdtZWRpdW0nIHwgJ2xhcmdlJ1xuICAgKi9cbiAgQElucHV0KCkgc2V0IHJvd0hlaWdodChyb3dIZWlnaHQ6IFNvaG9EYXRhR3JpZFJvd0hlaWdodCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnJvd0hlaWdodCA9IHJvd0hlaWdodDtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLnJvd0hlaWdodCA9IHJvd0hlaWdodDtcblxuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnJvd0hlaWdodChyb3dIZWlnaHQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGhlaWdodCBvZiB0aGUgcm93IHRvIHNvbWV0aGluZyBvdGhlciB0aGVuIHRoZSB0aHJlZSBidWlsdCBpbiByb3dIZWlnaHRzLlxuICAgKlxuICAgKiBAcGFyYW0gZml4ZWRSb3dIZWlnaHQgQW55IGludGVnZXJcbiAgICovXG4gIEBJbnB1dCgpIHNldCBmaXhlZFJvd0hlaWdodChmaXhlZFJvd0hlaWdodDogbnVtYmVyIHwgc3RyaW5nIHwgRnVuY3Rpb24pIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5maXhlZFJvd0hlaWdodCA9IGZpeGVkUm93SGVpZ2h0O1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MuZml4ZWRSb3dIZWlnaHQgPSBmaXhlZFJvd0hlaWdodDtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ2ZpeGVkUm93SGVpZ2h0JywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciBzZWxlY3Rpb24gaXMgZW5hYmxlZC5cbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdGFibGUgdmFsaWQgdmFsdWVzIGFyZTogJ211bHRpcGxlJywgJ3NpbmdsZScsICdtaXhlZCcsICdzaWJsaW5ncycgYW5kIGZhbHNlLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IHNlbGVjdGFibGUoc2VsZWN0YWJsZTogYW55KSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuc2VsZWN0YWJsZSA9IHNlbGVjdGFibGU7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgLy8gSnVzdCBjaGFuZ2luZyB0aGUgZGF0YWdyaWQuc2V0dGluZ3Muc2VsZWN0YWJsZSB1cGRhdGVzIHRoZSBkYXRhZ3JpZCB2aWV3LlxuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5zZWxlY3RhYmxlID0gc2VsZWN0YWJsZTtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ3NlbGVjdGFibGUnLCBSZWZyZXNoSGludEZsYWdzLlJlbmRlclJvd3MpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzZWxlY3RhYmxlKCk6IGFueSB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnNlbGVjdGFibGU7XG4gICAgfVxuXG4gICAgLy8gLi4uIHdlJ3ZlIGJlZW4gY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGhhcyBjb21wbGV0ZWRcbiAgICAvLyBpbml0aWFsaXNhdGlvbiwgc28gcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlXG4gICAgLy8gb3B0aW9ucy5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuc2VsZWN0YWJsZTtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBzaG93U2VsZWN0QWxsQ2hlY2tCb3goc2hvd1NlbGVjdEFsbENoZWNrQm94OiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuc2hvd1NlbGVjdEFsbENoZWNrQm94ID0gc2hvd1NlbGVjdEFsbENoZWNrQm94O1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgIC8vIEp1c3QgY2hhbmdpbmcgdGhlIGRhdGFncmlkLnNldHRpbmdzLnNlbGVjdGFibGUgdXBkYXRlcyB0aGUgZGF0YWdyaWQgdmlldy5cbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3Muc2hvd1NlbGVjdEFsbENoZWNrQm94ID0gc2hvd1NlbGVjdEFsbENoZWNrQm94O1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnc2hvd1NlbGVjdEFsbENoZWNrQm94JywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICBnZXQgc2hvd1NlbGVjdEFsbENoZWNrQm94KCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5zaG93U2VsZWN0QWxsQ2hlY2tCb3g7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgY2xpY2tUb1NlbGVjdChjbGlja1RvU2VsZWN0OiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuY2xpY2tUb1NlbGVjdCA9IGNsaWNrVG9TZWxlY3Q7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5jbGlja1RvU2VsZWN0ID0gY2xpY2tUb1NlbGVjdDtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ2NsaWNrVG9TZWxlY3QnLCBSZWZyZXNoSGludEZsYWdzLlJlbmRlclJvd3MpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBjbGlja1RvU2VsZWN0KCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5jbGlja1RvU2VsZWN0O1xuICAgIH1cblxuICAgIC8vIC4uLiB3ZSd2ZSBiZWVuIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBoYXMgY29tcGxldGVkXG4gICAgLy8gaW5pdGlhbGlzYXRpb24sIHNvIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZVxuICAgIC8vIG9wdGlvbnMuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLmNsaWNrVG9TZWxlY3Q7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgdG9vbGJhcih0b29sYmFyOiBTb2hvVG9vbGJhck9wdGlvbnMpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy50b29sYmFyID0gdG9vbGJhcjtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLnRvb2xiYXIgPSB0b29sYmFyO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgndG9vbGJhcicsIFJlZnJlc2hIaW50RmxhZ3MuUmVidWlsZCk7XG4gICAgfVxuICB9XG5cbiAgQElucHV0KCkgc2V0IGluaXRpYWxpemVUb29sYmFyKGluaXRpYWxpemVUb29sYmFyOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuaW5pdGlhbGl6ZVRvb2xiYXIgPSBpbml0aWFsaXplVG9vbGJhcjtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50ICYmIHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuaW5pdGlhbGl6ZVRvb2xiYXIgPSBpbml0aWFsaXplVG9vbGJhcjtcbiAgICB9XG4gIH1cblxuICBnZXQgaW5pdGlhbGl6ZVRvb2xiYXIoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmluaXRpYWxpemVUb29sYmFyO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5pbml0aWFsaXplVG9vbGJhcjtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBzYXZlVXNlclNldHRpbmdzKHNldHRpbmdzRm9yU2F2ZTogU29ob0RhdGFHcmlkU2F2ZVVzZXJTZXR0aW5ncykge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnNhdmVVc2VyU2V0dGluZ3MgPSBzZXR0aW5nc0ZvclNhdmU7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5zYXZlVXNlclNldHRpbmdzID0gc2V0dGluZ3NGb3JTYXZlO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBwYWdpbmcocGFnaW5nOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMucGFnaW5nID0gcGFnaW5nO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MucGFnaW5nID0gcGFnaW5nO1xuXG4gICAgICAvLyB0b2RvOiB1cGRhdGUgc29obyBkYXRhIGdyaWRzIHZpZXcgLSB0aGlzLnVwZGF0ZVBhZ2luZ0luZm8oKT9cbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ3BhZ2luZycsIFJlZnJlc2hIaW50RmxhZ3MuUmVidWlsZCk7XG4gICAgfVxuICB9XG4gIGdldCBwYWdpbmcoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnBhZ2luZztcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5wYWdpbmc7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgcGFnZXNpemUocGFnZXNpemU6IG51bWJlcikge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnBhZ2VzaXplID0gcGFnZXNpemU7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5wYWdlc2l6ZSA9IHBhZ2VzaXplO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgncGFnZXNpemUnLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBwYWdlc2l6ZXMocGFnZXNpemVzOiBBcnJheTxudW1iZXI+KSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMucGFnZXNpemVzID0gcGFnZXNpemVzO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MucGFnZXNpemVzID0gcGFnZXNpemVzO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgncGFnZXNpemVzJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICBASW5wdXQoKSBzZXQgaW5kZXRlcm1pbmF0ZShpbmRldGVybWluYXRlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuaW5kZXRlcm1pbmF0ZSA9IGluZGV0ZXJtaW5hdGU7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5pbmRldGVybWluYXRlID0gaW5kZXRlcm1pbmF0ZTtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ2luZGV0ZXJtaW5hdGUnLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBhY3Rpb25hYmxlTW9kZShhY3Rpb25hYmxlTW9kZTogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmFjdGlvbmFibGVNb2RlID0gYWN0aW9uYWJsZU1vZGU7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5hY3Rpb25hYmxlTW9kZSA9IGFjdGlvbmFibGVNb2RlO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnYWN0aW9uYWJsZU1vZGUnLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBhY3Rpb25hYmxlTW9kZSgpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuYWN0aW9uYWJsZU1vZGU7XG4gICAgfVxuXG4gICAgLy8gLi4uIHdlJ3ZlIGJlZW4gY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGhhcyBjb21wbGV0ZWRcbiAgICAvLyBpbml0aWFsaXNhdGlvbiwgc28gcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlXG4gICAgLy8gb3B0aW9ucy5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuYWN0aW9uYWJsZU1vZGU7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgc2F2ZUNvbHVtbnMoc2F2ZUNvbHVtbnM6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5zYXZlQ29sdW1ucyA9IHNhdmVDb2x1bW5zO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3Muc2F2ZUNvbHVtbnMgPSBzYXZlQ29sdW1ucztcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ3NhdmVDb2x1bW5zJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5wdXQgZm9yIHRoZSBzb3VyY2UgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBzb3VyY2UgdGhlIGRhdGFzZXQncyBzb3VyY2UgZnVuY3Rpb24uXG4gICAqL1xuICBASW5wdXQoKSBzZXQgc291cmNlKHNvdXJjZTogU29ob0RhdGFHcmlkU291cmNlRnVuY3Rpb24gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnVwZGF0ZVNvdXJjZSgoc291cmNlIGFzIGFueSkpO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3Muc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnc291cmNlJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlcyBvciBkaXNhYmxlcyB0aGUgZmlsdGVyIGJhciBvbiB0aGUgZ3JpZC5cbiAgICpcbiAgICogQHBhcmFtIGZpbHRlcmFibGUgaWYgdHJ1ZSwgdGhlIGZpbHRlciBiYXIgaXMgZGlzcGxheWVkOyBvdGhlcndpc2Ugbm8gZmlsdGVyIGJhciBpcyBkaXNwbGF5ZWQuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgZmlsdGVyYWJsZShmaWx0ZXJhYmxlOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuZmlsdGVyYWJsZSA9IGZpbHRlcmFibGU7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5maWx0ZXJhYmxlID0gZmlsdGVyYWJsZTtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ2ZpbHRlcmFibGUnLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuICBnZXQgZmlsdGVyYWJsZSgpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZmlsdGVyYWJsZTtcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5maWx0ZXJhYmxlO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGZpbHRlcldoZW5UeXBpbmcoZmlsdGVyV2hlblR5cGluZzogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmZpbHRlcldoZW5UeXBpbmcgPSBmaWx0ZXJXaGVuVHlwaW5nO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQgJiYgdGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5maWx0ZXJXaGVuVHlwaW5nID0gZmlsdGVyV2hlblR5cGluZztcbiAgICB9XG4gIH1cblxuICBnZXQgZmlsdGVyV2hlblR5cGluZygpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZmlsdGVyV2hlblR5cGluZztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuZmlsdGVyV2hlblR5cGluZztcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0cnVlIHRoZSBkYXRhZ3JpZCBpcyBkaXNwbGF5ZWQgYXMgYSB0cmVlLCBvdGhlcndpc2VcbiAgICogdGhlIGdyaWQgaXMgZGlzcGxheWVkIGFzIGZsYXQgcm93cy5cbiAgICpcbiAgICogVGhpcyBmaWVsZCBpcyBkeW5hbWljLCBhbmQgd2lsbCBjYXVzZSB0aGUgZ3JpZCB0byBiZSByZWJ1aWx0XG4gICAqIGlmIGNoYW5nZWQuXG4gICAqXG4gICAqIEBwYXJhbSB0cmVlR3JpZCAtIGJvb2xlYW4gZmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBkYXRhIGlzIGhpZXJhcmNoaWNhbC5cbiAgICovXG4gIEBJbnB1dCgpIHNldCB0cmVlR3JpZCh0cmVlR3JpZDogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIGlmICh0cmVlR3JpZCAhPT0gdGhpcy5fZ3JpZE9wdGlvbnMudHJlZUdyaWQpIHtcbiAgICAgIHRoaXMuX2dyaWRPcHRpb25zLnRyZWVHcmlkID0gdHJlZUdyaWQ7XG5cbiAgICAgIC8vIElmIHRoZSBqUXVlcnkgY29udHJvbCBoYXMgYmVlbiBpbml0aWFsaXNlZCwgdXBkYXRlIGl0LlxuICAgICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLnRyZWVHcmlkID0gdHJlZUdyaWQ7XG4gICAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ3RyZWVHcmlkJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgdHJlZUdyaWQoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnRyZWVHcmlkO1xuICAgIH1cblxuICAgIC8vIC4uLiB3ZSd2ZSBiZWVuIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBoYXMgY29tcGxldGVkXG4gICAgLy8gaW5pdGlhbGlzYXRpb24sIHNvIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZVxuICAgIC8vIG9wdGlvbnMuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLnRyZWVHcmlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHVucWl1ZSBpZGVudGlmaWVyOyB3aGljaCBtYXkgYmUgdW5kZWZpbmVkLlxuICAgKi9cbiAgZ2V0IHVuaXF1ZUlkKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnVuaXF1ZUlkO1xuICAgIH1cblxuICAgIC8vIC4uLiB3ZSd2ZSBiZWVuIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBoYXMgY29tcGxldGVkXG4gICAgLy8gaW5pdGlhbGlzYXRpb24sIHNvIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZVxuICAgIC8vIG9wdGlvbnMuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLnVuaXF1ZUlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHVucWl1ZUlkIC0gd2lsbCBmb3JjZSBhIGdyaWQgcmVidWlsZCBpZiB0aGUgY29tcG9uZW50IGhhcyBhbHJlYWR5IGJlZW5cbiAgICogY3JlYXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHVucWl1ZUlkIC0gdGhlIG5ldyBpZC5cbiAgICovXG4gIEBJbnB1dCgpIHNldCB1bmlxdWVJZCh1bmlxdWVJZDogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMudW5pcXVlSWQgPSB1bmlxdWVJZDtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy51bmlxdWVJZCA9IHVuaXF1ZUlkO1xuXG4gICAgICAvLyBGb3JjZSBhbGwgYSBmdWxsIHJlYnVpbGQgb2YgdGhlIGNvbnRyb2wuXG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCd1bmlxdWVJZCcsIFJlZnJlc2hIaW50RmxhZ3MuUmVidWlsZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB2YWx1ZSBvZiB0aGUgcm93UmVvcmRlciBmbGFnIC0gcmV0dXJucyB0aGUgcmVxdWVzdGVkIHZhbHVlIGlmIHRoZSBjb250cm9sIGhhcyBub3QgYmVlbiBjcmVhdGVkIHlldC5cbiAgICovXG4gIGdldCByb3dSZW9yZGVyKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5yb3dSZW9yZGVyO1xuICAgIH1cblxuICAgIC8vIC4uLiB3ZSd2ZSBiZWVuIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBoYXMgY29tcGxldGVkXG4gICAgLy8gaW5pdGlhbGlzYXRpb24sIHNvIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZVxuICAgIC8vIG9wdGlvbnMuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLnJvd1Jlb3JkZXI7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgcm93UmVvcmRlciBmbGFnIC0gd2lsbCBmb3JjZSBhIGdyaWQgcmVidWlsZCBpZiB0aGUgY29tcG9uZW50IGhhcyBhbHJlYWR5IGJlZW5cbiAgICogY3JlYXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHJvd1Jlb3JkZXIgLSBpZiB0cnVlIHRoZSByb3dzIHdpbGwgYmUgcmVvcmRlcmFibGU7IG90aGVyd2lzZSB0aGV5IHdpbGwgbm90LlxuICAgKi9cbiAgQElucHV0KCkgc2V0IHJvd1Jlb3JkZXIodmFsdWU6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5yb3dSZW9yZGVyID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3Mucm93UmVvcmRlciA9IHZhbHVlO1xuXG4gICAgICAvLyBGb3JjZSBhbGwgYSBmdWxsIHJlYnVpbGQgb2YgdGhlIGNvbnRyb2wuXG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdyb3dSZW9yZGVyJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIHZhbHVlIG9mIHRoZSBzaG93RGlydHkgZmxhZyAtIHJldHVybnMgdGhlIHJlcXVlc3RlZCB2YWx1ZSBpZiB0aGUgY29udHJvbCBoYXMgbm90IGJlZW4gY3JlYXRlZCB5ZXQuXG4gICAqL1xuICBnZXQgc2hvd0RpcnR5KCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5zaG93RGlydHk7XG4gICAgfVxuXG4gICAgLy8gLi4uIHdlJ3ZlIGJlZW4gY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGhhcyBjb21wbGV0ZWRcbiAgICAvLyBpbml0aWFsaXNhdGlvbiwgc28gcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlXG4gICAgLy8gb3B0aW9ucy5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuc2hvd0RpcnR5O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHNob3dEaXJ0eSBmbGFnIC0gd2lsbCBmb3JjZSBhIGdyaWQgcmVidWlsZCBpZiB0aGUgY29tcG9uZW50IGhhcyBhbHJlYWR5IGJlZW5cbiAgICogY3JlYXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHNob3dEaXJ0eSAtIGlmIHRydWUgdGhlbiBkaXJ0eSByb3dzIHdpbGwgYmUgaGlnaGxpZ2h0ZWQ7IG90aGVyd2lzZSB0aGV5IHdpbGwgbm90LlxuICAgKi9cbiAgQElucHV0KCkgc2V0IHNob3dEaXJ0eSh2YWx1ZTogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnNob3dEaXJ0eSA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnNob3dEaXJ0eSA9IHZhbHVlO1xuXG4gICAgICAvLyBGb3JjZSBhbGwgYSBmdWxsIHJlYnVpbGQgb2YgdGhlIGNvbnRyb2wuXG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdzaG93RGlydHknLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSByZXNpemVNb2RlIG9wdGlvbiB0byBjaGFuZ2VzIHRoZSBjb2x1bW4gcmVzaXplIGJlaGF2aW9yLlxuICAgKlxuICAgKiBAcGFyYW0gcmVzaXplTW9kZSAtIGlmIHRydWUgdGhlbiBkaXJ0eSByb3dzIHdpbGwgYmUgaGlnaGxpZ2h0ZWQ7IG90aGVyd2lzZSB0aGV5IHdpbGwgbm90LlxuICAgKi9cbiAgQElucHV0KCkgc2V0IHJlc2l6ZU1vZGUodmFsdWU6IFNvaG9EYXRhR3JpZFJlc2l6ZU1vZGUgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5yZXNpemVNb2RlID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MucmVzaXplTW9kZSA9IHZhbHVlO1xuXG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdyZXNpemVNb2RlJywgUmVmcmVzaEhpbnRGbGFncy5Ob25lKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZGF0YWdyaWQgaGVhZGVyIGJhY2tncm91bmQgY29sb3IsIGVpdGhlciBkYXJrIG9yIGxpZ2h0LlxuICAgKiBAcGFyYW0gaGVhZGVyQmFja2dyb3VuZENvbG9yIC0gZGVmYXVsdCB2YWx1ZSBpcyAnZGFyaydcbiAgICovXG4gIEBJbnB1dCgpIHNldCBoZWFkZXJCYWNrZ3JvdW5kQ29sb3IodmFsdWU6IFNvaG9EYXRhZ3JpZEhlYWRlckJhY2tncm91bmRDb2xvciB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmhlYWRlckJhY2tncm91bmRDb2xvciA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmhlYWRlckJhY2tncm91bmRDb2xvciA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBoZWFkZXJNZW51SWQodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmhlYWRlck1lbnVJZCA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmhlYWRlck1lbnVJZCA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGdldCBoZWFkZXJNZW51SWQoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuaGVhZGVyTWVudUlkO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5oZWFkZXJNZW51SWQ7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgaGVhZGVyTWVudVNlbGVjdGVkKGhlYWRlck1lbnVTZWxlY3RlZDogRnVuY3Rpb24pIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5oZWFkZXJNZW51U2VsZWN0ZWQgPSBoZWFkZXJNZW51U2VsZWN0ZWQ7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCAmJiB0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmhlYWRlck1lbnVTZWxlY3RlZCA9IGhlYWRlck1lbnVTZWxlY3RlZDtcbiAgICB9XG4gIH1cblxuICBASW5wdXQoKSBzZXQgaGVhZGVyTWVudUJlZm9yZU9wZW4oaGVhZGVyTWVudUJlZm9yZU9wZW46IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuaGVhZGVyTWVudUJlZm9yZU9wZW4gPSBoZWFkZXJNZW51QmVmb3JlT3BlbjtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50ICYmIHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuaGVhZGVyTWVudUJlZm9yZU9wZW4gPSBoZWFkZXJNZW51QmVmb3JlT3BlbjtcbiAgICB9XG4gIH1cblxuICBnZXQgZGlzYWJsZVJvd0RlYWN0aXZhdGlvbigpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZGlzYWJsZVJvd0RlYWN0aXZhdGlvbjtcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5kaXNhYmxlUm93RGVhY3RpdmF0aW9uO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGRpc2FibGVSb3dEZWFjdGl2YXRpb24odmFsdWU6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5kaXNhYmxlUm93RGVhY3RpdmF0aW9uID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZGlzYWJsZVJvd0RlYWN0aXZhdGlvbiA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGdldCBkaXNhYmxlUm93RGVzZWxlY3Rpb24oKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmRpc2FibGVSb3dEZXNlbGVjdGlvbjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuZGlzYWJsZVJvd0Rlc2VsZWN0aW9uO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGRpc2FibGVSb3dEZXNlbGVjdGlvbih2YWx1ZTogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmRpc2FibGVSb3dEZXNlbGVjdGlvbiA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmRpc2FibGVSb3dEZXNlbGVjdGlvbiA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXNlZCB0byBob2xkIGFuIG9iamVjdCB0aGF0IGNhbiBiZSByZWZlcmVuY2VkIGluIGZvcm1hdHRlcnNcbiAgICogYW5kIGVkaXRvcnMgb3IgYW55d2hlcmUgZWxzZSBhIGRhdGFncmlkIHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcbiAgICovXG4gIEBJbnB1dCgpIHNldCB1c2VyT2JqZWN0KHVzZXJPYmplY3Q6IGFueSB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnVzZXJPYmplY3QgPSB1c2VyT2JqZWN0O1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnVzZXJPYmplY3QgPSB1c2VyT2JqZWN0O1xuICAgIH1cbiAgfVxuXG4gIGdldCB1c2VyT2JqZWN0KCk6IGFueSB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnVzZXJPYmplY3Q7XG4gICAgfVxuXG4gICAgLy8gLi4uIHdlJ3ZlIGJlZW4gY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGhhcyBjb21wbGV0ZWRcbiAgICAvLyBpbml0aWFsaXNhdGlvbiwgc28gcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlXG4gICAgLy8gb3B0aW9ucy5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMudXNlck9iamVjdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgb2YgdGhlIGdyb3VwYWJsZSBvcHRpb24gLSByZXR1cm5zIHRoZSByZXF1ZXN0ZWRcbiAgICogdmFsdWUgaWYgdGhlIGNvbnRyb2wgaGFzIG5vdCBiZWVuIGNyZWF0ZWQgeWV0LlxuICAgKi9cbiAgZ2V0IGdyb3VwYWJsZSgpOiBTb2hvRGF0YUdyaWRHcm91cGFibGUgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5ncm91cGFibGU7XG4gICAgfVxuXG4gICAgLy8gLi4uIHdlJ3ZlIGJlZW4gY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGhhcyBjb21wbGV0ZWRcbiAgICAvLyBpbml0aWFsaXNhdGlvbiwgc28gcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlXG4gICAgLy8gb3B0aW9ucy5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuZ3JvdXBhYmxlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGdyb3VwYWJsZSBzZXR0aW5ncyAtIHdpbGwgZm9yY2UgYSBncmlkIHJlYnVpbGQgaWYgdGhlIGNvbXBvbmVudCBoYXMgYWxyZWFkeSBiZWVuXG4gICAqIGNyZWF0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSBncm91cGFibGUgLSB0aGUgZ3JvdXBhYmxlIHNldHRpbmdzLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGdyb3VwYWJsZSh2YWx1ZTogU29ob0RhdGFHcmlkR3JvdXBhYmxlIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuZ3JvdXBhYmxlID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZ3JvdXBhYmxlID0gdmFsdWU7XG5cbiAgICAgIC8vIEZvcmNlIGFsbCBhIGZ1bGwgcmVidWlsZCBvZiB0aGUgY29udHJvbC5cbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ2dyb3VwYWJsZScsIFJlZnJlc2hIaW50RmxhZ3MuUmVidWlsZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBhcnJheSBvZiBkYXRhIHRvIGRpc3BsYXkgaW4gdGhlIGdyaWQuXG4gICAqXG4gICAqIEBwYXJhbSBhbiBhcnJheSBvZiBvYmplY3RzIG1hdGNoaW5nIHRoZSBjb2x1bW4gZGVmaW5pdGlvbi5cbiAgICpcbiAgICogQXMgdGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCBiZWZvcmUgdGhlIGNvbnRyb2wgaXNcbiAgICogaW5pdGlhbGlzZWQsIHN0YXNoIHRoZSBkYXRhIGZvciBsYXRlciwgYW5kIG9ubHlcbiAgICogY2FsbCBsb2FkRGF0YSBvbiB0aGUgY29udHJvbCBhcGkgaWYgcmVhZHkuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgZGF0YShkYXRhOiBhbnlbXSB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuZ3JpZERhdGEgPSBkYXRhO1xuICAgIGlmIChkYXRhICYmIHRoaXMualF1ZXJ5RWxlbWVudCkge1xuXG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIC8vIEB0b2RvIGFkZCBoaW50cyBmb3IgdGhpcyB0b28sIGFzIG90aGVyIGNoYW5nZXMgbWF5IGZvcmNlIGEgcmVidWlsZD9cbiAgICAgICAgdGhpcy5kYXRhZ3JpZD8ubG9hZERhdGEoZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGFycmF5IG9mIGNvbHVtbnMgdG8gZGlzcGxheSBpbiB0aGUgZ3JpZC5cbiAgICpcbiAgICogQXMgdGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCBiZWZvcmUgdGhlIGNvbnRyb2wgaXNcbiAgICogaW5pdGlhbGlzZWQsIHN0YXNoIHRoZSBkYXRhIGZvciBsYXRlciwgYW5kIG9ubHlcbiAgICogY2FsbCBsb2FkRGF0YSBvbiB0aGUgY29udHJvbCBhcGkgaWYgcmVhZHkuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgY29sdW1ucyhjb2x1bW5zOiBTb2hvRGF0YUdyaWRDb2x1bW5bXSB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmNvbHVtbnMgPSBjb2x1bW5zIHx8IFtdO1xuXG4gICAgdGhpcy5jaGVja0ZvckNvbXBvbmVudEVkaXRvcnMoKTtcblxuICAgIGlmIChjb2x1bW5zICYmIHRoaXMualF1ZXJ5RWxlbWVudCkge1xuXG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIHRoaXMuZGF0YWdyaWQ/LnVwZGF0ZUNvbHVtbnMoKHRoaXMuX2dyaWRPcHRpb25zIGFzIGFueSkuY29sdW1ucywgKHRoaXMuX2dyaWRPcHRpb25zIGFzIGFueSkuY29sdW1uR3JvdXBzKTtcbiAgICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXRPcmlnaW5hbENvbHVtbnMoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBTdW1tYXJ5IHJvdyBjb2x1bW5zIHNldHRpbmdzc1xuICAgKi9cbiAgQElucHV0KCkgc2V0IHN1bW1hcnlSb3dDb2x1bW5zKHN1bW1hcnlSb3dDb2x1bW5zOiBTb2hvRGF0YUdyaWRTdW1tYXJ5Um93Q29sdW1uU2V0dGluZ3NbXSkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnN1bW1hcnlSb3dDb2x1bW5zID0gc3VtbWFyeVJvd0NvbHVtbnM7XG4gICAgdGhpcy5jaGVja0ZvclN1bW1hcnlSb3dTZXR0aW5ncygpO1xuXG4gICAgaWYgKHRoaXMuX2dyaWRPcHRpb25zLmNvbHVtbnMgJiYgdGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PlxuICAgICAgICB0aGlzLmRhdGFncmlkPy51cGRhdGVDb2x1bW5zKCh0aGlzLl9ncmlkT3B0aW9ucy5jb2x1bW5zIGFzIGFueSksICh0aGlzLl9ncmlkT3B0aW9ucy5jb2x1bW5Hcm91cHMgYXMgYW55KSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0cnVlIGFuIGV4dHJhIGNvbHVtbiB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbmQgdGhhdCBmaWxscyB0aGUgc3BhY2UuXG4gICAqIFRoaXMgYWxsb3dzIGNvbHVtbnMgdG8gbm90IHN0cmV0Y2ggdG8gZmlsbCBzbyB0aGV5IGFyZSBhIGNvbnN0YW50IHNpemUuXG4gICAqIFRoaXMgc2V0dGluZyBjYW5ub3QgYmUgdXNlZCB3aXRoIHBlcmNlbnQgY29sdW1ucy5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBzcGFjZXJDb2x1bW4oc3BhY2VyQ29sdW1uOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuc3BhY2VyQ29sdW1uID0gc3BhY2VyQ29sdW1uO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3Muc3BhY2VyQ29sdW1uID0gc3BhY2VyQ29sdW1uO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnc3BhY2VyQ29sdW1uJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBJZiB0cnVlIGFuIGV4dHJhIGNvbHVtbiBpcyBjdXJyZW50bHkgYWRkZWQgdG8gdGhlIGVuZCB0aGF0IGZpbGxzIHRoZSBzcGFjZS5cbiAgICovXG4gIGdldCBzcGFjZXJDb2x1bW4oKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zPy5zcGFjZXJDb2x1bW47XG4gIH1cblxuICBASW5wdXQoKSBzZXQgc2l6ZUNvbHVtbnNFcXVhbGx5KHNpemVDb2x1bW5zRXF1YWxseTogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnNpemVDb2x1bW5zRXF1YWxseSA9IHNpemVDb2x1bW5zRXF1YWxseTtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50ICYmIHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3Muc2l6ZUNvbHVtbnNFcXVhbGx5ID0gc2l6ZUNvbHVtbnNFcXVhbGx5O1xuICAgIH1cbiAgfVxuXG4gIGdldCBzaXplQ29sdW1uc0VxdWFsbHkoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnNpemVDb2x1bW5zRXF1YWxseTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuc2l6ZUNvbHVtbnNFcXVhbGx5O1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGV4cGFuZGFibGVSb3coZXhwYW5kYWJsZVJvdzogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmV4cGFuZGFibGVSb3cgPSBleHBhbmRhYmxlUm93O1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQgJiYgdGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5leHBhbmRhYmxlUm93ID0gZXhwYW5kYWJsZVJvdztcbiAgICB9XG4gIH1cblxuICBnZXQgZXhwYW5kYWJsZVJvdygpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZXhwYW5kYWJsZVJvdztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuZXhwYW5kYWJsZVJvdztcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCByZWRyYXdPblJlc2l6ZShyZWRyYXdPblJlc2l6ZTogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnJlZHJhd09uUmVzaXplID0gcmVkcmF3T25SZXNpemU7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCAmJiB0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLnJlZHJhd09uUmVzaXplID0gcmVkcmF3T25SZXNpemU7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHJlZHJhd09uUmVzaXplKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5yZWRyYXdPblJlc2l6ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMucmVkcmF3T25SZXNpemU7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgZXhwb3J0Q29udmVydE5lZ2F0aXZlKGV4cG9ydENvbnZlcnROZWdhdGl2ZTogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLmV4cG9ydENvbnZlcnROZWdhdGl2ZSA9IGV4cG9ydENvbnZlcnROZWdhdGl2ZTtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50ICYmIHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZXhwb3J0Q29udmVydE5lZ2F0aXZlID0gZXhwb3J0Q29udmVydE5lZ2F0aXZlO1xuICAgIH1cbiAgfVxuXG4gIGdldCBleHBvcnRDb252ZXJ0TmVnYXRpdmUoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmV4cG9ydENvbnZlcnROZWdhdGl2ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuZXhwb3J0Q29udmVydE5lZ2F0aXZlO1xuICB9XG5cbiAgLyogRXhwZXJpbWVudGFsIEZlYXR1cmUgdG8gc3RpY2sgb24gdGhlIHRvcCBvZiB0aGUgcGFnZS4gVGhpcyBmZWF0dXJlIGhhcyBudW1lcm91cyBsaW1pdGF0aW9ucy4gKi9cbiAgQElucHV0KCkgc2V0IHN0aWNreUhlYWRlcihzdGlja3lIZWFkZXI6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5zdGlja3lIZWFkZXIgPSBzdGlja3lIZWFkZXI7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5zdGlja3lIZWFkZXIgPSBzdGlja3lIZWFkZXI7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdzdGlja3lIZWFkZXInLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuXG4gIC8qIEV4cGVyaW1lbnRhbCBGZWF0dXJlIHRvIHN0aWNrIG9uIHRoZSB0b3Agb2YgdGhlIHBhZ2UuIFRoaXMgZmVhdHVyZSBoYXMgbnVtZXJvdXMgbGltaXRhdGlvbnMuICovXG4gIEBJbnB1dCgpIHNldCBhdHRyaWJ1dGVzKGF0dHJpYnV0ZXM6IEFycmF5PE9iamVjdD4gfCBPYmplY3QpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnYXR0cmlidXRlcycsIFJlZnJlc2hIaW50RmxhZ3MuUmVidWlsZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgdGhlIHNpemluZyBtZXRob2QgZm9yIHRoZSBhdXRvIHNpemluZyBjb2x1bW5zLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGNvbHVtblNpemluZyhjb2x1bW5TaXppbmc6ICdib3RoJyB8ICdkYXRhJyB8ICdoZWFkZXInIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuY29sdW1uU2l6aW5nID0gY29sdW1uU2l6aW5nO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MuY29sdW1uU2l6aW5nID0gY29sdW1uU2l6aW5nO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnY29sdW1uU2l6aW5nJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB0aGUgc2l6aW5nIG1ldGhvZCBmb3IgdGhlIGF1dG8gc2l6aW5nIGNvbHVtbnMuXG4gICAqL1xuICBnZXQgY29sdW1uU2l6aW5nKCk6ICdib3RoJyB8ICdkYXRhJyB8ICdoZWFkZXInIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuY29sdW1uU2l6aW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBjb2x1bW4gc3RyZXRjaGVkIHRvIGZpbGwgdGhlIHdpZHRoIG9mIHRoZSBkYXRhZ3JpZCxcbiAgICogb3IgJ2xhc3QnIHdoZXJlIHRoZSBsYXN0IGNvbHVtbiB3aWxsIGJlIHN0cmV0Y2hlZCB0byBmaWxsIHRoZVxuICAgKiByZW1haW5pbmcgc3BhY2UuXG4gICAqXG4gICAqIEBwYXJhbSBzdHJldGNoQ29sdW1uIC0gdGhlIG5hbWUgb2YgdGhlIGNvbHVtbiB0byBzdHJldGNoOyBvciAnbGFzdCcsXG4gICAqL1xuICBASW5wdXQoKSBzZXQgc3RyZXRjaENvbHVtbihzdHJldGNoQ29sdW1uOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5zdHJldGNoQ29sdW1uID0gc3RyZXRjaENvbHVtbjtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLnN0cmV0Y2hDb2x1bW4gPSBzdHJldGNoQ29sdW1uO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnc3RyZXRjaENvbHVtbicsIFJlZnJlc2hIaW50RmxhZ3MuUmVidWlsZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBjb2x1bW4gdG8gc3RyZXRjaCwgb3IgJ2xhc3QnIGlmIHRoZVxuICAgKiBsYXN0IGNvbHVtbiBpcyBzdHJldGNoZWQuXG4gICAqL1xuICBnZXQgc3RyZXRjaENvbHVtbigpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5zdHJldGNoQ29sdW1uO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRydWUsIGNvbHVtbiB3aWxsIHJlY2FsY3VsYXRlIGl0cyB3aWR0aCBhbmQgc3RyZXRjaCBpZiByZXF1aXJlZCBvbiBjb2x1bW4gY2hhbmdlLlxuICAgKlxuICAgKiBAcGFyYW0gc3RyZXRjaENvbHVtbk9uQ2hhbmdlIC0gSWYgZmFsc2Ugc3RyZXRjaCBsb2dpYyB3b250IHJ1biBvbiBjb2x1bW4gY2hhbmdlLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IHN0cmV0Y2hDb2x1bW5PbkNoYW5nZShzdHJldGNoQ29sdW1uT25DaGFuZ2U6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5zdHJldGNoQ29sdW1uT25DaGFuZ2UgPSBzdHJldGNoQ29sdW1uT25DaGFuZ2U7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5zdHJldGNoQ29sdW1uT25DaGFuZ2UgPSBzdHJldGNoQ29sdW1uT25DaGFuZ2U7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdzdHJldGNoQ29sdW1uT25DaGFuZ2UnLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgdmFsdWUgb2Ygc3RyZXRjaENvbHVtbk9uQ2hhbmdlLlxuICAgKi9cbiAgZ2V0IHN0cmV0Y2hDb2x1bW5PbkNoYW5nZSgpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuc3RyZXRjaENvbHVtbk9uQ2hhbmdlO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc2hvdyB0aGUgcGFnZSBzaXplIHNlbGVjdG9yIG9yIG5vdC5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBzaG93UGFnZVNpemVTZWxlY3RvcihzaG93UGFnZVNpemVTZWxlY3RvcjogYm9vbGVhbikge1xuICAgIHRoaXMuX2dyaWRPcHRpb25zLnNob3dQYWdlU2l6ZVNlbGVjdG9yID0gc2hvd1BhZ2VTaXplU2VsZWN0b3I7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5zaG93UGFnZVNpemVTZWxlY3RvciA9IHNob3dQYWdlU2l6ZVNlbGVjdG9yO1xuXG4gICAgICAvLyB0b2RvOiBuZWVkIGEgZnVuY3Rpb24gaW4gZGF0YWdyaWQuanMgdGhhdCBhbGxvd3MgdG9nZ2xpbmcgb2YgdGhlIHBhZ2Ugc2l6ZSBzZWxlY3Rvci4gZm9yIG5vdyBJIGhhdmUgdG8gcmVidWlsZCB0aGUgZGF0YWdyaWQuXG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdzaG93UGFnZVNpemVTZWxlY3RvcicsIFJlZnJlc2hIaW50RmxhZ3MuUmVidWlsZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIElmIHRydWUsIGhpZGVzIHRoZSBwYWdlciBpZiB0aGVyZSdzIG9ubHkgb25lIHBhZ2Ugd29ydGggb2YgcmVzdWx0cy5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBoaWRlUGFnZXJPbk9uZVBhZ2UoaGlkZVBhZ2VyT25PbmVQYWdlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuaGlkZVBhZ2VyT25PbmVQYWdlID0gaGlkZVBhZ2VyT25PbmVQYWdlO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MuaGlkZVBhZ2VyT25PbmVQYWdlID0gaGlkZVBhZ2VyT25PbmVQYWdlO1xuXG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdoaWRlUGFnZXJPbk9uZVBhZ2UnLCBSZWZyZXNoSGludEZsYWdzLlJlYnVpbGQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY29sdW1uIGdyb3Vwc1xuICAgKlxuICAgKiBBcyB0aGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIGJlZm9yZSB0aGUgY29udHJvbCBpc1xuICAgKiBpbml0aWFsaXNlZCwgc3Rhc2ggdGhlIGRhdGEgZm9yIGxhdGVyLCBhbmQgb25seVxuICAgKiBjYWxsIGxvYWREYXRhIG9uIHRoZSBjb250cm9sIGFwaSBpZiByZWFkeS5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBjb2x1bW5Hcm91cChjb2x1bW5Hcm91cHM6IFNvaG9EYXRhR3JpZENvbHVtbkdyb3VwW10pIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5jb2x1bW5Hcm91cHMgPSBjb2x1bW5Hcm91cHMgfHwgW107XG4gICAgaWYgKGNvbHVtbkdyb3VwcyAmJiB0aGlzLl9ncmlkT3B0aW9ucy5jb2x1bW5zICYmIHRoaXMualF1ZXJ5RWxlbWVudCkge1xuXG4gICAgICAvLyBAdG9kbyBhZGQgaGludHMgZm9yIHRoaXMgdG9vLCBhcyBvdGhlciBjaGFuZ2VzIG1heSBmb3JjZSBhIHJlYnVpbGQ/XG4gICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnVwZGF0ZUNvbHVtbnModGhpcy5fZ3JpZE9wdGlvbnMuY29sdW1ucywgY29sdW1uR3JvdXBzKTtcbiAgICB9XG4gIH1cblxuICBnZXQgY29sdW1uR3JvdXAoKTogU29ob0RhdGFHcmlkQ29sdW1uR3JvdXBbXSB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmNvbHVtbkdyb3VwcyB8fCBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuY29sdW1uR3JvdXBzIHx8IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBgZW1wdHlNZXNzYWdlYCBkYXRhIGdyaWQgb3B0aW9uLlxuICAgKiBVc2UgbnVsbCBvciB1bmRlZmluZWQgdG8gcmVtb3ZlIGFueSBlbXB0eSBtZXNzYWdlLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGVtcHR5TWVzc2FnZShlbXB0eU1lc3NhZ2U6IFNvaG9FbXB0eU1lc3NhZ2VPcHRpb25zIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICAgIC8vIENoZWNrIGZvciB1bmRlZmluZWQvbnVsbCBhbmQgcmVzZXQgdG8gdGhlIGRlZmF1bHQgbWVzc2FnZVxuICAgIGlmICghZW1wdHlNZXNzYWdlKSB7XG4gICAgICAvLyBzb2hvIG9ubHkgdGFrZXMgYSBudWxsIGhlcmUgc28gbWFraW5nIGl0IHNvIGFueSAhZW1wdHlNZXNzYWdlIGdldHMgc2V0IHRvIG51bGxcbiAgICAgIGVtcHR5TWVzc2FnZSA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuZW1wdHlNZXNzYWdlID0gZW1wdHlNZXNzYWdlO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MuZW1wdHlNZXNzYWdlID0gZW1wdHlNZXNzYWdlO1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICB0aGlzLmRhdGFncmlkPy5zZXRFbXB0eU1lc3NhZ2UoZW1wdHlNZXNzYWdlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldCBlbXB0eU1lc3NhZ2UoKTogU29ob0VtcHR5TWVzc2FnZU9wdGlvbnMgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuZW1wdHlNZXNzYWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSB0b29saXBzIG9uIHRoZSBjZWxsIHZhbHVlcywgYXQgYSBjb3N0IG9mIHBlcmZvcm1hbmNlLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGVuYWJsZVRvb2x0aXBzKHZhbHVlOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuZW5hYmxlVG9vbHRpcHMgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLmVuYWJsZVRvb2x0aXBzID0gdmFsdWU7XG5cbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ2VuYWJsZVRvb2x0aXBzJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICBnZXQgZW5hYmxlVG9vbHRpcHMoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLmVuYWJsZVRvb2x0aXBzO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IHNlbGVjdENoaWxkcmVuKHNlbGVjdENoaWxkcmVuOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuc2VsZWN0Q2hpbGRyZW4gPSBzZWxlY3RDaGlsZHJlbjtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLnNlbGVjdENoaWxkcmVuID0gc2VsZWN0Q2hpbGRyZW47XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdzZWxlY3RDaGlsZHJlbicsIFJlZnJlc2hIaW50RmxhZ3MuUmVuZGVyUm93cyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHNlbGVjdENoaWxkcmVuKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5zZWxlY3RDaGlsZHJlbjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuc2VsZWN0Q2hpbGRyZW47XG4gIH1cblxuICBASW5wdXQoKSBzZXQgYWxsb3dDaGlsZEV4cGFuZE9uTWF0Y2goYWxsb3dDaGlsZEV4cGFuZE9uTWF0Y2g6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5hbGxvd0NoaWxkRXhwYW5kT25NYXRjaCA9IGFsbG93Q2hpbGRFeHBhbmRPbk1hdGNoO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQgJiYgdGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5hbGxvd0NoaWxkRXhwYW5kT25NYXRjaCA9IGFsbG93Q2hpbGRFeHBhbmRPbk1hdGNoO1xuICAgIH1cbiAgfVxuXG4gIGdldCBhbGxvd0NoaWxkRXhwYW5kT25NYXRjaCgpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuYWxsb3dDaGlsZEV4cGFuZE9uTWF0Y2g7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLmFsbG93Q2hpbGRFeHBhbmRPbk1hdGNoO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZXMgdGhlIHNvdXJjZSB0eXBlIG9mIHRoZSBncmlkLCBlaXRoZXI6XG4gICAqXG4gICAqIC0gXCJjb250ZW50LW9ubHlcIiB3aGVyZSB0YWJsZSBlbGVtZW50cyBhcmUgcHJvdmlkZWQgaW4gdGhlIGJvZHkuXG4gICAqIC0gXCJhdXRvXCIgd2hlcmUgY29sdW1ucyBhbmQgcm93cyBhcmUgb2J0YWluZWQgZm9yIGFuXG4gICAqICAgaW5qZWN0ZWQgc2VydmljZSAoaWYgZGVmaW5lZCkgb3IgdmlhIHRoZSBJbnB1dHMgaWYgbm90LlxuICAgKlxuICAgKiBBbGxvdyB0aGUgaW5wdXQgdG8gYmUgb3ZlcnJpZGVuLCB0byBtYXRjaCB0aGUgY29tcG9uZW50IHNlbGVjdG9yLlxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1pbnB1dC1yZW5hbWVcbiAgQElucHV0KCdzb2hvLWRhdGFncmlkJykgc2V0IHNvaG9EYXRhZ3JpZChkYXRhZ3JpZFR5cGU6IFNvaG9EYXRhR3JpZFR5cGUpIHtcbiAgICB0aGlzLmRhdGFncmlkVHlwZSA9IGRhdGFncmlkVHlwZSAmJiBkYXRhZ3JpZFR5cGUudG9TdHJpbmcoKSAhPSAnJyA/IGRhdGFncmlkVHlwZSA6IFNvaG9EYXRhR3JpZENvbXBvbmVudC5BVVRPO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBDb21wb25lbnQgT3V0cHV0XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBUaGlzIGV2ZW50IGlzIGZpcmVkIHdoZW4gYSByb3cgKG9yIHJvd3MpIGFyZSBzZWxlY3RlZC5cbiAgQE91dHB1dCgpXG4gIHNlbGVjdGVkID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvRGF0YUdyaWRTZWxlY3RlZEV2ZW50PigpO1xuXG4gIC8vIFRoaXMgZXZlbnQgaXMgZmlyZWQgd2hlbiBhIGNlbGwgaXMgY2hhbmdlZC5cbiAgQE91dHB1dCgpXG4gIGNlbGxjaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9EYXRhR3JpZENlbGxDaGFuZ2VFdmVudD4oKTtcblxuICAvLyBUaGlzIGV2ZW50IGlzIGZpcmVkIHdoZW4gYSByb3cgaXMgcmVtb3ZlZC5cbiAgQE91dHB1dCgpXG4gIHJvd1JlbW92ZSA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob0RhdGFHcmlkUm93UmVtb3ZlRXZlbnQ+KCk7XG5cbiAgLy8gVGhpcyBldmVudCBpcyBmaXJlZCB3aGVuIGEgcm93IGlzIGFkZGVkLlxuICBAT3V0cHV0KClcbiAgcm93QWRkID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvRGF0YUdyaWRBZGRSb3dFdmVudD4oKTtcblxuICAvLyBUaGlzIGV2ZW50IGlzIGZpcmVkIHdoZW4gdGhlIGdyaWQgaXMgZmlsdGVyZWQuXG4gIEBPdXRwdXQoKVxuICBmaWx0ZXJlZCA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob0RhdGFHcmlkRmlsdGVyZWRFdmVudD4oKTtcblxuICAvLyBUaGlzIGV2ZW50IGlzIGZpcmVkIHdoZW4gYSByb3cgaW4gdGhlIGdyaWQgaXMgZXhwYW5kZWQuXG4gIEBPdXRwdXQoKVxuICBleHBhbmRyb3cgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9EYXRhR3JpZFRvZ2dsZVJvd0V2ZW50PigpO1xuXG4gIC8qKlxuICAgKiBUaGlzIGV2ZW50IGlzIGZpcmVkIHdoZW4gYSBrZXkgaXMgcHJlc3NlZFxuICAgKlxuICAgKiBAdG9kbyByZW1vdmUgb3ZlcnJpZGUgb2YgbmF0aXZlIGF0dHJpYnV0ZVxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtbmF0aXZlXG4gIEBPdXRwdXQoKVxuICBrZXlkb3duID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvRGF0YUdyaWRLZXlEb3duRXZlbnQ+KCk7XG5cbiAgLy8gVGhpcyBldmVudCBpcyBmaXJlZCB3aGVuIGVkaXQgbW9kZSBpcyBleGl0ZWQuXG4gIEBPdXRwdXQoKVxuICBleGl0ZWRpdG1vZGUgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9EYXRhR3JpZEVkaXRNb2RlRXZlbnQ+KCk7XG5cbiAgLy8gVGhpcyBldmVudCBpcyBmaXJlZCBiZWZvcmUgZWRpdCBtb2RlIGlzIHN0YXJ0ZWQuXG4gIEBPdXRwdXQoKVxuICBiZWZvcmVlbnRlcmVkaXRtb2RlID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvRGF0YUdyaWRFZGl0TW9kZUV2ZW50PigpO1xuXG4gIC8qKlxuICAgKiBUaGlzIGV2ZW50IGlzIGZpcmVkIHdoZW4gZWRpdCBtb2RlIGlzIGVudGVyZWQuXG4gICAqL1xuICBAT3V0cHV0KClcbiAgZW50ZXJlZGl0bW9kZSA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob0RhdGFHcmlkRWRpdE1vZGVFdmVudD4oKTtcblxuICAvLyBUaGlzIGV2ZW50IGlzIGZpcmVkIHdoZW4gYSByb3cgaW4gdGhlIGdyaWQgaXMgY29sbGFwc2VkLlxuICBAT3V0cHV0KClcbiAgY29sbGFwc2Vyb3cgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9EYXRhR3JpZFRvZ2dsZVJvd0V2ZW50PigpO1xuXG4gIEBPdXRwdXQoKVxuICBzb3J0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9EYXRhR3JpZFNvcnRlZEV2ZW50PigpO1xuXG4gIEBPdXRwdXQoKVxuICBuZXh0UGFnZSA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob1BhZ2VyUGFnaW5nSW5mbz4oKTtcblxuICBAT3V0cHV0KClcbiAgcHJldmlvdXNQYWdlID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvUGFnZXJQYWdpbmdJbmZvPigpO1xuXG4gIEBPdXRwdXQoKVxuICBmaXJzdFBhZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9QYWdlclBhZ2luZ0luZm8+KCk7XG5cbiAgQE91dHB1dCgpXG4gIGxhc3RQYWdlID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvUGFnZXJQYWdpbmdJbmZvPigpO1xuXG4gIEBPdXRwdXQoKVxuICBwYWdlU2l6ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob1BhZ2VyUGFnaW5nSW5mbz4oKTtcblxuICBAT3V0cHV0KClcbiAgYmVmb3JlUGFnaW5nID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvUGFnZXJQYWdpbmdJbmZvPigpO1xuXG4gIEBPdXRwdXQoKVxuICBhZnRlclBhZ2luZyA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob1BhZ2VyUGFnaW5nSW5mbz4oKTtcblxuICBAT3V0cHV0KClcbiAgYmVmb3JlUm93QWN0aXZhdGVkID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvRGF0YUdyaWRSb3dBY3RpdmF0ZWQ+KCk7XG5cbiAgQE91dHB1dCgpXG4gIHJvd0FjdGl2YXRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob0RhdGFHcmlkUm93QWN0aXZhdGVkPigpO1xuXG4gIEBPdXRwdXQoKVxuICByb3dEZWFjdGl2YXRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob0RhdGFHcmlkUm93QWN0aXZhdGVkPigpO1xuXG4gIEBPdXRwdXQoKVxuICByb3dDbGlja2VkID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvRGF0YUdyaWRSb3dDbGlja2VkPigpO1xuXG4gIEBPdXRwdXQoKVxuICByb3dEb3VibGVDbGlja2VkID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvRGF0YUdyaWRSb3dDbGlja2VkPigpO1xuXG4gIEBPdXRwdXQoKVxuICBjb250ZXh0TWVudSA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob0RhdGFHcmlkUm93Q2xpY2tlZD4oKTtcblxuICBAT3V0cHV0KClcbiAgcm93UmVvcmRlcmVkID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvRGF0YUdyaWRSb3dSZW9yZGVyZWRFdmVudD4oKTtcblxuICBAT3V0cHV0KClcbiAgb3BlbkZpbHRlclJvdyA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob0RhdGFHcmlkT3BlbkZpbHRlclJvd0V2ZW50PigpO1xuXG4gIEBPdXRwdXQoKVxuICBjbG9zZUZpbHRlclJvdyA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob0RhdGFHcmlkQ2xvc2VGaWx0ZXJSb3dFdmVudD4oKTtcblxuICBAT3V0cHV0KClcbiAgc2V0dGluZ3NDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvRGF0YUdyaWRTZXR0aW5nc0NoYW5nZWRFdmVudD4oKTtcblxuICBAT3V0cHV0KClcbiAgcmVuZGVyZWQgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9EYXRhR3JpZFJlbmRlcmVkRXZlbnQ+KCk7XG5cbiAgQE91dHB1dCgpXG4gIGFmdGVyUmVuZGVyID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvRGF0YUdyaWRBZnRlclJlbmRlckV2ZW50PigpO1xuXG4gIEBPdXRwdXQoKVxuICB2ZXJ0aWNhbFNjcm9sbCA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob0RhdGFHcmlkU2Nyb2xsRXZlbnQ+KCk7XG5cbiAgQE91dHB1dCgpXG4gIGZpbHRlcm9wZXJhdG9yY2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob0RhdGFHcmlkRmlsdGVyT3BlcmF0b3JDaGFuZ2VkRXZlbnQ+KCk7XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gSG9zdCBCaW5kaW5nc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gU2V0IHRoZSBlbmFibGUgLyBkaXNhYmxlZCBjbGFzcyAobm90IHdvcmtpbmcpXG4gIEBIb3N0QmluZGluZygnY2xhc3MuaXMtZGlzYWJsZWQnKVxuICBpc0Rpc2FibGVkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHJvbGUgZm9yIHRoZSBncmlkLlxuICAgKi9cbiAgQEhvc3RCaW5kaW5nKCdhdHRyLnJvbGUnKVxuICBnZXQgZGF0YWdyaWRSb2xlKCkge1xuICAgIGlmICh0aGlzLl9ncmlkT3B0aW9ucy50cmVlR3JpZCkge1xuICAgICAgcmV0dXJuICd0cmVlZ3JpZCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnZGF0YWdyaWQnO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gUHJpdmF0ZSBNZW1iZXIgRGF0YVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUmVmZXJlbmNlIHRvIHRoZSBqUXVlcnkgY29udHJvbC5cbiAgcHJpdmF0ZSBqUXVlcnlFbGVtZW50PzogSlF1ZXJ5O1xuXG4gIC8vIFJlZmVyZW5jZSB0byB0aGUgU29obyBkYXRhZ3JpZCBjb250cm9sIGFwaS5cbiAgcHJpdmF0ZSBkYXRhZ3JpZD86IFNvaG9EYXRhR3JpZFN0YXRpYyB8IG51bGw7XG5cbiAgLy8gUmVmZXJlbmNlIHRvIHRoZSBncmlkJ3MgZGF0YS5cbiAgcHJpdmF0ZSBncmlkRGF0YT86IGFueVtdO1xuXG4gIC8vIFRoZSBzb3VyY2UgdHlwZSBmb3IgdGhlIGdyaWQuXG4gIHByaXZhdGUgZGF0YWdyaWRUeXBlPzogc3RyaW5nO1xuXG4gIC8vIEFuIGludGVybmFsIGdyaWRPcHRpb25zIG9iamVjdCB0aGF0IGdldHMgdXBkYXRlZCBieSB1c2luZ1xuICAvLyB0aGUgY29tcG9uZW50J3MgSW5wdXRzKClcbiAgcHJpdmF0ZSBfZ3JpZE9wdGlvbnM6IFNvaG9EYXRhR3JpZE9wdGlvbnMgPSB7XG4gICAgc3RyZXRjaENvbHVtbjogJ2xhc3QnLFxuICAgIGVuYWJsZVRvb2x0aXBzOiBmYWxzZVxuICB9O1xuXG4gIC8vIFByb3ZpZGVzIGhpbnRzIHRvIHRoZSBjb21wb25lbnQgYWZ0ZXIgdGhlIG5leHQgcmVmcmVzaC5cbiAgcHJpdmF0ZSByZWZyZXNoSGludDogUmVmcmVzaEhpbnRGbGFncyA9IFJlZnJlc2hIaW50RmxhZ3MuTm9uZTtcblxuICAvLyBMaXN0IG9mIG9wdGlvbiBuYW1lcyBjaGFuZ2VkIChmb3IgZGVidWdnaW5nKS5cbiAgcHJpdmF0ZSBjaGFuZ2VkT3B0aW9uczogYW55W10gPSBbXTtcblxuICAvLyBMaXN0IG9mIGR5bmFtaWMgZm9ybWF0dGVyIGNvbXBvbmVudHMgLSBrZXllZCBieSB0aGUgb3JpZ2luYWwgYXJncy5cbiAgcHJpdmF0ZSBjZWxsQ29tcG9uZW50czogYW55W10gPSBbXTtcblxuICAvLyBMaXN0IG9mIGR5bmFtaWMgcm93dGVtcGxhdGUgY29tcG9uZW50cyAtIGtleWVkIGJ5IHRoZSBvcmlnaW5hbCBhcmdzLlxuICBwcml2YXRlIHJvd1RlbXBsYXRlQ29tcG9uZW50czogYW55W10gPSBbXTtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSBuZ1pvbmUgLSB0aGUgYW5ndWxhciB6b25lIGZvciB0aGlzIGNvbXBvbmVudC5cbiAgICogQHBhcmFtIGVsZW1lbnRSZWYgLSB0aGUgZWxlbWVudCBtYXRjaGluZyB0aGUgY29tcG9uZW50J3Mgc2VsZWN0b3IuXG4gICAqIEBwYXJhbSBjaGFuZ2VEZXRlY3RvciAtIHRoZSBjb21wb25lbnQncyBjaGFuZ2UgZGV0ZWN0b3IuXG4gICAqIEBwYXJhbSByZXNvbHZlciAtIGNvbXBvbmVudCBmYWN0b3J5IHJlc29sdmVyIChmb3IgZWRpdG9ycy9mb3JtYXR0ZXJzKS5cbiAgICogQHBhcmFtIGluamVjdG9yIC0gZHluYW1pYyBjb21wb25lbnQgaW5qZWN0b3IgKGZvciBlZGl0b3JzL2Zvcm1hdHRlcnMpLlxuICAgKiBAcGFyYW0gZGF0YWdyaWRTZXJ2aWNlIC0gc2VydmljZSBmb3Igb2J0YWluaW5nIGRhdGEgKG9wdGlvbmFsKVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSxcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxuICAgIHByaXZhdGUgYXBwOiBBcHBsaWNhdGlvblJlZixcbiAgICBAT3B0aW9uYWwoKSBwcm90ZWN0ZWQgZGF0YWdyaWRTZXJ2aWNlOiBTb2hvRGF0YUdyaWRTZXJ2aWNlKSB7XG5cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gUHVibGljIEFQSVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgZ2V0Q29sdW1uR3JvdXAoaWR4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLmdldENvbHVtbkdyb3VwKGlkeCk7XG4gIH1cblxuICBnZXRDb2x1bW5CeUlkKGlkeDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5nZXRDb2x1bW5Hcm91cChpZHgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlcyB0aGUgc29ydCBmdW5jdGlvbiB1c2VkIGJ5IHRoZSBkYXRhZ3JpZCxcbiAgICogY2FuIG9ubHkgYmUgdXNlZCBvbmNlIHRoZSBncmlkIGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAqXG4gICAqIEB0b2RvIHRoaXMgc2hvdWxkIG1hZGUgbGF6eS5cbiAgICovXG4gIHNldFNvcnRGdW5jdGlvbihzb3J0RnVuY3Rpb246IFNvaG9EYXRhR3JpZFNvcnRGdW5jdGlvbik6IHZvaWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNvcnRGdW5jdGlvbiA9IHNvcnRGdW5jdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhZ3JpZCBub3QgaW5pdGlhbGl6ZWQuJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGNvbHVtbiBhbmQgZGlyZWN0aW9uIHRvIHNvcnQgdGhlIGRhdGFzZXQgb24uXG4gICAqXG4gICAqIENhbiBvbmx5IGJlIHVzZWQgb25jZSB0aGUgZ3JpZCBoYXMgYmVlbiBpbml0aWFsaXNlZCwgb3RoZXJ3aXNlXG4gICAqIGFuIGVycm9yIGlzIHRocm93bi5cbiAgICpcbiAgICogQHBhcmFtIGNvbHVtbklkIHRoZSBpZCBvZiB0aGUgY29sdW1uIHRvIHNvcnQgb247IG11c3QgYmUgbm9uLW51bGwuXG4gICAqIEBwYXJhbSBhc2NlbmRpbmcgaWYgdHJ1ZSBzb3J0IGFzY2VuZGluZywgb3RoZXJ3aXNlIGRlc2NlbmRpbmcuICBJZiBub3Qgc3VwcGxpZWQgdGhlIHNldHRpbmcgaXMgdG9nZ2xlZC5cbiAgICovXG4gIHNldFNvcnRDb2x1bW4oY29sdW1uSWQ6IHN0cmluZywgYXNjZW5kaW5nPzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0U29ydENvbHVtbihjb2x1bW5JZCwgYXNjZW5kaW5nKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGFncmlkIG5vdCBpbml0aWFsaXplZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIHNldCB0aGUgc29ydCBpbmRpY2F0b3Igb24gYSBjb2x1bW4gd2hlbiBkaXNhYmxlQ2xpZW50U29ydCBpcyBzZXQgdG8gdHJ1ZS5cbiAgICovXG4gIHNldFNvcnRJbmRpY2F0b3IoY29sdW1uSWQ6IHN0cmluZywgYXNjZW5kaW5nOiBib29sZWFuIHwgdW5kZWZpbmVkIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0U29ydEluZGljYXRvcihjb2x1bW5JZCwgYXNjZW5kaW5nKTtcbiAgICB9KTtcbiAgfVxuXG4gIHBhZ2VTaXplKCk6IG51bWJlciB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQ/LnBhZ2VyQVBJLnNldHRpbmdzLnBhZ2VzaXplO1xuICB9XG5cbiAgdXBkYXRlUGFnaW5nSW5mbyhwYWdlSW5mbzogU29ob1BhZ2VyUGFnaW5nSW5mbyk6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LnBhZ2VyQVBJLnVwZGF0ZVBhZ2luZ0luZm8ocGFnZUluZm8pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlKCk6IHZvaWQge1xuICAgIHRoaXMuaXNEaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgZGlzYWJsZSgpOiB2b2lkIHtcbiAgICB0aGlzLmlzRGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgdXBkYXRlUm93KGlkeDogbnVtYmVyLCByb3c6IGFueSk6IHZvaWQge1xuICAgIEFyZ3VtZW50SGVscGVyLmNoZWNrTm90TnVsbCgncm93Jywgcm93KTtcblxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LnVwZGF0ZVJvdyhpZHgsIHJvdyk7XG4gICAgfSk7XG4gIH1cblxuICBoaWRlQ29sdW1uKGlkOiBhbnkpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmRhdGFncmlkPy5oaWRlQ29sdW1uKGlkKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNob3dDb2x1bW4oaWQ6IGFueSkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LnNob3dDb2x1bW4oaWQpO1xuICAgIH0pO1xuICB9XG5cbiAgY29sdW1uQnlJZChpZDogc3RyaW5nKTogQXJyYXk8YW55PiB7XG4gICAgcmV0dXJuICh0aGlzLmRhdGFncmlkIGFzIGFueSkuY29sdW1uQnlJZChpZCk7XG4gIH1cblxuICBnZXRDb2x1bW5zKCk6IEFycmF5PGFueT4ge1xuICAgIHJldHVybiAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLmNvbHVtbnM7XG4gIH1cblxuICBnZXRDb2x1bW5Hcm91cHMoKTogU29ob0RhdGFHcmlkQ29sdW1uR3JvdXBbXSB7XG4gICAgcmV0dXJuICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MuY29sdW1uR3JvdXBzO1xuICB9XG5cbiAgLyoqIEdldCB0aGUgY29sdW1uIGluZGV4IGZyb20gdGhlIGNvbCdzIGlkICovXG4gIGNvbHVtbklkeEJ5SWQoY29sdW1uSWQ6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLmRhdGFncmlkIGFzIGFueSkuY29sdW1uSWR4QnlJZChjb2x1bW5JZCk7XG4gIH1cblxuICBnZXRIZWFkZXJSb3dDb2x1bW4oZmxkOiBhbnkpIHtcbiAgICByZXR1cm4gKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5nZXRIZWFkZXJSb3dDb2x1bW4oZmxkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgcm93IG9mIGRhdGEgdG8gdGhlIGRhdGFncmlkIGF0IHRoZSBnaXZlbiBvcHRpb25hbCBsb2NhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIGRhdGEgdGhlIHJvdyBvZiBkYXRhIHRvIGFkZC5cbiAgICogQHBhcmFtIGxvY2F0aW9uIHRoZSBvcHRpb25hbCBsb2NhdGlvbiwgJ3RvcCcgb3IgJ2JvdHRvbScgb3IgYSBudW1iZXIuXG4gICAqL1xuICBhZGRSb3coZGF0YTogYW55LCBsb2NhdGlvbj86ICd0b3AnIHwgJ2JvdHRvbScgfCBudW1iZXIpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLmFkZFJvdyhkYXRhLCBsb2NhdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBtdWx0aXBsZSByb3dzIG9mIGRhdGEgdG8gdGhlIGRhdGFncmlkIGF0IHRoZSBnaXZlbiBvcHRpb25hbCBsb2NhdGlvbi5cbiAgICogQHBhcmFtIGRhdGEgQXJyYXkgb2YgZGF0YSB0byBhZGQuXG4gICAqIEBwYXJhbSBsb2NhdGlvbiB0aGUgb3B0aW9uYWwgbG9jYXRpb24sICd0b3AnIG9yICdib3R0b20nIG9yIGEgbnVtYmVyLlxuICAgKi9cbiAgYWRkUm93cyhkYXRhOiBhbnlbXSwgbG9jYXRpb24/OiAndG9wJyB8ICdib3R0b20nIHwgbnVtYmVyKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5hZGRSb3dzKGRhdGEsIGxvY2F0aW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgcm93IG1hdGNoaW5nIHRoZSByb3dJbmRleCBwYXNzZWQgaW4gZnJvbSB0aGUgZGF0YSBhbmQgZ3JpZC5cbiAgICpcbiAgICogQHBhcmFtIHJvd0luZGV4IHRoZSBpbmRleCBvZiB0aGUgcm93IHRvIHJlbW92ZS5cbiAgICovXG4gIHJlbW92ZVJvdyhyb3dJbmRleDogbnVtYmVyLCBub1N5bmM/OiBib29sZWFuLCBub1RyaWdnZXI/OiBib29sZWFuKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5kYXRhZ3JpZD8ucmVtb3ZlUm93KHJvd0luZGV4LCBub1N5bmMsIG5vVHJpZ2dlcik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZGlydHkgcm93cyBpbiB0aGUgZ3JpZC5cbiAgICpcbiAgICogQHJldHVybiBhbiBhcnJheSBvZiB0aGUgZGlydHkgcm93cyBpbiB0aGUgZ3JpZC5cbiAgICovXG4gIGRpcnR5Um93cygpOiBBcnJheTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgcmV0dXJuICh0aGlzLmRhdGFncmlkIGFzIGFueSkuZGlydHlSb3dzKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZGlydHkgY2VsbHMgaW4gdGhlIGdyaWQuXG4gICAqXG4gICAqIEByZXR1cm4gYW4gYXJyYXkgb2YgdGhlIGRpcnR5IGNlbGxzIGluIHRoZSBncmlkLlxuICAgKi9cbiAgZGlydHlDZWxscygpOiBBcnJheTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgcmV0dXJuICh0aGlzLmRhdGFncmlkIGFzIGFueSkuZGlydHlDZWxscygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBkaXJ0eSBjZWxscy5cbiAgICovXG4gIGNsZWFyRGlydHkoKTogdm9pZCB7XG4gICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LmNsZWFyRGlydHkoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21taXQgdGhlIGNlbGwgdGhhdCdzIGN1cnJlbnRseSBpbiBlZGl0IG1vZGUuXG4gICAqL1xuICBjb21taXRDZWxsRWRpdCgpOiB2b2lkIHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5kYXRhZ3JpZD8uY29tbWl0Q2VsbEVkaXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgZGlydHkgY2VsbHMgaW4gZ2l2ZW4gcm93LlxuICAgKlxuICAgKiBAcGFyYW0gcm93IC0gdGhlIHJvdyBudW1iZXIgKGlkeCkgb2YgdGhlIHJvdy5cbiAgICovXG4gIGNsZWFyRGlydHlSb3cocm93OiBudW1iZXIpOiB2b2lkIHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5kYXRhZ3JpZD8uY2xlYXJEaXJ0eVJvdyhyb3cpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGRpcnR5IG9uIGdpdmVuIGNlbGwuXG4gICAqXG4gICAqIEBwYXJhbSByb3cgLSB0aGUgcm93IG51bWJlciAoaWR4KSBvZiB0aGUgcm93XG4gICAqIEBwYXJhbSBjZWxsIC0gdGhlIGNlbGwgbnVtYmVyIChpZHgpIG9mIHRoZSBjZWxsXG4gICAqL1xuICBjbGVhckRpcnR5Q2VsbChyb3c6IG51bWJlciwgY2VsbDogbnVtYmVyKTogdm9pZCB7XG4gICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LmNsZWFyRGlydHlDZWxsKHJvdywgY2VsbCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGVycm9yIGZvciBhIGdpdmVuIGNlbGwgaW4gYSByb3dcbiAgICpcbiAgICogQHBhcmFtIHJvdyBUaGUgcm93IGluZGV4LlxuICAgKiBAcGFyYW0gY2VsbCBUaGUgY2VsbCBpbmRleC5cbiAgICovXG4gIGNsZWFyQWxsQ2VsbEVycm9yKHJvdzogbnVtYmVyLCBjZWxsOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLmRhdGFncmlkPy5jbGVhckFsbENlbGxFcnJvcihyb3csIGNlbGwpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhIGNlbGwgd2l0aCBhbiBlcnJvciBvZiBhIGdpdmVuIHR5cGVcbiAgICpcbiAgICogQHBhcmFtIHJvdyBUaGUgcm93IGluZGV4LlxuICAgKiBAcGFyYW0gY2VsbCBUaGUgY2VsbCBpbmRleC5cbiAgICogQHBhcmFtIHR5cGUgb2YgZXJyb3IuXG4gICAqL1xuICBjbGVhckNlbGxFcnJvcihyb3c6IG51bWJlciwgY2VsbDogbnVtYmVyLCB0eXBlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLmRhdGFncmlkPy5jbGVhckNlbGxFcnJvcihyb3csIGNlbGwsIHR5cGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhIHJvdyBsZXZlbCBhbGwgZXJyb3JzLCBhbGVydHMsIGluZm8gbWVzc2FnZXNcbiAgICpcbiAgICogQHBhcmFtIHJvdyBUaGUgcm93IGluZGV4LlxuICAgKi9cbiAgY2xlYXJSb3dFcnJvcihyb3c6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMuZGF0YWdyaWQ/LmNsZWFyUm93RXJyb3Iocm93KSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGVycm9ycywgYWxlcnRzIGFuZCBpbmZvIG1lc3NhZ2VzIGluIGVudGlyZSBkYXRhZ3JpZC5cbiAgICovXG4gIGNsZWFyQWxsRXJyb3JzKCk6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMuZGF0YWdyaWQ/LmNsZWFyQWxsRXJyb3JzKCkpO1xuICB9XG5cbiAgLyoqIFZhbGlkYXRlIGFsbCByb3dzIGFuZCBjZWxscyBpbiB0aGUgZW50aXJlIGdyaWQgaWYgdGhleSBoYXZlIHZhbGlkYXRpb24gb24gdGhlIGNvbHVtbiAqL1xuICBzaG93Um93RXJyb3Iocm93OiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZywgdHlwZTogU29ob0FsZXJ0VHlwZSk6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMuZGF0YWdyaWQ/LnNob3dSb3dFcnJvcihyb3csIG1lc3NhZ2UsIHR5cGUpKTtcbiAgfVxuXG4gIC8qKiBWYWxpZGF0ZSBhbGwgY2VsbHMgaW4gYSBzcGVjaWZpYyByb3cgKi9cbiAgdmFsaWRhdGVSb3cocm93OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLmRhdGFncmlkPy52YWxpZGF0ZVJvdyhyb3cpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYW5kIHNob3cgYSBtZXNzYWdlL2Vycm9yIG9uIHRoZSBnaXZlbiByb3cuXG4gICAqL1xuICB2YWxpZGF0ZUFsbCgpOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLmRhdGFncmlkPy52YWxpZGF0ZUFsbCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzdGF0dXMgb2YgYSBnaXZlbiByb3cgaW4gdGhlIGdyaWQuXG4gICAqXG4gICAqIEBwYXJhbSBpZHggLSB0aGUgcm93IG51bWJlciAoaWR4KSBvZiB0aGUgcm93XG4gICAqIEBwYXJhbSBzdGF0dXMgLSBzdGF0dXMgY2xhc3MgbmFtZSBlLmcuICdlcnJvcidcbiAgICogQHBhcmFtIHRvb2x0aXAgLSBzdHJpbmcgdmFsdWUgZm9yIHRvb2x0aXAgbWVzc2FnZSBlLmcuICdFcnJvcidcbiAgICovXG4gIHJvd1N0YXR1cyhpZHg6IG51bWJlciwgc3RhdHVzOiBzdHJpbmcsIHRvb2x0aXA6IHN0cmluZyk6IHZvaWQge1xuICAgIHJldHVybiB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmRhdGFncmlkPy5yb3dTdGF0dXMoaWR4LCBzdGF0dXMsIHRvb2x0aXApO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBjb250YWluaW5nIGFsbCBvZiB0aGUgY3VycmVudGx5IG1vZGlmaWVkIHJvd3MsIHRoZSB0eXBlIG9mIG1vZGlmaWNhdGlvblxuICAgKiBhbmQgdGhlIGNlbGxzIHRoYXQgYXJlIGRpcnR5IGFuZCB0aGUgZGF0YS5cbiAgICpcbiAgICogQHJldHVybnMgQW4ga2V5ZWQgb2JqZWN0IHNob3dpbmcgdGhlIGRpcnR5IHJvdyBpbmZvLlxuICAgKi9cbiAgZ2V0TW9kaWZpZWRSb3dzKCk6IFNvaG9EYXRhR3JpZE1vZGlmaWVkUm93cyB7XG4gICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHJldHVybiAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLmdldE1vZGlmaWVkUm93cygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIGNlbGwgdG8gZGlydHkgYW5kIGFkZCB0aGUgZGlydHkgaWNvbiB2aXN1YWxseS5cbiAgICpcbiAgICogQHBhcmFtIHJvdyBUaGUgcm93IGluZGV4XG4gICAqIEBwYXJhbSBjZWxsIFRoZSBjZWxsIGluZGV4XG4gICAqIEBwYXJhbSB0b2dnbGUgVHJ1ZSB0byBzZXQgaXQgYW5kIGZhbHNlIHRvIHJlbW92ZSBpdFxuICAgKiBAcGFyYW0gZGF0YSBBZGRzIGRpcnR5IGRhdGEgdG8gdGhlIGludGVybmFsIHRyYWNrZXJcbiAgICovXG4gIHNldERpcnR5SW5kaWNhdG9yKHJvdzogbnVtYmVyLCBjZWxsOiBudW1iZXIsIHRvZ2dsZTogYm9vbGVhbiwgZGF0YT86IG9iamVjdCk6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LnNldERpcnR5SW5kaWNhdG9yKHJvdywgY2VsbCwgdG9nZ2xlLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBzZWxlY3RlZCByb3dzXG4gICAqL1xuICByZW1vdmVTZWxlY3RlZCgpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmRhdGFncmlkPy5yZW1vdmVTZWxlY3RlZCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZXMgdGhlIGRpc3BsYXkgb2YgdGhlIGZpbHRlciByb3cuXG4gICAqL1xuICB0b2dnbGVGaWx0ZXJSb3coKTogdm9pZCB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5kYXRhZ3JpZD8udG9nZ2xlRmlsdGVyUm93KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0IGNvbmRpdGlvbnMgZnJvbSBvdXRzaWRlIG9yIHB1bGwgZnJvbSBmaWx0ZXIgcm93XG4gICAqL1xuICBhcHBseUZpbHRlcihjb25kaXRpb25zPzogQXJyYXk8U29ob0RhdGFHcmlkRmlsdGVyQ29uZGl0aW9uPik6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LmFwcGx5RmlsdGVyKGNvbmRpdGlvbnMpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZmlsdGVyIHJvdyBmcm9tIHBhc3NlZCBkYXRhIC8gc2V0dGluZ3NcbiAgICovXG4gIHNldEZpbHRlckNvbmRpdGlvbnMoY29uZGl0aW9uczogQXJyYXk8U29ob0RhdGFHcmlkRmlsdGVyQ29uZGl0aW9uPik6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LnNldEZpbHRlckNvbmRpdGlvbnMoY29uZGl0aW9ucyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZpbHRlciBjb25kaXRpb25zIGluIGFycmF5IGZvcm0gZnJvbSB0aGUgVUlcbiAgICovXG4gIGZpbHRlckNvbmRpdGlvbnMoKTogQXJyYXk8U29ob0RhdGFHcmlkRmlsdGVyQ29uZGl0aW9uPiB7XG4gICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHJldHVybiAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLmZpbHRlckNvbmRpdGlvbnMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYW55IGZpbHRlciBkZWZpbmVkLCBmb3IgdGhpcyBkYXRhZ3JpZC5cbiAgICovXG4gIGNsZWFyRmlsdGVyKCk6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICAgIHRoaXMuZGF0YWdyaWQuY2xlYXJGaWx0ZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByb3dzIGN1cnJlbnRseSBzZWxlY3RlZCBvbiB0aGUgZGF0YSBncmlkLlxuICAgKlxuICAgKiBAcmV0dXJuIGFuIGFycmF5IG9mIFNvaG9EYXRhR3JpZFNlbGVjdGVkUm93IGluc3RhbmNlcy5cbiAgICogQGRlcHJlY2F0ZWQgdXNlIHNlbGVjdGVkUm93cyBpbnN0ZWFkLlxuICAgKi9cbiAgZ2V0U2VsZWN0ZWRSb3dzKCk6IFNvaG9EYXRhR3JpZFNlbGVjdGVkUm93W10ge1xuICAgIHJldHVybiB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLnNlbGVjdGVkUm93cygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByb3dzIGN1cnJlbnRseSBzZWxlY3RlZCBvbiB0aGUgZGF0YSBncmlkLlxuICAgKlxuICAgKiBAcmV0dXJuIGFuIGFycmF5IG9mIFNvaG9EYXRhR3JpZFNlbGVjdGVkUm93IGluc3RhbmNlcy5cbiAgICovXG4gIHNlbGVjdGVkUm93cygpOiBTb2hvRGF0YUdyaWRTZWxlY3RlZFJvd1tdIHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgcmV0dXJuICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2VsZWN0ZWRSb3dzKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyBhbGwgdGhlIHJvd3MgaW4gdGhlIGdyaWQuXG4gICAqL1xuICBzZWxlY3RBbGxSb3dzKCkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LnNlbGVjdEFsbFJvd3MoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnNlbGVjdHMgYWxsIHRoZSByb3dzIGluIHRoZSBncmlkLlxuICAgKi9cbiAgdW5TZWxlY3RBbGxSb3dzKCkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LnVuU2VsZWN0QWxsUm93cygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHNlbGVjdGVkIHN0YXR1cyBvZiB0aGUgc3BlY2lmaWVkIHJvdyBpbiB0aGUgZGF0YSBncmlkLlxuICAgKlxuICAgKiBAcGFyYW0gaWR4IC0gdGhlIHJvdyBudW1iZXIgKGlkeCkgb2YgdGhlIHJvdyB0byBzZWxlY3QuXG4gICAqIEBkZXByZWNhdGVkIC0gdXNlIHNlbGVjdFJvd3MgaW5zdGVhZC5cbiAgICovXG4gIHNlbGVjdFJvdyhpZHg6IG51bWJlcikge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LnNlbGVjdFJvdyhpZHgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc2VsZWN0cyB0aGUgc3BlY2lmaWVkIHJvdyBpbiB0aGUgZGF0YSBncmlkLlxuICAgKlxuICAgKiBAcGFyYW0gaWR4IC0gdGhlIHJvdyBudW1iZXIgKGlkeCkgb2YgdGhlIHJvdyB0byBkZXNlbGVjdC5cbiAgICovXG4gIHVuc2VsZWN0Um93KGlkeDogbnVtYmVyKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5kYXRhZ3JpZD8udW5zZWxlY3RSb3coaWR4KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIGEgcmFuZ2Ugb2Ygcm93cyBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgcm93IGluZGV4ZXMuXG4gICAqXG4gICAqIEBwYXJhbSBzdGFydCAtIHRoZSBzdGFydCBpbmRleFxuICAgKiBAcGFyYW0gZW5kIC0gdGhlbiBlbmQgaW5kZXhcbiAgICovXG4gIHNlbGVjdFJhbmdlKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKSB7XG4gICAgY29uc3QgcmFuZ2U6IG51bWJlcltdID0gW3N0YXJ0LCBlbmRdO1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LnNlbGVjdFJvd3NCZXR3ZWVuSW5kZXhlcyhyYW5nZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzZWxlY3RlZCByb3dzIGJ5IHBhc3NpbmcgdGhlIHJvdyBpbmRleCBvciBhbiBhcnJheSBvZiByb3cgaW5kZXhlc1xuICAgKi9cbiAgc2VsZWN0Um93cyhyb3c6IG51bWJlciB8IG51bWJlcltdKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5kYXRhZ3JpZD8uc2VsZWN0Um93cyhyb3cpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc3RhdHVzIG9mIHRoZSBjaGVja2JveCBvbiB0aGUgaGVhZGVyLlxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGUgJ2FsbCcsICdwYXJ0aWFsJyBvciAnYWxsJy5cbiAgICovXG4gIHB1YmxpYyBzZXRIZWFkZXJDaGVja2JveFN0YXRlKHN0YXRlOiBTb2hvRGF0YUdyaWRIZWFkZXJDaGVja2JveFN0YXRlKSB7XG4gICAgY29uc3QgaGVhZGVyQ2hlY2tib3ggPSB0aGlzLmpRdWVyeUVsZW1lbnQ/LmZpbmQoJy5kYXRhZ3JpZC1oZWFkZXInKS5maW5kKCcuZGF0YWdyaWQtY2hlY2tib3gnKTtcbiAgICBpZiAoaGVhZGVyQ2hlY2tib3gpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gJ3BhcnRpYWwnKSB7XG4gICAgICAgIGhlYWRlckNoZWNrYm94LmRhdGEoJ3NlbGVjdGVkJywgJ3BhcnRpYWwnKVxuICAgICAgICAgIC5hZGRDbGFzcygnaXMtY2hlY2tlZCBpcy1wYXJ0aWFsJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgaGVhZGVyQ2hlY2tib3guZGF0YSgnc2VsZWN0ZWQnLCAnYWxsJylcbiAgICAgICAgICAuYWRkQ2xhc3MoJ2lzLWNoZWNrZWQnKS5yZW1vdmVDbGFzcygnaXMtcGFydGlhbCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09ICdub25lJykge1xuICAgICAgICBoZWFkZXJDaGVja2JveC5kYXRhKCdzZWxlY3RlZCcsICdub25lJylcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2lzLWNoZWNrZWQgaXMtcGFydGlhbCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSB0aGUgcm93IG9mIHRoZSBwYXNzZWQtaW4gaWR4LlxuICAgKiBOT1RFOiB2YWxpZCBvbmx5IHdoZW4gc2VsZWN0aW9uIG1vZGUgaXMgJ21peGVkJ1xuICAgKi9cbiAgYWN0aXZhdGVSb3coaWR4OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmRhdGFncmlkPy5hY3RpdmF0ZVJvdyhpZHgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlYWN0aXZhdGUgdGhlIGN1cnJlbnRseSBhY3RpdmF0ZWQgcm93LlxuICAgKlxuICAgKiBOT1RFOiB2YWxpZCBvbmx5IHdoZW4gc2VsZWN0aW9uIG1vZGUgaXMgJ21peGVkJ1xuICAgKi9cbiAgZGVhY3RpdmF0ZVJvdygpOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmRhdGFncmlkPy5kZWFjdGl2YXRlUm93KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50bHkgYWN0aXZhdGVkIHJvdy5cbiAgICogTk9URTogdmFsaWQgb25seSB3aGVuIHNlbGVjdGlvbiBtb2RlIGlzICdtaXhlZCdcbiAgICovXG4gIGFjdGl2YXRlZFJvdygpOiBTb2hvRGF0YUdyaWRSb3dBY3RpdmF0ZWQge1xuICAgIHJldHVybiB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICByZXR1cm4gKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5hY3RpdmF0ZWRSb3coKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhY3RpdmUgY2VsbC5cbiAgICpcbiAgICogQHBhcmFtIGlkeCBUaGUgaW5kZXggb2YgdGhlIHJvdyBvZiB0aGUgY2VsbCB0byBzZXQgYWN0aXZlLlxuICAgKiBAcGFyYW0gaWR4MiBUaGUgaW5kZXggb2YgdGhlIGNlbGwgdG8gc2V0IGFjdGl2ZS5cbiAgICovXG4gIHB1YmxpYyBzZXRBY3RpdmVDZWxsKGlkeDogbnVtYmVyLCBpZHgyOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmRhdGFncmlkPy5zZXRBY3RpdmVDZWxsKGlkeCwgaWR4Mik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYWN0aXZlIGNlbGwgaW5mb1xuICAgKi9cbiAgcHVibGljIGdldEFjdGl2ZUNlbGwoKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQ/LmFjdGl2ZUNlbGw7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBTY3JvbGxzIHRoZSByb3cgYXQgPGI+aWR4PC9iPiBpbnRvIHZpZXcgaW4gdGhlIHZpZXcgcG9ydC5cbiAgICpcbiAgICogQHBhcmFtIGlkeCBUaGUgaW5kZXggb2YgdGhlIHJvdyB0byBzY3JvbGwgaW50byB2aWV3LlxuICAgKi9cbiAgcHVibGljIHNjcm9sbFJvd0ludG9WaWV3KGlkeDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5kYXRhZ3JpZD8uc2V0QWN0aXZlQ2VsbChpZHgsIDApO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gYXJyYXkgb2Ygcm93IG51bWJlcnMgZm9yIHRoZSByb3dzIGNvbnRhaW5pbmcgdGhlIHZhbHVlIGZvciB0aGUgc3BlY2lmaWVkIGZpZWxkLlxuICAgKlxuICAgKiBAcGFyYW0gZmllbGROYW1lIFRoZSBmaWVsZCBuYW1lIHRvIHNlYXJjaC5cbiAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byB1c2UgaW4gc2VhcmNoLlxuICAgKi9cbiAgZmluZFJvd3NCeVZhbHVlKGZpZWxkTmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICByZXR1cm4gKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5maW5kUm93c0J5VmFsdWUoZmllbGROYW1lLCB2YWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUHJvZ3JhbW1hdGljYWxseSB0cmlnZ2VyIGEgY2FsbCB0byB0aGUgZGF0YWdyaWQuc2V0dGluZ3Muc291cmNlXG4gICAqIGZ1bmN0aW9uIHdpdGggdGhlIGdpdmVuIHBhZ2VyVHlwZS5cbiAgICpcbiAgICogQHBhcmFtIHBhZ2VyVHlwZSAtIGEgdmFsaWQgcGFnZXIgdHlwZS5cbiAgICovXG4gIHRyaWdnZXJTb3VyY2UocGFnZXJUeXBlOiBTb2hvRGF0YUdyaWRUcmlnZ2VyU291cmNlUGFnZXJUeXBlLCBjYWxsYmFjaz86IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5kYXRhZ3JpZD8udHJpZ2dlclNvdXJjZShwYWdlclR5cGUsIGNhbGxiYWNrKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGV4cG9ydCBvZiBncmlkIGRhdGEgdG8gRXhjZWwuXG4gICAqXG4gICAqIEBwYXJhbSBmaWxlTmFtZSBUaGUgcHJlZml4IG5hbWUgdG8gYmUgdXNlZCBmb3IgdGhlIGV4cG9ydGVkIGZpbGUuXG4gICAqIEBwYXJhbSB3b3Jrc2hlZXROYW1lIFRoZSBuYW1lIHRvIGJlIHVzZWQgZm9yIHRoZSB3b3Jrc2hlZXQuXG4gICAqIEBwYXJhbSBjdXN0b21EcyBBIGRhdGFzb3VyY2UgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgKGRlcHJlY2F0ZWQpXG4gICAqL1xuICBleHBvcnRUb0V4Y2VsKGZpbGVOYW1lOiBzdHJpbmcsIHdvcmtzaGVldE5hbWU/OiBzdHJpbmcgfCB1bmRlZmluZWQsIGN1c3RvbURzPzogT2JqZWN0W10pOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmRhdGFncmlkPy5leHBvcnRUb0V4Y2VsKGZpbGVOYW1lLCAod29ya3NoZWV0TmFtZSBhcyBhbnkpLCAoY3VzdG9tRHMgYXMgYW55KSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlciBleHBvcnQgb2YgZ3JpZCBkYXRhIHRvIENTViBmb3JtYXR0ZWQgZmlsZS5cbiAgICpcbiAgICogQHBhcmFtIGZpbGVOYW1lIFRoZSBwcmVmaXggbmFtZSB0byBiZSB1c2VkIGZvciB0aGUgZXhwb3J0ZWQgZmlsZS5cbiAgICogQHBhcmFtIGN1c3RvbURzIEEgZGF0YXNvdXJjZSB0byBvdmVycmlkZSB0aGUgZGVmYXVsdC5cbiAgICogQHBhcmFtIHNlcGFyYXRvciBUaGUgc2VwYXJhdG9yIHRvIHVzZSBpbiB0aGUgY3ZzIGZpbGUsIGRlZmF1bHRzIHRvICdzZXA9LCdcbiAgICogQHBhcmFtIGZvcm1hdCBpZiB0cnVlLCBkYXRlIGFuZCBudW1iZXIgdmFsdWVzIHdpbGwgYmUgZm9ybWF0dGVkIGJhc2VkIG9uIHRoZSBsb2NhbGVcbiAgICovXG4gIGV4cG9ydFRvQ3N2KGZpbGVOYW1lOiBzdHJpbmcsIGN1c3RvbURzPzogT2JqZWN0W10sIHNlcGFyYXRvcjogc3RyaW5nID0gJ3NlcD0sJywgZm9ybWF0PzogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LmV4cG9ydFRvQ3N2KGZpbGVOYW1lLCAoY3VzdG9tRHMgYXMgYW55KSwgc2VwYXJhdG9yLCBmb3JtYXQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNvbHVtbnMgYW5kIGNvbHVtbkdyb3VwcyBkaXNwbGF5ZWQgb24gdGhlIGdyaWQuXG4gICAqXG4gICAqIEBwYXJhbSBjb2x1bW5zIFRoZSBkYXRhZ3JpZCBjb2x1bW5zIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIGNvbHVtbkdyb3VwcyBUaGUgY29sdW1uIGdyb3VwcyB0byB1cGRhdGUuXG4gICAqL1xuICB1cGRhdGVDb2x1bW5zKGNvbHVtbnM6IFNvaG9EYXRhR3JpZENvbHVtbltdLCBjb2x1bW5Hcm91cHM6IFNvaG9EYXRhR3JpZENvbHVtbkdyb3VwW10pOiB2b2lkIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmRhdGFncmlkPy51cGRhdGVDb2x1bW5zKGNvbHVtbnMsIGNvbHVtbkdyb3Vwcyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgYSBKU09OIGFycmF5IHdpdGggY29sdW1ucyBhbmQgcmV0dXJuIHRoZSBjb2x1bW4gb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0gY29sdW1uU3RyIFRoZSBqc29uIHJlcHJlc250YXRpb24gb2YgdGhlIGNvbHVtbiBvYmplY3QuXG4gICAqIEByZXR1cm4gIFRoZSBhcnJheSBvZiBjb2x1bW5zLlxuICAgKi9cbiAgY29sdW1uc0Zyb21TdHJpbmcoY29sdW1uczogc3RyaW5nKTogT2JqZWN0IHsgLy8gQHRvZG8gdHlwaW5ncyBmb3IgcmV0dXJuIHZhbHVlXG4gICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHJldHVybiAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLmNvbHVtbnNGcm9tU3RyaW5nKGNvbHVtbnMpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IGNvbHVtbnMgdG8gdGhlaXIgZGVmYXVsdHMgKHVzZWQgb24gcmVzdG9yZSBtZW51IGl0ZW0pLlxuICAgKi9cbiAgcmVzZXRDb2x1bW5zKCk6IHZvaWQge1xuICAgIHJldHVybiB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmRhdGFncmlkPy5yZXNldENvbHVtbnMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVuIHRoZSBwZXJzb25hbGl6ZSBkaWFsb2cuXG4gICAqL1xuICBwZXJzb25hbGl6ZUNvbHVtbnMoKTogdm9pZCB7XG4gICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YWdyaWQ/LnBlcnNvbmFsaXplQ29sdW1ucygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3RvcmUgdGhlIHVzZXIgc2V0dGluZ3MgZnJvbSBsb2NhbCBTdG9yYWdlIG9yIGFzIHBhc3NlZCBpbi5cbiAgICpcbiAgICogQHBhcmFtIHNldHRpbmdzIFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgc2V0dGluZ3MgdG8gdXNlLlxuICAgKi9cbiAgcmVzdG9yZVVzZXJTZXR0aW5ncyhzZXR0aW5nczogYW55KTogdm9pZCB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5kYXRhZ3JpZD8ucmVzdG9yZVVzZXJTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgfSk7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEV2ZW50IEhhbmRsZXJzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvKipcbiAgICogSGFuZGxlIGEgcmVxdWVzdCB0byBsb2FkIHRoZSBkYXRhIGZvciB0aGUgZ3JpZCBmcm9tIHRoZSBzZXJ2aWNlLlxuICAgKlxuICAgKiBAdG9kbyBwYWdpbmcgLSBub3QgeWV0IGZ1bGx5IGltcGxlbWVudGVkP1xuICAgKi9cbiAgcHJpdmF0ZSBvbkRhdGFSZXF1ZXN0KHJlcXVlc3Q6IFNvaG9EYXRhR3JpZFNvdXJjZVJlcXVlc3QsIHJlc3BvbnNlOiBTb2hvRGF0YUdyaWRSZXNwb25zZUZ1bmN0aW9uKSB7XG4gICAgLy8gVGhlIHJlcXVlc3QgZm9yIGRhdGEgaXMgbWFkZSBieSB0aGUgZGF0YWdyaWQsIHNvIGp1bXAgYmFjayBpbnRvIHRoZSBhbmd1bGFyIHpvbmUgLi4uXG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+XG4gICAgICAvLyAuLi4gcmVxdWVzdCB0aGUgZGF0YSBmcm9tIHRoZSBzZXJ2aWNlIC4uLlxuICAgICAgdGhpcy5kYXRhZ3JpZFNlcnZpY2UuZ2V0RGF0YShyZXF1ZXN0KVxuICAgICAgICAuc3Vic2NyaWJlKChyZXN1bHRzOiBPYmplY3RbXSkgPT4ge1xuICAgICAgICAgIC8vIC4uIG9uIHJlY2VpcHQsIHBhc3MgdGhlIGRhdGEgYmFjayB0byB0aGUgZGF0YWdyaWQgYnV0XG4gICAgICAgICAgLy8gb3V0c2lkZSB0aGUgYW5ndWxhciB6b25lLlxuICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHJlc3BvbnNlKHJlc3VsdHMsIHJlcXVlc3QpKTtcbiAgICAgICAgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIGFmdGVyIGEgY2hpbGQgcm93IGhhcyBiZWVuIGV4cGFuZGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBvbkV4cGFuZFJvd0hhbmRsZXIoYXJnczogU29ob0RhdGFHcmlkUm93RXhwYW5kRXZlbnQpIHtcbiAgICBjb25zdCBldmVudCA9IHsgZ3JpZDogdGhpcywgLi4uYXJncyB9O1xuICAgIGlmICh0aGlzLmdyaWRPcHRpb25zLnJvd1RlbXBsYXRlQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLmJ1aWxkUm93VGVtcGxhdGVDb21wb25lbnQoZXZlbnQpO1xuICAgIH1cbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy5leHBhbmRyb3cubmV4dChldmVudCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgY29tcG9uZW50IGZvciByb3dUZW1wbGF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZFJvd1RlbXBsYXRlQ29tcG9uZW50KGV2ZW50OiBhbnkpIHtcblxuICAgIGlmICghdGhpcy5ncmlkT3B0aW9ucy5yb3dUZW1wbGF0ZUNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbXBvbmVudEZhY3RvcnkgPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFxuICAgICAgdGhpcy5ncmlkT3B0aW9ucy5yb3dUZW1wbGF0ZUNvbXBvbmVudFxuICAgICk7XG5cbiAgICAvLyBSZW1vdmUgY29tcG9uZW50IGlmIGl0IGV4aXN0c1xuICAgIGNvbnN0IGlkeCA9IHRoaXMucm93VGVtcGxhdGVDb21wb25lbnRzLmZpbmRJbmRleCgoYykgPT4gZXZlbnQucm93ID09PSBjLnJvdyk7XG4gICAgaWYgKGlkeCA+IC0xKSB7XG4gICAgICB0aGlzLnJvd1RlbXBsYXRlQ29tcG9uZW50c1tpZHhdLmNvbXBvbmVudC5kZXN0cm95KCk7XG4gICAgICB0aGlzLnJvd1RlbXBsYXRlQ29tcG9uZW50cy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250YWluZXJQYXJlbnQgPSBldmVudC5kZXRhaWxbMF0ucXVlcnlTZWxlY3RvcignLmRhdGFncmlkLXJvdy1kZXRhaWwtcGFkZGluZycpO1xuICAgIGNvbnRhaW5lclBhcmVudC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cImRhdGFncmlkLWNlbGwtbGF5b3V0XCI+PC9kaXY+JztcbiAgICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJQYXJlbnQucXVlcnlTZWxlY3RvcignLmRhdGFncmlkLWNlbGwtbGF5b3V0Jyk7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgbGV0IGRhdGFDb21wb25lbnQ6IGFueTtcbiAgICBpZiAoZXZlbnQuaXRlbS5oYXNPd25Qcm9wZXJ0eSh0aGlzLmdyaWRPcHRpb25zLnJvd1RlbXBsYXRlRmllbGQpKSB7XG4gICAgICBkYXRhQ29tcG9uZW50ID0gZXZlbnQuaXRlbVsodGhpcy5ncmlkT3B0aW9ucy5yb3dUZW1wbGF0ZUZpZWxkIGFzIGFueSldO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhQ29tcG9uZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGluamVjdG9yID0gSW5qZWN0b3IuY3JlYXRlKHtcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogJ2FyZ3MnLFxuICAgICAgICAgIHVzZVZhbHVlOiB7IGlucHV0c0RhdGE6IHRoaXMuZ3JpZE9wdGlvbnMucm93VGVtcGxhdGVDb21wb25lbnRJbnB1dHMsIGRhdGE6IGRhdGFDb21wb25lbnQsIC4uLmV2ZW50IH0sXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBwYXJlbnQ6IHRoaXMuaW5qZWN0b3IsXG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIGNvbXBvbmVudCwgaW4gdGhlIGNvbnRhaW5lci5cbiAgICBjb25zdCBjb21wb25lbnQgPSBjb21wb25lbnRGYWN0b3J5LmNyZWF0ZShpbmplY3RvciwgW10sIGNvbnRhaW5lcik7XG4gICAgZXZlbnRbJ3Jvd1RlbXBsYXRlQ29tcG9uZW50J10gPSBjb21wb25lbnQ7XG5cbiAgICAvLyAuLi4gYXR0YWNoIHRvIHRoZSBhcHAgLi4uXG4gICAgdGhpcy5hcHAuYXR0YWNoVmlldyhjb21wb25lbnQuaG9zdFZpZXcpO1xuXG4gICAgLy8gLi4uIHVwZGF0ZSBmb3IgY2hhbmdlcyAuLi5cbiAgICBjb21wb25lbnQuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuXG4gICAgLy8gLi4uIGZpbmFsbHkgc3RvcmUgdGhlIGNyZWF0ZWQgY29tcG9uZW50IGZvciBsYXRlciwgd2UnbGwgZGVsZXRlIGl0IHdoZW5cbiAgICAvLyByZXF1ZXN0ZWQsIG9yIHdoZW4gdGhlIGdyaWQgaXMgZGVzdHJveWVkLlxuICAgIHRoaXMucm93VGVtcGxhdGVDb21wb25lbnRzLnB1c2goeyByb3c6IGV2ZW50LnJvdywgY29tcG9uZW50IH0pO1xuXG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgYWZ0ZXIgYSBjb250ZXh0IG1lbnUgaXMgb3BlbmVkXG4gICAqL1xuICBwcml2YXRlIG9uS2V5RG93bkhhbmRsZXIoZTogSlF1ZXJ5LkV2ZW50LCBhcmdzOiBTb2hvRGF0YUdyaWRLZXlEb3duQXJncywgcmVzcG9uc2U6IEZ1bmN0aW9uKSB7XG4gICAgY29uc3QgZXZlbnQgPSB7IGUsIGFyZ3MsIHJlc3BvbnNlIH07XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMua2V5ZG93bi5uZXh0KGV2ZW50KTtcbiAgICB9KTtcblxuICAgIGlmIChlLmtleSA9PT0gJ0YxMCcgJiYgZS5zaGlmdEtleSkge1xuICAgICAgJCgoZSBhcyBhbnkpLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoJ2NvbnRleHRtZW51Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIGFmdGVyIGEgY2hpbGQgcm93IGhhcyBiZWVuIGV4cGFuZGVkLlxuICAgKlxuICAgKiBAcGFyYW0gaWRQcm9wZXJ0eSBzdHJpbmcgaWRcbiAgICovXG4gIEBJbnB1dCgpIHNldCBvbkJlZm9yZVNlbGVjdChiZWZvcmVTZWxlY3RGdW5jdGlvbjogU29ob0RhdGFHcmlkQmVmb3JlU2VsZWN0RnVuY3Rpb24gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5vbkJlZm9yZVNlbGVjdCA9IGJlZm9yZVNlbGVjdEZ1bmN0aW9uO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLm9uQmVmb3JlU2VsZWN0ID0gYmVmb3JlU2VsZWN0RnVuY3Rpb247XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdvbkJlZm9yZVNlbGVjdCcsIFJlZnJlc2hIaW50RmxhZ3MuUmVidWlsZCk7XG4gICAgfVxuICB9XG4gIGdldCBvbkJlZm9yZVNlbGVjdCgpOiBTb2hvRGF0YUdyaWRCZWZvcmVTZWxlY3RGdW5jdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLm9uQmVmb3JlU2VsZWN0O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMub25CZWZvcmVTZWxlY3Q7XG4gIH1cblxuICAvKipcbiAgICogIE1ha2VzIGl0IHBvc3NpYmxlIHRvIHNhdmUgc2VsZWN0aW9ucyB3aGVuIGNoYW5naW5nIHBhZ2VzIG9uIHNlcnZlciBzaWRlIHBhZ2luZy5cbiAgICogIFlvdSBtYXkgd2FudCB0byBhbHNvIHVzZSBzaG93U2VsZWN0QWxsQ2hlY2tCb3g6IGZhbHNlXG4gICAqL1xuICBASW5wdXQoKSBzZXQgYWxsb3dTZWxlY3RBY3Jvc3NQYWdlcyhhbGxvd1NlbGVjdEFjcm9zc1BhZ2VzOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuYWxsb3dTZWxlY3RBY3Jvc3NQYWdlcyA9IGFsbG93U2VsZWN0QWNyb3NzUGFnZXM7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuYWxsb3dTZWxlY3RBY3Jvc3NQYWdlcyA9IGFsbG93U2VsZWN0QWNyb3NzUGFnZXM7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdhbGxvd1NlbGVjdEFjcm9zc1BhZ2VzJywgUmVmcmVzaEhpbnRGbGFncy5Ob25lKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGFsbG93U2VsZWN0QWNyb3NzUGFnZXMoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLmFsbG93U2VsZWN0QWNyb3NzUGFnZXM7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5hbGxvd1NlbGVjdEFjcm9zc1BhZ2VzO1xuICB9XG5cbiAgLyoqXG4gICAqICBTZWxlY3QgYWxsIHdpbGwgZWZmZWN0IG9ubHkgb24gY3VycmVudCBwYWdlIGFuZCBpdHMgZm9yIGNsaWVudCBzaWRlIHBhZ2luZyBvbmx5LlxuICAgKi9cbiAgQElucHV0KCkgc2V0IHNlbGVjdEFsbEN1cnJlbnRQYWdlKHNlbGVjdEFsbEN1cnJlbnRQYWdlOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuc2VsZWN0QWxsQ3VycmVudFBhZ2UgPSBzZWxlY3RBbGxDdXJyZW50UGFnZTtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5zZWxlY3RBbGxDdXJyZW50UGFnZSA9IHNlbGVjdEFsbEN1cnJlbnRQYWdlO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnc2VsZWN0QWxsQ3VycmVudFBhZ2UnLCBSZWZyZXNoSGludEZsYWdzLk5vbmUpO1xuICAgIH1cbiAgfVxuICBnZXQgc2VsZWN0QWxsQ3VycmVudFBhZ2UoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLnNlbGVjdEFsbEN1cnJlbnRQYWdlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuc2VsZWN0QWxsQ3VycmVudFBhZ2U7XG4gIH1cblxuICAvKipcbiAgICogQW4gYXJyYXkgb2YgY29sdW1uIElEcyB1c2VkIHRvIGRlZmluZSBhcmlhIGRlc2NyaXB0b3JzIGZvciBzZWxlY3Rpb24gY2hlY2tib3hlcy5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBjb2x1bW5JZHMoY29sdW1uSWRzOiBBcnJheTxTdHJpbmcgfCBOdW1iZXI+IHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuY29sdW1uSWRzID0gY29sdW1uSWRzO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLmNvbHVtbklkcyA9IGNvbHVtbklkcztcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ2NvbHVtbklkcycsIFJlZnJlc2hIaW50RmxhZ3MuTm9uZSk7XG4gICAgfVxuICB9XG4gIGdldCBjb2x1bW5JZHMoKTogQXJyYXk8U3RyaW5nIHwgTnVtYmVyPiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHJldHVybiAodGhpcy5kYXRhZ3JpZCBhcyBhbnkpLnNldHRpbmdzLmNvbHVtbklkcztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLmNvbHVtbklkcztcbiAgfVxuXG4gIC8qKlxuICAgKklmIHRydWUsIHRoZSBuZXcgcm93IGluZGljYXRvciB3aWxsIGRpc3BsYXkgYWZ0ZXIgYWRkaW5nIGEgcm93XG4gICAqXG4gICAqIEBwYXJhbSBzaG93TmV3Um93SW5kaWNhdG9yIGJvb2xlYW4gc2hvdyBuZXcgaW5kaWNhdG9yIHNldHRpbmdcbiAgICovXG4gIEBJbnB1dCgpIHNldCBzaG93TmV3Um93SW5kaWNhdG9yKHNob3dOZXdSb3dJbmRpY2F0b3I6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5zaG93TmV3Um93SW5kaWNhdG9yID0gc2hvd05ld1Jvd0luZGljYXRvcjtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5zaG93TmV3Um93SW5kaWNhdG9yID0gc2hvd05ld1Jvd0luZGljYXRvcjtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ3Nob3dOZXdSb3dJbmRpY2F0b3InLCBSZWZyZXNoSGludEZsYWdzLk5vbmUpO1xuICAgIH1cbiAgfVxuICBnZXQgc2hvd05ld1Jvd0luZGljYXRvcigpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3Muc2hvd05ld1Jvd0luZGljYXRvcjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLnNob3dOZXdSb3dJbmRpY2F0b3I7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgb25FeHBhbmRDaGlsZHJlbihleHBhbmRDaGlsZHJlbkZ1bmN0aW9uOiBTb2hvRGF0YUdyaWRFeHBhbmRDaGlsZHJlbkZ1bmN0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMub25FeHBhbmRDaGlsZHJlbiA9IGV4cGFuZENoaWxkcmVuRnVuY3Rpb247XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3Mub25FeHBhbmRDaGlsZHJlbiA9IGV4cGFuZENoaWxkcmVuRnVuY3Rpb247XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdvbkV4cGFuZENoaWxkcmVuJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICBnZXQgb25FeHBhbmRDaGlsZHJlbigpOiBTb2hvRGF0YUdyaWRFeHBhbmRDaGlsZHJlbkZ1bmN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3Mub25FeHBhbmRDaGlsZHJlbjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLm9uRXhwYW5kQ2hpbGRyZW47XG4gIH1cblxuICBASW5wdXQoKSBzZXQgb25Db2xsYXBzZUNoaWxkcmVuKGNvbGxhcHNlQ2hpbGRyZW5GdW5jdGlvbjogU29ob0RhdGFHcmlkQ29sbGFwc2VDaGlsZHJlbkZ1bmN0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMub25Db2xsYXBzZUNoaWxkcmVuID0gY29sbGFwc2VDaGlsZHJlbkZ1bmN0aW9uO1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLm9uQ29sbGFwc2VDaGlsZHJlbiA9IGNvbGxhcHNlQ2hpbGRyZW5GdW5jdGlvbjtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goJ29uQ29sbGFwc2VDaGlsZHJlbicsIFJlZnJlc2hIaW50RmxhZ3MuUmVidWlsZCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IG9uQ29sbGFwc2VDaGlsZHJlbigpOiBTb2hvRGF0YUdyaWRDb2xsYXBzZUNoaWxkcmVuRnVuY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5vbkNvbGxhcHNlQ2hpbGRyZW47XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9ncmlkT3B0aW9ucy5vbkNvbGxhcHNlQ2hpbGRyZW47XG4gIH1cblxuICBASW5wdXQoKSBzZXQgb25Qb3N0UmVuZGVyQ2VsbChvblBvc3RSZW5kZXJDZWxsOiBTb2hvRGF0YUdyaWRQb3N0UmVuZGVyQ2VsbEZ1bmN0aW9uKSB7XG4gICAgY29uc3QgcG9zdFJlbmRlckNlbGwgPSAoZTogSlF1ZXJ5PEhUTUxFbGVtZW50PiwgYXJnczogU29ob0RhdGFHcmlkUG9zdFJlbmRlckNlbGxBcmdzKSA9PiB7XG4gICAgICB0aGlzLm9uUG9zdFJlbmRlckNlbGxIYW5kbGVyKGUsIGFyZ3MpO1xuICAgICAgb25Qb3N0UmVuZGVyQ2VsbChlLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMub25Qb3N0UmVuZGVyQ2VsbCA9IHBvc3RSZW5kZXJDZWxsO1xuXG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3Mub25Qb3N0UmVuZGVyQ2VsbCA9IHBvc3RSZW5kZXJDZWxsO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBvbkRlc3Ryb3lDZWxsKG9uRGVzdHJveUNlbGw6IFNvaG9EYXRhR3JpZFBvc3RSZW5kZXJDZWxsRnVuY3Rpb24pIHtcbiAgICBjb25zdCBkZXN0cm95Q2VsbCA9IChlOiBKUXVlcnk8SFRNTEVsZW1lbnQ+LCBhcmdzOiBTb2hvRGF0YUdyaWRQb3N0UmVuZGVyQ2VsbEFyZ3MpID0+IHtcbiAgICAgIHRoaXMub25EZXN0cm95Q2VsbEhhbmRsZXIoYXJncyk7XG4gICAgICBvbkRlc3Ryb3lDZWxsKGUsIGFyZ3MpO1xuICAgIH07XG5cbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5vbkRlc3Ryb3lDZWxsID0gZGVzdHJveUNlbGw7XG5cbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgdGhpcy5kYXRhZ3JpZC5zZXR0aW5ncy5vbkRlc3Ryb3lDZWxsID0gZGVzdHJveUNlbGw7XG4gICAgfVxuICB9XG5cbiAgQElucHV0KCkgc2V0IG9uRWRpdENlbGwob25FZGl0Q2VsbDogU29ob0RhdGFHcmlkRWRpdENlbGxGdW5jdGlvbikge1xuICAgIGNvbnN0IGVkaXRDZWxsID0gKGVkaXRvcjogRXh0ZW5kZWRTb2hvRGF0YUdyaWRDZWxsRWRpdG9yKSA9PiB7XG4gICAgICB0aGlzLm9uRWRpdENlbGxIYW5kbGVyKGVkaXRvcik7XG4gICAgICBvbkVkaXRDZWxsKGVkaXRvcik7XG4gICAgfTtcblxuICAgIHRoaXMuX2dyaWRPcHRpb25zLm9uRWRpdENlbGwgPSBlZGl0Q2VsbDtcblxuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLm9uRWRpdENlbGwgPSBlZGl0Q2VsbDtcbiAgICB9XG4gIH1cblxuICBASW5wdXQoKSBzZXQgb25LZXlEb3duKG9uS2V5RG93bjogU29ob0RhdGFHcmlkS2V5RG93bkZ1bmN0aW9uKSB7XG4gICAgY29uc3Qga2V5RG93biA9IChlOiBKUXVlcnkuRXZlbnQsIGFyZ3M6IFNvaG9EYXRhR3JpZEtleURvd25BcmdzLCByZXNwb25zZTogRnVuY3Rpb24pID0+IHtcbiAgICAgIHRoaXMub25LZXlEb3duSGFuZGxlcihlLCBhcmdzLCByZXNwb25zZSk7XG4gICAgICBvbktleURvd24oZSwgYXJncywgcmVzcG9uc2UpO1xuICAgIH07XG5cbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5vbktleURvd24gPSBrZXlEb3duO1xuXG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3Mub25LZXlEb3duID0ga2V5RG93bjtcbiAgICB9XG4gIH1cblxuICBASW5wdXQoKSBzZXQgb25FeHBhbmRSb3cob25FeHBhbmRSb3c6IFNvaG9EYXRhR3JpZEV4cGFuZFJvd0Z1bmN0aW9uKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMub25FeHBhbmRSb3cgPSBvbkV4cGFuZFJvdztcblxuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICB0aGlzLmRhdGFncmlkLnNldHRpbmdzLm9uRXhwYW5kUm93ID0gb25FeHBhbmRSb3c7XG4gICAgfVxuICB9XG5cbiAgLyogSWNvbiBuYW1lIGZvciBmYWxsYmFja3MgaWYgdGhlIGltYWdlIGRvZXMgbm90IGxvYWQgKi9cbiAgQElucHV0KCkgc2V0IGZhbGxiYWNrSW1hZ2UoZmFsbGJhY2tJbWFnZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZ3JpZE9wdGlvbnMuZmFsbGJhY2tJbWFnZSA9IGZhbGxiYWNrSW1hZ2U7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZmFsbGJhY2tJbWFnZSA9IGZhbGxiYWNrSW1hZ2U7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCdmYWxsYmFja0ltYWdlJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICBnZXQgZmFsbGJhY2tJbWFnZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICByZXR1cm4gKHRoaXMuZGF0YWdyaWQgYXMgYW55KS5zZXR0aW5ncy5mYWxsYmFja0ltYWdlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuZmFsbGJhY2tJbWFnZTtcbiAgfVxuXG4gIC8qIFRvb2x0aXAgdG8gc2hvdyBpZiBpdCB0aGUgZmFsbGJhY2sgYXBwZWFycyAqL1xuICBASW5wdXQoKSBzZXQgZmFsbGJhY2tUb29sdGlwKGZhbGxiYWNrVG9vbHRpcDogU29ob0ZhbGxiYWNrVG9vbHRpcE9wdGlvbnMgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9ncmlkT3B0aW9ucy5mYWxsYmFja1Rvb2x0aXAgPSBmYWxsYmFja1Rvb2x0aXA7XG4gICAgaWYgKHRoaXMuZGF0YWdyaWQpIHtcbiAgICAgIHRoaXMuZGF0YWdyaWQuc2V0dGluZ3MuZmFsbGJhY2tUb29sdGlwID0gZmFsbGJhY2tUb29sdGlwO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgnZmFsbGJhY2tUb29sdGlwJywgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKTtcbiAgICB9XG4gIH1cblxuICBnZXQgZmFsbGJhY2tUb29sdGlwKCk6IFNvaG9GYWxsYmFja1Rvb2x0aXBPcHRpb25zIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5kYXRhZ3JpZCkge1xuICAgICAgcmV0dXJuICh0aGlzLmRhdGFncmlkIGFzIGFueSkuc2V0dGluZ3MuZmFsbGJhY2tUb29sdGlwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuZmFsbGJhY2tUb29sdGlwO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIGFmdGVyIGVkaXQgbW9kZSBpcyBhY3RpdmF0ZWQgb24gYW4gZWRpdG9yLlxuICAgKlxuICAgKiBAcGFyYW0gYXJncyB0aGUgZXZlbnQgYXJndW1lbnRzXG4gICAqL1xuICBwcml2YXRlIG9uRXhpdEVkaXRNb2RlKGFyZ3M6IFNvaG9EYXRhR3JpZEVkaXRNb2RlRXZlbnQpIHtcbiAgICBjb25zdCBldmVudCA9IHsgZ3JpZDogdGhpcywgLi4uYXJncyB9O1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLmV4aXRlZGl0bW9kZS5uZXh0KGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCBiZWZvcmUgZWRpdCBtb2RlIGlzIGFjdGl2YXRlZCBvbiBhbiBlZGl0b3IuXG4gICAqXG4gICAqIEBwYXJhbSBhcmdzIHRoZSBldmVudCBhcmd1bWVudHNcbiAgICovXG4gIHByaXZhdGUgb25CZWZvcmVFbnRlckVkaXRNb2RlKGFyZ3M6IFNvaG9EYXRhR3JpZEVkaXRNb2RlRXZlbnQpIHtcbiAgICBjb25zdCBldmVudCA9IHsgZ3JpZDogdGhpcywgLi4uYXJncyB9O1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLmJlZm9yZWVudGVyZWRpdG1vZGUubmV4dChldmVudCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiBlZGl0IG1vZGUgaXMgYWN0aXZhdGVkIG9uIGFuIGVkaXRvci5cbiAgICpcbiAgICogQHBhcmFtIGFyZ3MgdGhlIGV2ZW50IGFyZ3VtZW50c1xuICAgKi9cbiAgcHJpdmF0ZSBvbkVudGVyRWRpdE1vZGUoYXJnczogU29ob0RhdGFHcmlkRWRpdE1vZGVFdmVudCkge1xuICAgIGNvbnN0IGV2ZW50ID0geyBncmlkOiB0aGlzLCAuLi5hcmdzIH07XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuZW50ZXJlZGl0bW9kZS5uZXh0KGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCBhZnRlciBhIGNoaWxkIHJvdyBoYXMgYmVlbiBjb2xsYXBzZWQuXG4gICAqL1xuICBwcml2YXRlIG9uQ29sbGFwc2VSb3coYXJnczogU29ob0RhdGFHcmlkUm93Q29sbGFwc2VFdmVudCkge1xuICAgIGNvbnN0IGV2ZW50ID0geyBncmlkOiB0aGlzLCAuLi5hcmdzIH07XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuY29sbGFwc2Vyb3cubmV4dChldmVudCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiBhIHJvdyBoYXMgYmVlbiBhZGRlZC5cbiAgICovXG4gIHByaXZhdGUgb25Sb3dBZGQoYXJnczogU29ob0RhdGFHcmlkQWRkUm93RXZlbnQpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy5yb3dBZGQubmV4dChhcmdzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCB3aGVuIGEgY2VsbCBoYXMgY2hhbmdlZC5cbiAgICovXG4gIHByaXZhdGUgb25DZWxsQ2hhbmdlKGFyZ3M6IFNvaG9EYXRhR3JpZENlbGxDaGFuZ2VFdmVudCkge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLmNlbGxjaGFuZ2UubmV4dChhcmdzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCB3aGVuIGEgcm93IGhhcyBiZWVuIGNsaWNrZWQuXG4gICAqL1xuICBwcml2YXRlIG9uUm93Q2xpY2tlZChhcmdzOiBTb2hvRGF0YUdyaWRSb3dDbGlja2VkKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMucm93Q2xpY2tlZC5uZXh0KGFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gdGhlIGZpbHRlciByb3cgaXMgY2xvc2VkLlxuICAgKi9cbiAgcHJpdmF0ZSBvbkNsb3NlRmlsdGVyUm93KGFyZ3M6IFNvaG9EYXRhR3JpZENsb3NlRmlsdGVyUm93RXZlbnQpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZUZpbHRlclJvdy5uZXh0KGFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gYSBjb250ZXh0IG1lbnUgaXMgaXMgY2xpY2tlZC5cbiAgICovXG4gIHByaXZhdGUgb25Db250ZXh0TWVudShhcmdzOiBTb2hvRGF0YUdyaWRSb3dDbGlja2VkKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dE1lbnU/Lm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiBhIGNvbnRleHQgbWVudSBpcyBpcyBjbGlja2VkLlxuICAgKi9cbiAgcHJpdmF0ZSBvbkRvdWJsZUNsaWNrKGFyZ3M6IFNvaG9EYXRhR3JpZFJvd0NsaWNrZWQpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy5yb3dEb3VibGVDbGlja2VkLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiB0aGUgZGF0YSBpcyBmaWx0ZXJlZC5cbiAgICovXG4gIHByaXZhdGUgb25GaWx0ZXJlZChhcmdzOiBTb2hvRGF0YUdyaWRGaWx0ZXJlZEV2ZW50KSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuZmlsdGVyZWQubmV4dChhcmdzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCB3aGVuIGZpbHRlciByb3cgb3BlbmVkLlxuICAgKi9cbiAgcHJpdmF0ZSBvbk9wZW5GaWx0ZXJSb3coYXJnczogU29ob0RhdGFHcmlkT3BlbkZpbHRlclJvd0V2ZW50KSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMub3BlbkZpbHRlclJvdy5uZXh0KGFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gYSByb3cgaXMgcmVtb3ZlZC5cbiAgICovXG4gIHByaXZhdGUgb25Sb3dSZW1vdmUoYXJnczogU29ob0RhdGFHcmlkUm93UmVtb3ZlRXZlbnQpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy5yb3dSZW1vdmUubmV4dChhcmdzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCB3aGVuIHRoZSBkYXRhIGlzIHJlbmRlcmVkXG4gICAqL1xuICBwcml2YXRlIG9uUmVuZGVyZWQoYXJnczogU29ob0RhdGFHcmlkUmVuZGVyZWRFdmVudCkge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLnJlbmRlcmVkLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiB0aGUgZGF0YSBpcyBmaWx0ZXJlZC5cbiAgICovXG4gIHByaXZhdGUgb25BZnRlclJlbmRlcihhcmdzOiBTb2hvRGF0YUdyaWRBZnRlclJlbmRlckV2ZW50KSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuYWZ0ZXJSZW5kZXIubmV4dChhcmdzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBmaXJlZCBiZWZvcmUgYSByb3cgaXMgYWN0aXZhdGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBvbkJlZm9yZVJvd0FjdGl2YXRlZChhcmdzOiBTb2hvRGF0YUdyaWRSb3dBY3RpdmF0ZWRFdmVudCkge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLmJlZm9yZVJvd0FjdGl2YXRlZC5uZXh0KGFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gYSByb3cgaXMgYWN0aXZhdGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBvblJvd0FjdGl2YXRlZChhcmdzOiBTb2hvRGF0YUdyaWRSb3dBY3RpdmF0ZWRFdmVudCkge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLnJvd0FjdGl2YXRlZC5uZXh0KGFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gYSByb3cgaXMgZGVhY3RpdmF0ZWQuXG4gICAqL1xuICBwcml2YXRlIG9uUm93RGVhY3RpdmF0ZWQoYXJnczogU29ob0RhdGFHcmlkUm93RGVhY3RpdmF0ZWRFdmVudCkge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLnJvd0RlYWN0aXZhdGVkLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiBhIHJvdyBpcyByZW9yZGVyZWQuXG4gICAqL1xuICBwcml2YXRlIG9uUm93UmVvcmRlcmVkKGFyZ3M6IFNvaG9EYXRhR3JpZFJvd1Jlb3JkZXJlZEV2ZW50KSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMucm93UmVvcmRlcmVkLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiBhIHJvdyBpcyBzZWxlY3RlZCBvciBkZXNlbGVjdGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBvblNlbGVjdGVkKGFyZ3M6IFNvaG9EYXRhR3JpZFNlbGVjdGVkRXZlbnQpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy5zZWxlY3RlZC5uZXh0KGFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGZpcmVkIHdoZW4gc2V0dGluZ3MgYXJlIGNoYW5nZWQgb24gdGhlIGdyaWQuXG4gICAqL1xuICBwcml2YXRlIG9uU2V0dGluZ3NDaGFuZ2VkKGFyZ3M6IFNvaG9EYXRhR3JpZFNldHRpbmdzQ2hhbmdlZEV2ZW50KSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0dGluZ3NDaGFuZ2VkLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiB0aGUgZGF0YSBpcyBzb3J0ZWQuXG4gICAqL1xuICBwcml2YXRlIG9uU29ydGVkKGFyZ3M6IFNvaG9EYXRhR3JpZFNvcnRlZEV2ZW50KSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuc29ydGVkLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgd2hlbiB1c2luZyBidWlsdC1pbiBwYWdlciB0byBuZXh0IHBhZ2UuXG4gICAqL1xuICBwcml2YXRlIG9uTmV4dFBhZ2UoYXJnczogU29ob1BhZ2VyUGFnaW5nSW5mbykge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLm5leHRQYWdlLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICAgKiBFdmVudCBmaXJlZCB3aGVuIHVzaW5nIGJ1aWx0LWluIHBhZ2VyIHRvIHByZXZpb3VzIHBhZ2UuXG4gICAgICovXG4gIHByaXZhdGUgb25QcmV2aW91c1BhZ2UoYXJnczogU29ob1BhZ2VyUGFnaW5nSW5mbykge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLnByZXZpb3VzUGFnZS5uZXh0KGFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAgICogRXZlbnQgZmlyZWQgd2hlbiB1c2luZyBidWlsdC1pbiBwYWdlciB0byBmaXJzdCBwYWdlLlxuICAgICAqL1xuICBwcml2YXRlIG9uRmlyc3RQYWdlKGFyZ3M6IFNvaG9QYWdlclBhZ2luZ0luZm8pIHtcbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy5maXJzdFBhZ2UubmV4dChhcmdzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIEV2ZW50IGZpcmVkIHdoZW4gdXNpbmcgYnVpbHQtaW4gcGFnZXIgdG8gbGFzdCBwYWdlLlxuICAgICAqL1xuICBwcml2YXRlIG9uTGFzdFBhZ2UoYXJnczogU29ob1BhZ2VyUGFnaW5nSW5mbykge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLmxhc3RQYWdlLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgb24gcGFnaW5nIHNpemUgY2hhbmdlXG4gICAqL1xuICBwcml2YXRlIG9uUGFnZVNpemVDaGFuZ2UoYXJnczogU29ob1BhZ2VyUGFnaW5nSW5mbykge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLnBhZ2VTaXplQ2hhbmdlLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgYmVmb3JlIHBhZ2luZ1xuICAgKi9cbiAgcHJpdmF0ZSBvbkJlZm9yZVBhZ2luZyhhcmdzOiBTb2hvUGFnZXJQYWdpbmdJbmZvKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuYmVmb3JlUGFnaW5nLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgYWZ0ZXIgcGFnaW5nXG4gICAqL1xuICBwcml2YXRlIG9uQWZ0ZXJQYWdpbmcoYXJnczogU29ob1BhZ2VyUGFnaW5nSW5mbykge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICB0aGlzLmFmdGVyUGFnaW5nLm5leHQoYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgYWZ0ZXIgdmVydGljYWwgc2Nyb2xsXG4gICAqL1xuICBwcml2YXRlIG9uVmVydGljYWxTY3JvbGwoYXJnczogU29ob0RhdGFHcmlkU2Nyb2xsRXZlbnQpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgdGhpcy52ZXJ0aWNhbFNjcm9sbC5uZXh0KGFyZ3MpO1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgZmlyZWQgYWZ0ZXIgdmVydGljYWwgc2Nyb2xsXG4gICAqL1xuICBwcml2YXRlIG9uRmlsdGVyT3BlcmF0b3JDaGFuZ2VkKGFyZ3M6IFNvaG9EYXRhR3JpZEZpbHRlck9wZXJhdG9yQ2hhbmdlZEV2ZW50KSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuZmlsdGVyb3BlcmF0b3JjaGFuZ2VkLm5leHQoYXJncyk7XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByb3cgZG9tIGpRdWVyeSBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0gIHJvdyBUaGUgcm93IGluZGV4LlxuICAgKiBAcGFyYW0gIGluY2x1ZGVHcm91cHMgSWYgdHJ1ZSBncm91cHMgYXJlIHRha2VuIGludG8gYWNjb3VudC5cbiAgICogQHJldHVybiBUaGUgZG9tIGpRdWVyeSBub2RlXG4gICAqL1xuICByb3dOb2RlKHJvdzogbnVtYmVyLCBpbmNsdWRlR3JvdXBzOiBib29sZWFuKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YWdyaWQ/LnJvd05vZGUocm93LCBpbmNsdWRlR3JvdXBzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjZWxsIGRvbSBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0gIHJvdyBUaGUgcm93IGluZGV4LlxuICAgKiBAcGFyYW0gIGNlbGwgVGhlIGNlbGwgaW5kZXguXG4gICAqIEBwYXJhbSAgaW5jbHVkZUdyb3VwcyBJZiB0cnVlIGdyb3VwcyBhcmUgdGFrZW4gaW50byBhY2NvdW50LlxuICAgKiBAcmV0dXJuIFRoZSBkb20gbm9kZVxuICAgKi9cbiAgY2VsbE5vZGUocm93OiBudW1iZXIsIGNlbGw6IG51bWJlciwgaW5jbHVkZUdyb3VwczogYm9vbGVhbik6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGFncmlkPy5jZWxsTm9kZShyb3csIGNlbGwsIGluY2x1ZGVHcm91cHMpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZCBEZXRhaWwgUm93IE9yIFRyZWUgUm93XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkYXRhUm93SW5kZXggVGhlIHJvdyB0byB0b2dnbGVcbiAgICovXG4gIHRvZ2dsZVJvd0RldGFpbChkYXRhUm93SW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIHJldHVybiB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhZ3JpZD8udG9nZ2xlUm93RGV0YWlsKGRhdGFSb3dJbmRleCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gTGlmZWN5Y2xlIEV2ZW50c1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGFmdGVyIEFuZ3VsYXIgaW5pdGlhbGl6ZXMgdGhlIGRhdGEtYm91bmQgaW5wdXQgcHJvcGVydGllcy5cbiAgICovXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMudXBkYXRlU291cmNlKHRoaXMuX2dyaWRPcHRpb25zLnNvdXJjZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIGFmdGVyIEFuZ3VsYXIgcHJvamVjdHMgZXh0ZXJuYWwgY29udGVudCBpbnRvIGl0cyB2aWV3LlxuICAgKi9cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIC8vIE9uY2UgdGhlIHZpZXcgaXMgY3JlYXRlZCBhbmQgcmVhZHksIGluaXRpYWlzZSB0aGUgZGF0YSBncmlkIGNvbXBvbmVudC5cbiAgICB0aGlzLmJ1aWxkRGF0YUdyaWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgIGlmICh0aGlzLnJlZnJlc2hIaW50ICE9PSBSZWZyZXNoSGludEZsYWdzLk5vbmUpIHtcbiAgICAgIHRoaXMudXBkYXRlZCh0aGlzLl9ncmlkT3B0aW9ucylcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCBqdXN0IGJlZm9yZSBBbmd1bGFyIGRlc3Ryb3lzIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIFVuc3Vic2NyaWJlIG9ic2VydmFibGVzLCBkZXRhY2ggZXZlbnQgaGFuZGxlcnMgYW5kIHJlbW92ZSBvdGhlciByZXNvdXJjZXMgdG8gYXZvaWQgbWVtb3J5IGxlYWtzLlxuICAgKi9cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5kZXN0cm95RGF0YUdyaWQoKTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gUHJpdmF0ZSBNZW1iZXJzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvKipcbiAgICogRGVzdHJveXMgdGhlIGpRdWVyeSBjb250cm9sIChhbmQgYW55IG90aGVyIHJlc291cmNlcylcbiAgICogYXNzb2NpYXRlZCB3aXRoIHRoaXMgY29tcG9uZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBkZXN0cm95RGF0YUdyaWQoKTogdm9pZCB7XG4gICAgLy8gUmVtb3ZlIGFueSByZW1haW5pbmcgZHluYW1pYyBjb21wb25lbnRzLlxuICAgIHRoaXMuY2VsbENvbXBvbmVudHMuZm9yRWFjaCgoYykgPT4ge1xuICAgICAgYy5jb21wb25lbnQuZGVzdHJveSgpO1xuICAgIH0pO1xuXG4gICAgLy8gQ2xlYXIgdGhlIGNhY2hlLlxuICAgIHRoaXMuY2VsbENvbXBvbmVudHMgPSBbXTtcblxuICAgIC8vIFJlbW92ZSByb3dUZW1wbGF0ZSBkeW5hbWljIGNvbXBvbmVudHMuXG4gICAgaWYgKHRoaXMucm93VGVtcGxhdGVDb21wb25lbnRzICYmIHRoaXMucm93VGVtcGxhdGVDb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMucm93VGVtcGxhdGVDb21wb25lbnRzLmZvckVhY2goKGMpID0+IHtcbiAgICAgICAgYy5jb21wb25lbnQuZGVzdHJveSgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnJvd1RlbXBsYXRlQ29tcG9uZW50cyA9IFtdO1xuICAgIH1cblxuICAgIC8vIE5vdyBkZXN0cm95IHRoZSBncmlkLlxuICAgIGlmICh0aGlzLmRhdGFncmlkKSB7XG4gICAgICBpZiAodGhpcy5kYXRhZ3JpZC5kZXN0cm95KSB7XG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmRhdGFncmlkPy5kZXN0cm95KCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5kYXRhZ3JpZCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlICdwb3N0Q2VsbFJlbmRlcicgZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSBjb250YWluZXIgdGhlIGNvbnRhaW5lciB0byBob3N0IHRoZSBlbGVtZW50LlxuICAgKiBAcGFyYW0gYXJncyB0aGUgZm9ybWF0dGVyIGFyZ3VtZW50cy5cbiAgICovXG4gIHByaXZhdGUgb25Qb3N0UmVuZGVyQ2VsbEhhbmRsZXIoY29udGFpbmVyOiBKUXVlcnksIGFyZ3M6IFNvaG9EYXRhR3JpZFBvc3RSZW5kZXJDZWxsQXJncykge1xuICAgIC8vIFByZS1jb25kaXRpb25zXG4gICAgaWYgKCFhcmdzLmNvbC5jb21wb25lbnQpIHtcbiAgICAgIHJldHVybjsgLy8gdGhyb3cgRXJyb3IoYE1pc3NpbmcgJ2NvbXBvbmVudCcgaW4gY29sdW1uICR7YXJncy5jb2wuaWR9YCk7XG4gICAgfVxuICAgIC8vIEdldCB0aGUgZmFjdG9yeSBmb3IgdGhlIGNvbXBvbmVudCBzcGVjaWZpZWQgb24gdGhlIGNvbHVtbi5cbiAgICBjb25zdCBmYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShhcmdzLmNvbC5jb21wb25lbnQpO1xuXG4gICAgLy8gQ3JlYXRlIGFuIGluamVjdG9yIHRoYXQgd2lsbCBwcm92aWRlIHRoZSBhcmd1bWVudHMgZm9yIHRoZVxuICAgIC8vIGNvbXBvbmVudC5cbiAgICAvLyBjb25zdCBpbmplY3RvciA9IFJlZmxlY3RpdmVJbmplY3Rvci5yZXNvbHZlQW5kQ3JlYXRlKFt7IHByb3ZpZGU6ICdhcmdzJywgdXNlVmFsdWU6IGFyZ3MgfV0sIHRoaXMuaW5qZWN0b3IpO1xuICAgIGNvbnN0IGluamVjdG9yID0gSW5qZWN0b3IuY3JlYXRlKHsgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiAnYXJncycsIHVzZVZhbHVlOiBhcmdzIH1dLCBwYXJlbnQ6IHRoaXMuaW5qZWN0b3IgfSk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIGNvbXBvbmVudCwgaW4gdGhlIGNvbnRhaW5lci5cbiAgICBjb25zdCBjb21wb25lbnQgPSBmYWN0b3J5LmNyZWF0ZShpbmplY3RvciwgW10sIGNvbnRhaW5lcik7XG5cbiAgICAvLyBDb3B5IGludG8gaXQgYW55IGNvbHVtbiBsZXZlbCBJbnB1dHMsIHRoZXNlIGFyZSBvcHRpb25hbCBidXQgYWxsb3dcbiAgICAvLyBjb2x1bW4gc3BlY2lmaWMgb3ZlcnJpZGVzIHRvIGJlIGRlZmluZWQuXG4gICAgT2JqZWN0LmFzc2lnbigoY29tcG9uZW50IGFzIGFueSkuaW5zdGFuY2UsIGFyZ3MuY29sLmNvbXBvbmVudElucHV0cyk7XG5cbiAgICAvLyAuLi4gYXR0YWNoIHRvIHRoZSBhcHAgLi4uXG4gICAgdGhpcy5hcHAuYXR0YWNoVmlldyhjb21wb25lbnQuaG9zdFZpZXcpO1xuXG4gICAgLy8gLi4uIHVwZGF0ZSBmb3IgY2hhbmdlcyAuLi5cbiAgICBjb21wb25lbnQuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuXG4gICAgLy8gRG8gdGhpcyBhdCB0aGUgZW5kP1xuXG4gICAgLy8gLi4uIGZpbmFsbHkgc3RvcmUgdGhlIGNyZWF0ZWQgY29tcG9uZW50IGZvciBsYXRlciwgd2UnbGwgZGVsZXRlIGl0IHdoZW5cbiAgICAvLyByZXF1ZXN0ZWQsIG9yIHdoZW4gdGhlIGdyaWQgaXMgZGVzdHJveWVkLlxuICAgIHRoaXMuY2VsbENvbXBvbmVudHMucHVzaChcbiAgICAgIHsgcm93OiBhcmdzLnJvdywgY2VsbDogYXJncy5jZWxsLCBjb21wb25lbnQgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgJ2Rlc3Ryb3lDZWxsJyBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIGNvbnRhaW5lciB0aGUgY29udGFpbmVyLlxuICAgKiBAcGFyYW0gYXJncyB0aGUgYXJnc1xuICAgKi9cbiAgcHJpdmF0ZSBvbkRlc3Ryb3lDZWxsSGFuZGxlcihhcmdzOiBTb2hvRGF0YUdyaWRQb3N0UmVuZGVyQ2VsbEFyZ3MpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLmNlbGxDb21wb25lbnRzLmZpbmRJbmRleCgoYykgPT4gYXJncy5yb3cgPT09IGMucm93ICYmIGFyZ3MuY2VsbCA9PT0gYy5jZWxsKTtcbiAgICBpZiAoaWR4ID4gLTEpIHtcbiAgICAgIHRoaXMuY2VsbENvbXBvbmVudHNbaWR4XS5jb21wb25lbnQuZGVzdHJveSgpO1xuICAgICAgdGhpcy5jZWxsQ29tcG9uZW50cy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9uRWRpdENlbGxIYW5kbGVyKGVkaXRvcjogRXh0ZW5kZWRTb2hvRGF0YUdyaWRDZWxsRWRpdG9yKSB7XG4gICAgLy8gUHJlLWNvbmRpdGlvbnNcbiAgICBpZiAoIWVkaXRvci5jb21wb25lbnQpIHtcbiAgICAgIHJldHVybjsgLy8gdGhyb3cgRXJyb3IoYE1pc3NpbmcgJ2NvbXBvbmVudCcgaW4gY29sdW1uICR7YXJncy5jb2wuaWR9YCk7XG4gICAgfVxuICAgIC8vIEdldCB0aGUgZmFjdG9yeSBmb3IgdGhlIGNvbXBvbmVudCBzcGVjaWZpZWQgb24gdGhlIGNvbHVtbi5cbiAgICBjb25zdCBmYWN0b3J5ID0gdGhpcy5yZXNvbHZlci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShlZGl0b3IuY29tcG9uZW50KTtcblxuICAgIC8vIENyZWF0ZSBhbiBpbmplY3RvciB0aGF0IHdpbGwgcHJvdmlkZSB0aGUgYXJndW1lbnRzIGZvciB0aGVcbiAgICAvLyBjb21wb25lbnQuXG4gICAgLy8gY29uc3QgaSA9IFJlZmxlY3RpdmVJbmplY3Rvci5yZXNvbHZlQW5kQ3JlYXRlKFt7IHByb3ZpZGU6ICdhcmdzJywgdXNlVmFsdWU6IGVkaXRvci5hcmdzIH1dLCB0aGlzLmluamVjdG9yKTtcbiAgICBjb25zdCBpID0gSW5qZWN0b3IuY3JlYXRlKHtcbiAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogJ2FyZ3MnLCB1c2VWYWx1ZTogZWRpdG9yLmFyZ3MgfV0sXG4gICAgICBwYXJlbnQ6IHRoaXMuaW5qZWN0b3JcbiAgICB9KTtcblxuICAgIC8vIFdhcm5pbmchISB0aGUgZHluYW1pYyBjb21wb25lbnQgaXMgbm90IGFkZGVkIGluc2lkZSB0aGUgY29udGFpbmVyLFxuICAgIC8vIGJ1dCBhcyBhIHNpYmxpbmcsIHNvIHdoZW4gaXQncyBkZXN0cm95ZWQgaXQgdGFrZXMgYW55IHNpYmxpbmdzICB3aXRoXG4gICAgLy8gaXQuICBJdCBpcyBub3QgY2xlYXIgd2h5IHRoaXMgLSBzbyB0byB3b3JrIGFyb3VuZCB0aGlzIGlzc3VlLCBhZGRcbiAgICAvLyBhIHNpbmdsZSBjaGlsZCB0byB0aGUgY2VsbCBjb250YWluZXIuXG4gICAgY29uc3QgdHJhbnNpZW50Q29udGFpbmVyID0gJCgnPGRpdj48L2Rpdj4nKS5hcHBlbmRUbyhlZGl0b3IuYXJncy5jb250YWluZXIpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBjb21wb25lbnQsIGluIHRoZSBjb250YWluZXIuXG4gICAgY29uc3QgY29tcG9uZW50UmVmID0gZmFjdG9yeS5jcmVhdGUoaSwgW10sIHRyYW5zaWVudENvbnRhaW5lclswXSkgYXMgQ29tcG9uZW50UmVmPFNvaG9EYXRhR3JpZENlbGxFZGl0b3I+O1xuXG4gICAgLy8gQ29weSBpbnRvIGl0IGFueSBjb2x1bW4gbGV2ZWwgSW5wdXRzLCB0aGVzZSBhcmUgb3B0aW9uYWwgYnV0IGFsbG93XG4gICAgLy8gY29sdW1uIHNwZWNpZmljIG92ZXJyaWRlcyB0byBiZSBkZWZpbmVkLlxuICAgIE9iamVjdC5hc3NpZ24oY29tcG9uZW50UmVmLmluc3RhbmNlLCBlZGl0b3IuYXJncy5jb2wuZWRpdG9yQ29tcG9uZW50SW5wdXRzKTtcblxuICAgIC8vIC4uLiBhdHRhY2ggdG8gdGhlIGFwcCAuLi5cbiAgICB0aGlzLmFwcC5hdHRhY2hWaWV3KGNvbXBvbmVudFJlZi5ob3N0Vmlldyk7XG5cbiAgICAvLyAuLi4gdXBkYXRlIGZvciBjaGFuZ2VzIC4uLlxuICAgIGNvbXBvbmVudFJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG5cbiAgICAvLyBHaXZlIHRoZSBjb21wb25lbnQgdG8gdGhlIGVkaXRvci5cbiAgICBlZGl0b3IuaW5pdChjb21wb25lbnRSZWYpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZERhdGFHcmlkKCk6IHZvaWQge1xuICAgIC8vIGNhbGwgb3V0c2lkZSB0aGUgYW5ndWxhciB6b25lIHNvIGNoYW5nZSBkZXRlY3Rpb25cbiAgICAvLyBpc24ndCB0cmlnZ2VyZWQgYnkgdGhlIHNvaG8gY29tcG9uZW50LlxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIC8vIFdyYXAgdGhlIGVsZW1lbnQgaW4gYSBqUXVlcnkgc2VsZWN0b3IuXG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQgPSBqUXVlcnkodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuXG4gICAgICAvLyBBZGQgdGhlIG9uUG9zdENlbGxSZW5kZXJlclxuICAgICAgaWYgKCF0aGlzLl9ncmlkT3B0aW9ucy5vblBvc3RSZW5kZXJDZWxsKSB7XG4gICAgICAgIHRoaXMuX2dyaWRPcHRpb25zLm9uUG9zdFJlbmRlckNlbGwgPSAoYywgYXJnczogU29ob0RhdGFHcmlkUG9zdFJlbmRlckNlbGxBcmdzKSA9PiB7XG4gICAgICAgICAgdGhpcy5vblBvc3RSZW5kZXJDZWxsSGFuZGxlcihjLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHRoZSBkZXN0cm95IGNlbGwgY2FsbGJhY2suXG4gICAgICBpZiAoIXRoaXMuX2dyaWRPcHRpb25zLm9uRGVzdHJveUNlbGwpIHtcbiAgICAgICAgdGhpcy5fZ3JpZE9wdGlvbnMub25EZXN0cm95Q2VsbCA9IChfLCBhcmdzOiBTb2hvRGF0YUdyaWRQb3N0UmVuZGVyQ2VsbEFyZ3MpID0+IHtcbiAgICAgICAgICB0aGlzLm9uRGVzdHJveUNlbGxIYW5kbGVyKGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgdGhlIGVkaXQgY2VsbCBjYWxsYmFjay5cbiAgICAgIGlmICghdGhpcy5fZ3JpZE9wdGlvbnMub25FZGl0Q2VsbCkge1xuICAgICAgICB0aGlzLl9ncmlkT3B0aW9ucy5vbkVkaXRDZWxsID0gKGVkaXRvcjogRXh0ZW5kZWRTb2hvRGF0YUdyaWRDZWxsRWRpdG9yKSA9PiB7XG4gICAgICAgICAgdGhpcy5vbkVkaXRDZWxsSGFuZGxlcihlZGl0b3IpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgdGhlIGtleWRvd24gY2FsbGJhY2suXG4gICAgICBpZiAoIXRoaXMuX2dyaWRPcHRpb25zLm9uS2V5RG93bikge1xuICAgICAgICB0aGlzLl9ncmlkT3B0aW9ucy5vbktleURvd24gPSAoZTogSlF1ZXJ5LkV2ZW50LCBhcmdzOiBTb2hvRGF0YUdyaWRLZXlEb3duQXJncywgcmVzcG9uc2U6IEZ1bmN0aW9uKSA9PiB7XG4gICAgICAgICAgdGhpcy5vbktleURvd25IYW5kbGVyKGUsIGFyZ3MsIHJlc3BvbnNlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gSW5pdGlhbGlzZSBhbnkgZXZlbnQgaGFuZGxlcnMuXG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnRcbiAgICAgICAgLm9uKCdhZGRyb3cnLCAoX2U6IGFueSwgYXJnczogU29ob0RhdGFHcmlkQWRkUm93RXZlbnQpID0+IHRoaXMub25Sb3dBZGQoYXJncykpXG4gICAgICAgIC5vbignY2VsbGNoYW5nZScsIChfZTogYW55LCBhcmdzOiBTb2hvRGF0YUdyaWRDZWxsQ2hhbmdlRXZlbnQpID0+IHRoaXMub25DZWxsQ2hhbmdlKGFyZ3MpKVxuICAgICAgICAub24oJ2NsaWNrJywgKF9lOiBhbnksIGFyZ3M6IFNvaG9EYXRhR3JpZFJvd0NsaWNrZWQpID0+IHRoaXMub25Sb3dDbGlja2VkKGFyZ3MpKVxuICAgICAgICAub24oJ2Nsb3NlZmlsdGVycm93JywgKF9lOiBhbnksIGFyZ3M6IFNvaG9EYXRhR3JpZENsb3NlRmlsdGVyUm93RXZlbnQpID0+IHRoaXMub25DbG9zZUZpbHRlclJvdyhhcmdzKSlcbiAgICAgICAgLm9uKCdjb2xsYXBzZXJvdycsIChfZTogYW55LCBhcmdzOiBTb2hvRGF0YUdyaWRSb3dDb2xsYXBzZUV2ZW50KSA9PiB0aGlzLm9uQ29sbGFwc2VSb3coYXJncykpXG4gICAgICAgIC5vbignY29udGV4dG1lbnUnLCAoX2U6IGFueSwgYXJnczogU29ob0RhdGFHcmlkUm93Q2xpY2tlZCkgPT4gdGhpcy5vbkNvbnRleHRNZW51KGFyZ3MpKVxuICAgICAgICAub24oJ2RibGNsaWNrJywgKF9lOiBKUXVlcnkuVHJpZ2dlcmVkRXZlbnQsIGFyZ3M6IFNvaG9EYXRhR3JpZFJvd0NsaWNrZWQpID0+IHRoaXMub25Eb3VibGVDbGljayhhcmdzKSlcbiAgICAgICAgLm9uKCdiZWZvcmVlbnRlcmVkaXRtb2RlJywgKF9lOiBhbnksIGFyZ3M6IFNvaG9EYXRhR3JpZEVkaXRNb2RlRXZlbnQpID0+IHRoaXMub25CZWZvcmVFbnRlckVkaXRNb2RlKGFyZ3MpKVxuICAgICAgICAub24oJ2V4aXRlZGl0bW9kZScsIChfZTogYW55LCBhcmdzOiBTb2hvRGF0YUdyaWRFZGl0TW9kZUV2ZW50KSA9PiB0aGlzLm9uRXhpdEVkaXRNb2RlKGFyZ3MpKVxuICAgICAgICAub24oJ2VudGVyZWRpdG1vZGUnLCAoX2U6IGFueSwgYXJnczogU29ob0RhdGFHcmlkRWRpdE1vZGVFdmVudCkgPT4gdGhpcy5vbkVudGVyRWRpdE1vZGUoYXJncykpXG4gICAgICAgIC5vbignZXhwYW5kcm93JywgKF9lOiBhbnksIGFyZ3M6IFNvaG9EYXRhR3JpZFJvd0V4cGFuZEV2ZW50KSA9PiB0aGlzLm9uRXhwYW5kUm93SGFuZGxlcihhcmdzKSlcbiAgICAgICAgLm9uKCdmaWx0ZXJlZCcsIChfZTogYW55LCBhcmdzOiBTb2hvRGF0YUdyaWRGaWx0ZXJlZEV2ZW50KSA9PiB0aGlzLm9uRmlsdGVyZWQoYXJncykpXG4gICAgICAgIC5vbignb3BlbmZpbHRlcnJvdycsIChfZTogYW55LCBhcmdzOiBTb2hvRGF0YUdyaWRPcGVuRmlsdGVyUm93RXZlbnQpID0+IHRoaXMub25PcGVuRmlsdGVyUm93KGFyZ3MpKVxuICAgICAgICAub24oJ3Jvd3JlbW92ZScsIChfZTogYW55LCBhcmdzOiBTb2hvRGF0YUdyaWRSb3dSZW1vdmVFdmVudCkgPT4gdGhpcy5vblJvd1JlbW92ZShhcmdzKSlcbiAgICAgICAgLm9uKCdyZW5kZXJlZCcsIChfZTogYW55LCBhcmdzOiBTb2hvRGF0YUdyaWRSZW5kZXJlZEV2ZW50KSA9PiB0aGlzLm9uUmVuZGVyZWQoYXJncykpXG4gICAgICAgIC5vbignYWZ0ZXJyZW5kZXInLCAoX2U6IGFueSwgYXJnczogU29ob0RhdGFHcmlkQWZ0ZXJSZW5kZXJFdmVudCkgPT4gdGhpcy5vbkFmdGVyUmVuZGVyKGFyZ3MpKVxuICAgICAgICAub24oJ2JlZm9yZXJvd2FjdGl2YXRlZCcsIChfZTogYW55LCBhcmdzOiBTb2hvRGF0YUdyaWRSb3dBY3RpdmF0ZWRFdmVudCkgPT4gdGhpcy5vbkJlZm9yZVJvd0FjdGl2YXRlZChhcmdzKSlcbiAgICAgICAgLm9uKCdyb3dhY3RpdmF0ZWQnLCAoX2U6IGFueSwgYXJnczogU29ob0RhdGFHcmlkUm93QWN0aXZhdGVkRXZlbnQpID0+IHRoaXMub25Sb3dBY3RpdmF0ZWQoYXJncykpXG4gICAgICAgIC5vbigncm93ZGVhY3RpdmF0ZWQnLCAoX2U6IGFueSwgYXJnczogU29ob0RhdGFHcmlkUm93RGVhY3RpdmF0ZWRFdmVudCkgPT4gdGhpcy5vblJvd0RlYWN0aXZhdGVkKGFyZ3MpKVxuICAgICAgICAub24oJ3Jvd3Jlb3JkZXInLCAoX2U6IGFueSwgYXJnczogU29ob0RhdGFHcmlkUm93UmVvcmRlcmVkRXZlbnQpID0+IHRoaXMub25Sb3dSZW9yZGVyZWQoYXJncykpXG4gICAgICAgIC5vbignc2VsZWN0ZWQnLFxuICAgICAgICAgIChlOiBhbnksIGFyZ3M6IFNvaG9EYXRhR3JpZFNlbGVjdGVkUm93W10sIHR5cGU/OiBTb2hvRGF0YUdyaWRTZWxlY3RlZEV2ZW50VHlwZSwgcm93RGF0YT86IFNvaG9EYXRhR3JpZFNlbGVjdGVkUm93W10gfCBTb2hvRGF0YUdyaWRTZWxlY3RlZFJvdykgPT5cbiAgICAgICAgICAgIHRoaXMub25TZWxlY3RlZCh7IGUsIHJvd3M6IGFyZ3MsIHR5cGUsIHJvd0RhdGEgfSkpXG4gICAgICAgIC5vbignc2V0dGluZ3NjaGFuZ2VkJywgKF9lOiBhbnksIGFyZ3M6IFNvaG9EYXRhR3JpZFNldHRpbmdzQ2hhbmdlZEV2ZW50KSA9PiB0aGlzLm9uU2V0dGluZ3NDaGFuZ2VkKGFyZ3MpKVxuICAgICAgICAub24oJ3NvcnRlZCcsIChfZTogYW55LCBhcmdzOiBTb2hvRGF0YUdyaWRTb3J0ZWRFdmVudCkgPT4gdGhpcy5vblNvcnRlZChhcmdzKSlcbiAgICAgICAgLm9uKCdiZWZvcmVwYWdpbmcnLCAoX2U6IGFueSwgYXJnczogU29ob1BhZ2VyUGFnaW5nSW5mbykgPT4gdGhpcy5vbkJlZm9yZVBhZ2luZyhhcmdzKSlcbiAgICAgICAgLm9uKCdhZnRlcnBhZ2luZycsIChfZTogYW55LCBhcmdzOiBTb2hvUGFnZXJQYWdpbmdJbmZvKSA9PiB0aGlzLm9uQWZ0ZXJQYWdpbmcoYXJncykpXG4gICAgICAgIC5vbignc2Nyb2xsJywgKF9lOiBhbnksIGFyZ3M6IFNvaG9EYXRhR3JpZFNjcm9sbEV2ZW50KSA9PiB0aGlzLm9uVmVydGljYWxTY3JvbGwoYXJncykpXG4gICAgICAgIC5vbignZmlsdGVyb3BlcmF0b3JjaGFuZ2VkJywgKF9lOiBhbnksIGFyZ3M6IFNvaG9EYXRhR3JpZEZpbHRlck9wZXJhdG9yQ2hhbmdlZEV2ZW50KSA9PiB0aGlzLm9uRmlsdGVyT3BlcmF0b3JDaGFuZ2VkKGFyZ3MpKVxuICAgICAgICAub24oJ25leHRwYWdlJywgKF9lOiBhbnksIGFyZ3M6IFNvaG9QYWdlclBhZ2luZ0luZm8pID0+IHRoaXMub25OZXh0UGFnZShhcmdzKSlcbiAgICAgICAgLm9uKCdwcmV2aW91c3BhZ2UnLCAoX2U6IGFueSwgYXJnczogU29ob1BhZ2VyUGFnaW5nSW5mbykgPT4gdGhpcy5vblByZXZpb3VzUGFnZShhcmdzKSlcbiAgICAgICAgLm9uKCdmaXJzdHBhZ2UnLCAoX2U6IGFueSwgYXJnczogU29ob1BhZ2VyUGFnaW5nSW5mbykgPT4gdGhpcy5vbkZpcnN0UGFnZShhcmdzKSlcbiAgICAgICAgLm9uKCdsYXN0cGFnZScsIChfZTogYW55LCBhcmdzOiBTb2hvUGFnZXJQYWdpbmdJbmZvKSA9PiB0aGlzLm9uTGFzdFBhZ2UoYXJncykpXG4gICAgICAgIC5vbigncGFnZXNpemVjaGFuZ2UnLCAoX2U6IGFueSwgYXJnczogU29ob1BhZ2VyUGFnaW5nSW5mbykgPT4gdGhpcy5vblBhZ2VTaXplQ2hhbmdlKGFyZ3MpKVxuICAgIH0pO1xuXG4gICAgLy8gSW5pdGlhbGlzZSB0aGUgU29ob1hpIGNvbnRyb2wuXG4gICAgdGhpcy5qUXVlcnlFbGVtZW50Py5kYXRhZ3JpZCh0aGlzLl9ncmlkT3B0aW9ucyk7XG4gICAgdGhpcy5qUXVlcnlFbGVtZW50Py5yZW1vdmVBdHRyKCdyb2xlJyk7XG5cbiAgICAvLyBPbmNlIHRoZSBjb250cm9sIGlzIGluaXRpYWxpc2VkLCBleHRyYWN0IHRoZSBjb250cm9sXG4gICAgLy8gcGx1Zy1pbiBmcm9tIHRoZSBlbGVtZW50LiAgVGhlIGVsZW1lbnQgbmFtZSBpc1xuICAgIC8vIGRlZmluZWQgYnkgdGhlIHBsdWctaW4sIGJ1dCBpbiB0aGlzIGNhc2UgaXMgJ2RhdGFncmlkJy5cbiAgICB0aGlzLmRhdGFncmlkID0gdGhpcy5qUXVlcnlFbGVtZW50Py5kYXRhKCdkYXRhZ3JpZCcpO1xuXG4gICAgLy8gSWYgXCJhdXRvXCIgYW5kIHRoZXJlJ3MgYSBzZXJ2aWNlLCBnZXQgdGhlIGNvbHVtbnMgZnJvbSBpdC5cbiAgICAvLyAobWF5IHdhbnQgdG8gY2hlY2sgaWYgY29sdW1ucyBoYXZlIGFscmVhZHkgYmVlbiBzZXQ/IEVycm9yPylcbiAgICBpZiAodGhpcy5kYXRhZ3JpZFR5cGUgPT09IFNvaG9EYXRhR3JpZENvbXBvbmVudC5BVVRPICYmIHRoaXMuZGF0YWdyaWRTZXJ2aWNlKSB7XG4gICAgICAvLyBCb290c3RyYXAgZnJvbSBzZXJ2aWNlLCBub3RlIHRoaXMgaXMgbm90IGFzeW5jLlxuICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5kYXRhZ3JpZFNlcnZpY2UuZ2V0Q29sdW1ucygpO1xuICAgICAgLy8gT25jZSB0aGUgY29sdW1ucyBhcmUgc2V0LCByZXF1ZXN0IHRoZSBkYXRhIChwYWdpbmc/KVxuICAgICAgdGhpcy5kYXRhZ3JpZFNlcnZpY2UuZ2V0RGF0YShudWxsKVxuICAgICAgICAuc3Vic2NyaWJlKChkYXRhOiBhbnlbXSkgPT4ge1xuICAgICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGF0YWdyaWQ/LmxvYWREYXRhKGRhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZ3JpZERhdGEpIHtcbiAgICAgIC8vIE5vdCB1c2luZyBhIHNlcnZpY2UsIHNvIHVzZSB0aGUgcHJlLWxvYWRlZCBkYXRhLlxuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICB0aGlzLmRhdGFncmlkPy5sb2FkRGF0YSgodGhpcy5ncmlkRGF0YSBhcyBhbnkpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJrcyB0aGUgY29tcG9uZW50cyBhcyByZXF1aXJpbmcgYSByZWJ1aWxkIGFmdGVyIHRoZSBuZXh0IHVwZGF0ZS5cbiAgICpcbiAgICogQHRvZG8gcG9zc2libGUgYWRkIGhpbnRzPyBSZWJ1aWxkLCBVcGRhdGUsIFNldE9wdGlvblxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9uTmFtZSAtIHRoZSBvcHRpb24gdGhhdCB3YXMgdXBkYXRlZCwgKGFsbG93aW5nIHNwZWNpZmljIGhhbmRsaW5nKVxuICAgKiBAcGFyYW0gaGludCAtIHRoZSB0eXBlIG9mIHJlZnJlc2ggcmVxdWlyZWQsIHVwZGF0ZT8uXG4gICAqL1xuICBwcml2YXRlIG1hcmtGb3JSZWZyZXNoKG9wdGlvbk5hbWU6IHN0cmluZywgaGludDogUmVmcmVzaEhpbnRGbGFncykge1xuXG4gICAgLy8gTWVyZ2UgaW4gdGhlIGhpbnQuXG4gICAgdGhpcy5yZWZyZXNoSGludCB8PSBoaW50OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICAvLyAuLi4gc28gd2UgY2FuIHVzZSBpdCBsYXRlclxuICAgIHRoaXMuY2hhbmdlZE9wdGlvbnMucHVzaChvcHRpb25OYW1lKTtcblxuICAgIC8vIC4uLiBtYWtlIHN1cmUgdGhlIGNoYW5nZSBkZXRlY3RvciBraWNrcyBpbiwgb3RoZXJ3aXNlIGlmIHRoZSBpbnB1dHNcbiAgICAvLyB3ZXJlIGNoYW5nZSBwcm9ncmFtbWF0aWFsbHkgdGhlIGNvbXBvbmVudCBtYXkgbm90IGJlIGVsaWdpYmxlIGZvclxuICAgIC8vIHVwZGF0aW5nLlxuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBnYXAgbWV0aG9kIHRvIHVwZGF0ZSB0aGUgY3VycmVudCBkYXRhZ3JpZCBhbmQgcmVidWlsZCBpdCBhZ2Fpbi5cbiAgICpcbiAgICogVGhpcyBpcyByZXF1aXJlZCB3aGlsc3QgdGhlcmUgaXMgbm8gbWV0aG9kIGZvdW5kIHRoYXQgY2FuIHVwZGF0ZSB0aGUgdmlld1xuICAgKiBmb3IgYSBwYXJ0aWN1bGFyIGlucHV0LlxuICAgKi9cbiAgcHVibGljIHVwZGF0ZWQoc2V0dGluZ3M/OiBTb2hvRGF0YUdyaWRPcHRpb25zKSB7XG4gICAgaWYgKHNldHRpbmdzKSB7XG4gICAgICB0aGlzLl9ncmlkT3B0aW9ucyA9IFNvaG8udXRpbHMubWVyZ2VTZXR0aW5ncygodGhpcy5lbGVtZW50UmVmIGFzIGFueSlbMF0sIHNldHRpbmdzLCB0aGlzLl9ncmlkT3B0aW9ucyk7XG4gICAgfVxuXG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnJlZnJlc2hIaW50KSB7XG4gICAgICAgIHRoaXMuZGF0YWdyaWQ/LnVwZGF0ZWQodGhpcy5fZ3JpZE9wdGlvbnMpO1xuICAgICAgfSBlbHNlIGlmIChzZXR0aW5ncyAmJiB0aGlzLnJlZnJlc2hIaW50ICYgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKSB7XG4gICAgICAgIHRoaXMuZGF0YWdyaWQ/LnVwZGF0ZWQodGhpcy5fZ3JpZE9wdGlvbnMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnJlZnJlc2hIaW50ICYgUmVmcmVzaEhpbnRGbGFncy5SZWJ1aWxkKSB7XG4gICAgICAgIHRoaXMuZGF0YWdyaWQ/LnJlbmRlckhlYWRlcigpO1xuICAgICAgICB0aGlzLmRhdGFncmlkPy5yZW5kZXJSb3dzKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMucmVmcmVzaEhpbnQgJiBSZWZyZXNoSGludEZsYWdzLlJlbmRlckhlYWRlcikgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgIHRoaXMuZGF0YWdyaWQ/LnJlbmRlckhlYWRlcigpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnJlZnJlc2hIaW50ICYgUmVmcmVzaEhpbnRGbGFncy5SZW5kZXJSb3dzKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgdGhpcy5kYXRhZ3JpZD8ucmVuZGVyUm93cygpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIFJlc2V0IHRoZSBmbGFncy5cbiAgICB0aGlzLnJlZnJlc2hIaW50ID0gUmVmcmVzaEhpbnRGbGFncy5Ob25lO1xuICAgIHRoaXMuY2hhbmdlZE9wdGlvbnMgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBzb3VyY2Ugc2V0dGluZy9mdW5jdGlvbiB0byB1c2Ugc291cmNlIGlucHV0IGlmIHNldC5cbiAgICogT3RoZXJ3aXNlIHVzZSBkYXRhR3JpZFNlcnZpY2UgaWYgdGhhdCBpcyBzZXQuXG4gICAqXG4gICAqIEBwYXJhbSBzb3VyY2UgdGhlIGZ1bmN0aW9uXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZVNvdXJjZShzb3VyY2U6IFNvaG9EYXRhR3JpZFNvdXJjZUZ1bmN0aW9uIHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgLy8gSWYgYSBzb3VyY2UgcHJvcGVydHkgaGFzIG5vdCBiZWVuIGRlZmluZWQsIGFuZCBhIHNlcnZpY2UgaGFzXG4gICAgLy8gdXNlIHRoZSBkYXRhIHNlcnZpY2UgdG8gbG9hZCB0aGUgZGF0YSBkeW5hbWljYWxseSBmb3IgcGFnaW5nLlxuICAgIGlmICghc291cmNlICYmIHRoaXMuZGF0YWdyaWRTZXJ2aWNlKSB7XG4gICAgICB0aGlzLl9ncmlkT3B0aW9ucy5zb3VyY2UgPSAocmVxdWVzdDogU29ob0RhdGFHcmlkU291cmNlUmVxdWVzdCwgcmVzcG9uc2U6IFNvaG9EYXRhR3JpZFJlc3BvbnNlRnVuY3Rpb24pID0+IHtcbiAgICAgICAgdGhpcy5vbkRhdGFSZXF1ZXN0KHJlcXVlc3QsIHJlc3BvbnNlKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChzb3VyY2UgJiYgdHlwZW9mIHNvdXJjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fZ3JpZE9wdGlvbnMuc291cmNlID0gKHJlcXVlc3Q6IFNvaG9EYXRhR3JpZFNvdXJjZVJlcXVlc3QsIHJlc3BvbnNlOiBTb2hvRGF0YUdyaWRSZXNwb25zZUZ1bmN0aW9uKSA9PiB7XG4gICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiBzb3VyY2UocmVxdWVzdCwgcmVzcG9uc2UpKTtcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja0ZvckNvbXBvbmVudEVkaXRvcnMoKSB7XG4gICAgLy8gQWRkIGFuIGFkYXB0ZXIgZm9yIGFsbCB0aGUgY29sdW1ucyB1c2luZyBhbiBjb21wb25lbnQgYXMgYW4gZWRpdG9yLlxuICAgICh0aGlzLl9ncmlkT3B0aW9ucyBhcyBhbnkpLmNvbHVtbnMuZm9yRWFjaCgoYzogYW55KSA9PiB7XG4gICAgICBpZiAoYy5lZGl0b3JDb21wb25lbnQpIHtcbiAgICAgICAgLy8gVXNlIGEgYGZ1bmN0aW9uIGV4cHJlc3Npb25gIHJhdGhlciB0aGFuIGFuIGBhcnJvdyBmdW5jdGlvbmAgYXMgdGhlIGVkaXRvciBpcyB1c2VkXG4gICAgICAgIC8vIGFzIGNvbnN0cnVjdG9yLlxuICAgICAgICAvLyB0ZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgYy5lZGl0b3IgPSBmdW5jdGlvbiAocm93PzogYW55LCBjZWxsPzogYW55LCB2YWx1ZT86IGFueSwgY29udGFpbmVyPzogSlF1ZXJ5LCBjb2w/OiBTb2hvRGF0YUdyaWRDb2x1bW4gfCB1bmRlZmluZWQsIGU/OiBhbnksIGFwaT86IGFueSwgaXRlbT86IGFueSkge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICByZXR1cm4gbmV3IFNvaG9Bbmd1bGFyRWRpdG9yQWRhcHRlcihjLmVkaXRvckNvbXBvbmVudCwgeyByb3csIGNlbGwsIHZhbHVlLCBjb250YWluZXI6IChjb250YWluZXIgYXMgYW55KVswXSwgY29sLCBlLCBhcGksIGl0ZW0gfSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrRm9yU3VtbWFyeVJvd1NldHRpbmdzKCkge1xuICAgIGlmICghdGhpcy5fZ3JpZE9wdGlvbnMuc3VtbWFyeVJvd0NvbHVtbnMgfHwgdGhpcy5fZ3JpZE9wdGlvbnMuc3VtbWFyeVJvd0NvbHVtbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAodGhpcy5fZ3JpZE9wdGlvbnMgYXMgYW55KS5jb2x1bW5zLmZvckVhY2goKGM6IGFueSkgPT4ge1xuICAgICAgICBjLnN1bW1hcnlSb3dGb3JtYXR0ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGMuc3VtbWFyeVRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGMuYWdncmVnYXRvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgYy5zdW1tYXJ5VGV4dFBsYWNlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9ncmlkT3B0aW9ucy5zdW1tYXJ5Um93Q29sdW1ucy5mb3JFYWNoKChzYykgPT4ge1xuICAgICAgICBjb25zdCBjb2x1bW4gPSAodGhpcy5fZ3JpZE9wdGlvbnMgYXMgYW55KS5jb2x1bW5zLmZpbmQoKGM6IGFueSkgPT4gYy5maWVsZCA9PT0gc2MuZmllbGQpO1xuICAgICAgICAoY29sdW1uIGFzIGFueSkuc3VtbWFyeVJvd0Zvcm1hdHRlciA9IHNjLnN1bW1hcnlSb3dGb3JtYXR0ZXI7XG4gICAgICAgIChjb2x1bW4gYXMgYW55KS5zdW1tYXJ5VGV4dCA9IHNjLnN1bW1hcnlUZXh0O1xuICAgICAgICAoY29sdW1uIGFzIGFueSkuYWdncmVnYXRvciA9IHNjLmFnZ3JlZ2F0b3I7XG4gICAgICAgIChjb2x1bW4gYXMgYW55KS5zdW1tYXJ5VGV4dFBsYWNlbWVudCA9IHNjLnN1bW1hcnlUZXh0UGxhY2VtZW50O1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbn1cblxuLyoqXG4gKiBEZXRhaWxzIG9mIHRoZSAnZXhwYW5kcm93JyBhbmQgJ2NvbGxhcHNlcm93JyBldmVudHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU29ob0RhdGFHcmlkVG9nZ2xlUm93RXZlbnQgZXh0ZW5kcyBTb2hvRGF0YUdyaWRSb3dFeHBhbmRFdmVudCB7XG4gIC8vIFRoZSBkYXRhIGdyaWQgY29tcG9uZW50IG9yaWdpbmF0aW5nIHRoZSBjYWxsLlxuICBncmlkOiBTb2hvRGF0YUdyaWRDb21wb25lbnQ7XG4gIGFyZ3M/OiBhbnk7XG59XG5cbi8qKlxuICogRGV0YWlscyBvZiB0aGUgJ2tleWRvd24nIGV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU29ob0RhdGFHcmlkS2V5RG93bkV2ZW50IHtcbiAgLy8gVGhlIGRhdGEgZ3JpZCBjb21wb25lbnQgb3JpZ2luYXRpbmcgdGhlIGNhbGwuXG4gIGU6IEpRdWVyeS5FdmVudDtcbiAgYXJncz86IFNvaG9EYXRhR3JpZEtleURvd25BcmdzO1xuICByZXNwb25zZT86IEZ1bmN0aW9uO1xufVxuIl19