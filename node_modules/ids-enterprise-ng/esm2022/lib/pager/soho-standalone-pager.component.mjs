import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';
import * as i0 from "@angular/core";
// @ts-ignore
export class SohoStandalonePagerComponent {
    set dataset(dataset) {
        this.options.dataset = dataset;
        this.updateRequired = !!this.pager;
    }
    set pageSize(pageSize) {
        this.options.pagesize = pageSize;
        this.updateRequired = !!this.pager;
    }
    set pageSizes(pageSizes) {
        this.options.pagesizes = pageSizes;
        this.updateRequired = !!this.pager;
    }
    set showFirstButton(showFirstButton) {
        this.options.showFirstButton = showFirstButton;
        if (this.pager) {
            this.pager.showButton('first', showFirstButton);
        }
    }
    set showLastButton(showLastButton) {
        this.options.showLastButton = showLastButton;
        if (this.pager) {
            this.pager.showButton('last', showLastButton);
        }
    }
    set showNextButton(showNextButton) {
        this.options.showNextButton = showNextButton;
        if (this.pager) {
            this.pager.showButton('next', showNextButton);
        }
    }
    set showPreviousButton(showPreviousButton) {
        this.options.showPreviousButton = showPreviousButton;
        if (this.pager) {
            this.pager.showButton('previous', showPreviousButton);
        }
    }
    set showPageSizeSelector(showPageSizeSelector) {
        this.options.showPageSizeSelector = showPageSizeSelector;
        if (this.pager) {
            this.pager.showPageSizeSelector(showPageSizeSelector);
        }
        this.updateRequired = !!this.pager;
    }
    set showPageSelectorInput(showPageSelectorInput) {
        this.options.showPageSelectorInput = showPageSelectorInput;
        this.updateRequired = !!this.pager;
    }
    set enableFirstButton(enableFirstButton) {
        this.options.enableFirstButton = enableFirstButton;
        if (this.pager) {
            this.pager.enableButton('first', enableFirstButton);
        }
    }
    set enableLastButton(enableLastButton) {
        this.options.enableLastButton = enableLastButton;
        if (this.pager) {
            this.pager.enableButton('last', enableLastButton);
        }
    }
    set enablePreviousButton(enablePreviousButton) {
        this.options.enablePreviousButton = enablePreviousButton;
        if (this.pager) {
            this.pager.enableButton('previous', enablePreviousButton);
        }
    }
    set enableNextButton(enableNextButton) {
        this.options.enableNextButton = enableNextButton;
        if (this.pager) {
            this.pager.enableButton('next', enableNextButton);
        }
    }
    set previousPageTooltip(previousPageTooltip) {
        this.options.previousPageTooltip = previousPageTooltip;
        this.updateRequired = !!this.pager;
    }
    set firstPageTooltip(firstPageTooltip) {
        this.options.firstPageTooltip = firstPageTooltip;
        this.updateRequired = !!this.pager;
    }
    set nextPageTooltip(nextPageTooltip) {
        this.options.nextPageTooltip = nextPageTooltip;
        this.updateRequired = !!this.pager;
    }
    set lastPageTooltip(lastPageTooltip) {
        this.options.lastPageTooltip = lastPageTooltip;
        this.updateRequired = !!this.pager;
    }
    set attachPageSizeMenuToBody(attachPageSizeMenuToBody) {
        this.options.attachPageSizeMenuToBody = attachPageSizeMenuToBody;
        this.updateRequired = !!this.pager;
    }
    set smallPageSizeSelector(smallPageSizeSelector) {
        this.options.smallPageSizeSelector = smallPageSizeSelector;
        this.updateRequired = !!this.pager;
    }
    set pageSizeMenuSettings(options) {
        this.options.pageSizeMenuSettings = options;
        this.updateRequired = !!this.pager;
    }
    set attributes(attributes) {
        this.options.attributes = attributes;
        this.updateRequired = !!this.pager;
    }
    constructor(elementRef, ngZone) {
        this.elementRef = elementRef;
        this.ngZone = ngZone;
        this.firstPage = new EventEmitter();
        this.lastPage = new EventEmitter();
        this.previousPage = new EventEmitter();
        this.nextPage = new EventEmitter();
        this.pageSizeChange = new EventEmitter();
        this.page = new EventEmitter();
        this.options = {};
        this.updateRequired = false;
    }
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            this.jQueryElement = jQuery(this.elementRef.nativeElement);
            // -----------------------------------------------------------------------------------
            // Workaround for pagesizeevent not being fired unless the onPageSizeChange property
            // is set. Once that is fixed in soho/ep then this can be removed.
            // -----------------------------------------------------------------------------------
            this.options.onPageSizeChange = () => { };
            // -----------------------------------------------------------------------------------
            this.options.type = 'standalone';
            this.jQueryElement.pager(this.options);
            this.pager = this.jQueryElement.data('pager');
            // Setup the events
            this.jQueryElement.on('firstpage', (...args) => this.ngZone.run(() => this.firstPage.emit(args)));
            this.jQueryElement.on('lastpage', (...args) => this.ngZone.run(() => this.lastPage.emit(args)));
            this.jQueryElement.on('previouspage', (...args) => this.ngZone.run(() => this.previousPage.emit(args)));
            this.jQueryElement.on('nextpage', (...args) => this.ngZone.run(() => this.nextPage.emit(args)));
            this.jQueryElement.on('pagesizechange', (...args) => this.ngZone.run(() => this.pageSizeChange.emit(args)));
            this.jQueryElement.on('page', (...args) => this.ngZone.run(() => this.page.emit(args)));
        });
    }
    ngAfterViewChecked() {
        if (this.pager && this.updateRequired) {
            this.pager.updated(this.options);
            this.updateRequired = false;
        }
    }
    /** Tear Down */
    ngOnDestroy() {
        // call outside the angular zone so change detection isn't triggered by the soho component.
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
            if (this.pager) {
                this.pager.destroy();
                this.pager = null;
            }
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStandalonePagerComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoStandalonePagerComponent, selector: "div[soho-standalone-pager]", inputs: { dataset: "dataset", pageSize: "pageSize", pageSizes: "pageSizes", showFirstButton: "showFirstButton", showLastButton: "showLastButton", showNextButton: "showNextButton", showPreviousButton: "showPreviousButton", showPageSizeSelector: "showPageSizeSelector", showPageSelectorInput: "showPageSelectorInput", enableFirstButton: "enableFirstButton", enableLastButton: "enableLastButton", enablePreviousButton: "enablePreviousButton", enableNextButton: "enableNextButton", previousPageTooltip: "previousPageTooltip", firstPageTooltip: "firstPageTooltip", nextPageTooltip: "nextPageTooltip", lastPageTooltip: "lastPageTooltip", attachPageSizeMenuToBody: "attachPageSizeMenuToBody", smallPageSizeSelector: "smallPageSizeSelector", pageSizeMenuSettings: "pageSizeMenuSettings", attributes: "attributes" }, outputs: { firstPage: "firstPage", lastPage: "lastPage", previousPage: "previousPage", nextPage: "nextPage", pageSizeChange: "pageSizeChange", page: "page" }, ngImport: i0, template: `<div class="pager-container"></div>`, isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStandalonePagerComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'div[soho-standalone-pager]',
                    template: `<div class="pager-container"></div>`,
                    changeDetection: ChangeDetectionStrategy.OnPush
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { dataset: [{
                type: Input
            }], pageSize: [{
                type: Input
            }], pageSizes: [{
                type: Input
            }], showFirstButton: [{
                type: Input
            }], showLastButton: [{
                type: Input
            }], showNextButton: [{
                type: Input
            }], showPreviousButton: [{
                type: Input
            }], showPageSizeSelector: [{
                type: Input
            }], showPageSelectorInput: [{
                type: Input
            }], enableFirstButton: [{
                type: Input
            }], enableLastButton: [{
                type: Input
            }], enablePreviousButton: [{
                type: Input
            }], enableNextButton: [{
                type: Input
            }], previousPageTooltip: [{
                type: Input
            }], firstPageTooltip: [{
                type: Input
            }], nextPageTooltip: [{
                type: Input
            }], lastPageTooltip: [{
                type: Input
            }], attachPageSizeMenuToBody: [{
                type: Input
            }], smallPageSizeSelector: [{
                type: Input
            }], pageSizeMenuSettings: [{
                type: Input
            }], attributes: [{
                type: Input
            }], firstPage: [{
                type: Output
            }], lastPage: [{
                type: Output
            }], previousPage: [{
                type: Output
            }], nextPage: [{
                type: Output
            }], pageSizeChange: [{
                type: Output
            }], page: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1zdGFuZGFsb25lLXBhZ2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2lkcy1lbnRlcnByaXNlLW5nL3NyYy9saWIvcGFnZXIvc29oby1zdGFuZGFsb25lLXBhZ2VyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBR0wsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFFVCxZQUFZLEVBQ1osS0FBSyxFQUdMLE1BQU0sRUFDUCxNQUFNLGVBQWUsQ0FBQzs7QUFFdkIsYUFBYTtBQU1iLE1BQU0sT0FBTyw0QkFBNEI7SUFFdkMsSUFBYSxPQUFPLENBQUMsT0FBYztRQUNqQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNyQyxDQUFDO0lBRUQsSUFBYSxRQUFRLENBQUMsUUFBZ0I7UUFDcEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDckMsQ0FBQztJQUVELElBQWEsU0FBUyxDQUFDLFNBQW1CO1FBQ3hDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztRQUNuQyxJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxJQUFhLGVBQWUsQ0FBQyxlQUF3QjtRQUNuRCxJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsR0FBRyxlQUFlLENBQUM7UUFDL0MsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLGVBQWUsQ0FBQyxDQUFDO1NB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QUF1QixDQUFDLE1BQU07aUJBQ2hEO3NIQUdjLE9BQU87c0JBQW5CLEtBQUs7Z0JBS08sUUFBUTtzQkFBcEIsS0FBSztnQkFLTyxTQUFTO3NCQUFyQixLQUFLO2dCQUtPLGVBQWU7c0JBQTNCLEtBQUs7Z0JBT08sY0FBYztzQkFBMUIsS0FBSztnQkFPTyxjQUFjO3NCQUExQixLQUFLO2dCQU9PLGtCQUFrQjtzQkFBOUIsS0FBSztnQkFPTyxvQkFBb0I7c0JBQWhDLEtBQUs7Z0JBUU8scUJBQXFCO3NCQUFqQyxLQUFLO2dCQUtPLGlCQUFpQjtzQkFBN0IsS0FBSztnQkFPTyxnQkFBZ0I7c0JBQTVCLEtBQUs7Z0JBT08sb0JBQW9CO3NCQUFoQyxLQUFLO2dCQU9PLGdCQUFnQjtzQkFBNUIsS0FBSztnQkFPTyxtQkFBbUI7c0JBQS9CLEtBQUs7Z0JBS08sZ0JBQWdCO3NCQUE1QixLQUFLO2dCQUtPLGVBQWU7c0JBQTNCLEtBQUs7Z0JBS08sZUFBZTtzQkFBM0IsS0FBSztnQkFLTyx3QkFBd0I7c0JBQXBDLEtBQUs7Z0JBS08scUJBQXFCO3NCQUFqQyxLQUFLO2dCQUtPLG9CQUFvQjtzQkFBaEMsS0FBSztnQkFLTyxVQUFVO3NCQUF0QixLQUFLO2dCQUtJLFNBQVM7c0JBQWxCLE1BQU07Z0JBQ0csUUFBUTtzQkFBakIsTUFBTTtnQkFDRyxZQUFZO3NCQUFyQixNQUFNO2dCQUNHLFFBQVE7c0JBQWpCLE1BQU07Z0JBQ0csY0FBYztzQkFBdkIsTUFBTTtnQkFDRyxJQUFJO3NCQUFiLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdDaGVja2VkLFxuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIElucHV0LFxuICBOZ1pvbmUsXG4gIE9uRGVzdHJveSxcbiAgT3V0cHV0XG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG4vLyBAdHMtaWdub3JlXG5AQ29tcG9uZW50KHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHNlbGVjdG9yOiAnZGl2W3NvaG8tc3RhbmRhbG9uZS1wYWdlcl0nLCAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHRlbXBsYXRlOiBgPGRpdiBjbGFzcz1cInBhZ2VyLWNvbnRhaW5lclwiPjwvZGl2PmAsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9TdGFuZGFsb25lUGFnZXJDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBBZnRlclZpZXdDaGVja2VkLCBPbkRlc3Ryb3kge1xuXG4gIEBJbnB1dCgpIHNldCBkYXRhc2V0KGRhdGFzZXQ6IGFueVtdKSB7XG4gICAgdGhpcy5vcHRpb25zLmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSAhIXRoaXMucGFnZXI7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgcGFnZVNpemUocGFnZVNpemU6IG51bWJlcikge1xuICAgIHRoaXMub3B0aW9ucy5wYWdlc2l6ZSA9IHBhZ2VTaXplO1xuICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSAhIXRoaXMucGFnZXI7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgcGFnZVNpemVzKHBhZ2VTaXplczogbnVtYmVyW10pIHtcbiAgICB0aGlzLm9wdGlvbnMucGFnZXNpemVzID0gcGFnZVNpemVzO1xuICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSAhIXRoaXMucGFnZXI7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgc2hvd0ZpcnN0QnV0dG9uKHNob3dGaXJzdEJ1dHRvbjogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5zaG93Rmlyc3RCdXR0b24gPSBzaG93Rmlyc3RCdXR0b247XG4gICAgaWYgKHRoaXMucGFnZXIpIHtcbiAgICAgIHRoaXMucGFnZXIuc2hvd0J1dHRvbignZmlyc3QnLCBzaG93Rmlyc3RCdXR0b24pO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBzaG93TGFzdEJ1dHRvbihzaG93TGFzdEJ1dHRvbjogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5zaG93TGFzdEJ1dHRvbiA9IHNob3dMYXN0QnV0dG9uO1xuICAgIGlmICh0aGlzLnBhZ2VyKSB7XG4gICAgICB0aGlzLnBhZ2VyLnNob3dCdXR0b24oJ2xhc3QnLCBzaG93TGFzdEJ1dHRvbik7XG4gICAgfVxuICB9XG5cbiAgQElucHV0KCkgc2V0IHNob3dOZXh0QnV0dG9uKHNob3dOZXh0QnV0dG9uOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNob3dOZXh0QnV0dG9uID0gc2hvd05leHRCdXR0b247XG4gICAgaWYgKHRoaXMucGFnZXIpIHtcbiAgICAgIHRoaXMucGFnZXIuc2hvd0J1dHRvbignbmV4dCcsIHNob3dOZXh0QnV0dG9uKTtcbiAgICB9XG4gIH1cblxuICBASW5wdXQoKSBzZXQgc2hvd1ByZXZpb3VzQnV0dG9uKHNob3dQcmV2aW91c0J1dHRvbjogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5zaG93UHJldmlvdXNCdXR0b24gPSBzaG93UHJldmlvdXNCdXR0b247XG4gICAgaWYgKHRoaXMucGFnZXIpIHtcbiAgICAgIHRoaXMucGFnZXIuc2hvd0J1dHRvbigncHJldmlvdXMnLCBzaG93UHJldmlvdXNCdXR0b24pO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBzaG93UGFnZVNpemVTZWxlY3RvcihzaG93UGFnZVNpemVTZWxlY3RvcjogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5zaG93UGFnZVNpemVTZWxlY3RvciA9IHNob3dQYWdlU2l6ZVNlbGVjdG9yO1xuICAgIGlmICh0aGlzLnBhZ2VyKSB7XG4gICAgICB0aGlzLnBhZ2VyLnNob3dQYWdlU2l6ZVNlbGVjdG9yKHNob3dQYWdlU2l6ZVNlbGVjdG9yKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9ICEhdGhpcy5wYWdlcjtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBzaG93UGFnZVNlbGVjdG9ySW5wdXQoc2hvd1BhZ2VTZWxlY3RvcklucHV0OiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNob3dQYWdlU2VsZWN0b3JJbnB1dCA9IHNob3dQYWdlU2VsZWN0b3JJbnB1dDtcbiAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gISF0aGlzLnBhZ2VyO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGVuYWJsZUZpcnN0QnV0dG9uKGVuYWJsZUZpcnN0QnV0dG9uOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLmVuYWJsZUZpcnN0QnV0dG9uID0gZW5hYmxlRmlyc3RCdXR0b247XG4gICAgaWYgKHRoaXMucGFnZXIpIHtcbiAgICAgIHRoaXMucGFnZXIuZW5hYmxlQnV0dG9uKCdmaXJzdCcsIGVuYWJsZUZpcnN0QnV0dG9uKTtcbiAgICB9XG4gIH1cblxuICBASW5wdXQoKSBzZXQgZW5hYmxlTGFzdEJ1dHRvbihlbmFibGVMYXN0QnV0dG9uOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLmVuYWJsZUxhc3RCdXR0b24gPSBlbmFibGVMYXN0QnV0dG9uO1xuICAgIGlmICh0aGlzLnBhZ2VyKSB7XG4gICAgICB0aGlzLnBhZ2VyLmVuYWJsZUJ1dHRvbignbGFzdCcsIGVuYWJsZUxhc3RCdXR0b24pO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBlbmFibGVQcmV2aW91c0J1dHRvbihlbmFibGVQcmV2aW91c0J1dHRvbjogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5lbmFibGVQcmV2aW91c0J1dHRvbiA9IGVuYWJsZVByZXZpb3VzQnV0dG9uO1xuICAgIGlmICh0aGlzLnBhZ2VyKSB7XG4gICAgICB0aGlzLnBhZ2VyLmVuYWJsZUJ1dHRvbigncHJldmlvdXMnLCBlbmFibGVQcmV2aW91c0J1dHRvbik7XG4gICAgfVxuICB9XG5cbiAgQElucHV0KCkgc2V0IGVuYWJsZU5leHRCdXR0b24oZW5hYmxlTmV4dEJ1dHRvbjogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5lbmFibGVOZXh0QnV0dG9uID0gZW5hYmxlTmV4dEJ1dHRvbjtcbiAgICBpZiAodGhpcy5wYWdlcikge1xuICAgICAgdGhpcy5wYWdlci5lbmFibGVCdXR0b24oJ25leHQnLCBlbmFibGVOZXh0QnV0dG9uKTtcbiAgICB9XG4gIH1cblxuICBASW5wdXQoKSBzZXQgcHJldmlvdXNQYWdlVG9vbHRpcChwcmV2aW91c1BhZ2VUb29sdGlwOiBzdHJpbmcpIHtcbiAgICB0aGlzLm9wdGlvbnMucHJldmlvdXNQYWdlVG9vbHRpcCA9IHByZXZpb3VzUGFnZVRvb2x0aXA7XG4gICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9ICEhdGhpcy5wYWdlcjtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBmaXJzdFBhZ2VUb29sdGlwKGZpcnN0UGFnZVRvb2x0aXA6IHN0cmluZykge1xuICAgIHRoaXMub3B0aW9ucy5maXJzdFBhZ2VUb29sdGlwID0gZmlyc3RQYWdlVG9vbHRpcDtcbiAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gISF0aGlzLnBhZ2VyO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IG5leHRQYWdlVG9vbHRpcChuZXh0UGFnZVRvb2x0aXA6IHN0cmluZykge1xuICAgIHRoaXMub3B0aW9ucy5uZXh0UGFnZVRvb2x0aXAgPSBuZXh0UGFnZVRvb2x0aXA7XG4gICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9ICEhdGhpcy5wYWdlcjtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBsYXN0UGFnZVRvb2x0aXAobGFzdFBhZ2VUb29sdGlwOiBzdHJpbmcpIHtcbiAgICB0aGlzLm9wdGlvbnMubGFzdFBhZ2VUb29sdGlwID0gbGFzdFBhZ2VUb29sdGlwO1xuICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSAhIXRoaXMucGFnZXI7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgYXR0YWNoUGFnZVNpemVNZW51VG9Cb2R5KGF0dGFjaFBhZ2VTaXplTWVudVRvQm9keTogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5hdHRhY2hQYWdlU2l6ZU1lbnVUb0JvZHkgPSBhdHRhY2hQYWdlU2l6ZU1lbnVUb0JvZHk7XG4gICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9ICEhdGhpcy5wYWdlcjtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBzbWFsbFBhZ2VTaXplU2VsZWN0b3Ioc21hbGxQYWdlU2l6ZVNlbGVjdG9yOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNtYWxsUGFnZVNpemVTZWxlY3RvciA9IHNtYWxsUGFnZVNpemVTZWxlY3RvcjtcbiAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gISF0aGlzLnBhZ2VyO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IHBhZ2VTaXplTWVudVNldHRpbmdzKG9wdGlvbnM6IG9iamVjdCkge1xuICAgIHRoaXMub3B0aW9ucy5wYWdlU2l6ZU1lbnVTZXR0aW5ncyA9IG9wdGlvbnM7XG4gICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9ICEhdGhpcy5wYWdlcjtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBhdHRyaWJ1dGVzKGF0dHJpYnV0ZXM6IG9iamVjdCkge1xuICAgIHRoaXMub3B0aW9ucy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gISF0aGlzLnBhZ2VyO1xuICB9XG5cbiAgQE91dHB1dCgpIGZpcnN0UGFnZTogRXZlbnRFbWl0dGVyPE9iamVjdD4gPSBuZXcgRXZlbnRFbWl0dGVyPE9iamVjdD4oKTtcbiAgQE91dHB1dCgpIGxhc3RQYWdlOiBFdmVudEVtaXR0ZXI8T2JqZWN0PiA9IG5ldyBFdmVudEVtaXR0ZXI8T2JqZWN0PigpO1xuICBAT3V0cHV0KCkgcHJldmlvdXNQYWdlOiBFdmVudEVtaXR0ZXI8T2JqZWN0PiA9IG5ldyBFdmVudEVtaXR0ZXI8T2JqZWN0PigpO1xuICBAT3V0cHV0KCkgbmV4dFBhZ2U6IEV2ZW50RW1pdHRlcjxPYmplY3Q+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3Q+KCk7XG4gIEBPdXRwdXQoKSBwYWdlU2l6ZUNoYW5nZTogRXZlbnRFbWl0dGVyPE9iamVjdD4gPSBuZXcgRXZlbnRFbWl0dGVyPE9iamVjdD4oKTtcbiAgQE91dHB1dCgpIHBhZ2U6IEV2ZW50RW1pdHRlcjxPYmplY3Q+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3Q+KCk7XG5cbiAgcHJpdmF0ZSBqUXVlcnlFbGVtZW50PzogSlF1ZXJ5O1xuICBwcml2YXRlIHBhZ2VyPzogU29ob1N0YW5kYWxvbmVQYWdlclN0YXRpYyB8IG51bGw7XG4gIHByaXZhdGUgb3B0aW9uczogU29ob1N0YW5kYWxvbmVQYWdlck9wdGlvbnMgPSB7fTtcbiAgcHJpdmF0ZSB1cGRhdGVSZXF1aXJlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIG5nWm9uZTogTmdab25lXG4gICkgeyB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudCA9IGpRdWVyeSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCk7XG5cbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAvLyBXb3JrYXJvdW5kIGZvciBwYWdlc2l6ZWV2ZW50IG5vdCBiZWluZyBmaXJlZCB1bmxlc3MgdGhlIG9uUGFnZVNpemVDaGFuZ2UgcHJvcGVydHlcbiAgICAgIC8vIGlzIHNldC4gT25jZSB0aGF0IGlzIGZpeGVkIGluIHNvaG8vZXAgdGhlbiB0aGlzIGNhbiBiZSByZW1vdmVkLlxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICh0aGlzLm9wdGlvbnMgYXMgYW55KS5vblBhZ2VTaXplQ2hhbmdlID0gKCkgPT4geyB9O1xuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgICAgdGhpcy5vcHRpb25zLnR5cGUgPSAnc3RhbmRhbG9uZSc7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQucGFnZXIodGhpcy5vcHRpb25zKTtcbiAgICAgIHRoaXMucGFnZXIgPSB0aGlzLmpRdWVyeUVsZW1lbnQuZGF0YSgncGFnZXInKTtcblxuICAgICAgLy8gU2V0dXAgdGhlIGV2ZW50c1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdmaXJzdHBhZ2UnLCAoLi4uYXJncykgPT4gdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMuZmlyc3RQYWdlLmVtaXQoYXJncykpKTtcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vbignbGFzdHBhZ2UnLCAoLi4uYXJncykgPT4gdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMubGFzdFBhZ2UuZW1pdChhcmdzKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdwcmV2aW91c3BhZ2UnLCAoLi4uYXJncykgPT4gdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMucHJldmlvdXNQYWdlLmVtaXQoYXJncykpKTtcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vbignbmV4dHBhZ2UnLCAoLi4uYXJncykgPT4gdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMubmV4dFBhZ2UuZW1pdChhcmdzKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdwYWdlc2l6ZWNoYW5nZScsICguLi5hcmdzKSA9PiB0aGlzLm5nWm9uZS5ydW4oKCkgPT4gdGhpcy5wYWdlU2l6ZUNoYW5nZS5lbWl0KGFyZ3MpKSk7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQub24oJ3BhZ2UnLCAoLi4uYXJncykgPT4gdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMucGFnZS5lbWl0KGFyZ3MpKSk7XG4gICAgfSk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XG4gICAgaWYgKHRoaXMucGFnZXIgJiYgdGhpcy51cGRhdGVSZXF1aXJlZCkge1xuICAgICAgdGhpcy5wYWdlci51cGRhdGVkKHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqIFRlYXIgRG93biAqL1xuICBuZ09uRGVzdHJveSgpIHtcbiAgICAvLyBjYWxsIG91dHNpZGUgdGhlIGFuZ3VsYXIgem9uZSBzbyBjaGFuZ2UgZGV0ZWN0aW9uIGlzbid0IHRyaWdnZXJlZCBieSB0aGUgc29obyBjb21wb25lbnQuXG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgICB0aGlzLmpRdWVyeUVsZW1lbnQub2ZmKCk7XG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnBhZ2VyKSB7XG4gICAgICAgIHRoaXMucGFnZXIuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnBhZ2VyID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIl19