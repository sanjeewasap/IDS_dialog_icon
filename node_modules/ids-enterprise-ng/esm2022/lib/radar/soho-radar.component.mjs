import { ChangeDetectionStrategy, Component, EventEmitter, HostBinding, Input, Output, } from '@angular/core';
import * as i0 from "@angular/core";
export class SohoRadarComponent {
    get isRadar() {
        return true;
    }
    /** Defines the data to use, must be specified for this component. */
    set dataset(dataset) {
        this.options.dataset = dataset;
        if (this.radar) {
            this.radar.settings.dataset = dataset;
            this.updateRequired = true;
        }
    }
    /** If false, the component will not resize when resizing the page. */
    set redrawOnResize(value) {
        this.options.redrawOnResize = value;
        if (this.radar) {
            this.radar.settings.redrawOnResize = value;
            this.updateRequired = true;
        }
    }
    /** Makes it possible to adjust the top margins */
    set margin(value) {
        this.options.margin = value;
        if (this.radar) {
            this.radar.settings.margin = value;
            this.updateRequired = true;
        }
    }
    /** How many levels or inner circles should there be drawn. */
    set levels(value) {
        this.options.levels = value;
        if (this.radar) {
            this.radar.settings.levels = value;
            this.updateRequired = true;
        }
    }
    /** What is the value that the biggest circle will represent */
    set maxValue(value) {
        this.options.maxValue = value;
        if (this.radar) {
            this.radar.settings.maxValue = value;
            this.updateRequired = true;
        }
    }
    /** How far out than the outer circle should the labels be placed,
     * this may be useful to adjust for some charts. */
    set labelFactor(value) {
        this.options.labelFactor = value;
        if (this.radar) {
            this.radar.settings.labelFactor = value;
            this.updateRequired = true;
        }
    }
    /**  The number of pixels after which a label needs to be
     * given a new line. You may want to change this based on label data. */
    set wrapWidth(value) {
        this.options.wrapWidth = value;
        if (this.radar) {
            this.radar.settings.wrapWidth = value;
            this.updateRequired = true;
        }
    }
    /**  The opacity value of the blobs. */
    set opacityArea(value) {
        this.options.opacityArea = value;
        if (this.radar) {
            this.radar.settings.opacityArea = value;
            this.updateRequired = true;
        }
    }
    /**  The size of the colored circles of each blog. Set to zero to remove dots. */
    set dotRadius(value) {
        this.options.dotRadius = value;
        if (this.radar) {
            this.radar.settings.dotRadius = value;
            this.updateRequired = true;
        }
    }
    /**  The opacity of the circles of each blob 0 or .1 are good values. */
    set opacityCircles(value) {
        this.options.opacityCircles = value;
        if (this.radar) {
            this.radar.settings.opacityCircles = value;
            this.updateRequired = true;
        }
    }
    /** The width of the stroke around each blob. */
    set strokeWidth(value) {
        this.options.strokeWidth = value;
        if (this.radar) {
            this.radar.settings.strokeWidth = value;
            this.updateRequired = true;
        }
    }
    /** If true the area and stroke will follow a round path (cardinal-closed). */
    set roundStrokes(value) {
        this.options.roundStrokes = value;
        if (this.radar) {
            this.radar.settings.roundStrokes = value;
            this.updateRequired = true;
        }
    }
    /** If false the axis lines will not be shown in the diagonals. */
    set showCrosslines(value) {
        this.options.showCrosslines = value;
        if (this.radar) {
            this.radar.settings.showCrosslines = value;
            this.updateRequired = true;
        }
    }
    /** If false the axis labels will not be shown. */
    set showAxisLabels(value) {
        this.options.showAxisLabels = value;
        if (this.radar) {
            this.radar.settings.showAxisLabels = value;
            this.updateRequired = true;
        }
    }
    /** An array of colors to use for each blob */
    set colors(value) {
        this.options.colors = value;
        if (this.radar) {
            this.radar.settings.colors = value;
            this.updateRequired = true;
        }
    }
    /** If false no tooltips will be shown. */
    set showTooltips(value) {
        this.options.showTooltips = value;
        if (this.radar) {
            this.radar.settings.showTooltips = value;
            this.updateRequired = true;
        }
    }
    /** A setting that controls the tooltip values and format. */
    set tooltip(value) {
        this.options.tooltip = value;
        if (this.radar) {
            this.radar.settings.tooltip = value;
            this.updateRequired = true;
        }
    }
    /** d3 formatter to use on the axis labels */
    set axisFormatter(value) {
        this.options.axisFormatter = value;
        if (this.radar) {
            this.radar.settings.axisFormatter = value;
            this.updateRequired = true;
        }
    }
    /**  If false the legend will not be shown. */
    set showLegend(value) {
        this.options.showLegend = value;
        if (this.radar) {
            this.radar.settings.showLegend = value;
            this.updateRequired = true;
        }
    }
    /** Where to locate the legend. This can be bottom or right at the moment. */
    set legendPlacement(value) {
        this.options.legendPlacement = value;
        if (this.radar) {
            this.radar.settings.legendPlacement = value;
            this.updateRequired = true;
        }
    }
    /**  An empty message will be displayed when there is no chart data. */
    set emptyMessage(value) {
        this.options.emptyMessage = value;
        if (this.radar) {
            this.radar.settings.emptyMessage = value;
            this.updateRequired = true;
        }
    }
    /** Add extra attributes like id's to the component **/
    set attributes(value) {
        this.options.attributes = value;
        if (this.radar) {
            this.radar.settings.attributes = value;
            this.updateRequired = true;
        }
    }
    constructor(element, ngZone) {
        this.element = element;
        this.ngZone = ngZone;
        /** Options. */
        this.options = {};
        /* Events*/
        this.selected = new EventEmitter();
        this.unselected = new EventEmitter();
        this.rendered = new EventEmitter();
        // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename
        this.dblclick = new EventEmitter();
        /**
         * @todo remove override of native elements
         */
        // eslint-disable-next-line @angular-eslint/no-output-native
        this.contextmenu = new EventEmitter();
        this.updateRequired = false;
    }
    /** Setup */
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            this.jQueryElement = jQuery(this.element.nativeElement);
            this.options.type = 'radar';
            this.jQueryElement.chart(this.options);
            this.radar = this.jQueryElement.data('radar');
            // Setup the events
            this.jQueryElement.on('selected', (_e, args) => this.ngZone.run(() => this.selected.emit(args)));
            this.jQueryElement.on('unselected', (_e, args) => this.ngZone.run(() => this.unselected.emit(args)));
            this.jQueryElement.on('rendered', (...args) => this.ngZone.run(() => this.rendered.emit(args)));
            this.jQueryElement.on('contextmenu', (...args) => this.ngZone.run(() => this.contextmenu?.emit(args)));
            this.jQueryElement.on('dblclick', (_e, args) => this.ngZone.run(() => this.dblclick.emit(args)));
        });
    }
    ngAfterViewChecked() {
        if (this.radar && this.updateRequired) {
            this.ngZone.runOutsideAngular(() => this.radar?.updated(this.radar.settings));
            this.updateRequired = false;
        }
    }
    /** Tear Down */
    ngOnDestroy() {
        // call outside the angular zone so change detection isn't triggered by the soho component.
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
            if (this.radar) {
                this.radar.destroy();
                this.radar = null;
            }
        });
    }
    setSelected(selected) {
        this.ngZone.runOutsideAngular(() => this.radar?.setSelected(selected));
    }
    toggleSelected(selected) {
        this.ngZone.runOutsideAngular(() => this.radar?.toggleSelected(selected));
    }
    getSelected() {
        return this.ngZone.runOutsideAngular(() => this.radar?.getSelected());
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoRadarComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoRadarComponent, selector: "[soho-radar]", inputs: { dataset: "dataset", redrawOnResize: "redrawOnResize", margin: "margin", levels: "levels", maxValue: "maxValue", labelFactor: "labelFactor", wrapWidth: "wrapWidth", opacityArea: "opacityArea", dotRadius: "dotRadius", opacityCircles: "opacityCircles", strokeWidth: "strokeWidth", roundStrokes: "roundStrokes", showCrosslines: "showCrosslines", showAxisLabels: "showAxisLabels", colors: "colors", showTooltips: "showTooltips", tooltip: "tooltip", axisFormatter: "axisFormatter", showLegend: "showLegend", legendPlacement: "legendPlacement", emptyMessage: "emptyMessage", attributes: "attributes" }, outputs: { selected: "selected", unselected: "unselected", rendered: "rendered", dblclick: "dblclick", contextmenu: "contextmenu" }, host: { properties: { "class.chart-container": "this.isRadar" } }, ngImport: i0, template: '<ng-content></ng-content>', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoRadarComponent, decorators: [{
            type: Component,
            args: [{
                    selector: '[soho-radar]',
                    template: '<ng-content></ng-content>',
                    changeDetection: ChangeDetectionStrategy.OnPush
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { isRadar: [{
                type: HostBinding,
                args: ['class.chart-container']
            }], dataset: [{
                type: Input
            }], redrawOnResize: [{
                type: Input
            }], margin: [{
                type: Input
            }], levels: [{
                type: Input
            }], maxValue: [{
                type: Input
            }], labelFactor: [{
                type: Input
            }], wrapWidth: [{
                type: Input
            }], opacityArea: [{
                type: Input
            }], dotRadius: [{
                type: Input
            }], opacityCircles: [{
                type: Input
            }], strokeWidth: [{
                type: Input
            }], roundStrokes: [{
                type: Input
            }], showCrosslines: [{
                type: Input
            }], showAxisLabels: [{
                type: Input
            }], colors: [{
                type: Input
            }], showTooltips: [{
                type: Input
            }], tooltip: [{
                type: Input
            }], axisFormatter: [{
                type: Input
            }], showLegend: [{
                type: Input
            }], legendPlacement: [{
                type: Input
            }], emptyMessage: [{
                type: Input
            }], attributes: [{
                type: Input
            }], selected: [{
                type: Output
            }], unselected: [{
                type: Output
            }], rendered: [{
                type: Output
            }], dblclick: [{
                type: Output
            }], contextmenu: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1yYWRhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9pZHMtZW50ZXJwcmlzZS1uZy9zcmMvbGliL3JhZGFyL3NvaG8tcmFkYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFHTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUVULFlBQVksRUFDWixXQUFXLEVBQ1gsS0FBSyxFQUdMLE1BQU0sR0FDUCxNQUFNLGVBQWUsQ0FBQzs7QUFRdkIsTUFBTSxPQUFPLGtCQUFrQjtJQUk3QixJQUEwQyxPQUFPO1FBQy9DLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELHFFQUFxRTtJQUNyRSxJQUFhLE9BQU8sQ0FBQyxPQUFtQjtRQUN0QyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFFL0IsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztZQUN0QyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztTQUM1QjtJQUNILENBQUM7SUFFRCxzRUFBc0U7SUFDdEUsSUFBYSxjQUFjLENBQUMsS0FBYztRQUN4QyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7UUFFcEMsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ2QsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztZQUMzQyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztTQUM1QjtJQUNILENBQUM7SUFFRCxrREFBa0Q7SUFDbEQsSUFBYSxNQUFNLENBQUMsS0FBYTtRQUMvQixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFFNUIsSUFBSSxJQUFJLENBQUMsS0FBSyxF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O2dCQVVPLE1BQU07c0JBQWxCLEtBQUs7Z0JBVU8sTUFBTTtzQkFBbEIsS0FBSztnQkFVTyxRQUFRO3NCQUFwQixLQUFLO2dCQVdPLFdBQVc7c0JBQXZCLEtBQUs7Z0JBV08sU0FBUztzQkFBckIsS0FBSztnQkFVTyxXQUFXO3NCQUF2QixLQUFLO2dCQVVPLFNBQVM7c0JBQXJCLEtBQUs7Z0JBVU8sY0FBYztzQkFBMUIsS0FBSztnQkFVTyxXQUFXO3NCQUF2QixLQUFLO2dCQVVPLFlBQVk7c0JBQXhCLEtBQUs7Z0JBVU8sY0FBYztzQkFBMUIsS0FBSztnQkFVTyxjQUFjO3NCQUExQixLQUFLO2dCQVVPLE1BQU07c0JBQWxCLEtBQUs7Z0JBVU8sWUFBWTtzQkFBeEIsS0FBSztnQkFVTyxPQUFPO3NCQUFuQixLQUFLO2dCQVVPLGFBQWE7c0JBQXpCLEtBQUs7Z0JBVU8sVUFBVTtzQkFBdEIsS0FBSztnQkFVTyxlQUFlO3NCQUEzQixLQUFLO2dCQVVPLFlBQVk7c0JBQXhCLEtBQUs7Z0JBVU8sVUFBVTtzQkFBdEIsS0FBSztnQkFVSSxRQUFRO3NCQUFqQixNQUFNO2dCQUNHLFVBQVU7c0JBQW5CLE1BQU07Z0JBQ0csUUFBUTtzQkFBakIsTUFBTTtnQkFFRyxRQUFRO3NCQUFqQixNQUFNO2dCQU1HLFdBQVc7c0JBQXBCLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdDaGVja2VkLFxuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIEhvc3RCaW5kaW5nLFxuICBJbnB1dCxcbiAgTmdab25lLFxuICBPbkRlc3Ryb3ksXG4gIE91dHB1dCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ1tzb2hvLXJhZGFyXScsIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgdGVtcGxhdGU6ICc8bmctY29udGVudD48L25nLWNvbnRlbnQ+JyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5cbmV4cG9ydCBjbGFzcyBTb2hvUmFkYXJDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBBZnRlclZpZXdDaGVja2VkLCBPbkRlc3Ryb3kge1xuICAvKiogT3B0aW9ucy4gKi9cbiAgcHJpdmF0ZSBvcHRpb25zOiBTb2hvUmFkYXJPcHRpb25zID0ge307XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5jaGFydC1jb250YWluZXInKSBnZXQgaXNSYWRhcigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKiBEZWZpbmVzIHRoZSBkYXRhIHRvIHVzZSwgbXVzdCBiZSBzcGVjaWZpZWQgZm9yIHRoaXMgY29tcG9uZW50LiAqL1xuICBASW5wdXQoKSBzZXQgZGF0YXNldChkYXRhc2V0OiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5vcHRpb25zLmRhdGFzZXQgPSBkYXRhc2V0O1xuXG4gICAgaWYgKHRoaXMucmFkYXIpIHtcbiAgICAgIHRoaXMucmFkYXIuc2V0dGluZ3MuZGF0YXNldCA9IGRhdGFzZXQ7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogSWYgZmFsc2UsIHRoZSBjb21wb25lbnQgd2lsbCBub3QgcmVzaXplIHdoZW4gcmVzaXppbmcgdGhlIHBhZ2UuICovXG4gIEBJbnB1dCgpIHNldCByZWRyYXdPblJlc2l6ZSh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5yZWRyYXdPblJlc2l6ZSA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucmFkYXIpIHtcbiAgICAgIHRoaXMucmFkYXIuc2V0dGluZ3MucmVkcmF3T25SZXNpemUgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBNYWtlcyBpdCBwb3NzaWJsZSB0byBhZGp1c3QgdGhlIHRvcCBtYXJnaW5zICovXG4gIEBJbnB1dCgpIHNldCBtYXJnaW4odmFsdWU6IE9iamVjdCkge1xuICAgIHRoaXMub3B0aW9ucy5tYXJnaW4gPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnJhZGFyKSB7XG4gICAgICB0aGlzLnJhZGFyLnNldHRpbmdzLm1hcmdpbiA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIEhvdyBtYW55IGxldmVscyBvciBpbm5lciBjaXJjbGVzIHNob3VsZCB0aGVyZSBiZSBkcmF3bi4gKi9cbiAgQElucHV0KCkgc2V0IGxldmVscyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5vcHRpb25zLmxldmVscyA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucmFkYXIpIHtcbiAgICAgIHRoaXMucmFkYXIuc2V0dGluZ3MubGV2ZWxzID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogV2hhdCBpcyB0aGUgdmFsdWUgdGhhdCB0aGUgYmlnZ2VzdCBjaXJjbGUgd2lsbCByZXByZXNlbnQgKi9cbiAgQElucHV0KCkgc2V0IG1heFZhbHVlKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLm9wdGlvbnMubWF4VmFsdWUgPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnJhZGFyKSB7XG4gICAgICB0aGlzLnJhZGFyLnNldHRpbmdzLm1heFZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogSG93IGZhciBvdXQgdGhhbiB0aGUgb3V0ZXIgY2lyY2xlIHNob3VsZCB0aGUgbGFiZWxzIGJlIHBsYWNlZCxcbiAgICogdGhpcyBtYXkgYmUgdXNlZnVsIHRvIGFkanVzdCBmb3Igc29tZSBjaGFydHMuICovXG4gIEBJbnB1dCgpIHNldCBsYWJlbEZhY3Rvcih2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5vcHRpb25zLmxhYmVsRmFjdG9yID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5yYWRhcikge1xuICAgICAgdGhpcy5yYWRhci5zZXR0aW5ncy5sYWJlbEZhY3RvciA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqICBUaGUgbnVtYmVyIG9mIHBpeGVscyBhZnRlciB3aGljaCBhIGxhYmVsIG5lZWRzIHRvIGJlXG4gICAqIGdpdmVuIGEgbmV3IGxpbmUuIFlvdSBtYXkgd2FudCB0byBjaGFuZ2UgdGhpcyBiYXNlZCBvbiBsYWJlbCBkYXRhLiAqL1xuICBASW5wdXQoKSBzZXQgd3JhcFdpZHRoKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLm9wdGlvbnMud3JhcFdpZHRoID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5yYWRhcikge1xuICAgICAgdGhpcy5yYWRhci5zZXR0aW5ncy53cmFwV2lkdGggPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiAgVGhlIG9wYWNpdHkgdmFsdWUgb2YgdGhlIGJsb2JzLiAqL1xuICBASW5wdXQoKSBzZXQgb3BhY2l0eUFyZWEodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMub3B0aW9ucy5vcGFjaXR5QXJlYSA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucmFkYXIpIHtcbiAgICAgIHRoaXMucmFkYXIuc2V0dGluZ3Mub3BhY2l0eUFyZWEgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiAgVGhlIHNpemUgb2YgdGhlIGNvbG9yZWQgY2lyY2xlcyBvZiBlYWNoIGJsb2cuIFNldCB0byB6ZXJvIHRvIHJlbW92ZSBkb3RzLiAqL1xuICBASW5wdXQoKSBzZXQgZG90UmFkaXVzKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLm9wdGlvbnMuZG90UmFkaXVzID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5yYWRhcikge1xuICAgICAgdGhpcy5yYWRhci5zZXR0aW5ncy5kb3RSYWRpdXMgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiAgVGhlIG9wYWNpdHkgb2YgdGhlIGNpcmNsZXMgb2YgZWFjaCBibG9iIDAgb3IgLjEgYXJlIGdvb2QgdmFsdWVzLiAqL1xuICBASW5wdXQoKSBzZXQgb3BhY2l0eUNpcmNsZXModmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMub3B0aW9ucy5vcGFjaXR5Q2lyY2xlcyA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucmFkYXIpIHtcbiAgICAgIHRoaXMucmFkYXIuc2V0dGluZ3Mub3BhY2l0eUNpcmNsZXMgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBUaGUgd2lkdGggb2YgdGhlIHN0cm9rZSBhcm91bmQgZWFjaCBibG9iLiAqL1xuICBASW5wdXQoKSBzZXQgc3Ryb2tlV2lkdGgodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMub3B0aW9ucy5zdHJva2VXaWR0aCA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucmFkYXIpIHtcbiAgICAgIHRoaXMucmFkYXIuc2V0dGluZ3Muc3Ryb2tlV2lkdGggPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBJZiB0cnVlIHRoZSBhcmVhIGFuZCBzdHJva2Ugd2lsbCBmb2xsb3cgYSByb3VuZCBwYXRoIChjYXJkaW5hbC1jbG9zZWQpLiAqL1xuICBASW5wdXQoKSBzZXQgcm91bmRTdHJva2VzKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnJvdW5kU3Ryb2tlcyA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucmFkYXIpIHtcbiAgICAgIHRoaXMucmFkYXIuc2V0dGluZ3Mucm91bmRTdHJva2VzID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogSWYgZmFsc2UgdGhlIGF4aXMgbGluZXMgd2lsbCBub3QgYmUgc2hvd24gaW4gdGhlIGRpYWdvbmFscy4gKi9cbiAgQElucHV0KCkgc2V0IHNob3dDcm9zc2xpbmVzKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNob3dDcm9zc2xpbmVzID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5yYWRhcikge1xuICAgICAgdGhpcy5yYWRhci5zZXR0aW5ncy5zaG93Q3Jvc3NsaW5lcyA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIElmIGZhbHNlIHRoZSBheGlzIGxhYmVscyB3aWxsIG5vdCBiZSBzaG93bi4gKi9cbiAgQElucHV0KCkgc2V0IHNob3dBeGlzTGFiZWxzKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNob3dBeGlzTGFiZWxzID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5yYWRhcikge1xuICAgICAgdGhpcy5yYWRhci5zZXR0aW5ncy5zaG93QXhpc0xhYmVscyA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIEFuIGFycmF5IG9mIGNvbG9ycyB0byB1c2UgZm9yIGVhY2ggYmxvYiAqL1xuICBASW5wdXQoKSBzZXQgY29sb3JzKHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLm9wdGlvbnMuY29sb3JzID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5yYWRhcikge1xuICAgICAgdGhpcy5yYWRhci5zZXR0aW5ncy5jb2xvcnMgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBJZiBmYWxzZSBubyB0b29sdGlwcyB3aWxsIGJlIHNob3duLiAqL1xuICBASW5wdXQoKSBzZXQgc2hvd1Rvb2x0aXBzKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNob3dUb29sdGlwcyA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucmFkYXIpIHtcbiAgICAgIHRoaXMucmFkYXIuc2V0dGluZ3Muc2hvd1Rvb2x0aXBzID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogQSBzZXR0aW5nIHRoYXQgY29udHJvbHMgdGhlIHRvb2x0aXAgdmFsdWVzIGFuZCBmb3JtYXQuICovXG4gIEBJbnB1dCgpIHNldCB0b29sdGlwKHZhbHVlOiBTb2hvUmFkYXJUb29sdGlwT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucy50b29sdGlwID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5yYWRhcikge1xuICAgICAgdGhpcy5yYWRhci5zZXR0aW5ncy50b29sdGlwID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogZDMgZm9ybWF0dGVyIHRvIHVzZSBvbiB0aGUgYXhpcyBsYWJlbHMgKi9cbiAgQElucHV0KCkgc2V0IGF4aXNGb3JtYXR0ZXIodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMub3B0aW9ucy5heGlzRm9ybWF0dGVyID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5yYWRhcikge1xuICAgICAgdGhpcy5yYWRhci5zZXR0aW5ncy5heGlzRm9ybWF0dGVyID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogIElmIGZhbHNlIHRoZSBsZWdlbmQgd2lsbCBub3QgYmUgc2hvd24uICovXG4gIEBJbnB1dCgpIHNldCBzaG93TGVnZW5kKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNob3dMZWdlbmQgPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnJhZGFyKSB7XG4gICAgICB0aGlzLnJhZGFyLnNldHRpbmdzLnNob3dMZWdlbmQgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBXaGVyZSB0byBsb2NhdGUgdGhlIGxlZ2VuZC4gVGhpcyBjYW4gYmUgYm90dG9tIG9yIHJpZ2h0IGF0IHRoZSBtb21lbnQuICovXG4gIEBJbnB1dCgpIHNldCBsZWdlbmRQbGFjZW1lbnQodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMub3B0aW9ucy5sZWdlbmRQbGFjZW1lbnQgPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnJhZGFyKSB7XG4gICAgICB0aGlzLnJhZGFyLnNldHRpbmdzLmxlZ2VuZFBsYWNlbWVudCA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqICBBbiBlbXB0eSBtZXNzYWdlIHdpbGwgYmUgZGlzcGxheWVkIHdoZW4gdGhlcmUgaXMgbm8gY2hhcnQgZGF0YS4gKi9cbiAgQElucHV0KCkgc2V0IGVtcHR5TWVzc2FnZSh2YWx1ZTogU29ob0VtcHR5TWVzc2FnZU9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMuZW1wdHlNZXNzYWdlID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5yYWRhcikge1xuICAgICAgdGhpcy5yYWRhci5zZXR0aW5ncy5lbXB0eU1lc3NhZ2UgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBBZGQgZXh0cmEgYXR0cmlidXRlcyBsaWtlIGlkJ3MgdG8gdGhlIGNvbXBvbmVudCAqKi9cbiAgQElucHV0KCkgc2V0IGF0dHJpYnV0ZXModmFsdWU6IEFycmF5PE9iamVjdD4gfCBPYmplY3QpIHtcbiAgICB0aGlzLm9wdGlvbnMuYXR0cmlidXRlcyA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucmFkYXIpIHtcbiAgICAgIHRoaXMucmFkYXIuc2V0dGluZ3MuYXR0cmlidXRlcyA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyogRXZlbnRzKi9cbiAgQE91dHB1dCgpIHNlbGVjdGVkOiBFdmVudEVtaXR0ZXI8U29ob1JhZGFyU2VsZWN0RXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvUmFkYXJTZWxlY3RFdmVudD4oKTtcbiAgQE91dHB1dCgpIHVuc2VsZWN0ZWQ6IEV2ZW50RW1pdHRlcjxTb2hvUmFkYXJTZWxlY3RFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9SYWRhclNlbGVjdEV2ZW50PigpO1xuICBAT3V0cHV0KCkgcmVuZGVyZWQ6IEV2ZW50RW1pdHRlcjxPYmplY3Q+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3Q+KCk7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAYW5ndWxhci1lc2xpbnQvbm8tb3V0cHV0LW5hdGl2ZSwgQGFuZ3VsYXItZXNsaW50L25vLW91dHB1dC1yZW5hbWVcbiAgQE91dHB1dCgpIGRibGNsaWNrOiBFdmVudEVtaXR0ZXI8T2JqZWN0PiA9IG5ldyBFdmVudEVtaXR0ZXI8T2JqZWN0PigpO1xuXG4gIC8qKlxuICAgKiBAdG9kbyByZW1vdmUgb3ZlcnJpZGUgb2YgbmF0aXZlIGVsZW1lbnRzXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGFuZ3VsYXItZXNsaW50L25vLW91dHB1dC1uYXRpdmVcbiAgQE91dHB1dCgpIGNvbnRleHRtZW51OiBFdmVudEVtaXR0ZXI8T2JqZWN0W10+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3RbXT4oKTtcblxuICBwcml2YXRlIGpRdWVyeUVsZW1lbnQ/OiBKUXVlcnk7XG4gIHByaXZhdGUgcmFkYXI/OiBTb2hvUmFkYXIgfCBudWxsO1xuICBwcml2YXRlIHVwZGF0ZVJlcXVpcmVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXG4gICkgeyB9XG5cbiAgLyoqIFNldHVwICovXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQgPSBqUXVlcnkodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xuXG4gICAgICB0aGlzLm9wdGlvbnMudHlwZSA9ICdyYWRhcic7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQuY2hhcnQodGhpcy5vcHRpb25zKTtcbiAgICAgIHRoaXMucmFkYXIgPSB0aGlzLmpRdWVyeUVsZW1lbnQuZGF0YSgncmFkYXInKTtcblxuICAgICAgLy8gU2V0dXAgdGhlIGV2ZW50c1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdzZWxlY3RlZCcsIChfZTogYW55LCBhcmdzOiBTb2hvUmFkYXJTZWxlY3RFdmVudCkgPT5cbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMuc2VsZWN0ZWQuZW1pdChhcmdzKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCd1bnNlbGVjdGVkJywgKF9lOiBhbnksIGFyZ3M6IFNvaG9SYWRhclNlbGVjdEV2ZW50KSA9PlxuICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4gdGhpcy51bnNlbGVjdGVkLmVtaXQoYXJncykpKTtcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vbigncmVuZGVyZWQnLCAoLi4uYXJncykgPT5cbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMucmVuZGVyZWQuZW1pdChhcmdzKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdjb250ZXh0bWVudScsICguLi5hcmdzKSA9PlxuICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4gdGhpcy5jb250ZXh0bWVudT8uZW1pdChhcmdzKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdkYmxjbGljaycsIChfZTogYW55LCBhcmdzOiBPYmplY3QpID0+XG4gICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLmRibGNsaWNrLmVtaXQoYXJncykpKTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICBpZiAodGhpcy5yYWRhciAmJiB0aGlzLnVwZGF0ZVJlcXVpcmVkKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLnJhZGFyPy51cGRhdGVkKHRoaXMucmFkYXIuc2V0dGluZ3MpKTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKiogVGVhciBEb3duICovXG4gIG5nT25EZXN0cm95KCkge1xuICAgIC8vIGNhbGwgb3V0c2lkZSB0aGUgYW5ndWxhciB6b25lIHNvIGNoYW5nZSBkZXRlY3Rpb24gaXNuJ3QgdHJpZ2dlcmVkIGJ5IHRoZSBzb2hvIGNvbXBvbmVudC5cbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vZmYoKTtcbiAgICAgICAgdGhpcy5qUXVlcnlFbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucmFkYXIpIHtcbiAgICAgICAgdGhpcy5yYWRhci5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMucmFkYXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHNldFNlbGVjdGVkKHNlbGVjdGVkOiBTb2hvUmFkYXJTZWxlY3RlZCkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMucmFkYXI/LnNldFNlbGVjdGVkKHNlbGVjdGVkKSk7XG4gIH1cblxuICBwdWJsaWMgdG9nZ2xlU2VsZWN0ZWQoc2VsZWN0ZWQ6IFNvaG9SYWRhclNlbGVjdGVkKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy5yYWRhcj8udG9nZ2xlU2VsZWN0ZWQoc2VsZWN0ZWQpKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZWxlY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy5yYWRhcj8uZ2V0U2VsZWN0ZWQoKSk7XG4gIH1cbn1cbiJdfQ==