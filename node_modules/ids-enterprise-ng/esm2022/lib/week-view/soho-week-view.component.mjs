import { ChangeDetectionStrategy, Component, EventEmitter, HostBinding, Input, Output, } from '@angular/core';
import * as i0 from "@angular/core";
/********************************************************************
 * Weekview component
 *******************************************************************/
export class SohoWeekViewComponent {
    set weekViewOptions(weekViewOptions) {
        this._weekViewOptions = weekViewOptions;
        if (this.jQueryElement) {
            // No need to set the 'settings' as the Rebuild will create
            // a new control with the _gridOptions.
            this.markForRefresh();
        }
    }
    get weekViewOptions() {
        if (this.weekView) {
            return this.weekView.settings;
        }
        return this._weekViewOptions;
    }
    /**
     * Setting to toggle stacked week view layout
     */
    set stacked(isStacked) {
        this._weekViewOptions.stacked = isStacked;
        if (this.weekView) {
            this.weekView.settings.stacked = isStacked;
            this.markForRefresh();
        }
    }
    get stacked() {
        if (this.weekView) {
            return this.weekView.settings.stacked;
        }
        return this._weekViewOptions.stacked;
    }
    /**
     * Setting to toggle footer when in stacked week view mode
     */
    set showFooter(val) {
        this._weekViewOptions.showFooter = val;
        if (this.weekView) {
            this.weekView.settings.showFooter = val;
            this.markForRefresh();
        }
    }
    get showFooter() {
        if (this.weekView) {
            return this.weekView.settings.showFooter;
        }
        return this._weekViewOptions.showFooter;
    }
    /**
     * Setting to switch to one day view in phone-tablet sizes (stacked mode only)
     */
    set responsive(val) {
        this._weekViewOptions.responsive = val;
        if (this.weekView) {
            this.weekView.settings.responsive = val;
            this.markForRefresh();
        }
    }
    get responsive() {
        if (this.weekView) {
            return this.weekView.settings.responsive;
        }
        return this._weekViewOptions.responsive;
    }
    /**
     * Setting to hide week view calendar toolbar
     */
    set hideToolbar(val) {
        this._weekViewOptions.hideToolbar = val;
        if (this.weekView) {
            this.weekView.settings.hideToolbar = val;
            this.markForRefresh();
        }
    }
    get hideToolbar() {
        if (this.weekView) {
            return this.weekView.settings.hideToolbar;
        }
        return this._weekViewOptions.hideToolbar;
    }
    /**
     * An array of objects with data for the event types.
     */
    set eventTypes(eventTypes) {
        this._weekViewOptions.eventTypes = eventTypes;
        if (this.weekView) {
            this.weekView.settings.eventTypes = eventTypes;
            this.markForRefresh();
        }
    }
    get eventTypes() {
        if (this.weekView) {
            return this.weekView.settings.eventTypes;
        }
        return this._weekViewOptions.eventTypes;
    }
    /**
     * An array of objects with data for the filtered event types.
     */
    set filteredTypes(filteredTypes) {
        this._weekViewOptions.filteredTypes = filteredTypes;
        if (this.weekView) {
            this.weekView.settings.filteredTypes = filteredTypes;
            this.markForRefresh();
        }
    }
    get filteredTypes() {
        if (this.weekView) {
            return this.weekView.settings.filteredTypes;
        }
        return this._weekViewOptions.filteredTypes;
    }
    /**
     * An array of objects with data for the events.
     */
    set events(events) {
        this._weekViewOptions.events = events;
        if (this.weekView) {
            this.weekView.settings.events = events;
            this.markForRefresh();
        }
    }
    get events() {
        if (this.weekView) {
            return this.weekView.settings.events;
        }
        return this._weekViewOptions.events;
    }
    /**
     * The name of the locale to use for this instance. If not set the current locale will be used.
     */
    set locale(locale) {
        this._weekViewOptions.locale = locale;
        if (this.weekView) {
            this.weekView.settings.locale = locale;
            this.markForRefresh();
        }
    }
    get locale() {
        if (this.weekView) {
            return this.weekView.settings.locale;
        }
        return this._weekViewOptions.locale;
    }
    /**
     * Start of the week to show.
     */
    set startDate(startDate) {
        this._weekViewOptions.startDate = startDate;
        if (this.weekView) {
            this.weekView.settings.startDate = startDate;
            this.markForRefresh();
        }
    }
    get startDate() {
        if (this.weekView) {
            return this.weekView.settings.startDate;
        }
        return this._weekViewOptions.startDate;
    }
    /**
     * End of the week to show
     */
    set endDate(endDate) {
        this._weekViewOptions.endDate = endDate;
        if (this.weekView) {
            this.weekView.settings.endDate = endDate;
            this.markForRefresh();
        }
    }
    get endDate() {
        if (this.weekView) {
            return this.weekView.settings.endDate;
        }
        return this._weekViewOptions.endDate;
    }
    /**
     * Start of the hour to show.
     */
    set startHour(startHour) {
        this._weekViewOptions.startHour = startHour;
        if (this.weekView) {
            this.weekView.settings.startHour = startHour;
            this.markForRefresh();
        }
    }
    get startHour() {
        if (this.weekView) {
            return this.weekView.settings.startHour;
        }
        return this._weekViewOptions.startHour;
    }
    /**
     * End of the hour to show
     */
    set endHour(endHour) {
        this._weekViewOptions.endHour = endHour;
        if (this.weekView) {
            this.weekView.settings.endHour = endHour;
            this.markForRefresh();
        }
    }
    get endHour() {
        if (this.weekView) {
            return this.weekView.settings.endHour;
        }
        return this._weekViewOptions.endHour;
    }
    /**
     * Determines if the today button should be shown.
     */
    set showToday(showToday) {
        this._weekViewOptions.showToday = showToday;
        if (this.weekView) {
            this.weekView.settings.showToday = showToday;
            this.markForRefresh();
        }
    }
    get showToday() {
        if (this.weekView) {
            return this.weekView.settings.showToday;
        }
        return this._weekViewOptions.showToday;
    }
    /**
     * Determines if the all day events row should be shown.
     */
    set showAllDay(showAllDay) {
        this._weekViewOptions.showAllDay = showAllDay;
        if (this.weekView) {
            this.weekView.settings.showAllDay = showAllDay;
            this.markForRefresh();
        }
    }
    get showAllDay() {
        if (this.weekView) {
            return this.weekView.settings.showAllDay;
        }
        return this._weekViewOptions.showAllDay;
    }
    /**
     *  If false the dropdown to change views will not be shown.
     */
    set showViewChanger(showViewChanger) {
        this._weekViewOptions.showViewChanger = showViewChanger;
        if (this.weekView) {
            this.weekView.settings.showViewChanger = showViewChanger;
            this.markForRefresh();
        }
    }
    get showViewChanger() {
        if (this.weekView) {
            return this.weekView.settings.showViewChanger;
        }
        return this._weekViewOptions.showViewChanger;
    }
    /**
     * Shows a bar across the current time.
     */
    set showTimeLine(showTimeLine) {
        this._weekViewOptions.showTimeLine = showTimeLine;
        if (this.weekView) {
            this.weekView.settings.showTimeLine = showTimeLine;
            this.markForRefresh();
        }
    }
    get showTimeLine() {
        if (this.weekView) {
            return this.weekView.settings.showTimeLine;
        }
        return this._weekViewOptions.showTimeLine;
    }
    /**
     * Set first day of the week. '1' would be Monday.
     */
    set firstDayOfWeek(firstDayOfWeek) {
        this._weekViewOptions.firstDayOfWeek = firstDayOfWeek;
        if (this.weekView) {
            this.weekView.settings.firstDayOfWeek = firstDayOfWeek;
            this.markForRefresh();
        }
    }
    get firstDayOfWeek() {
        if (this.weekView) {
            return this.weekView.settings.firstDayOfWeek;
        }
        return this._weekViewOptions.firstDayOfWeek;
    }
    /**
     * If false the mouseover text or day event will not be shown.
     */
    set eventTooltip(eventTooltip) {
        this._weekViewOptions.eventTooltip = eventTooltip;
        if (this.weekView) {
            this.weekView.settings.eventTooltip = eventTooltip;
            this.markForRefresh();
        }
    }
    get eventTooltip() {
        if (this.weekView) {
            return this.weekView.settings.eventTooltip;
        }
        return this._weekViewOptions.eventTooltip;
    }
    /**
     * If false the mouseover text for event icon will not be shown.
     */
    set iconTooltip(iconTooltip) {
        this._weekViewOptions.iconTooltip = iconTooltip;
        if (this.weekView) {
            this.weekView.settings.iconTooltip = iconTooltip;
            this.markForRefresh();
        }
    }
    get iconTooltip() {
        if (this.weekView) {
            return this.weekView.settings.iconTooltip;
        }
        return this._weekViewOptions.iconTooltip;
    }
    /**
     * Fires when a week view is rendered, allowing you to pass back events or event types to show.
     */
    set renderWeekCallback(renderWeekCallback) {
        this._weekViewOptions.onRenderWeek = renderWeekCallback;
        if (this.weekView) {
            this.weekView.settings.onRenderWeek = renderWeekCallback;
            this.markForRefresh();
        }
    }
    get renderWeekCallback() {
        if (this.weekView) {
            return this.weekView.settings.onRenderWeek;
        }
        return this._weekViewOptions.onRenderWeek;
    }
    /**
     * Call back for when the view changer is changed.
     */
    set changeToWeekDayCallback(changeToWeekDayCallback) {
        this._weekViewOptions.onChangeToWeekDay = changeToWeekDayCallback;
        if (this.weekView) {
            this.weekView.settings.onChangeToWeekDay = changeToWeekDayCallback;
            this.markForRefresh();
        }
    }
    get changeToWeekDayCallback() {
        if (this.weekView) {
            return this.weekView.settings.onChangeToWeekDay;
        }
        return this._weekViewOptions.onChangeToWeekDay;
    }
    /**
     * Call back for when the week is changed.
     */
    set changeWeekCallback(changeWeekCallback) {
        this._weekViewOptions.onChangeWeek = changeWeekCallback;
        if (this.weekView) {
            this.weekView.settings.onChangeWeek = changeWeekCallback;
            this.markForRefresh();
        }
    }
    get changeWeekCallback() {
        if (this.weekView) {
            return this.weekView.settings.onChangeWeek;
        }
        return this._weekViewOptions.onChangeWeek;
    }
    /**
     * Call back for when the view changer is changed.
     */
    set changeViewCallback(changeViewCallback) {
        this._weekViewOptions.onChangeView = changeViewCallback;
        if (this.weekView) {
            this.weekView.settings.onChangeView = changeViewCallback;
            this.markForRefresh();
        }
    }
    get changeViewCallback() {
        if (this.weekView) {
            return this.weekView.settings.onChangeView;
        }
        return this._weekViewOptions.onChangeView;
    }
    /** Add extra attributes like id's to the component **/
    set attributes(attributes) {
        this._weekViewOptions.attributes = attributes;
        if (this.weekView) {
            this.weekView.settings.attributes = attributes;
            this.markForRefresh();
        }
    }
    get attributes() {
        if (this.weekView) {
            return this.weekView.settings.attributes;
        }
        return this._weekViewOptions.attributes;
    }
    constructor(element, ngZone, ref) {
        this.element = element;
        this.ngZone = ngZone;
        this.ref = ref;
        this.isWeekView = true;
        this.isCalendarWeekView = true;
        // -------------------------------------------
        // Component Output
        // -------------------------------------------
        this.selected = new EventEmitter();
        this.weekRendered = new EventEmitter();
        this.eventClick = new EventEmitter();
        this.eventDblClick = new EventEmitter();
        this.eventContextMenu = new EventEmitter();
        this._weekViewOptions = {};
    }
    weekviewOptions(weekviewOptions) {
        this._weekViewOptions = weekviewOptions;
        if (this.jQueryElement) {
            // No need to set the 'settings' as the Rebuild will create
            // a new control with the _gridOptions.
            this.markForRefresh();
        }
    }
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            // Wrap the element in a jQuery selector.
            this.jQueryElement = jQuery(this.element.nativeElement);
            // Add listeners to emit events
            this.jQueryElement
                .on('weekrendered', (_e, args) => this.onWeekRenderedEvent(args))
                .on('eventclick', (_e, args) => this.onEventClick(args))
                .on('eventdblclick', (_e, args) => this.onEventDblClick(args))
                .on('contextmenu', (_e, args) => this.onEventContextMenu(args));
            // Initialise the Soho control.
            this.jQueryElement.weekview(this._weekViewOptions);
            // Once the control is initialised, extract the control
            // plug-in from the element.  The element name is defined
            // by the plug-in, but in this case is 'weekview'.
            this.weekView = this.jQueryElement.data('weekview');
        });
    }
    ngAfterViewChecked() {
        if (!this.weekView || !this.jQueryElement) {
            return;
        }
        if (this.updateRequired) {
            // call outside the angular zone so change detection isn't triggered by the soho component.
            this.updated();
            this.updateRequired = false;
        }
    }
    onWeekRenderedEvent(event) {
        this.ngZone.run(() => this.weekRendered.emit(event));
    }
    onEventClick(event) {
        this.ngZone.run(() => this.eventClick.emit(event));
    }
    onEventDblClick(event) {
        this.ngZone.run(() => this.eventDblClick.emit(event));
    }
    onEventContextMenu(event) {
        this.ngZone.run(() => this.eventContextMenu.emit(event));
    }
    /**
     * Get the current selected date on the weekView calendar.
     *
     * @returns the currently selected date on the control.
     */
    currentDate() {
        return this.ngZone.runOutsideAngular(() => this.weekView?.currentDate());
    }
    /**
     * Get the events and date for the currently selected weekView calendar day.
     *
     * @param date The date to find the events for.
     * @returns dayEvents An object with all the events and the event date.
     */
    getDayEvents(date) {
        return this.ngZone.runOutsideAngular(() => this.weekView?.getDayEvents(date));
    }
    /**
     * Get dayMap object within weekview component
     * @returns {SohoWeekViewDayMap[]} dayMap object
     */
    getDayMap() {
        return this.weekView?.dayMap;
    }
    /**
     * Handle updated settings and values.
     */
    updated(settings) {
        this.ngZone.runOutsideAngular(() => this.weekView?.updated(settings));
    }
    /**
     * Marks the components as requiring a rebuild after the next update.
     */
    markForRefresh() {
        // Run updated on the next updated check.
        this.updateRequired = true;
        // ... make sure the change detector kicks in, otherwise if the inputs
        // were change programmatically the component may not be eligible for
        // updating.
        this.ref.markForCheck();
    }
    /**
     * Destructor.
     */
    ngOnDestroy() {
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
            if (this.weekView) {
                this.weekView.destroy();
                this.weekView = undefined;
            }
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoWeekViewComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoWeekViewComponent, selector: "div[soho-week-view]", inputs: { weekViewOptions: "weekViewOptions", stacked: "stacked", showFooter: "showFooter", responsive: "responsive", hideToolbar: "hideToolbar", eventTypes: "eventTypes", filteredTypes: "filteredTypes", events: "events", locale: "locale", startDate: "startDate", endDate: "endDate", startHour: "startHour", endHour: "endHour", showToday: "showToday", showAllDay: "showAllDay", showViewChanger: "showViewChanger", showTimeLine: "showTimeLine", firstDayOfWeek: "firstDayOfWeek", eventTooltip: "eventTooltip", iconTooltip: "iconTooltip", renderWeekCallback: "renderWeekCallback", changeToWeekDayCallback: "changeToWeekDayCallback", changeWeekCallback: "changeWeekCallback", changeViewCallback: "changeViewCallback", attributes: "attributes", weekviewOptions: "weekviewOptions" }, outputs: { selected: "selected", weekRendered: "weekRendered", eventClick: "eventClick", eventDblClick: "eventDblClick", eventContextMenu: "eventContextMenu" }, host: { properties: { "class.week-view": "this.isWeekView", "class.calendar-weekview": "this.isCalendarWeekView" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoWeekViewComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'div[soho-week-view]',
                    template: `<ng-content></ng-content>`,
                    changeDetection: ChangeDetectionStrategy.OnPush
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { isWeekView: [{
                type: HostBinding,
                args: ['class.week-view']
            }], weekViewOptions: [{
                type: Input
            }], stacked: [{
                type: Input
            }], showFooter: [{
                type: Input
            }], responsive: [{
                type: Input
            }], hideToolbar: [{
                type: Input
            }], eventTypes: [{
                type: Input
            }], filteredTypes: [{
                type: Input
            }], events: [{
                type: Input
            }], locale: [{
                type: Input
            }], startDate: [{
                type: Input
            }], endDate: [{
                type: Input
            }], startHour: [{
                type: Input
            }], endHour: [{
                type: Input
            }], showToday: [{
                type: Input
            }], showAllDay: [{
                type: Input
            }], showViewChanger: [{
                type: Input
            }], showTimeLine: [{
                type: Input
            }], firstDayOfWeek: [{
                type: Input
            }], eventTooltip: [{
                type: Input
            }], iconTooltip: [{
                type: Input
            }], renderWeekCallback: [{
                type: Input
            }], changeToWeekDayCallback: [{
                type: Input
            }], changeWeekCallback: [{
                type: Input
            }], changeViewCallback: [{
                type: Input
            }], attributes: [{
                type: Input
            }], isCalendarWeekView: [{
                type: HostBinding,
                args: ['class.calendar-weekview']
            }], selected: [{
                type: Output
            }], weekRendered: [{
                type: Output
            }], eventClick: [{
                type: Output
            }], eventDblClick: [{
                type: Output
            }], eventContextMenu: [{
                type: Output
            }], weekviewOptions: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby13ZWVrLXZpZXcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi93ZWVrLXZpZXcvc29oby13ZWVrLXZpZXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFJTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUVULFlBQVksRUFDWixXQUFXLEVBQ1gsS0FBSyxFQUdMLE1BQU0sR0FDUCxNQUFNLGVBQWUsQ0FBQzs7QUFFdkI7O3FFQUVxRTtBQU1yRSxNQUFNLE9BQU8scUJBQXFCO0lBR2hDLElBQWEsZUFBZSxDQUFDLGVBQW9DO1FBQy9ELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxlQUFlLENBQUM7UUFFeEMsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ3RCLDJEQUEyRDtZQUMzRCx1Q0FBdUM7WUFDdkMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQ3ZCO0lBQ0gsQ0FBQztJQUVELElBQUksZUFBZTtRQUNqQixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDakIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQztTQUMvQjtRQUVELE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDO0lBQy9CLENBQUM7SUFFRDs7T0FFRztJQUNILElBQWEsT0FBTyxDQUFDLFNBQThCO1FBQ2pELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDO1FBQzFDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNqQixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDO1lBQzNDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztTQUN2QjtJQUNILENBQUM7SUFFRCxJQUFJLE9BQU87UUFDVCxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDakIsT0FB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QkFtQk8sdUJBQXVCO3NCQUFuQyxLQUFLO2dCQW1CTyxrQkFBa0I7c0JBQTlCLEtBQUs7Z0JBbUJPLGtCQUFrQjtzQkFBOUIsS0FBSztnQkFpQk8sVUFBVTtzQkFBdEIsS0FBSztnQkFzQmtDLGtCQUFrQjtzQkFBekQsV0FBVzt1QkFBQyx5QkFBeUI7Z0JBSzVCLFFBQVE7c0JBQWpCLE1BQU07Z0JBQ0csWUFBWTtzQkFBckIsTUFBTTtnQkFDRyxVQUFVO3NCQUFuQixNQUFNO2dCQUNHLGFBQWE7c0JBQXRCLE1BQU07Z0JBQ0csZ0JBQWdCO3NCQUF6QixNQUFNO2dCQVVFLGVBQWU7c0JBQXZCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdDaGVja2VkLFxuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBIb3N0QmluZGluZyxcbiAgSW5wdXQsXG4gIE5nWm9uZSxcbiAgT25EZXN0cm95LFxuICBPdXRwdXQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIFdlZWt2aWV3IGNvbXBvbmVudFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkaXZbc29oby13ZWVrLXZpZXddJywgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBTb2hvV2Vla1ZpZXdDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdDaGVja2VkLCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLndlZWstdmlldycpIGlzV2Vla1ZpZXcgPSB0cnVlO1xuXG4gIEBJbnB1dCgpIHNldCB3ZWVrVmlld09wdGlvbnMod2Vla1ZpZXdPcHRpb25zOiBTb2hvV2Vla1ZpZXdPcHRpb25zKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zID0gd2Vla1ZpZXdPcHRpb25zO1xuXG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgLy8gTm8gbmVlZCB0byBzZXQgdGhlICdzZXR0aW5ncycgYXMgdGhlIFJlYnVpbGQgd2lsbCBjcmVhdGVcbiAgICAgIC8vIGEgbmV3IGNvbnRyb2wgd2l0aCB0aGUgX2dyaWRPcHRpb25zLlxuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCB3ZWVrVmlld09wdGlvbnMoKTogU29ob1dlZWtWaWV3T3B0aW9ucyB7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLndlZWtWaWV3LnNldHRpbmdzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogU2V0dGluZyB0byB0b2dnbGUgc3RhY2tlZCB3ZWVrIHZpZXcgbGF5b3V0XG4gICAqL1xuICBASW5wdXQoKSBzZXQgc3RhY2tlZChpc1N0YWNrZWQ6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl93ZWVrVmlld09wdGlvbnMuc3RhY2tlZCA9IGlzU3RhY2tlZDtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5zdGFja2VkID0gaXNTdGFja2VkO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzdGFja2VkKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5zdGFja2VkXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5zdGFja2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHRpbmcgdG8gdG9nZ2xlIGZvb3RlciB3aGVuIGluIHN0YWNrZWQgd2VlayB2aWV3IG1vZGVcbiAgICovXG4gIEBJbnB1dCgpIHNldCBzaG93Rm9vdGVyKHZhbDogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5zaG93Rm9vdGVyID0gdmFsO1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICB0aGlzLndlZWtWaWV3LnNldHRpbmdzLnNob3dGb290ZXIgPSB2YWw7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHNob3dGb290ZXIoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLndlZWtWaWV3LnNldHRpbmdzLnNob3dGb290ZXJcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fd2Vla1ZpZXdPcHRpb25zLnNob3dGb290ZXI7XG4gIH1cblxuICAvKipcbiAgICogU2V0dGluZyB0byBzd2l0Y2ggdG8gb25lIGRheSB2aWV3IGluIHBob25lLXRhYmxldCBzaXplcyAoc3RhY2tlZCBtb2RlIG9ubHkpXG4gICAqL1xuICBASW5wdXQoKSBzZXQgcmVzcG9uc2l2ZSh2YWw6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl93ZWVrVmlld09wdGlvbnMucmVzcG9uc2l2ZSA9IHZhbDtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5yZXNwb25zaXZlID0gdmFsO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCByZXNwb25zaXZlKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5yZXNwb25zaXZlXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5yZXNwb25zaXZlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHRpbmcgdG8gaGlkZSB3ZWVrIHZpZXcgY2FsZW5kYXIgdG9vbGJhclxuICAgKi9cbiAgQElucHV0KCkgc2V0IGhpZGVUb29sYmFyKHZhbDogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5oaWRlVG9vbGJhciA9IHZhbDtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5oaWRlVG9vbGJhciA9IHZhbDtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICBnZXQgaGlkZVRvb2xiYXIoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLndlZWtWaWV3LnNldHRpbmdzLmhpZGVUb29sYmFyXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5oaWRlVG9vbGJhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBvYmplY3RzIHdpdGggZGF0YSBmb3IgdGhlIGV2ZW50IHR5cGVzLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGV2ZW50VHlwZXMoZXZlbnRUeXBlczogU29ob1dlZWtWaWV3RXZlbnRUeXBlW10gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl93ZWVrVmlld09wdGlvbnMuZXZlbnRUeXBlcyA9IGV2ZW50VHlwZXM7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3MuZXZlbnRUeXBlcyA9IGV2ZW50VHlwZXM7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGV2ZW50VHlwZXMoKTogU29ob1dlZWtWaWV3RXZlbnRUeXBlW10gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5ldmVudFR5cGVzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnMuZXZlbnRUeXBlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBvYmplY3RzIHdpdGggZGF0YSBmb3IgdGhlIGZpbHRlcmVkIGV2ZW50IHR5cGVzLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGZpbHRlcmVkVHlwZXMoZmlsdGVyZWRUeXBlczogW10gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl93ZWVrVmlld09wdGlvbnMuZmlsdGVyZWRUeXBlcyA9IGZpbHRlcmVkVHlwZXM7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3MuZmlsdGVyZWRUeXBlcyA9IGZpbHRlcmVkVHlwZXM7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGZpbHRlcmVkVHlwZXMoKTogW10gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5maWx0ZXJlZFR5cGVzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnMuZmlsdGVyZWRUeXBlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBvYmplY3RzIHdpdGggZGF0YSBmb3IgdGhlIGV2ZW50cy5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBldmVudHMoZXZlbnRzOiBTb2hvV2Vla1ZpZXdFdmVudFtdIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLmV2ZW50cyA9IGV2ZW50cztcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5ldmVudHMgPSBldmVudHM7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGV2ZW50cygpOiBTb2hvV2Vla1ZpZXdFdmVudFtdIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgcmV0dXJuIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3MuZXZlbnRzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnMuZXZlbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBsb2NhbGUgdG8gdXNlIGZvciB0aGlzIGluc3RhbmNlLiBJZiBub3Qgc2V0IHRoZSBjdXJyZW50IGxvY2FsZSB3aWxsIGJlIHVzZWQuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgbG9jYWxlKGxvY2FsZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLmxvY2FsZSA9IGxvY2FsZTtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5sb2NhbGUgPSBsb2NhbGU7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGxvY2FsZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5sb2NhbGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5sb2NhbGU7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgb2YgdGhlIHdlZWsgdG8gc2hvdy5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBzdGFydERhdGUoc3RhcnREYXRlOiBEYXRlIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLnN0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5zdGFydERhdGUgPSBzdGFydERhdGU7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHN0YXJ0RGF0ZSgpOiBEYXRlIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgcmV0dXJuIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3Muc3RhcnREYXRlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnMuc3RhcnREYXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuZCBvZiB0aGUgd2VlayB0byBzaG93XG4gICAqL1xuICBASW5wdXQoKSBzZXQgZW5kRGF0ZShlbmREYXRlOiBEYXRlIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLmVuZERhdGUgPSBlbmREYXRlO1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICB0aGlzLndlZWtWaWV3LnNldHRpbmdzLmVuZERhdGUgPSBlbmREYXRlO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBlbmREYXRlKCk6IERhdGUgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5lbmREYXRlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnMuZW5kRGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCBvZiB0aGUgaG91ciB0byBzaG93LlxuICAgKi9cbiAgQElucHV0KCkgc2V0IHN0YXJ0SG91cihzdGFydEhvdXI6IG51bWJlciB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5zdGFydEhvdXIgPSBzdGFydEhvdXI7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3Muc3RhcnRIb3VyID0gc3RhcnRIb3VyO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzdGFydEhvdXIoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgcmV0dXJuIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3Muc3RhcnRIb3VyO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnMuc3RhcnRIb3VyO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuZCBvZiB0aGUgaG91ciB0byBzaG93XG4gICAqL1xuICBASW5wdXQoKSBzZXQgZW5kSG91cihlbmRIb3VyOiBudW1iZXIgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl93ZWVrVmlld09wdGlvbnMuZW5kSG91ciA9IGVuZEhvdXI7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3MuZW5kSG91ciA9IGVuZEhvdXI7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGVuZEhvdXIoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgcmV0dXJuIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3MuZW5kSG91cjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fd2Vla1ZpZXdPcHRpb25zLmVuZEhvdXI7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgdG9kYXkgYnV0dG9uIHNob3VsZCBiZSBzaG93bi5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBzaG93VG9kYXkoc2hvd1RvZGF5OiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLnNob3dUb2RheSA9IHNob3dUb2RheTtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5zaG93VG9kYXkgPSBzaG93VG9kYXk7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHNob3dUb2RheSgpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgcmV0dXJuIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3Muc2hvd1RvZGF5O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnMuc2hvd1RvZGF5O1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIGFsbCBkYXkgZXZlbnRzIHJvdyBzaG91bGQgYmUgc2hvd24uXG4gICAqL1xuICBASW5wdXQoKSBzZXQgc2hvd0FsbERheShzaG93QWxsRGF5OiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLnNob3dBbGxEYXkgPSBzaG93QWxsRGF5O1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICB0aGlzLndlZWtWaWV3LnNldHRpbmdzLnNob3dBbGxEYXkgPSBzaG93QWxsRGF5O1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzaG93QWxsRGF5KCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5zaG93QWxsRGF5O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnMuc2hvd0FsbERheTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgSWYgZmFsc2UgdGhlIGRyb3Bkb3duIHRvIGNoYW5nZSB2aWV3cyB3aWxsIG5vdCBiZSBzaG93bi5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBzaG93Vmlld0NoYW5nZXIoc2hvd1ZpZXdDaGFuZ2VyOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLnNob3dWaWV3Q2hhbmdlciA9IHNob3dWaWV3Q2hhbmdlcjtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5zaG93Vmlld0NoYW5nZXIgPSBzaG93Vmlld0NoYW5nZXI7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHNob3dWaWV3Q2hhbmdlcigpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgcmV0dXJuIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3Muc2hvd1ZpZXdDaGFuZ2VyO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnMuc2hvd1ZpZXdDaGFuZ2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3dzIGEgYmFyIGFjcm9zcyB0aGUgY3VycmVudCB0aW1lLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IHNob3dUaW1lTGluZShzaG93VGltZUxpbmU6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl93ZWVrVmlld09wdGlvbnMuc2hvd1RpbWVMaW5lID0gc2hvd1RpbWVMaW5lO1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICB0aGlzLndlZWtWaWV3LnNldHRpbmdzLnNob3dUaW1lTGluZSA9IHNob3dUaW1lTGluZTtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICBnZXQgc2hvd1RpbWVMaW5lKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5zaG93VGltZUxpbmU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5zaG93VGltZUxpbmU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGZpcnN0IGRheSBvZiB0aGUgd2Vlay4gJzEnIHdvdWxkIGJlIE1vbmRheS5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBmaXJzdERheU9mV2VlayhmaXJzdERheU9mV2VlazogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5maXJzdERheU9mV2VlayA9IGZpcnN0RGF5T2ZXZWVrO1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICB0aGlzLndlZWtWaWV3LnNldHRpbmdzLmZpcnN0RGF5T2ZXZWVrID0gZmlyc3REYXlPZldlZWs7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGZpcnN0RGF5T2ZXZWVrKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5maXJzdERheU9mV2VlaztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fd2Vla1ZpZXdPcHRpb25zLmZpcnN0RGF5T2ZXZWVrO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIGZhbHNlIHRoZSBtb3VzZW92ZXIgdGV4dCBvciBkYXkgZXZlbnQgd2lsbCBub3QgYmUgc2hvd24uXG4gICAqL1xuICBASW5wdXQoKSBzZXQgZXZlbnRUb29sdGlwKGV2ZW50VG9vbHRpcDogc3RyaW5nIHwgU29ob1dlZWtWaWV3VG9vbHRpcEZ1bmN0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLmV2ZW50VG9vbHRpcCA9IGV2ZW50VG9vbHRpcDtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5ldmVudFRvb2x0aXAgPSBldmVudFRvb2x0aXA7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGV2ZW50VG9vbHRpcCgpOiBzdHJpbmcgfCBTb2hvV2Vla1ZpZXdUb29sdGlwRnVuY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5ldmVudFRvb2x0aXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5ldmVudFRvb2x0aXA7XG4gIH1cblxuICAvKipcbiAgICogSWYgZmFsc2UgdGhlIG1vdXNlb3ZlciB0ZXh0IGZvciBldmVudCBpY29uIHdpbGwgbm90IGJlIHNob3duLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGljb25Ub29sdGlwKGljb25Ub29sdGlwOiBzdHJpbmcgfCBTb2hvV2Vla1ZpZXdUb29sdGlwRnVuY3Rpb24gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl93ZWVrVmlld09wdGlvbnMuaWNvblRvb2x0aXAgPSBpY29uVG9vbHRpcDtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5pY29uVG9vbHRpcCA9IGljb25Ub29sdGlwO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpY29uVG9vbHRpcCgpOiBzdHJpbmcgfCBTb2hvV2Vla1ZpZXdUb29sdGlwRnVuY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5pY29uVG9vbHRpcDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fd2Vla1ZpZXdPcHRpb25zLmljb25Ub29sdGlwO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHdoZW4gYSB3ZWVrIHZpZXcgaXMgcmVuZGVyZWQsIGFsbG93aW5nIHlvdSB0byBwYXNzIGJhY2sgZXZlbnRzIG9yIGV2ZW50IHR5cGVzIHRvIHNob3cuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgcmVuZGVyV2Vla0NhbGxiYWNrKHJlbmRlcldlZWtDYWxsYmFjazogRnVuY3Rpb24gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl93ZWVrVmlld09wdGlvbnMub25SZW5kZXJXZWVrID0gcmVuZGVyV2Vla0NhbGxiYWNrO1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICB0aGlzLndlZWtWaWV3LnNldHRpbmdzLm9uUmVuZGVyV2VlayA9IHJlbmRlcldlZWtDYWxsYmFjaztcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICBnZXQgcmVuZGVyV2Vla0NhbGxiYWNrKCk6IEZ1bmN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgcmV0dXJuIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3Mub25SZW5kZXJXZWVrO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl93ZWVrVmlld09wdGlvbnMub25SZW5kZXJXZWVrO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgYmFjayBmb3Igd2hlbiB0aGUgdmlldyBjaGFuZ2VyIGlzIGNoYW5nZWQuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgY2hhbmdlVG9XZWVrRGF5Q2FsbGJhY2soY2hhbmdlVG9XZWVrRGF5Q2FsbGJhY2s6IEZ1bmN0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLm9uQ2hhbmdlVG9XZWVrRGF5ID0gY2hhbmdlVG9XZWVrRGF5Q2FsbGJhY2s7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHRoaXMud2Vla1ZpZXcuc2V0dGluZ3Mub25DaGFuZ2VUb1dlZWtEYXkgPSBjaGFuZ2VUb1dlZWtEYXlDYWxsYmFjaztcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICBnZXQgY2hhbmdlVG9XZWVrRGF5Q2FsbGJhY2soKTogRnVuY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5vbkNoYW5nZVRvV2Vla0RheTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fd2Vla1ZpZXdPcHRpb25zLm9uQ2hhbmdlVG9XZWVrRGF5O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgYmFjayBmb3Igd2hlbiB0aGUgd2VlayBpcyBjaGFuZ2VkLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGNoYW5nZVdlZWtDYWxsYmFjayhjaGFuZ2VXZWVrQ2FsbGJhY2s6IEZ1bmN0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLm9uQ2hhbmdlV2VlayA9IGNoYW5nZVdlZWtDYWxsYmFjaztcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5vbkNoYW5nZVdlZWsgPSBjaGFuZ2VXZWVrQ2FsbGJhY2s7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGNoYW5nZVdlZWtDYWxsYmFjaygpOiBGdW5jdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLndlZWtWaWV3LnNldHRpbmdzLm9uQ2hhbmdlV2VlaztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fd2Vla1ZpZXdPcHRpb25zLm9uQ2hhbmdlV2VlaztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIGJhY2sgZm9yIHdoZW4gdGhlIHZpZXcgY2hhbmdlciBpcyBjaGFuZ2VkLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGNoYW5nZVZpZXdDYWxsYmFjayhjaGFuZ2VWaWV3Q2FsbGJhY2s6IEZ1bmN0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fd2Vla1ZpZXdPcHRpb25zLm9uQ2hhbmdlVmlldyA9IGNoYW5nZVZpZXdDYWxsYmFjaztcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5vbkNoYW5nZVZpZXcgPSBjaGFuZ2VWaWV3Q2FsbGJhY2s7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGNoYW5nZVZpZXdDYWxsYmFjaygpOiBGdW5jdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLndlZWtWaWV3LnNldHRpbmdzLm9uQ2hhbmdlVmlldztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fd2Vla1ZpZXdPcHRpb25zLm9uQ2hhbmdlVmlldztcbiAgfVxuXG4gIC8qKiBBZGQgZXh0cmEgYXR0cmlidXRlcyBsaWtlIGlkJ3MgdG8gdGhlIGNvbXBvbmVudCAqKi9cbiAgQElucHV0KCkgc2V0IGF0dHJpYnV0ZXMoYXR0cmlidXRlczogQXJyYXk8T2JqZWN0PiB8IE9iamVjdCB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICBpZiAodGhpcy53ZWVrVmlldykge1xuICAgICAgdGhpcy53ZWVrVmlldy5zZXR0aW5ncy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGF0dHJpYnV0ZXMoKTogQXJyYXk8T2JqZWN0PiB8IE9iamVjdCB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMud2Vla1ZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLndlZWtWaWV3LnNldHRpbmdzLmF0dHJpYnV0ZXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3dlZWtWaWV3T3B0aW9ucy5hdHRyaWJ1dGVzO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXG4gICAgcHVibGljIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWZcbiAgKSB7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmNhbGVuZGFyLXdlZWt2aWV3JykgaXNDYWxlbmRhcldlZWtWaWV3ID0gdHJ1ZTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIENvbXBvbmVudCBPdXRwdXRcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAT3V0cHV0KCkgc2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9XZWVrVmlld0RhdGVTZWxlY3RlZEV2ZW50PigpO1xuICBAT3V0cHV0KCkgd2Vla1JlbmRlcmVkID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvV2Vla1ZpZXdSZW5kZXJXZWVrRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBldmVudENsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvV2Vla1ZpZXdDbGlja0V2ZW50PigpO1xuICBAT3V0cHV0KCkgZXZlbnREYmxDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob1dlZWtWaWV3Q2xpY2tFdmVudD4oKTtcbiAgQE91dHB1dCgpIGV2ZW50Q29udGV4dE1lbnUgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9XZWVrVmlld0NsaWNrRXZlbnQ+KCk7XG5cbiAgLyoqXG4gICAqIExvY2FsIHZhcmlhYmxlc1xuICAgKi9cbiAgcHJpdmF0ZSBqUXVlcnlFbGVtZW50PzogSlF1ZXJ5O1xuICBwcml2YXRlIHdlZWtWaWV3ITogU29ob1dlZWtWaWV3IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF93ZWVrVmlld09wdGlvbnM6IFNvaG9XZWVrVmlld09wdGlvbnMgPSB7fTtcbiAgcHJpdmF0ZSB1cGRhdGVSZXF1aXJlZD86IGJvb2xlYW47XG5cbiAgQElucHV0KCkgd2Vla3ZpZXdPcHRpb25zKHdlZWt2aWV3T3B0aW9uczogU29ob1dlZWtWaWV3T3B0aW9ucykge1xuICAgIHRoaXMuX3dlZWtWaWV3T3B0aW9ucyA9IHdlZWt2aWV3T3B0aW9ucztcblxuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgIC8vIE5vIG5lZWQgdG8gc2V0IHRoZSAnc2V0dGluZ3MnIGFzIHRoZSBSZWJ1aWxkIHdpbGwgY3JlYXRlXG4gICAgICAvLyBhIG5ldyBjb250cm9sIHdpdGggdGhlIF9ncmlkT3B0aW9ucy5cbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgLy8gV3JhcCB0aGUgZWxlbWVudCBpbiBhIGpRdWVyeSBzZWxlY3Rvci5cbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudCA9IGpRdWVyeSh0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudCk7XG5cbiAgICAgIC8vIEFkZCBsaXN0ZW5lcnMgdG8gZW1pdCBldmVudHNcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudFxuICAgICAgICAub24oJ3dlZWtyZW5kZXJlZCcsIChfZTogYW55LCBhcmdzOiBTb2hvV2Vla1ZpZXdSZW5kZXJXZWVrRXZlbnQpID0+IHRoaXMub25XZWVrUmVuZGVyZWRFdmVudChhcmdzKSlcbiAgICAgICAgLm9uKCdldmVudGNsaWNrJywgKF9lOiBhbnksIGFyZ3M6IFNvaG9XZWVrVmlld0NsaWNrRXZlbnQpID0+IHRoaXMub25FdmVudENsaWNrKGFyZ3MpKVxuICAgICAgICAub24oJ2V2ZW50ZGJsY2xpY2snLCAoX2U6IGFueSwgYXJnczogU29ob1dlZWtWaWV3Q2xpY2tFdmVudCkgPT4gdGhpcy5vbkV2ZW50RGJsQ2xpY2soYXJncykpXG4gICAgICAgIC5vbignY29udGV4dG1lbnUnLCAoX2U6IGFueSwgYXJnczogU29ob1dlZWtWaWV3Q2xpY2tFdmVudCkgPT4gdGhpcy5vbkV2ZW50Q29udGV4dE1lbnUoYXJncykpO1xuXG4gICAgICAvLyBJbml0aWFsaXNlIHRoZSBTb2hvIGNvbnRyb2wuXG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQud2Vla3ZpZXcodGhpcy5fd2Vla1ZpZXdPcHRpb25zKTtcblxuICAgICAgLy8gT25jZSB0aGUgY29udHJvbCBpcyBpbml0aWFsaXNlZCwgZXh0cmFjdCB0aGUgY29udHJvbFxuICAgICAgLy8gcGx1Zy1pbiBmcm9tIHRoZSBlbGVtZW50LiAgVGhlIGVsZW1lbnQgbmFtZSBpcyBkZWZpbmVkXG4gICAgICAvLyBieSB0aGUgcGx1Zy1pbiwgYnV0IGluIHRoaXMgY2FzZSBpcyAnd2Vla3ZpZXcnLlxuICAgICAgdGhpcy53ZWVrVmlldyA9IHRoaXMualF1ZXJ5RWxlbWVudC5kYXRhKCd3ZWVrdmlldycpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgIGlmICghdGhpcy53ZWVrVmlldyB8fCAhdGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXBkYXRlUmVxdWlyZWQpIHtcbiAgICAgIC8vIGNhbGwgb3V0c2lkZSB0aGUgYW5ndWxhciB6b25lIHNvIGNoYW5nZSBkZXRlY3Rpb24gaXNuJ3QgdHJpZ2dlcmVkIGJ5IHRoZSBzb2hvIGNvbXBvbmVudC5cbiAgICAgIHRoaXMudXBkYXRlZCgpO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG9uV2Vla1JlbmRlcmVkRXZlbnQoZXZlbnQ6IFNvaG9XZWVrVmlld1JlbmRlcldlZWtFdmVudCkge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLndlZWtSZW5kZXJlZC5lbWl0KGV2ZW50KSk7XG4gIH1cblxuICBvbkV2ZW50Q2xpY2soZXZlbnQ6IFNvaG9XZWVrVmlld0NsaWNrRXZlbnQpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4gdGhpcy5ldmVudENsaWNrLmVtaXQoZXZlbnQpKTtcbiAgfVxuXG4gIG9uRXZlbnREYmxDbGljayhldmVudDogU29ob1dlZWtWaWV3Q2xpY2tFdmVudCkge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLmV2ZW50RGJsQ2xpY2suZW1pdChldmVudCkpO1xuICB9XG5cbiAgb25FdmVudENvbnRleHRNZW51KGV2ZW50OiBTb2hvV2Vla1ZpZXdDbGlja0V2ZW50KSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMuZXZlbnRDb250ZXh0TWVudS5lbWl0KGV2ZW50KSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHNlbGVjdGVkIGRhdGUgb24gdGhlIHdlZWtWaWV3IGNhbGVuZGFyLlxuICAgKlxuICAgKiBAcmV0dXJucyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGRhdGUgb24gdGhlIGNvbnRyb2wuXG4gICAqL1xuICBjdXJyZW50RGF0ZSgpOiBEYXRlIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy53ZWVrVmlldz8uY3VycmVudERhdGUoKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBldmVudHMgYW5kIGRhdGUgZm9yIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgd2Vla1ZpZXcgY2FsZW5kYXIgZGF5LlxuICAgKlxuICAgKiBAcGFyYW0gZGF0ZSBUaGUgZGF0ZSB0byBmaW5kIHRoZSBldmVudHMgZm9yLlxuICAgKiBAcmV0dXJucyBkYXlFdmVudHMgQW4gb2JqZWN0IHdpdGggYWxsIHRoZSBldmVudHMgYW5kIHRoZSBldmVudCBkYXRlLlxuICAgKi9cbiAgZ2V0RGF5RXZlbnRzKGRhdGU6IERhdGUpOiBTb2hvV2Vla1ZpZXdEYXlFdmVudHMgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLndlZWtWaWV3Py5nZXREYXlFdmVudHMoZGF0ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBkYXlNYXAgb2JqZWN0IHdpdGhpbiB3ZWVrdmlldyBjb21wb25lbnRcbiAgICogQHJldHVybnMge1NvaG9XZWVrVmlld0RheU1hcFtdfSBkYXlNYXAgb2JqZWN0XG4gICAqL1xuICBnZXREYXlNYXAoKTogU29ob1dlZWtWaWV3RGF5TWFwW10gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLndlZWtWaWV3Py5kYXlNYXA7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHVwZGF0ZWQgc2V0dGluZ3MgYW5kIHZhbHVlcy5cbiAgICovXG4gIHVwZGF0ZWQoc2V0dGluZ3M/OiBTb2hvV2Vla1ZpZXdPcHRpb25zKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy53ZWVrVmlldz8udXBkYXRlZChzZXR0aW5ncykpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcmtzIHRoZSBjb21wb25lbnRzIGFzIHJlcXVpcmluZyBhIHJlYnVpbGQgYWZ0ZXIgdGhlIG5leHQgdXBkYXRlLlxuICAgKi9cbiAgbWFya0ZvclJlZnJlc2goKSB7XG4gICAgLy8gUnVuIHVwZGF0ZWQgb24gdGhlIG5leHQgdXBkYXRlZCBjaGVjay5cbiAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcblxuICAgIC8vIC4uLiBtYWtlIHN1cmUgdGhlIGNoYW5nZSBkZXRlY3RvciBraWNrcyBpbiwgb3RoZXJ3aXNlIGlmIHRoZSBpbnB1dHNcbiAgICAvLyB3ZXJlIGNoYW5nZSBwcm9ncmFtbWF0aWNhbGx5IHRoZSBjb21wb25lbnQgbWF5IG5vdCBiZSBlbGlnaWJsZSBmb3JcbiAgICAvLyB1cGRhdGluZy5cbiAgICB0aGlzLnJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cnVjdG9yLlxuICAgKi9cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgICB0aGlzLmpRdWVyeUVsZW1lbnQub2ZmKCk7XG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLndlZWtWaWV3KSB7XG4gICAgICAgIHRoaXMud2Vla1ZpZXcuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLndlZWtWaWV3ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iXX0=