import { ChangeDetectionStrategy, Component, EventEmitter, HostBinding, Input, Output, } from '@angular/core';
import * as i0 from "@angular/core";
export class SohoMonthViewComponent {
    set monthviewOptions(monthviewOptions) {
        this._monthviewOptions = monthviewOptions;
        if (this.jQueryElement) {
            this.markForRefresh();
        }
    }
    get monthviewOptions() {
        if (this.monthview) {
            return this.monthview.settings;
        }
        return this._monthviewOptions;
    }
    /**
     * The name of the locale to use for this instance. If not set the current locale will be used.
     */
    set locale(locale) {
        this._monthviewOptions.locale = locale;
        if (this.monthview) {
            this.monthview.settings.locale = locale;
            this.markForRefresh();
        }
    }
    get locale() {
        if (this.monthview) {
            return this.monthview.settings.locale;
        }
        return this._monthviewOptions.locale;
    }
    /**
     * Initial month to show.
     */
    set month(month) {
        this._monthviewOptions.month = month;
        if (this.monthview) {
            this.monthview.settings.month = month;
            this.markForRefresh();
        }
    }
    get month() {
        if (this.monthview) {
            return this.monthview.settings.month;
        }
        return this._monthviewOptions.month;
    }
    /**
     * Initial year to show.
     */
    set year(year) {
        this._monthviewOptions.year = year;
        if (this.monthview) {
            this.monthview.settings.year = year;
            this.markForRefresh();
        }
    }
    get year() {
        if (this.monthview) {
            return this.monthview.settings.year;
        }
        return this._monthviewOptions.year;
    }
    /**
     * The initial selected day to show.
     */
    set day(day) {
        this._monthviewOptions.day = day;
        if (this.monthview) {
            this.monthview.settings.day = day;
            this.markForRefresh();
        }
    }
    get day() {
        if (this.monthview) {
            return this.monthview.settings.day;
        }
        return this._monthviewOptions.day;
    }
    /**
     * The date to highlight as selected/today.
     */
    set activeDate(activeDate) {
        this._monthviewOptions.activeDate = activeDate;
        if (this.monthview) {
            this.monthview.settings.activeDate = activeDate;
            this.markForRefresh();
        }
    }
    get activeDate() {
        if (this.monthview) {
            return this.monthview.settings.activeDate;
        }
        return this._monthviewOptions.activeDate;
    }
    /**
     * The date to highlight as selected/today (as an array for islamic)
     */
    set activeDateIslamic(activeDateIslamic) {
        this._monthviewOptions.activeDateIslamic = activeDateIslamic;
        if (this.monthview) {
            this.monthview.settings.activeDateIslamic = activeDateIslamic;
            this.markForRefresh();
        }
    }
    get activeDateIslamic() {
        if (this.monthview) {
            return this.monthview.settings.activeDateIslamic;
        }
        return this._monthviewOptions.activeDateIslamic;
    }
    /**
     * Is it in a popup (datepicker using it)
     */
    set isPopup(isPopup) {
        this._monthviewOptions.isPopup = isPopup;
        if (this.monthview) {
            this.monthview.settings.isPopup = isPopup;
            this.markForRefresh();
        }
    }
    get isPopup() {
        if (this.monthview) {
            return this.monthview.settings.isPopup;
        }
        return this._monthviewOptions.isPopup;
    }
    /**
     * If true, will set it as inPage month view.
     */
    set inPage(inPage) {
        this._monthviewOptions.inPage = inPage;
        if (this.monthview) {
            this.monthview.settings.inPage = inPage;
            this.markForRefresh();
        }
    }
    get inPage() {
        if (this.monthview) {
            return this.monthview.settings.inPage;
        }
        return this._monthviewOptions.inPage;
    }
    /**
     * If true, will set the month-year title as button for inPage.
     */
    set inPageTitleAsButton(inPageTitleAsButton) {
        this._monthviewOptions.inPageTitleAsButton = inPageTitleAsButton;
        if (this.monthview) {
            this.monthview.settings.inPageTitleAsButton = inPageTitleAsButton;
            this.markForRefresh();
        }
    }
    get inPageTitleAsButton() {
        if (this.monthview) {
            return this.monthview.settings.inPageTitleAsButton;
        }
        return this._monthviewOptions.inPageTitleAsButton;
    }
    /**
     * If true, will set to be toggleable.
     */
    set inPageToggleable(inPageToggleable) {
        this._monthviewOptions.inPageToggleable = inPageToggleable;
        if (this.monthview) {
            this.monthview.settings.inPageToggleable = inPageToggleable;
            this.markForRefresh();
        }
    }
    get inPageToggleable() {
        if (this.monthview) {
            return this.monthview.settings.inPageToggleable;
        }
        return this._monthviewOptions.inPageToggleable;
    }
    /**
     * If true, will init as expanded
     */
    set inPageExpanded(inPageExpanded) {
        this._monthviewOptions.inPageExpanded = inPageExpanded;
        if (this.monthview) {
            this.monthview.settings.inPageExpanded = inPageExpanded;
            this.markForRefresh();
        }
    }
    get inPageExpanded() {
        if (this.monthview) {
            return this.monthview.settings.inPageExpanded;
        }
        return this._monthviewOptions.inPageExpanded;
    }
    /**
     * Set first day of the week. '1' would be Monday.
     */
    set firstDayOfWeek(firstDayOfWeek) {
        this._monthviewOptions.settingsfirstDayOfWeek = firstDayOfWeek;
        if (this.monthview) {
            this.monthview.settings.firstDayOfWeek = firstDayOfWeek;
            this.markForRefresh();
        }
    }
    get firstDayOfWeek() {
        if (this.monthview) {
            return this.monthview.settings.firstDayOfWeek;
        }
        return this._monthviewOptions.settings.firstDayOfWeek;
    }
    /**
     * If true the today button is shown on the header.
     */
    set showToday(showToday) {
        this._monthviewOptions.showToday = showToday;
        if (this.monthview) {
            this.monthview.settings.showToday = showToday;
            this.markForRefresh();
        }
    }
    get showToday() {
        if (this.monthview) {
            return this.monthview.settings.showToday;
        }
        return this._monthviewOptions.showToday;
    }
    /**
     * Indicates this is a month picker on the month and week view.
     * Has some slight different behavior.
     */
    set isMonthPicker(isMonthPicker) {
        this._monthviewOptions.isMonthPicker = isMonthPicker;
        if (this.monthview) {
            this.monthview.settings.isMonthPicker = isMonthPicker;
            this.markForRefresh();
        }
    }
    get isMonthPicker() {
        if (this.monthview) {
            return this.monthview.settings.isMonthPicker;
        }
        return this._monthviewOptions.isMonthPicker;
    }
    /**
     * If false the year and month switcher will be disabled.
     */
    set showMonthYearPicker(showMonthYearPicker) {
        this._monthviewOptions.showMonthYearPicker = showMonthYearPicker;
        if (this.monthview) {
            this.monthview.settings.showMonthYearPicker = showMonthYearPicker;
            this.markForRefresh();
        }
    }
    get showMonthYearPicker() {
        if (this.monthview) {
            return this.monthview.settings.showMonthYearPicker;
        }
        return this._monthviewOptions.showMonthYearPicker;
    }
    /**
     * Shows the legend below the table.
     */
    set showLegend(showLegend) {
        this._monthviewOptions.showLegend = showLegend;
        if (this.monthview) {
            this.monthview.settings.showLegend = showLegend;
            this.markForRefresh();
        }
    }
    get showLegend() {
        if (this.monthview) {
            return this.monthview.settings.showLegend;
        }
        return this._monthviewOptions.showLegend;
    }
    /**
     * Legend Build up.
     */
    set legend(legend) {
        this._monthviewOptions.legend = legend;
        if (this.monthview) {
            this.monthview.settings.legend = legend;
            this.updateLegend = true;
            this.ref.markForCheck();
        }
    }
    get legend() {
        if (this.monthview) {
            return this.monthview.settings.legend;
        }
        return this._monthviewOptions.legend;
    }
    /**
     * If true the days portion of the calendar will be hidden.
     * Usefull for Month/Year only formats.
     */
    set hideDays(hideDays) {
        this._monthviewOptions.hideDays = hideDays;
        if (this.monthview) {
            this.monthview.settings.hideDays = hideDays;
            this.markForRefresh();
        }
    }
    get hideDays() {
        if (this.monthview) {
            return this.monthview.settings.hideDays;
        }
        return this._monthviewOptions.hideDays;
    }
    /**
     * Disable dates in various ways.
     * For example `{minDate: 'M/d/yyyy', maxDate: 'M/d/yyyy'}`.
     * Dates should be in format M/d/yyyy
     */
    set disable(disable) {
        this._monthviewOptions.settings.disable = disable;
        if (this.jQueryElement) {
            this.markForRefresh();
        }
    }
    get disable() {
        if (this.monthview) {
            return this.monthview.settings.disable;
        }
        return this.disable;
    }
    /**
     * The number of years ahead to show in the month/year picker should total 9 with yearsBack.
     */
    set yearsBack(yearsBack) {
        this._monthviewOptions.yearsBack = yearsBack;
        if (this.monthview) {
            this.monthview.settings.yearsBack = yearsBack;
            this.markForRefresh();
        }
    }
    get yearsBack() {
        if (this.monthview) {
            return this.monthview.settings.yearsBack;
        }
        return this._monthviewOptions.yearsBack;
    }
    /**
     * The number of years back to show in the month/year picker should total 9 with yearsAhead.
     */
    set yearsAhead(yearsAhead) {
        this._monthviewOptions.yearsAhead = yearsAhead;
        if (this.monthview) {
            this.monthview.settings.yearsAhead = yearsAhead;
            this.markForRefresh();
        }
    }
    get yearsAhead() {
        if (this.monthview) {
            return this.monthview.settings.yearsAhead;
        }
        return this._monthviewOptions.yearsAhead;
    }
    /**
     * Range between two dates with various options.
     */
    set range(range) {
        this._monthviewOptions.range = range;
        if (this.monthview) {
            this.monthview.settings.range = range;
            this.markForRefresh();
        }
    }
    get range() {
        if (this.monthview) {
            return this.monthview.settings.range;
        }
        return this._monthviewOptions.range;
    }
    /**
     * If true the month days can be clicked to select
     */
    set selectable(selectable) {
        this._monthviewOptions.selectable = selectable;
        if (this.monthview) {
            this.monthview.settings.selectable = selectable;
            this.markForRefresh();
        }
    }
    get selectable() {
        if (this.monthview) {
            return this.monthview.settings.selectable;
        }
        return this._monthviewOptions.selectable;
    }
    /**
     * Callback that fires when a month day is clicked.
     */
    set onSelected(onSelected) {
        this._monthviewOptions.onSelected = onSelected;
        if (this.monthview) {
            this.monthview.settings.onSelected = onSelected;
            this.markForRefresh();
        }
    }
    get onSelected() {
        if (this.monthview) {
            return this.monthview.settings.onSelected;
        }
        return this._monthviewOptions.onSelected;
    }
    /**
     * Callback that fires when a key is pressed down.
     */
    set onKeyDown(onKeyDown) {
        this._monthviewOptions.onKeyDown = onKeyDown;
        if (this.monthview) {
            this.monthview.settings.onKeyDown = onKeyDown;
            this.markForRefresh();
        }
    }
    get onKeyDown() {
        if (this.monthview) {
            return this.monthview.settings.onKeyDown;
        }
        return this._monthviewOptions.onKeyDown;
    }
    /**
     * If true the Next Previous buttons will shown on the header.
     */
    set showNextPrevious(showNextPrevious) {
        this._monthviewOptions.showNextPrevious = showNextPrevious;
        if (this.monthview) {
            this.monthview.settings.showNextPrevious = showNextPrevious;
            this.markForRefresh();
        }
    }
    get showNextPrevious() {
        if (this.monthview) {
            return this.monthview.settings.showNextPrevious;
        }
        return this._monthviewOptions.showNextPrevious;
    }
    /**
     * Call back for when the view changer is changed.
     */
    set changeViewCallback(changeViewCallback) {
        this._monthviewOptions.onChangeView = changeViewCallback;
        if (this.monthview) {
            this.monthview.settings.onChangeView = changeViewCallback;
            this.markForRefresh();
        }
    }
    get changeViewCallback() {
        if (this.monthview) {
            return this.monthview.settings.onChangeView;
        }
        return this._monthviewOptions.onChangeView;
    }
    set attributes(attributes) {
        this.monthview.settings.attributes = attributes;
        if (this.jQueryElement) {
            this.markForRefresh();
        }
    }
    get attributes() {
        if (this.monthview) {
            return this.monthview.settings.attributes;
        }
        return this.attributes;
    }
    constructor(element, ngZone, ref) {
        this.element = element;
        this.ngZone = ngZone;
        this.ref = ref;
        this.isMonthView = true;
        this.dataInit = false;
        // -------------------------------------
        // Component Output
        // -------------------------------------
        this.monthRendered = new EventEmitter();
        this.selected = new EventEmitter();
        this._monthviewOptions = {};
    }
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            // Wrap the element in a jQuery selector.
            this.jQueryElement = jQuery(this.element.nativeElement);
            // Add listeners to emit events
            this.jQueryElement
                .on('monthrendered', (_e, args) => this.onMonthViewRenderedEvent(args))
                .on('selected', (_e, event) => this.onMonthViewSelectedEvent(event));
            // Initialize the Soho control.
            this.jQueryElement.monthview(this._monthviewOptions);
            this.monthview = this.jQueryElement.data('monthview');
        });
    }
    ngAfterViewChecked() {
        if (!this.monthview || !this.jQueryElement) {
            return;
        }
        if (this.updateLegend) {
            this.monthview.loadLegend(this.legend);
            this.updateLegend = false;
        }
        if (this.updateRequired) {
            this.updated();
            this.updateRequired = false;
        }
    }
    onMonthViewRenderedEvent(event) {
        this.ngZone.runOutsideAngular(() => this.monthRendered.emit(event));
    }
    onMonthViewSelectedEvent(event) {
        this.ngZone.runOutsideAngular(() => this.selected.emit(event));
    }
    /**
     * Handle updated settings and values.
     */
    updated() {
        this.ngZone.runOutsideAngular(() => this.monthview.updated());
    }
    /**
     * Mark the components as requiring a rebuild after the next update.
     */
    markForRefresh() {
        this.updateRequired = true;
        this.ref.markForCheck();
    }
    /**
     * Tear down the markup for the monthview
     */
    teardown() {
        if (this.monthview) {
            this.ngZone.runOutsideAngular(() => this.monthview.teardown());
        }
    }
    /**
     * Destroy the markup and any other resources.
     */
    destroy() {
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
            if (this.monthview) {
                this.monthview.destroy();
                this.monthview = null;
            }
        });
    }
    /**
     * Shows the given month and year.
     */
    showMonth(month, year) {
        if (this.monthview) {
            this.monthview.showMonth(month, year);
        }
    }
    /**
     * Cleanup just before Angular destroys the component.
     * Unsubscribe observables, detach event handlers and remove other resources to avoid memory leaks.
     */
    ngOnDestroy() {
        this.destroy();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoMonthViewComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoMonthViewComponent, selector: "[soho-monthview]", inputs: { monthviewOptions: "monthviewOptions", locale: "locale", month: "month", year: "year", day: "day", activeDate: "activeDate", activeDateIslamic: "activeDateIslamic", isPopup: "isPopup", inPage: "inPage", inPageTitleAsButton: "inPageTitleAsButton", inPageToggleable: "inPageToggleable", inPageExpanded: "inPageExpanded", firstDayOfWeek: "firstDayOfWeek", showToday: "showToday", isMonthPicker: "isMonthPicker", showMonthYearPicker: "showMonthYearPicker", showLegend: "showLegend", legend: "legend", hideDays: "hideDays", disable: "disable", yearsBack: "yearsBack", yearsAhead: "yearsAhead", range: "range", selectable: "selectable", onSelected: "onSelected", onKeyDown: "onKeyDown", showNextPrevious: "showNextPrevious", changeViewCallback: "changeViewCallback", attributes: "attributes" }, outputs: { monthRendered: "monthRendered", selected: "selected" }, host: { properties: { "class.monthview": "this.isMonthView", "attr.data-init": "this.dataInit" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoMonthViewComponent, decorators: [{
            type: Component,
            args: [{
                    selector: '[soho-monthview]',
                    template: `<ng-content></ng-content>`,
                    changeDetection: ChangeDetectionStrategy.OnPush
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { isMonthView: [{
                type: HostBinding,
                args: ['class.monthview']
            }], dataInit: [{
                type: HostBinding,
                args: ['attr.data-init']
            }], monthviewOptions: [{
                type: Input
            }], locale: [{
                type: Input
            }], month: [{
                type: Input
            }], year: [{
                type: Input
            }], day: [{
                type: Input
            }], activeDate: [{
                type: Input
            }], activeDateIslamic: [{
                type: Input
            }], isPopup: [{
                type: Input
            }], inPage: [{
                type: Input
            }], inPageTitleAsButton: [{
                type: Input
            }], inPageToggleable: [{
                type: Input
            }], inPageExpanded: [{
                type: Input
            }], firstDayOfWeek: [{
                type: Input
            }], showToday: [{
                type: Input
            }], isMonthPicker: [{
                type: Input
            }], showMonthYearPicker: [{
                type: Input
            }], showLegend: [{
                type: Input
            }], legend: [{
                type: Input
            }], hideDays: [{
                type: Input
            }], disable: [{
                type: Input
            }], yearsBack: [{
                type: Input
            }], yearsAhead: [{
                type: Input
            }], range: [{
                type: Input
            }], selectable: [{
                type: Input
            }], onSelected: [{
                type: Input
            }], onKeyDown: [{
                type: Input
            }], showNextPrevious: [{
                type: Input
            }], changeViewCallback: [{
                type: Input
            }], attributes: [{
                type: Input
            }], monthRendered: [{
                type: Output
            }], selected: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1tb250aHZpZXcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi9tb250aHZpZXcvc29oby1tb250aHZpZXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFJTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUVULFlBQVksRUFDWixXQUFXLEVBQ1gsS0FBSyxFQUdMLE1BQU0sR0FDUCxNQUFNLGVBQWUsQ0FBQzs7QUFPdkIsTUFBTSxPQUFPLHNCQUFzQjtJQUtqQyxJQUFhLGdCQUFnQixDQUFDLGdCQUFrRDtRQUM5RSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsZ0JBQWdCLENBQUM7UUFFMUMsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztTQUN2QjtJQUNILENBQUM7SUFDRCxJQUFJLGdCQUFnQjtRQUNsQixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDbEIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQztTQUNoQztRQUVELE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDO0lBQ2hDLENBQUM7SUFFRDs7T0FFRztJQUNILElBQWEsTUFBTSxDQUFDLE1BQWM7UUFDL0IsSUFBSSxDQUFDLGlCQUF5QixDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDaEQsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2xCLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFDeEMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQ3ZCO0lBQ0gsQ0FBQztJQUNELElBQUksTUFBTTtRQUNSLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNsQixPQUFRLElBQUksQ0FBQyxTQUFpQixDQUFDLFFBQVEsQ0FBQyxN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SztnQkFrQk8sZ0JBQWdCO3NCQUE1QixLQUFLO2dCQWtCTyxrQkFBa0I7c0JBQTlCLEtBQUs7Z0JBZU8sVUFBVTtzQkFBdEIsS0FBSztnQkFpQkksYUFBYTtzQkFBdEIsTUFBTTtnQkFDRyxRQUFRO3NCQUFqQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3Q2hlY2tlZCxcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBOZ1pvbmUsXG4gIE9uRGVzdHJveSxcbiAgT3V0cHV0LFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnW3NvaG8tbW9udGh2aWV3XScsIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgdGVtcGxhdGU6IGA8bmctY29udGVudD48L25nLWNvbnRlbnQ+YCxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgU29ob01vbnRoVmlld0NvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0NoZWNrZWQsIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5tb250aHZpZXcnKSBpc01vbnRoVmlldyA9IHRydWU7XG4gIEBIb3N0QmluZGluZygnYXR0ci5kYXRhLWluaXQnKSBkYXRhSW5pdCA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpIHNldCBtb250aHZpZXdPcHRpb25zKG1vbnRodmlld09wdGlvbnM6IFNvaG9Nb250aFZpZXdPcHRpb25zIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fbW9udGh2aWV3T3B0aW9ucyA9IG1vbnRodmlld09wdGlvbnM7XG5cbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG4gIGdldCBtb250aHZpZXdPcHRpb25zKCk6IFNvaG9Nb250aFZpZXdPcHRpb25zIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vbnRodmlldy5zZXR0aW5ncztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fbW9udGh2aWV3T3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgbG9jYWxlIHRvIHVzZSBmb3IgdGhpcyBpbnN0YW5jZS4gSWYgbm90IHNldCB0aGUgY3VycmVudCBsb2NhbGUgd2lsbCBiZSB1c2VkLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGxvY2FsZShsb2NhbGU6IHN0cmluZykge1xuICAgICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkubG9jYWxlID0gbG9jYWxlO1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgdGhpcy5tb250aHZpZXcuc2V0dGluZ3MubG9jYWxlID0gbG9jYWxlO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuICBnZXQgbG9jYWxlKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICByZXR1cm4gKHRoaXMubW9udGh2aWV3IGFzIGFueSkuc2V0dGluZ3MubG9jYWxlO1xuICAgIH1cblxuICAgIHJldHVybiAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLmxvY2FsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsIG1vbnRoIHRvIHNob3cuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgbW9udGgobW9udGg6IG51bWJlciB8IHVuZGVmaW5lZCkge1xuICAgICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkubW9udGggPSBtb250aDtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLm1vbnRoID0gbW9udGg7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG4gIGdldCBtb250aCgpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLm1vbnRoO1xuICAgIH1cblxuICAgIHJldHVybiAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLm1vbnRoO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWwgeWVhciB0byBzaG93LlxuICAgKi9cbiAgQElucHV0KCkgc2V0IHllYXIoeWVhcjogbnVtYmVyIHwgdW5kZWZpbmVkKSB7XG4gICAgKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS55ZWFyID0geWVhcjtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLnllYXIgPSB5ZWFyO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuICBnZXQgeWVhcigpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLnllYXI7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkueWVhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaW5pdGlhbCBzZWxlY3RlZCBkYXkgdG8gc2hvdy5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBkYXkoZGF5OiBudW1iZXIgfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLmRheSA9IGRheTtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLmRheSA9IGRheTtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGRheSgpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLmRheTtcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5kYXk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGRhdGUgdG8gaGlnaGxpZ2h0IGFzIHNlbGVjdGVkL3RvZGF5LlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGFjdGl2ZURhdGUoYWN0aXZlRGF0ZTogbnVtYmVyIHwgdW5kZWZpbmVkKSB7XG4gICAgKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5hY3RpdmVEYXRlID0gYWN0aXZlRGF0ZTtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLmFjdGl2ZURhdGUgPSBhY3RpdmVEYXRlO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuICBnZXQgYWN0aXZlRGF0ZSgpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLmFjdGl2ZURhdGU7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuYWN0aXZlRGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGF0ZSB0byBoaWdobGlnaHQgYXMgc2VsZWN0ZWQvdG9kYXkgKGFzIGFuIGFycmF5IGZvciBpc2xhbWljKVxuICAgKi9cbiAgQElucHV0KCkgc2V0IGFjdGl2ZURhdGVJc2xhbWljKGFjdGl2ZURhdGVJc2xhbWljOiBudW1iZXIgfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLmFjdGl2ZURhdGVJc2xhbWljID0gYWN0aXZlRGF0ZUlzbGFtaWM7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5hY3RpdmVEYXRlSXNsYW1pYyA9IGFjdGl2ZURhdGVJc2xhbWljO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuICBnZXQgYWN0aXZlRGF0ZUlzbGFtaWMoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5hY3RpdmVEYXRlSXNsYW1pYztcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5hY3RpdmVEYXRlSXNsYW1pYztcbiAgfVxuXG4gIC8qKlxuICAgKiBJcyBpdCBpbiBhIHBvcHVwIChkYXRlcGlja2VyIHVzaW5nIGl0KVxuICAgKi9cbiAgQElucHV0KCkgc2V0IGlzUG9wdXAoaXNQb3B1cDogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuaXNQb3B1cCA9IGlzUG9wdXA7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5pc1BvcHVwID0gaXNQb3B1cDtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGlzUG9wdXAoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy5tb250aHZpZXcuc2V0dGluZ3MuaXNQb3B1cDtcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5pc1BvcHVwO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRydWUsIHdpbGwgc2V0IGl0IGFzIGluUGFnZSBtb250aCB2aWV3LlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGluUGFnZShpblBhZ2U6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLmluUGFnZSA9IGluUGFnZTtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLmluUGFnZSA9IGluUGFnZTtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGluUGFnZSgpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5pblBhZ2U7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuaW5QYWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRydWUsIHdpbGwgc2V0IHRoZSBtb250aC15ZWFyIHRpdGxlIGFzIGJ1dHRvbiBmb3IgaW5QYWdlLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGluUGFnZVRpdGxlQXNCdXR0b24oaW5QYWdlVGl0bGVBc0J1dHRvbjogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuaW5QYWdlVGl0bGVBc0J1dHRvbiA9IGluUGFnZVRpdGxlQXNCdXR0b247XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5pblBhZ2VUaXRsZUFzQnV0dG9uID0gaW5QYWdlVGl0bGVBc0J1dHRvbjtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGluUGFnZVRpdGxlQXNCdXR0b24oKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy5tb250aHZpZXcuc2V0dGluZ3MuaW5QYWdlVGl0bGVBc0J1dHRvbjtcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5pblBhZ2VUaXRsZUFzQnV0dG9uO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRydWUsIHdpbGwgc2V0IHRvIGJlIHRvZ2dsZWFibGUuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgaW5QYWdlVG9nZ2xlYWJsZShpblBhZ2VUb2dnbGVhYmxlOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5pblBhZ2VUb2dnbGVhYmxlID0gaW5QYWdlVG9nZ2xlYWJsZTtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLmluUGFnZVRvZ2dsZWFibGUgPSBpblBhZ2VUb2dnbGVhYmxlO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuICBnZXQgaW5QYWdlVG9nZ2xlYWJsZSgpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5pblBhZ2VUb2dnbGVhYmxlO1xuICAgIH1cblxuICAgIHJldHVybiAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLmluUGFnZVRvZ2dsZWFibGU7XG4gIH1cblxuICAvKipcbiAgICogSWYgdHJ1ZSwgd2lsbCBpbml0IGFzIGV4cGFuZGVkXG4gICAqL1xuICBASW5wdXQoKSBzZXQgaW5QYWdlRXhwYW5kZWQoaW5QYWdlRXhwYW5kZWQ6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLmluUGFnZUV4cGFuZGVkID0gaW5QYWdlRXhwYW5kZWQ7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5pblBhZ2VFeHBhbmRlZCA9IGluUGFnZUV4cGFuZGVkO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuICBnZXQgaW5QYWdlRXhwYW5kZWQoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy5tb250aHZpZXcuc2V0dGluZ3MuaW5QYWdlRXhwYW5kZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuaW5QYWdlRXhwYW5kZWQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGZpcnN0IGRheSBvZiB0aGUgd2Vlay4gJzEnIHdvdWxkIGJlIE1vbmRheS5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBmaXJzdERheU9mV2VlayhmaXJzdERheU9mV2VlazogbnVtYmVyIHwgdW5kZWZpbmVkKSB7XG4gICAgKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5zZXR0aW5nc2ZpcnN0RGF5T2ZXZWVrID0gZmlyc3REYXlPZldlZWs7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5maXJzdERheU9mV2VlayA9IGZpcnN0RGF5T2ZXZWVrO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuICBnZXQgZmlyc3REYXlPZldlZWsoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5maXJzdERheU9mV2VlaztcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5zZXR0aW5ncy5maXJzdERheU9mV2VlaztcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0cnVlIHRoZSB0b2RheSBidXR0b24gaXMgc2hvd24gb24gdGhlIGhlYWRlci5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBzaG93VG9kYXkoc2hvd1RvZGF5OiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5zaG93VG9kYXkgPSBzaG93VG9kYXk7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5zaG93VG9kYXkgPSBzaG93VG9kYXk7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG4gIGdldCBzaG93VG9kYXkoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy5tb250aHZpZXcuc2V0dGluZ3Muc2hvd1RvZGF5O1xuICAgIH1cblxuICAgIHJldHVybiAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLnNob3dUb2RheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgdGhpcyBpcyBhIG1vbnRoIHBpY2tlciBvbiB0aGUgbW9udGggYW5kIHdlZWsgdmlldy5cbiAgICogSGFzIHNvbWUgc2xpZ2h0IGRpZmZlcmVudCBiZWhhdmlvci5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBpc01vbnRoUGlja2VyKGlzTW9udGhQaWNrZXI6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLmlzTW9udGhQaWNrZXIgPSBpc01vbnRoUGlja2VyO1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgdGhpcy5tb250aHZpZXcuc2V0dGluZ3MuaXNNb250aFBpY2tlciA9IGlzTW9udGhQaWNrZXI7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG4gIGdldCBpc01vbnRoUGlja2VyKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLmlzTW9udGhQaWNrZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuaXNNb250aFBpY2tlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBmYWxzZSB0aGUgeWVhciBhbmQgbW9udGggc3dpdGNoZXIgd2lsbCBiZSBkaXNhYmxlZC5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBzaG93TW9udGhZZWFyUGlja2VyKHNob3dNb250aFllYXJQaWNrZXI6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLnNob3dNb250aFllYXJQaWNrZXIgPSBzaG93TW9udGhZZWFyUGlja2VyO1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgdGhpcy5tb250aHZpZXcuc2V0dGluZ3Muc2hvd01vbnRoWWVhclBpY2tlciA9IHNob3dNb250aFllYXJQaWNrZXI7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG4gIGdldCBzaG93TW9udGhZZWFyUGlja2VyKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLnNob3dNb250aFllYXJQaWNrZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuc2hvd01vbnRoWWVhclBpY2tlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgbGVnZW5kIGJlbG93IHRoZSB0YWJsZS5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBzaG93TGVnZW5kKHNob3dMZWdlbmQ6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLnNob3dMZWdlbmQgPSBzaG93TGVnZW5kO1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgdGhpcy5tb250aHZpZXcuc2V0dGluZ3Muc2hvd0xlZ2VuZCA9IHNob3dMZWdlbmQ7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG4gIGdldCBzaG93TGVnZW5kKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLnNob3dMZWdlbmQ7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuc2hvd0xlZ2VuZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBMZWdlbmQgQnVpbGQgdXAuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgbGVnZW5kKGxlZ2VuZDogU29ob01vbnRoVmlld0xlZ2VuZFtdIHwgdW5kZWZpbmVkKSB7XG4gICAgKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5sZWdlbmQgPSBsZWdlbmQ7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5sZWdlbmQgPSBsZWdlbmQ7XG4gICAgICB0aGlzLnVwZGF0ZUxlZ2VuZCA9IHRydWU7XG4gICAgICB0aGlzLnJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGxlZ2VuZCgpOiBTb2hvTW9udGhWaWV3TGVnZW5kW10gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLmxlZ2VuZDtcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5sZWdlbmQ7XG4gIH1cblxuICAvKipcbiAgICogSWYgdHJ1ZSB0aGUgZGF5cyBwb3J0aW9uIG9mIHRoZSBjYWxlbmRhciB3aWxsIGJlIGhpZGRlbi5cbiAgICogVXNlZnVsbCBmb3IgTW9udGgvWWVhciBvbmx5IGZvcm1hdHMuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgaGlkZURheXMoaGlkZURheXM6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLmhpZGVEYXlzID0gaGlkZURheXM7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5oaWRlRGF5cyA9IGhpZGVEYXlzO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuICBnZXQgaGlkZURheXMoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy5tb250aHZpZXcuc2V0dGluZ3MuaGlkZURheXM7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuaGlkZURheXM7XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZSBkYXRlcyBpbiB2YXJpb3VzIHdheXMuXG4gICAqIEZvciBleGFtcGxlIGB7bWluRGF0ZTogJ00vZC95eXl5JywgbWF4RGF0ZTogJ00vZC95eXl5J31gLlxuICAgKiBEYXRlcyBzaG91bGQgYmUgaW4gZm9ybWF0IE0vZC95eXl5XG4gICAqL1xuICBASW5wdXQoKSBzZXQgZGlzYWJsZShkaXNhYmxlOiBTb2hvRGF0ZVBpY2tlckRpc2FibGUgfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLnNldHRpbmdzLmRpc2FibGUgPSBkaXNhYmxlO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGRpc2FibGUoKTogU29ob0RhdGVQaWNrZXJEaXNhYmxlIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHJldHVybiAodGhpcy5tb250aHZpZXcgYXMgYW55KS5zZXR0aW5ncy5kaXNhYmxlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRpc2FibGU7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiB5ZWFycyBhaGVhZCB0byBzaG93IGluIHRoZSBtb250aC95ZWFyIHBpY2tlciBzaG91bGQgdG90YWwgOSB3aXRoIHllYXJzQmFjay5cbiAgICovXG4gIEBJbnB1dCgpIHNldCB5ZWFyc0JhY2soeWVhcnNCYWNrOiBudW1iZXIgfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLnllYXJzQmFjayA9IHllYXJzQmFjaztcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLnllYXJzQmFjayA9IHllYXJzQmFjaztcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IHllYXJzQmFjaygpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLnllYXJzQmFjaztcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS55ZWFyc0JhY2s7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiB5ZWFycyBiYWNrIHRvIHNob3cgaW4gdGhlIG1vbnRoL3llYXIgcGlja2VyIHNob3VsZCB0b3RhbCA5IHdpdGggeWVhcnNBaGVhZC5cbiAgICovXG4gIEBJbnB1dCgpIHNldCB5ZWFyc0FoZWFkKHllYXJzQWhlYWQ6IG51bWJlciB8IHVuZGVmaW5lZCkge1xuICAgICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkueWVhcnNBaGVhZCA9IHllYXJzQWhlYWQ7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy55ZWFyc0FoZWFkID0geWVhcnNBaGVhZDtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IHllYXJzQWhlYWQoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy55ZWFyc0FoZWFkO1xuICAgIH1cblxuICAgIHJldHVybiAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLnllYXJzQWhlYWQ7XG4gIH1cblxuICAvKipcbiAgICogUmFuZ2UgYmV0d2VlbiB0d28gZGF0ZXMgd2l0aCB2YXJpb3VzIG9wdGlvbnMuXG4gICAqL1xuICBASW5wdXQoKSBzZXQgcmFuZ2UocmFuZ2U6IFNvaG9Nb250aFZpZXdSYW5nZVtdIHwgdW5kZWZpbmVkKSB7XG4gICAgKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5yYW5nZSA9IHJhbmdlO1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgdGhpcy5tb250aHZpZXcuc2V0dGluZ3MucmFuZ2UgPSByYW5nZTtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IHJhbmdlKCk6IFNvaG9Nb250aFZpZXdSYW5nZVtdIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5yYW5nZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5yYW5nZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0cnVlIHRoZSBtb250aCBkYXlzIGNhbiBiZSBjbGlja2VkIHRvIHNlbGVjdFxuICAgKi9cbiAgQElucHV0KCkgc2V0IHNlbGVjdGFibGUoc2VsZWN0YWJsZTogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuc2VsZWN0YWJsZSA9IHNlbGVjdGFibGU7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5zZWxlY3RhYmxlID0gc2VsZWN0YWJsZTtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IHNlbGVjdGFibGUoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy5tb250aHZpZXcuc2V0dGluZ3Muc2VsZWN0YWJsZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5zZWxlY3RhYmxlO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRoYXQgZmlyZXMgd2hlbiBhIG1vbnRoIGRheSBpcyBjbGlja2VkLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IG9uU2VsZWN0ZWQob25TZWxlY3RlZDogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkub25TZWxlY3RlZCA9IG9uU2VsZWN0ZWQ7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5vblNlbGVjdGVkID0gb25TZWxlY3RlZDtcbiAgICAgIHRoaXMubWFya0ZvclJlZnJlc2goKTtcbiAgICB9XG4gIH1cbiAgZ2V0IG9uU2VsZWN0ZWQoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICByZXR1cm4gdGhpcy5tb250aHZpZXcuc2V0dGluZ3Mub25TZWxlY3RlZDtcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5vblNlbGVjdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRoYXQgZmlyZXMgd2hlbiBhIGtleSBpcyBwcmVzc2VkIGRvd24uXG4gICAqL1xuICBASW5wdXQoKSBzZXQgb25LZXlEb3duKG9uS2V5RG93bjogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkub25LZXlEb3duID0gb25LZXlEb3duO1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgdGhpcy5tb250aHZpZXcuc2V0dGluZ3Mub25LZXlEb3duID0gb25LZXlEb3duO1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuICBnZXQgb25LZXlEb3duKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLm9uS2V5RG93bjtcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5vbktleURvd247XG4gIH1cblxuICAvKipcbiAgICogSWYgdHJ1ZSB0aGUgTmV4dCBQcmV2aW91cyBidXR0b25zIHdpbGwgc2hvd24gb24gdGhlIGhlYWRlci5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBzaG93TmV4dFByZXZpb3VzKHNob3dOZXh0UHJldmlvdXM6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICAodGhpcy5fbW9udGh2aWV3T3B0aW9ucyBhcyBhbnkpLnNob3dOZXh0UHJldmlvdXMgPSBzaG93TmV4dFByZXZpb3VzO1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgdGhpcy5tb250aHZpZXcuc2V0dGluZ3Muc2hvd05leHRQcmV2aW91cyA9IHNob3dOZXh0UHJldmlvdXM7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG4gIGdldCBzaG93TmV4dFByZXZpb3VzKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLnNob3dOZXh0UHJldmlvdXM7XG4gICAgfVxuXG4gICAgcmV0dXJuICh0aGlzLl9tb250aHZpZXdPcHRpb25zIGFzIGFueSkuc2hvd05leHRQcmV2aW91cztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIGJhY2sgZm9yIHdoZW4gdGhlIHZpZXcgY2hhbmdlciBpcyBjaGFuZ2VkLlxuICAgKi9cbiAgQElucHV0KCkgc2V0IGNoYW5nZVZpZXdDYWxsYmFjayhjaGFuZ2VWaWV3Q2FsbGJhY2s6IEZ1bmN0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5vbkNoYW5nZVZpZXcgPSBjaGFuZ2VWaWV3Q2FsbGJhY2s7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5vbkNoYW5nZVZpZXcgPSBjaGFuZ2VWaWV3Q2FsbGJhY2s7XG4gICAgICB0aGlzLm1hcmtGb3JSZWZyZXNoKCk7XG4gICAgfVxuICB9XG4gIGdldCBjaGFuZ2VWaWV3Q2FsbGJhY2soKTogRnVuY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgcmV0dXJuIHRoaXMubW9udGh2aWV3LnNldHRpbmdzLm9uQ2hhbmdlVmlldztcbiAgICB9XG5cbiAgICByZXR1cm4gKHRoaXMuX21vbnRodmlld09wdGlvbnMgYXMgYW55KS5vbkNoYW5nZVZpZXc7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgYXR0cmlidXRlcyhhdHRyaWJ1dGVzOiBBcnJheTxPYmplY3Q+IHwgT2JqZWN0IHwgdW5kZWZpbmVkKSB7XG4gICAgKHRoaXMubW9udGh2aWV3IGFzIGFueSkuc2V0dGluZ3MuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgdGhpcy5tYXJrRm9yUmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuICBnZXQgYXR0cmlidXRlcygpOiBBcnJheTxPYmplY3Q+IHwgT2JqZWN0IHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5tb250aHZpZXcpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vbnRodmlldy5zZXR0aW5ncy5hdHRyaWJ1dGVzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXM7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIENvbXBvbmVudCBPdXRwdXRcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBAT3V0cHV0KCkgbW9udGhSZW5kZXJlZCA9IG5ldyBFdmVudEVtaXR0ZXI8U29ob01vbnRoVmlld1JlbmRlckV2ZW50PigpO1xuICBAT3V0cHV0KCkgc2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9Nb250aFZpZXdTZWxlY3RlZEV2ZW50PigpO1xuXG4gIC8qKlxuICAgKiBMb2NhbCB2YXJpYWJsZXNcbiAgICovXG4gIHByaXZhdGUgalF1ZXJ5RWxlbWVudD86IEpRdWVyeTtcbiAgcHJpdmF0ZSBtb250aHZpZXc/OiBTb2hvTW9udGhWaWV3IHwgbnVsbDtcbiAgcHJpdmF0ZSBfbW9udGh2aWV3T3B0aW9ucz86IFNvaG9Nb250aFZpZXdPcHRpb25zID0ge307XG4gIHByaXZhdGUgdXBkYXRlUmVxdWlyZWQ/OiBib29sZWFuO1xuICBwcml2YXRlIHVwZGF0ZUxlZ2VuZD86IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmUsXG4gICAgcHVibGljIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWZcbiAgKSB7IH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgLy8gV3JhcCB0aGUgZWxlbWVudCBpbiBhIGpRdWVyeSBzZWxlY3Rvci5cbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudCA9IGpRdWVyeSh0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudCk7XG5cbiAgICAgIC8vIEFkZCBsaXN0ZW5lcnMgdG8gZW1pdCBldmVudHNcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudFxuICAgICAgICAub24oJ21vbnRocmVuZGVyZWQnLCAoX2U6IGFueSwgYXJnczogU29ob01vbnRoVmlld1JlbmRlckV2ZW50KSA9PiB0aGlzLm9uTW9udGhWaWV3UmVuZGVyZWRFdmVudChhcmdzKSlcbiAgICAgICAgLm9uKCdzZWxlY3RlZCcsIChfZTogYW55LCBldmVudDogU29ob01vbnRoVmlld1NlbGVjdGVkRXZlbnQpID0+IHRoaXMub25Nb250aFZpZXdTZWxlY3RlZEV2ZW50KGV2ZW50KSk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgdGhlIFNvaG8gY29udHJvbC5cbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5tb250aHZpZXcodGhpcy5fbW9udGh2aWV3T3B0aW9ucyk7XG5cbiAgICAgIHRoaXMubW9udGh2aWV3ID0gdGhpcy5qUXVlcnlFbGVtZW50LmRhdGEoJ21vbnRodmlldycpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgIGlmICghdGhpcy5tb250aHZpZXcgfHwgIXRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVwZGF0ZUxlZ2VuZCkge1xuICAgICAgdGhpcy5tb250aHZpZXcubG9hZExlZ2VuZCh0aGlzLmxlZ2VuZCk7XG4gICAgICB0aGlzLnVwZGF0ZUxlZ2VuZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVwZGF0ZVJlcXVpcmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZWQoKTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBvbk1vbnRoVmlld1JlbmRlcmVkRXZlbnQoZXZlbnQ6IFNvaG9Nb250aFZpZXdSZW5kZXJFdmVudCkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMubW9udGhSZW5kZXJlZC5lbWl0KGV2ZW50KSk7XG4gIH1cblxuICBvbk1vbnRoVmlld1NlbGVjdGVkRXZlbnQoZXZlbnQ6IFNvaG9Nb250aFZpZXdTZWxlY3RlZEV2ZW50KSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy5zZWxlY3RlZC5lbWl0KGV2ZW50KSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHVwZGF0ZWQgc2V0dGluZ3MgYW5kIHZhbHVlcy5cbiAgICovXG4gIHVwZGF0ZWQoKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gKHRoaXMubW9udGh2aWV3IGFzIGFueSkudXBkYXRlZCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJrIHRoZSBjb21wb25lbnRzIGFzIHJlcXVpcmluZyBhIHJlYnVpbGQgYWZ0ZXIgdGhlIG5leHQgdXBkYXRlLlxuICAgKi9cbiAgbWFya0ZvclJlZnJlc2goKSB7XG4gICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG5cbiAgICB0aGlzLnJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZWFyIGRvd24gdGhlIG1hcmt1cCBmb3IgdGhlIG1vbnRodmlld1xuICAgKi9cbiAgdGVhcmRvd24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiAodGhpcy5tb250aHZpZXcgYXMgYW55KS50ZWFyZG93bigpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveSB0aGUgbWFya3VwIGFuZCBhbnkgb3RoZXIgcmVzb3VyY2VzLlxuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vZmYoKTtcbiAgICAgICAgdGhpcy5qUXVlcnlFbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9udGh2aWV3KSB7XG4gICAgICAgIHRoaXMubW9udGh2aWV3LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5tb250aHZpZXcgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIFxuICAvKipcbiAgICogU2hvd3MgdGhlIGdpdmVuIG1vbnRoIGFuZCB5ZWFyLlxuICAgKi9cbiAgc2hvd01vbnRoKG1vbnRoOiBudW1iZXIsIHllYXI6IG51bWJlcikge1xuICAgIGlmICh0aGlzLm1vbnRodmlldykge1xuICAgICAgKHRoaXMubW9udGh2aWV3IGFzIGFueSkuc2hvd01vbnRoKG1vbnRoLCB5ZWFyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW51cCBqdXN0IGJlZm9yZSBBbmd1bGFyIGRlc3Ryb3lzIHRoZSBjb21wb25lbnQuXG4gICAqIFVuc3Vic2NyaWJlIG9ic2VydmFibGVzLCBkZXRhY2ggZXZlbnQgaGFuZGxlcnMgYW5kIHJlbW92ZSBvdGhlciByZXNvdXJjZXMgdG8gYXZvaWQgbWVtb3J5IGxlYWtzLlxuICAgKi9cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5kZXN0cm95KCk7XG4gIH1cbn1cbiJdfQ==