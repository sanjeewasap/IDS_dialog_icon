import { ChangeDetectionStrategy, Component, EventEmitter, HostBinding, HostListener, Input, Output } from '@angular/core';
import { BaseControlValueAccessor, provideControlValueAccessor } from '../utils';
import * as i0 from "@angular/core";
export class SohoLookupComponent extends BaseControlValueAccessor {
    /**
     * Changes the dataset being used
     */
    set dataset(data) {
        if (!data) {
            return;
        }
        this._dataset = data;
        if (data && this.jQueryElement && this.lookup?.settings?.options) {
            this.lookup.settings.options.dataset = data;
            this.markForUpdate();
        }
    }
    get dataset() {
        return this._dataset;
    }
    /** Custom click event; can be used with a modal dialog and custom list component */
    set click(value) {
        this.settings.click = value;
        if (this.lookup) {
            this.lookup.settings.click = this.settings.click;
            this.markForUpdate();
        }
    }
    get click() {
        return this.settings.click;
    }
    /** If a click method is defined, this flexible object can be passed in. */
    set clickArguments(value) {
        this.settings.clickArguments = value;
        if (this.lookup) {
            this.lookup.settings.clickArguments = this.settings.clickArguments;
            this.markForUpdate();
        }
    }
    get clickArguments() {
        return this.settings.clickArguments;
    }
    /** Custom clear event; can be used with a modal dialog and custom list component */
    set clear(value) {
        this.settings.clear = value;
        if (this.lookup) {
            this.lookup.settings.clear = this.settings.clear;
            this.markForUpdate();
        }
    }
    get clear() {
        return this.settings.clear;
    }
    /** If a clear method is defined, this flexible object can be passed in. */
    set clearArguments(value) {
        this.settings.clearArguments = value;
        if (this.lookup) {
            this.lookup.settings.clearArguments = this.settings.clearArguments;
            this.markForUpdate();
        }
    }
    get clearArguments() {
        return this.settings.clearArguments;
    }
    /** Field to return from the array or can be a function. */
    set field(value) {
        this.settings.field = value;
        if (this.lookup) {
            this.lookup.settings.field = this.settings.field;
            this.markForUpdate();
        }
    }
    get field() {
        return this.settings.field;
    }
    /** Dialog title or takes the label + Lookup. */
    set title(value) {
        this.settings.title = value;
        if (this.lookup) {
            this.lookup.settings.title = this.settings.title;
            this.markForUpdate();
        }
    }
    get title() {
        return this.settings.title;
    }
    /** Swap out the lookup id for any other icon in the icon set by name */
    set icon(value) {
        this.settings.icon = value;
        if (this.lookup) {
            this.lookup.settings.icon = this.settings.icon;
            this.markForUpdate();
        }
    }
    get icon() {
        return this.settings.icon;
    }
    /** Pass dialog buttons or Cancel / Apply. */
    set buttons(value) {
        this.settings.buttons = value;
        if (this.lookup) {
            this.lookup.settings.buttons = this.settings.buttons;
            this.markForUpdate();
        }
    }
    get buttons() {
        return this.settings.buttons;
    }
    /** Options to pass to the underlying data grid. */
    set options(value) {
        this.settings.options = value;
        if (this.lookup) {
            this.lookup.settings.options = this.settings.options;
            this.markForUpdate();
        }
    }
    get options() {
        return this.settings.options;
    }
    /**
     * Used to manage data prior to showing the lookup.
     *
     * For example:
     *  - When the button is clicked, show a loading dialog and make the request for
     *    lookup grid data.
     *  - Upon receiving grid data, set lookup.settings.options for the columns and dataset.
     *  - Then call grid() to build the grid and complete the lookup call.
     */
    set beforeShow(value) {
        this.settings.beforeShow = value;
        if (this.lookup) {
            this.lookup.settings.beforeShow = this.settings.beforeShow;
            this.markForUpdate();
        }
    }
    get beforeShow() {
        return this.settings.beforeShow;
    }
    /** Custom modal content. */
    set modalContent(value) {
        this.settings.modalContent = value;
        if (this.lookup) {
            this.lookup.settings.modalContent = this.settings.modalContent;
            this.markForUpdate();
        }
    }
    get modalContent() {
        return this.settings.modalContent;
    }
    /** Can the user type random text into the field. */
    set editable(value) {
        this.settings.editable = value;
        if (this.lookup) {
            this.lookup.settings.editable = this.settings.editable;
            this.markForUpdate();
        }
    }
    get editable() {
        return this.settings.editable;
    }
    /** If set to false the dialog wont apply the value on clicking a value. */
    set autoApply(value) {
        this.settings.autoApply = value;
        if (this.lookup) {
            this.lookup.settings.autoApply = this.settings.autoApply;
            this.markForUpdate();
        }
    }
    get autoApply() {
        return this.settings.autoApply;
    }
    /** Function used to match the search term to the data. */
    set match(value) {
        this.settings.match = value;
        if (this.lookup) {
            this.lookup.settings.match = this.settings.match;
            this.markForUpdate();
        }
    }
    get match() {
        return this.settings.match;
    }
    /** A function that fires to let you validate form items on open and select. */
    set validator(value) {
        this.settings.validator = value;
        if (this.lookup) {
            this.lookup.settings.validator = this.settings.validator;
            this.markForUpdate();
        }
    }
    get validator() {
        return this.settings.validator;
    }
    /** Set the width of the input to the width of the selection */
    set autoWidth(value) {
        this.settings.autoWidth = value;
        if (this.lookup) {
            this.lookup.settings.autoWidth = this.settings.autoWidth;
            this.markForUpdate();
        }
    }
    get autoWidth() {
        return this.settings.autoWidth;
    }
    /** The character  used to separate data strings */
    set delimiter(value) {
        this.settings.delimiter = value;
        if (this.lookup) {
            this.lookup.settings.delimiter = this.settings.delimiter;
            this.markForUpdate();
        }
    }
    get delimiter() {
        return this.settings.delimiter;
    }
    /** Apply a minimum width to the lookup*/
    set minWidth(value) {
        this.settings.minWidth = value;
        if (this.lookup) {
            this.lookup.settings.minWidth = this.settings.minWidth;
            this.markForUpdate();
        }
    }
    get minWidth() {
        return this.settings.minWidth;
    }
    /**  Add an ability to clear the lookup field with an x */
    set clearable(value) {
        this.settings.clearable = value;
        if (this.lookup) {
            this.lookup.settings.clearable = this.settings.clearable;
            this.markForUpdate();
        }
    }
    get clearable() {
        return this.settings.clearable;
    }
    /**  Add extra attributes like id's to the component */
    set attributes(attributes) {
        this.settings.attributes = attributes;
        if (this.lookup) {
            this.lookup.settings.attributes = this.settings.attributes;
            this.markForUpdate();
        }
    }
    get attributes() {
        return this.settings.attributes;
    }
    /**  Set the input to tabbable */
    set tabbable(tabbable) {
        this.settings.tabbable = tabbable;
        if (this.lookup) {
            this.lookup.settings.tabbable = this.settings.tabbable;
            this.markForUpdate();
        }
    }
    get tabbable() {
        return this.settings.tabbable;
    }
    /**  Set the input to allow duplicates */
    set allowDuplicates(allowDuplicates) {
        this.settings.allowDuplicates = allowDuplicates;
        if (this.lookup) {
            this.lookup.settings.allowDuplicates = this.settings.allowDuplicates;
            this.markForUpdate();
        }
    }
    get allowDuplicates() {
        return this.settings.allowDuplicates;
    }
    /**
     * Bind attributes to the host input element
     */
    get isLookup() {
        return true;
    }
    /**
     * Accessor for _disabled.
     */
    get isDisabled() {
        return this._disabled;
    }
    // eslint-disable-next-line @angular-eslint/no-input-rename
    set isDisabled(disabled) {
        if (this._disabled !== disabled) {
            this._disabled = disabled;
            // Ensure the widget is updated.
            if (this._disabled) {
                this.ngZone.runOutsideAngular(() => this.lookup?.disable());
            }
            else {
                this.ngZone.runOutsideAngular(() => this.lookup?.enable());
            }
        }
    }
    /**
     * Add class binding.
     */
    get disabledClass() {
        return this._disabled;
    }
    /**
     * Constructor.
     *
     * @param element associated element
     * @param ngZone angular zone
     */
    constructor(element, ngZone) {
        super();
        this.element = element;
        this.ngZone = ngZone;
        /**
         * Available Soho Template control settings as Inputs
         * Should match the Soho properties for the component
         */
        this.asobject = false; // set to false for backwards compatibility
        this.multiselect = false;
        /**
         * Available Soho Template events as Output (EventEmitters passing the event)
         * Should match the Soho event names for the component
         */
        this.afteropen = new EventEmitter();
        // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename
        this.start = new EventEmitter();
        // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename
        this.complete = new EventEmitter();
        this.beforeopen = new EventEmitter();
        // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename
        this.change = new EventEmitter();
        this.inputEvt = new EventEmitter();
        // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename
        this.open = new EventEmitter();
        // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename
        this.close = new EventEmitter();
        // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename
        this.selected = new EventEmitter();
        // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename
        this.afterpaging = new EventEmitter();
        /**
         * Is the lookup control disabled?
         */
        this._disabled = undefined;
        /**
         * Is the lookup control readonly?
         */
        this._readonly = undefined;
        this.settings = {};
    }
    onKeyUp(_event) {
        // This is required, otherwise the form binding does not see updates.
        this.internalValue = this.jQueryElement?.val();
    }
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            this.jQueryElement = jQuery(this.element.nativeElement);
            const dataSet = this._dataset ? this._dataset : [];
            // The default options for the data grid, which will
            // be overriden by the options provided by the caller
            // on a field by field basis.
            const datagridConfig = {
                cellNavigation: false,
                columns: this.columns,
                dataset: dataSet,
                selectable: this.isMultiselect() ? 'multiple' : 'single',
                toolbar: Object.assign({
                    actions: true,
                    advancedFilter: false,
                    dateFilter: false,
                    fullWidth: true,
                    keywordFilter: true,
                    results: true,
                    rowHeight: true,
                    views: false,
                }, this.toolbar),
                source: this.source
            };
            this.settings.options = Object.assign(datagridConfig, this.options);
            this.jQueryElement.lookup(this.settings);
            // setup autocomplete
            if (this.autoCompleteSettings) {
                const acDataset = dataSet.map((data) => {
                    return this.autoCompleteSettings ? {
                        id: data[this.autoCompleteSettings.id],
                        value: data[this.autoCompleteSettings.value],
                        label: data[this.autoCompleteSettings.label]
                    } : data;
                });
                const acSettings = { source: acDataset };
                if (this.autoCompleteSettings.template) {
                    acSettings.template = this.autoCompleteSettings.template;
                }
                this.jQueryElement.autocomplete(acSettings);
                this.autocomplete = this.jQueryElement.data('autocomplete');
                this.jQueryElement
                    .on('selected.autocomplete', (...args) => this.onAutocompleteSelected(args))
                    .on('change.autocomplete', (_e, args) => this.onAutocompleteChange(args))
                    .on('beforeopen.autocomplete', (_e, args) => this.onAutocompleteBeforeOpen(args));
            }
            /**
             * Bind to jQueryElement's events
             */
            this.jQueryElement.on('afteropen', (...args) => this.modalOpened(args));
            this.jQueryElement.on('beforeopen', () => this.ngZone.run(() => this.beforeopen.emit(undefined)));
            this.jQueryElement.on('open', () => this.ngZone.run(() => this.open.emit(undefined)));
            this.jQueryElement.on('change.lookup', (_e, args) => this.onChange(args));
            this.jQueryElement.on('blur', (_e) => this.ngZone.run(() => this.touched()));
            this.jQueryElement.on('start', () => this.ngZone.run(() => this.start.emit(undefined)));
            this.jQueryElement.on('complete', () => this.ngZone.run(() => this.complete.emit(undefined)));
            this.jQueryElement.on('input', () => this.ngZone.run(() => this.inputEvt.emit(undefined)));
            this.jQueryElement.on('close', () => this.ngZone.run(() => this.close.emit(undefined)));
            this.jQueryElement.on('selected', (_e, selectedRows, op, rowData, lookup) => this.ngZone.run(() => this.selected.emit({ selectedRows, op, rowData, lookup })));
            this.jQueryElement.on('afterpaging', (_e, pagingInfo, lookup) => this.ngZone.run(() => this.afterpaging.emit({ pagingInfo, lookup })));
            this.lookup = this.jQueryElement.data('lookup');
            // Pick up the internal value from the form control.
            if (this.internalValue) {
                this.lookup?.element.val(this.internalValue);
            }
        });
    }
    /**
     * Update the selected rows
     */
    updateSelectedRows(rows) {
        if (this.lookup && Array.isArray(rows)) {
            this.ngZone.runOutsideAngular(() => (this.lookup.updateSelectedRows(rows)));
            this.markForUpdate();
        }
    }
    /**
     * Find the row and select it based on select value / function / field value
     */
    selectRowByValue(field, value) {
        if (this.lookup) {
            this.ngZone.runOutsideAngular(() => this.lookup?.selectRowByValue(field, value));
        }
    }
    /** Get the selected rows and return them to the UI **/
    insertRows() {
        if (this.lookup) {
            this.ngZone.runOutsideAngular(() => this.lookup?.insertRows());
        }
    }
    /** Returns the rows currently selected **/
    selectedRows() {
        return this.ngZone.runOutsideAngular(() => {
            return (this.lookup.selectedRows || []).slice();
        });
    }
    /** Enable the input. **/
    enable() {
        this._disabled = false;
        this._readonly = false;
        this.ngZone.runOutsideAngular(() => this.lookup?.enable());
        this.markForUpdate();
    }
    /** Disable the input. **/
    disable() {
        this._disabled = true;
        this.ngZone.runOutsideAngular(() => this.lookup?.disable());
        this.markForUpdate();
    }
    /** Make the input readonly. **/
    readonly() {
        this._readonly = true;
        this.ngZone.runOutsideAngular(() => this.lookup?.readonly());
        this.markForUpdate();
    }
    /**  Send in a new data set to display in the datagrid in the lookup. **/
    updateDataset(dataset, pagerInfo) {
        if (this.lookup) {
            this.ngZone.runOutsideAngular(() => this.lookup?.updateDataset(dataset, pagerInfo));
        }
    }
    /**
     * Call to notify the lookup about any dom/settings changes
     */
    updated(settings) {
        if (settings) {
            this.settings = Soho.utils.mergeSettings(this.element[0], settings, this.settings);
        }
        if (this.lookup) {
            this.ngZone.runOutsideAngular(() => this.lookup?.updated(this.settings));
        }
    }
    /**
     * Destroys the modal lookup.
     */
    destroy() {
        if (this.lookup) {
            this.ngZone.runOutsideAngular(() => this.lookup?.destroy());
        }
    }
    ngAfterViewChecked() {
        if (this.updateRequired) {
            this.updated();
            this.updateRequired = false;
        }
    }
    ngOnDestroy() {
        // call outside the angular zone so change detection isn't triggered by the soho component.
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
            if (this.lookup) {
                this.lookup.destroy();
                this.lookup = null;
            }
            if (this.autocomplete) {
                this.autocomplete.destroy();
                this.autocomplete = null;
            }
        });
    }
    isMultiselect() {
        return this.multiselect !== false || (this.options && this.options.selectable === 'multiple');
    }
    modalOpened(args) {
        this.ngZone.run(() => {
            this.modal = this.lookup?.modal;
            /**
             * Temporary fix for inability for grid to async call data and resize modal on returned
             * values (only necessary when the page size is large enough to make the datagrid larger
             * than the current modal content window height):
             * jira/browse/SOHO-4347
             */
            if (args[1] && args[2]) {
                const datagrid = args[1];
                const modal = args[2];
                if (datagrid.pagerAPI) {
                    datagrid.pagerAPI.element.on('afterpaging', () => {
                        modal.resize();
                    });
                }
            }
            this.afteropen.emit(args);
        });
    }
    /**
     * Handle the control being changed.
     */
    onChange(event) {
        this.ngZone.run(() => {
            this.parseValue(event);
            if (!event) {
                // prevent undefined exception when event is undefined.
                return;
            }
            // todo: why is this here, value is not defined anywhere, not sure where it's used so reluctant to remove it.
            event.values = this.internalValue;
            this.change.emit(event);
        });
    }
    onAutocompleteChange(event) {
        if (this.autoCompleteSettings && this.autoCompleteSettings.change) {
            this.autoCompleteSettings?.change(event);
        }
    }
    onAutocompleteSelected(event) {
        if (this.autoCompleteSettings && this.autoCompleteSettings.selected) {
            this.autoCompleteSettings?.selected(event);
        }
    }
    onAutocompleteBeforeOpen(event) {
        if (this.autoCompleteSettings && this.autoCompleteSettings.beforeopen) {
            this.autoCompleteSettings?.beforeopen(event);
        }
    }
    setDisabledState(isDisabled) {
        // Update the jQuery widget with the requested disabled state.
        this.isDisabled = isDisabled;
    }
    /**
     * Needed to extract this function from the 'insertRows' function within the
     * Soho Lookup control object.
     * TODO: Expose this in the Sohoxi library @tim @ed.coyle
     *
     * @todo raise SOHO jira issue
     */
    processValue(value) {
        if (!value || !this.lookup) {
            return '';
        }
        let val = '';
        let toProcess = value;
        if (!Array.isArray(toProcess)) {
            toProcess = [toProcess];
        }
        // mimics functionality in sohoxi lookup insertRows()
        for (let i = 0; i < toProcess.length; i++) {
            let current = '';
            if (typeof toProcess[i] === 'object') {
                if (typeof this.settings.field === 'function') {
                    current = this.settings.field(toProcess[i], this.lookup.element, this.lookup.grid);
                }
                else {
                    current = toProcess[i][this.settings.field];
                }
            }
            else {
                current = toProcess[i];
            }
            val += (i !== 0 ? ',' : '') + current;
        }
        return val;
    }
    /**
     * Set lookup value to allow the lookup element to be updated correctly.
     * Used when the click property is set on the sohoxi control.
     *
     * @param event - selected row
     * TODO: Expose this in the Sohoxi library @tim @ed.coyle
     *
     * @todo raise SOHO jira issue
     */
    setValue(event) {
        if (this.lookup) {
            this.parseValue(event);
            // mimics functionality in sohoxi lookup insertRows()
            this.lookup.element.val(this.internalValue).trigger('change', [event]);
            this.lookup.element.trigger('focus');
        }
    }
    /**
     * Override writeValue to allow the lookup
     * element to be updated correctly.
     *
     * @param value - the new value
     */
    writeValue(value) {
        super.writeValue(value);
        if (this.lookup) {
            // The processing is required to ensure we use the correct format
            // in the control.
            this.lookup.element.val(this.processValue(value));
        }
    }
    // private methods
    /**
     * Evaluate the event param and parse the value
     */
    parseValue(event) {
        if (!event) {
            // sometimes the event is not available
            this.internalValue = this.lookup?.element.val();
            return;
        }
        if (event.length && event.length === 1 && !this.isMultiselect()) {
            this.internalValue = this.asobject ? event[0].data : this.processValue(event[0].data);
        }
        else {
            this.internalValue = event.map(val => this.asobject ? val.data : this.processValue(val.data));
        }
    }
    markForUpdate() {
        this.updateRequired = true;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoLookupComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoLookupComponent, selector: "input[soho-lookup]", inputs: { asobject: "asobject", columns: "columns", dataset: "dataset", click: "click", clickArguments: "clickArguments", clear: "clear", clearArguments: "clearArguments", field: "field", title: "title", icon: "icon", buttons: "buttons", options: "options", beforeShow: "beforeShow", modalContent: "modalContent", editable: "editable", autoApply: "autoApply", match: "match", validator: "validator", autoWidth: "autoWidth", delimiter: "delimiter", minWidth: "minWidth", clearable: "clearable", attributes: "attributes", tabbable: "tabbable", allowDuplicates: "allowDuplicates", multiselect: "multiselect", name: "name", source: "source", toolbar: "toolbar", autoCompleteSettings: "autoCompleteSettings", isDisabled: ["disabled", "isDisabled"], _readonly: ["readonly", "_readonly"] }, outputs: { afteropen: "afteropen", start: "start", complete: "complete", beforeopen: "beforeopen", change: "change", inputEvt: "inputEvt", open: "open", close: "close", selected: "selected", afterpaging: "afterpaging" }, host: { listeners: { "keyup": "onKeyUp($event)" }, properties: { "class.lookup": "this.isLookup", "disabled": "this._disabled", "class.is-disabled": "this.disabledClass", "readonly": "this._readonly" } }, providers: [provideControlValueAccessor(SohoLookupComponent)], usesInheritance: true, ngImport: i0, template: '<ng-content></ng-content>', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoLookupComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'input[soho-lookup]',
                    template: '<ng-content></ng-content>',
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    providers: [provideControlValueAccessor(SohoLookupComponent)]
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { asobject: [{
                type: Input
            }], columns: [{
                type: Input
            }], dataset: [{
                type: Input
            }], click: [{
                type: Input
            }], clickArguments: [{
                type: Input
            }], clear: [{
                type: Input
            }], clearArguments: [{
                type: Input
            }], field: [{
                type: Input
            }], title: [{
                type: Input
            }], icon: [{
                type: Input
            }], buttons: [{
                type: Input
            }], options: [{
                type: Input
            }], beforeShow: [{
                type: Input
            }], modalContent: [{
                type: Input
            }], editable: [{
                type: Input
            }], autoApply: [{
                type: Input
            }], match: [{
                type: Input
            }], validator: [{
                type: Input
            }], autoWidth: [{
                type: Input
            }], delimiter: [{
                type: Input
            }], minWidth: [{
                type: Input
            }], clearable: [{
                type: Input
            }], attributes: [{
                type: Input
            }], tabbable: [{
                type: Input
            }], allowDuplicates: [{
                type: Input
            }], multiselect: [{
                type: Input
            }], name: [{
                type: Input
            }], source: [{
                type: Input
            }], toolbar: [{
                type: Input
            }], autoCompleteSettings: [{
                type: Input
            }], afteropen: [{
                type: Output
            }], start: [{
                type: Output
            }], complete: [{
                type: Output
            }], beforeopen: [{
                type: Output
            }], change: [{
                type: Output
            }], inputEvt: [{
                type: Output
            }], open: [{
                type: Output
            }], close: [{
                type: Output
            }], selected: [{
                type: Output
            }], afterpaging: [{
                type: Output
            }], isLookup: [{
                type: HostBinding,
                args: ['class.lookup']
            }], _disabled: [{
                type: HostBinding,
                args: ['disabled']
            }], isDisabled: [{
                type: Input,
                args: ["disabled"]
            }], disabledClass: [{
                type: HostBinding,
                args: ['class.is-disabled']
            }], _readonly: [{
                type: HostBinding,
                args: ['readonly']
            }, {
                type: Input,
                args: ['readonly']
            }], onKeyUp: [{
                type: HostListener,
                args: ['keyup', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1sb29rdXAuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi9sb29rdXAvc29oby1sb29rdXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFHTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUVULFlBQVksRUFDWixXQUFXLEVBQ1gsWUFBWSxFQUNaLEtBQUssRUFHTCxNQUFNLEVBQ1AsTUFBTSxlQUFlLENBQUM7QUFFdkIsT0FBTyxFQUNMLHdCQUF3QixFQUN4QiwyQkFBMkIsRUFDNUIsTUFBTSxVQUFVLENBQUM7O0FBUWxCLE1BQU0sT0FBTyxtQkFBb0IsU0FBUSx3QkFBNkI7SUFvQnBFOztPQUVHO0lBQ0gsSUFBb0IsT0FBTyxDQUFDLElBQTBCO1FBQ3BELElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDVCxPQUFPO1NBQ1I7UUFFRCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRTtZQUNoRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztZQUM1QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDdEI7SUFDSCxDQUFDO0lBQ0QsSUFBVyxPQUFPO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0lBRUQsb0ZBQW9GO0lBQ3BGLElBQW9CLEtBQUssQ0FBQyxLQUEwQztRQUNsRSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDNUIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBQ2pELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFDRCxJQUFXLEtBQUs7UUFDZCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO0lBQzdCLENBQUM7SUFFRCwyRUFBMkU7SUFDM0UsSUFBb0IsY0FBYyxDQUFDLEtBQVU7UUFDM0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1FBQ3JDLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQztZQUNuRSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDdEI7SUFDSCxDQUFDO0lBQ0QsSUFBVyxjQUFjO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUM7SUFDdEMsQ0FBQztJQUVELG9GQUFvRjtJQUNwRixJQUFvQixLQUFLLENBQUMsS0FBMEM7UUFDbEUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQzVCLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztZQUNqRCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDdEI7SUFDSCxDQUFDO0lBQ0QsSUFBVyxLQUFLO1FBQ2QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztJQUM3QixDQUFDO0lBRUQsMkVBQTJFO0lBQzNFLElBQW9CLGNBQWMsQ0FBQyxLQUFVO1FBQzNDLElBQUksQ0FBQyxRQUFRLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztRQUNyQyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUM7WUFDbkUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsY0FBYztRQUN2QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDO0lBQ3RDLENBQUM7SUFFRCwyREFBMkQ7SUFDM0QsSUFBb0IsS0FBSyxDQUFDLEtBQW1EO1FBQzNFLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUM1QixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7WUFDakQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsS0FBSztRQUNkLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7SUFDN0IsQ0FBQztJQUVELGdEQUFnRDtJQUNoRCxJQUFvQixLQUFLLENBQUMsS0FBeUI7UUFDakQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQzVCLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztZQUNqRCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDdEI7SUFDSCxDQUFDO0lBQ0QsSUFBVyxLQUFLO1FBQ2QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztJQUM3QixDQUFDO0lBRUQsd0VBQXdFO0lBQ3hFLElBQW9CLElBQUksQ0FBQyxLQUF5QjtRQUNoRCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7UUFDM0IsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1lBQy9DLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFDRCxJQUFXLElBQUk7UUFDYixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO0lBQzVCLENBQUM7SUFFRCw2Q0FBNkM7SUFDN0MsSUFBb0IsT0FBTyxDQUFDLEtBQW9DO1FBQzlELElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUM5QixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUM7WUFDckQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsT0FBTztRQUNoQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO0lBQy9CLENBQUM7SUFFRCxtREFBbUQ7SUFDbkQsSUFBb0IsT0FBTyxDQUFDLEtBQXNDO1FBQ2hFLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUM5QixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUM7WUFDckQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsT0FBTztRQUNoQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO0lBQy9CLENBQUM7SUFFRDs7Ozs7Ozs7T0FRRztJQUNILElBQW9CLFVBQVUsQ0FBQyxLQUErQztRQUM1RSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDakMsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDO1lBQzNELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFDRCxJQUFXLFVBQVU7UUFDbkIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQztJQUNsQyxDQUFDO0lBRUQsNEJBQTRCO0lBQzVCLElBQW9CLFlBQVksQ0FBQyxLQUFrQztRQUNqRSxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7UUFDbkMsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDO1lBQy9ELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFDRCxJQUFXLFlBQVk7UUFDckIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQztJQUNwQyxDQUFDO0lBRUQsb0RBQW9EO0lBQ3BELElBQW9CLFFBQVEsQ0FBQyxLQUEwQjtRQUNyRCxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDL0IsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO1lBQ3ZELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFDRCxJQUFXLFFBQVE7UUFDakIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQztJQUNoQyxDQUFDO0lBRUQsMkVBQTJFO0lBQzNFLElBQW9CLFNBQVMsQ0FBQyxLQUEwQjtRQUN0RCxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7UUFDaEMsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO1lBQ3pELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFDRCxJQUFXLFNBQVM7UUFDbEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsMERBQTBEO0lBQzFELElBQW9CLEtBQUssQ0FBQyxLQUE0QztRQUNwRSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDNUIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBQ2pELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFDRCxJQUFXLEtBQUs7UUFDZCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO0lBQzdCLENBQUM7SUFFRCwrRUFBK0U7SUFDL0UsSUFBb0IsU0FBUyxDQUFDLEtBQThDO1FBQzFFLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUNoQyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUM7WUFDekQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsU0FBUztRQUNsQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO0lBQ2pDLENBQUM7SUFFRCwrREFBK0Q7SUFDL0QsSUFBb0IsU0FBUyxDQUFDLEtBQTBCO1FBQ3RELElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUNoQyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUM7WUFDekQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsU0FBUztRQUNsQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxtREFBbUQ7SUFDbkQsSUFBb0IsU0FBUyxDQUFDLEtBQXlCO1FBQ3JELElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUNoQyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUM7WUFDekQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsU0FBUztRQUNsQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO0lBQ2pDLENBQUM7SUFFRCx5Q0FBeUM7SUFDekMsSUFBb0IsUUFBUSxDQUFDLEtBQXlCO1FBQ3BELElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUMvQixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7WUFDdkQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsUUFBUTtRQUNqQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO0lBQ2hDLENBQUM7SUFFRCwwREFBMEQ7SUFDMUQsSUFBb0IsU0FBUyxDQUFDLEtBQTBCO1FBQ3RELElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUNoQyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUM7WUFDekQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsU0FBUztRQUNsQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO0lBQ2pDLENBQUM7SUFFRCx1REFBdUQ7SUFDdkQsSUFBb0IsVUFBVSxDQUFDLFVBQThDO1FBQzNFLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUN0QyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUM7WUFDM0QsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsVUFBVTtRQUNuQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDO0lBQ2xDLENBQUM7SUFFRCxpQ0FBaUM7SUFDakMsSUFBb0IsUUFBUSxDQUFDLFFBQTZCO1FBQ3hELElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUNsQyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7WUFDdkQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsUUFBUTtRQUNqQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO0lBQ2hDLENBQUM7SUFFRCx5Q0FBeUM7SUFDekMsSUFBb0IsZUFBZSxDQUFDLGVBQW9DO1FBQ3RFLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUNoRCxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUM7WUFDckUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztJQUNELElBQVcsZUFBZTtRQUN4QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDO0lBQ3ZDLENBQUM7SUEyQ0Q7O09BRUc7SUFDSCxJQUFpQyxRQUFRO1FBQ3ZDLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQVFEOztPQUVHO0lBQ0gsSUFBVyxVQUFVO1FBQ25CLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QixDQUFDO0lBRUQsMkRBQTJEO0lBQzNELElBQ1csVUFBVSxDQUFDLFFBQTZCO1FBQ2pELElBQUksSUFBSSxDQUFDLFNBQVMsS0FBSyxRQUFRLEVBQUU7WUFDL0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7WUFFMUIsZ0NBQWdDO1lBQ2hDLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtnQkFDbEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7YUFDN0Q7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7YUFDNUQ7U0FDRjtJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILElBQ1csYUFBYTtRQUN0QixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDeEIsQ0FBQztJQStCRDs7Ozs7T0FLRztJQUNILFlBQW9CLE9BQW1CLEVBQVUsTUFBYztRQUM3RCxLQUFLLEVBQUUsQ0FBQztRQURVLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFBVSxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBbGEvRDs7O1dBR0c7UUFDTSxhQUFRLEdBQUcsS0FBSyxDQUFDLENBQUMsMkNBQTJDO1FBdVM3RCxnQkFBVyxHQUFHLEtBQUssQ0FBQztRQVk3Qjs7O1dBR0c7UUFDTyxjQUFTLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFFdkUsOEZBQThGO1FBQ3BGLFVBQUssR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUVuRSw4RkFBOEY7UUFDcEYsYUFBUSxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBQzVELGVBQVUsR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUV4RSw4RkFBOEY7UUFDcEYsV0FBTSxHQUEwQyxJQUFJLFlBQVksRUFBMkIsQ0FBQztRQUM1RixhQUFRLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFFdEUsOEZBQThGO1FBQ3BGLFNBQUksR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUVsRSw4RkFBOEY7UUFDcEYsVUFBSyxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO1FBRW5FLDhGQUE4RjtRQUNwRixhQUFRLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFFdEUsOEZBQThGO1FBQ3BGLGdCQUFXLEdBQXlCLElBQUksWUFBWSxFQUFVLENBQUM7UUFTekU7O1dBRUc7UUFFSyxjQUFTLEdBQXdCLFNBQVMsQ0FBQztRQWdDbkQ7O1dBRUc7UUFHZ0IsY0FBUyxHQUF3QixTQUFTLENBQUM7UUFtQnRELGFBQVEsR0FBc0IsRUFBRSxDQUFDO0lBYXpDLENBQUM7SUFHRCxPQUFPLENBQUMsTUFBcUI7UUFDM0IscUVBQXFFO1FBQ3JFLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQVksQ0FBQztJQUMzRCxDQUFDO0lBRUQsZUFBZTtRQUNiLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFO1lBQ2pDLElBQUksQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDeEQsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBRW5ELG9EQUFvRDtZQUNwRCxxREFBcUQ7WUFDckQsNkJBQTZCO1lBQzdCLE1BQU0sY0FBYyxHQUF3QjtnQkFDMUMsY0FBYyxFQUFFLEtBQUs7Z0JBQ3JCLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztnQkFDckIsT0FBTyxFQUFFLE9BQU87Z0JBQ2hCLFVBQVUsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsUUFBUTtnQkFDeEQsT0FBTyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUM7b0JBQ3JCLE9BQU8sRUFBRSxJQUFJO29CQUNiLGNBQWMsRUFBRSxLQUFLO29CQUNyQixVQUFVLEVBQUUsS0FBSztvQkFDakIsU0FBUyxFQUFFLElBQUk7b0JBQ2YsYUFBYSxFQUFFLElBQUk7b0JBQ25CLE9BQU8sRUFBRSxJQUFJO29CQUNiLFNBQVMsRUFBRSxJQUFJO29CQUNmLEtBQUssRUFBRSxLQUFLO2lCQUNiLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDaEIsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNO2FBQ3BCLENBQUM7WUFFRixJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDcEUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRXpDLHFCQUFxQjtZQUNyQixJQUFJLElBQUksQ0FBQyxvQkFBb0IsRUFBRTtnQkFDN0IsTUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQTRCLEVBQUUsRUFBRTtvQkFDN0QsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO3dCQUNqQyxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLENBQUM7d0JBQ3RDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQzt3QkFDNUMsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDO3FCQUM3QyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7Z0JBQ1gsQ0FBQyxDQUFDLENBQUM7Z0JBRUgsTUFBTSxVQUFVLEdBQTRCLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxDQUFDO2dCQUVsRSxJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLEVBQUU7b0JBQ3RDLFVBQVUsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsQ0FBQztpQkFDMUQ7Z0JBRUQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBRTVDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7Z0JBRTVELElBQUksQ0FBQyxhQUFhO3FCQUNmLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLENBQUM7cUJBQzNFLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLEVBQU8sRUFBRSxJQUFXLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDcEYsRUFBRSxDQUFDLHlCQUF5QixFQUFFLENBQUMsRUFBTyxFQUFFLElBQTJCLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2FBQ2pIO1lBRUQ7O2VBRUc7WUFDSCxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxHQUFHLElBQVcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQy9FLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0RixJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxFQUFPLEVBQUUsSUFBNkIsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3hHLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQU8sRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNsRixJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hGLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMzRixJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hGLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQU8sRUFBRSxZQUFpQixFQUFFLEVBQU8sRUFBRSxPQUFZLEVBQUUsTUFBVyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hMLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDLEVBQU8sRUFBRSxVQUFlLEVBQUUsTUFBVyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLFVBQVUsRUFB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dCxcbiAgQWZ0ZXJWaWV3Q2hlY2tlZCxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBIb3N0QmluZGluZyxcbiAgSG9zdExpc3RlbmVyLFxuICBJbnB1dCxcbiAgTmdab25lLFxuICBPbkRlc3Ryb3ksXG4gIE91dHB1dFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHtcbiAgQmFzZUNvbnRyb2xWYWx1ZUFjY2Vzc29yLFxuICBwcm92aWRlQ29udHJvbFZhbHVlQWNjZXNzb3Jcbn0gZnJvbSAnLi4vdXRpbHMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdpbnB1dFtzb2hvLWxvb2t1cF0nLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHRlbXBsYXRlOiAnPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PicsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtwcm92aWRlQ29udHJvbFZhbHVlQWNjZXNzb3IoU29ob0xvb2t1cENvbXBvbmVudCldXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9Mb29rdXBDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29udHJvbFZhbHVlQWNjZXNzb3I8YW55PiBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XG4gIC8qKlxuICAgKiBVc2VkIHRvIGNhbGwgdXBkYXRlZCBmcm9tIHRoZSBhZnRlclZpZXdDaGVja2VkIGxpZmVjeWNsZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgdXBkYXRlUmVxdWlyZWQ/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBBUEkgZm9yIGludGVyYWN0aW5nIHdpdGggbW9kYWwgYW5kIHRoZW4gaW4gdHVybiB0aGUgYnV0dG9ucyBvbiB0aGUgZGlhbG9nLlxuICAgKi9cbiAgbW9kYWw/OiBTb2hvTW9kYWxTdGF0aWM7XG5cbiAgLyoqXG4gICAqIEF2YWlsYWJsZSBTb2hvIFRlbXBsYXRlIGNvbnRyb2wgc2V0dGluZ3MgYXMgSW5wdXRzXG4gICAqIFNob3VsZCBtYXRjaCB0aGUgU29obyBwcm9wZXJ0aWVzIGZvciB0aGUgY29tcG9uZW50XG4gICAqL1xuICBASW5wdXQoKSBhc29iamVjdCA9IGZhbHNlOyAvLyBzZXQgdG8gZmFsc2UgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG5cbiAgLyoqIEdyaWQgY29sdW1ucy4gKi9cbiAgQElucHV0KCkgY29sdW1ucz86IFNvaG9EYXRhR3JpZENvbHVtbltdO1xuXG4gIC8qKlxuICAgKiBDaGFuZ2VzIHRoZSBkYXRhc2V0IGJlaW5nIHVzZWRcbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgZGF0YXNldChkYXRhOiBPYmplY3RbXSB8IHVuZGVmaW5lZCkge1xuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2RhdGFzZXQgPSBkYXRhO1xuICAgIGlmIChkYXRhICYmIHRoaXMualF1ZXJ5RWxlbWVudCAmJiB0aGlzLmxvb2t1cD8uc2V0dGluZ3M/Lm9wdGlvbnMpIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLm9wdGlvbnMuZGF0YXNldCA9IGRhdGE7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBkYXRhc2V0KCk6IE9iamVjdFtdIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YXNldDtcbiAgfVxuXG4gIC8qKiBDdXN0b20gY2xpY2sgZXZlbnQ7IGNhbiBiZSB1c2VkIHdpdGggYSBtb2RhbCBkaWFsb2cgYW5kIGN1c3RvbSBsaXN0IGNvbXBvbmVudCAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2V0IGNsaWNrKHZhbHVlOiBTb2hvTG9va3VwQ2xpY2tGdW5jdGlvbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0dGluZ3MuY2xpY2sgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLmNsaWNrID0gdGhpcy5zZXR0aW5ncy5jbGljaztcbiAgICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IGNsaWNrKCk6IFNvaG9Mb29rdXBDbGlja0Z1bmN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5jbGljaztcbiAgfVxuXG4gIC8qKiBJZiBhIGNsaWNrIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGlzIGZsZXhpYmxlIG9iamVjdCBjYW4gYmUgcGFzc2VkIGluLiAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2V0IGNsaWNrQXJndW1lbnRzKHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLnNldHRpbmdzLmNsaWNrQXJndW1lbnRzID0gdmFsdWU7XG4gICAgaWYgKHRoaXMubG9va3VwKSB7XG4gICAgICB0aGlzLmxvb2t1cC5zZXR0aW5ncy5jbGlja0FyZ3VtZW50cyA9IHRoaXMuc2V0dGluZ3MuY2xpY2tBcmd1bWVudHM7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBjbGlja0FyZ3VtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5jbGlja0FyZ3VtZW50cztcbiAgfVxuXG4gIC8qKiBDdXN0b20gY2xlYXIgZXZlbnQ7IGNhbiBiZSB1c2VkIHdpdGggYSBtb2RhbCBkaWFsb2cgYW5kIGN1c3RvbSBsaXN0IGNvbXBvbmVudCAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2V0IGNsZWFyKHZhbHVlOiBTb2hvTG9va3VwQ2xlYXJGdW5jdGlvbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0dGluZ3MuY2xlYXIgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLmNsZWFyID0gdGhpcy5zZXR0aW5ncy5jbGVhcjtcbiAgICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IGNsZWFyKCk6IFNvaG9Mb29rdXBDbGVhckZ1bmN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5jbGVhcjtcbiAgfVxuXG4gIC8qKiBJZiBhIGNsZWFyIG1ldGhvZCBpcyBkZWZpbmVkLCB0aGlzIGZsZXhpYmxlIG9iamVjdCBjYW4gYmUgcGFzc2VkIGluLiAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2V0IGNsZWFyQXJndW1lbnRzKHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLnNldHRpbmdzLmNsZWFyQXJndW1lbnRzID0gdmFsdWU7XG4gICAgaWYgKHRoaXMubG9va3VwKSB7XG4gICAgICB0aGlzLmxvb2t1cC5zZXR0aW5ncy5jbGVhckFyZ3VtZW50cyA9IHRoaXMuc2V0dGluZ3MuY2xlYXJBcmd1bWVudHM7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBjbGVhckFyZ3VtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5jbGVhckFyZ3VtZW50cztcbiAgfVxuXG4gIC8qKiBGaWVsZCB0byByZXR1cm4gZnJvbSB0aGUgYXJyYXkgb3IgY2FuIGJlIGEgZnVuY3Rpb24uICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgZmllbGQodmFsdWU6IHN0cmluZyB8IFNvaG9Mb29rdXBGaWVsZEZ1bmN0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXR0aW5ncy5maWVsZCA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmxvb2t1cCkge1xuICAgICAgdGhpcy5sb29rdXAuc2V0dGluZ3MuZmllbGQgPSB0aGlzLnNldHRpbmdzLmZpZWxkO1xuICAgICAgdGhpcy5tYXJrRm9yVXBkYXRlKCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgZmllbGQoKTogc3RyaW5nIHwgU29ob0xvb2t1cEZpZWxkRnVuY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmZpZWxkO1xuICB9XG5cbiAgLyoqIERpYWxvZyB0aXRsZSBvciB0YWtlcyB0aGUgbGFiZWwgKyBMb29rdXAuICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgdGl0bGUodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0dGluZ3MudGl0bGUgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLnRpdGxlID0gdGhpcy5zZXR0aW5ncy50aXRsZTtcbiAgICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IHRpdGxlKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MudGl0bGU7XG4gIH1cblxuICAvKiogU3dhcCBvdXQgdGhlIGxvb2t1cCBpZCBmb3IgYW55IG90aGVyIGljb24gaW4gdGhlIGljb24gc2V0IGJ5IG5hbWUgKi9cbiAgQElucHV0KCkgcHVibGljIHNldCBpY29uKHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldHRpbmdzLmljb24gPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLmljb24gPSB0aGlzLnNldHRpbmdzLmljb247XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBpY29uKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuaWNvbjtcbiAgfVxuXG4gIC8qKiBQYXNzIGRpYWxvZyBidXR0b25zIG9yIENhbmNlbCAvIEFwcGx5LiAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2V0IGJ1dHRvbnModmFsdWU6IFNvaG9Nb2RhbEJ1dHRvbltdIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXR0aW5ncy5idXR0b25zID0gdmFsdWU7XG4gICAgaWYgKHRoaXMubG9va3VwKSB7XG4gICAgICB0aGlzLmxvb2t1cC5zZXR0aW5ncy5idXR0b25zID0gdGhpcy5zZXR0aW5ncy5idXR0b25zO1xuICAgICAgdGhpcy5tYXJrRm9yVXBkYXRlKCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgYnV0dG9ucygpOiBTb2hvTW9kYWxCdXR0b25bXSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuYnV0dG9ucztcbiAgfVxuXG4gIC8qKiBPcHRpb25zIHRvIHBhc3MgdG8gdGhlIHVuZGVybHlpbmcgZGF0YSBncmlkLiAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2V0IG9wdGlvbnModmFsdWU6IFNvaG9EYXRhR3JpZE9wdGlvbnMgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldHRpbmdzLm9wdGlvbnMgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLm9wdGlvbnMgPSB0aGlzLnNldHRpbmdzLm9wdGlvbnM7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBvcHRpb25zKCk6IFNvaG9EYXRhR3JpZE9wdGlvbnMgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzLm9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCB0byBtYW5hZ2UgZGF0YSBwcmlvciB0byBzaG93aW5nIHRoZSBsb29rdXAuXG4gICAqXG4gICAqIEZvciBleGFtcGxlOlxuICAgKiAgLSBXaGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCwgc2hvdyBhIGxvYWRpbmcgZGlhbG9nIGFuZCBtYWtlIHRoZSByZXF1ZXN0IGZvclxuICAgKiAgICBsb29rdXAgZ3JpZCBkYXRhLlxuICAgKiAgLSBVcG9uIHJlY2VpdmluZyBncmlkIGRhdGEsIHNldCBsb29rdXAuc2V0dGluZ3Mub3B0aW9ucyBmb3IgdGhlIGNvbHVtbnMgYW5kIGRhdGFzZXQuXG4gICAqICAtIFRoZW4gY2FsbCBncmlkKCkgdG8gYnVpbGQgdGhlIGdyaWQgYW5kIGNvbXBsZXRlIHRoZSBsb29rdXAgY2FsbC5cbiAgICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgYmVmb3JlU2hvdyh2YWx1ZTogU29ob0xvb2t1cEJlZm9yZVNob3dGdW5jdGlvbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0dGluZ3MuYmVmb3JlU2hvdyA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmxvb2t1cCkge1xuICAgICAgdGhpcy5sb29rdXAuc2V0dGluZ3MuYmVmb3JlU2hvdyA9IHRoaXMuc2V0dGluZ3MuYmVmb3JlU2hvdztcbiAgICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IGJlZm9yZVNob3coKTogU29ob0xvb2t1cEJlZm9yZVNob3dGdW5jdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuYmVmb3JlU2hvdztcbiAgfVxuXG4gIC8qKiBDdXN0b20gbW9kYWwgY29udGVudC4gKi9cbiAgQElucHV0KCkgcHVibGljIHNldCBtb2RhbENvbnRlbnQodmFsdWU6IEpRdWVyeSB8IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0dGluZ3MubW9kYWxDb250ZW50ID0gdmFsdWU7XG4gICAgaWYgKHRoaXMubG9va3VwKSB7XG4gICAgICB0aGlzLmxvb2t1cC5zZXR0aW5ncy5tb2RhbENvbnRlbnQgPSB0aGlzLnNldHRpbmdzLm1vZGFsQ29udGVudDtcbiAgICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IG1vZGFsQ29udGVudCgpOiBKUXVlcnkgfCBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzLm1vZGFsQ29udGVudDtcbiAgfVxuXG4gIC8qKiBDYW4gdGhlIHVzZXIgdHlwZSByYW5kb20gdGV4dCBpbnRvIHRoZSBmaWVsZC4gKi9cbiAgQElucHV0KCkgcHVibGljIHNldCBlZGl0YWJsZSh2YWx1ZTogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0dGluZ3MuZWRpdGFibGUgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLmVkaXRhYmxlID0gdGhpcy5zZXR0aW5ncy5lZGl0YWJsZTtcbiAgICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IGVkaXRhYmxlKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmVkaXRhYmxlO1xuICB9XG5cbiAgLyoqIElmIHNldCB0byBmYWxzZSB0aGUgZGlhbG9nIHdvbnQgYXBwbHkgdGhlIHZhbHVlIG9uIGNsaWNraW5nIGEgdmFsdWUuICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgYXV0b0FwcGx5KHZhbHVlOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXR0aW5ncy5hdXRvQXBwbHkgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLmF1dG9BcHBseSA9IHRoaXMuc2V0dGluZ3MuYXV0b0FwcGx5O1xuICAgICAgdGhpcy5tYXJrRm9yVXBkYXRlKCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgYXV0b0FwcGx5KCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmF1dG9BcHBseTtcbiAgfVxuXG4gIC8qKiBGdW5jdGlvbiB1c2VkIHRvIG1hdGNoIHRoZSBzZWFyY2ggdGVybSB0byB0aGUgZGF0YS4gKi9cbiAgQElucHV0KCkgcHVibGljIHNldCBtYXRjaCh2YWx1ZTogU29ob0RhdGFHcmlkTWF0Y2hGdW5jdGlvbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0dGluZ3MubWF0Y2ggPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLm1hdGNoID0gdGhpcy5zZXR0aW5ncy5tYXRjaDtcbiAgICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0IG1hdGNoKCk6IFNvaG9EYXRhR3JpZE1hdGNoRnVuY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzLm1hdGNoO1xuICB9XG5cbiAgLyoqIEEgZnVuY3Rpb24gdGhhdCBmaXJlcyB0byBsZXQgeW91IHZhbGlkYXRlIGZvcm0gaXRlbXMgb24gb3BlbiBhbmQgc2VsZWN0LiAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2V0IHZhbGlkYXRvcih2YWx1ZTogU29ob0xvb2t1cFZhbGlkYXRvckZ1bmN0aW9uIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXR0aW5ncy52YWxpZGF0b3IgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLnZhbGlkYXRvciA9IHRoaXMuc2V0dGluZ3MudmFsaWRhdG9yO1xuICAgICAgdGhpcy5tYXJrRm9yVXBkYXRlKCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgdmFsaWRhdG9yKCk6IFNvaG9Mb29rdXBWYWxpZGF0b3JGdW5jdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MudmFsaWRhdG9yO1xuICB9XG5cbiAgLyoqIFNldCB0aGUgd2lkdGggb2YgdGhlIGlucHV0IHRvIHRoZSB3aWR0aCBvZiB0aGUgc2VsZWN0aW9uICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgYXV0b1dpZHRoKHZhbHVlOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXR0aW5ncy5hdXRvV2lkdGggPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLmF1dG9XaWR0aCA9IHRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoO1xuICAgICAgdGhpcy5tYXJrRm9yVXBkYXRlKCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgYXV0b1dpZHRoKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmF1dG9XaWR0aDtcbiAgfVxuXG4gIC8qKiBUaGUgY2hhcmFjdGVyICB1c2VkIHRvIHNlcGFyYXRlIGRhdGEgc3RyaW5ncyAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2V0IGRlbGltaXRlcih2YWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXR0aW5ncy5kZWxpbWl0ZXIgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubG9va3VwLnNldHRpbmdzLmRlbGltaXRlciA9IHRoaXMuc2V0dGluZ3MuZGVsaW1pdGVyO1xuICAgICAgdGhpcy5tYXJrRm9yVXBkYXRlKCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgZGVsaW1pdGVyKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuZGVsaW1pdGVyO1xuICB9XG5cbiAgLyoqIEFwcGx5IGEgbWluaW11bSB3aWR0aCB0byB0aGUgbG9va3VwKi9cbiAgQElucHV0KCkgcHVibGljIHNldCBtaW5XaWR0aCh2YWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXR0aW5ncy5taW5XaWR0aCA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmxvb2t1cCkge1xuICAgICAgdGhpcy5sb29rdXAuc2V0dGluZ3MubWluV2lkdGggPSB0aGlzLnNldHRpbmdzLm1pbldpZHRoO1xuICAgICAgdGhpcy5tYXJrRm9yVXBkYXRlKCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgbWluV2lkdGgoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5taW5XaWR0aDtcbiAgfVxuXG4gIC8qKiAgQWRkIGFuIGFiaWxpdHkgdG8gY2xlYXIgdGhlIGxvb2t1cCBmaWVsZCB3aXRoIGFuIHggKi9cbiAgQElucHV0KCkgcHVibGljIHNldCBjbGVhcmFibGUodmFsdWU6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldHRpbmdzLmNsZWFyYWJsZSA9IHZhbHVlO1xuICAgIGlmICh0aGlzLmxvb2t1cCkge1xuICAgICAgdGhpcy5sb29rdXAuc2V0dGluZ3MuY2xlYXJhYmxlID0gdGhpcy5zZXR0aW5ncy5jbGVhcmFibGU7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBjbGVhcmFibGUoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuY2xlYXJhYmxlO1xuICB9XG5cbiAgLyoqICBBZGQgZXh0cmEgYXR0cmlidXRlcyBsaWtlIGlkJ3MgdG8gdGhlIGNvbXBvbmVudCAqL1xuICBASW5wdXQoKSBwdWJsaWMgc2V0IGF0dHJpYnV0ZXMoYXR0cmlidXRlczogQXJyYXk8T2JqZWN0PiB8IE9iamVjdCB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0dGluZ3MuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgaWYgKHRoaXMubG9va3VwKSB7XG4gICAgICB0aGlzLmxvb2t1cC5zZXR0aW5ncy5hdHRyaWJ1dGVzID0gdGhpcy5zZXR0aW5ncy5hdHRyaWJ1dGVzO1xuICAgICAgdGhpcy5tYXJrRm9yVXBkYXRlKCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgYXR0cmlidXRlcygpOiBBcnJheTxPYmplY3Q+IHwgT2JqZWN0IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5hdHRyaWJ1dGVzO1xuICB9XG5cbiAgLyoqICBTZXQgdGhlIGlucHV0IHRvIHRhYmJhYmxlICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgdGFiYmFibGUodGFiYmFibGU6IGJvb2xlYW4gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldHRpbmdzLnRhYmJhYmxlID0gdGFiYmFibGU7XG4gICAgaWYgKHRoaXMubG9va3VwKSB7XG4gICAgICB0aGlzLmxvb2t1cC5zZXR0aW5ncy50YWJiYWJsZSA9IHRoaXMuc2V0dGluZ3MudGFiYmFibGU7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCB0YWJiYWJsZSgpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy50YWJiYWJsZTtcbiAgfVxuXG4gIC8qKiAgU2V0IHRoZSBpbnB1dCB0byBhbGxvdyBkdXBsaWNhdGVzICovXG4gIEBJbnB1dCgpIHB1YmxpYyBzZXQgYWxsb3dEdXBsaWNhdGVzKGFsbG93RHVwbGljYXRlczogYm9vbGVhbiB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0dGluZ3MuYWxsb3dEdXBsaWNhdGVzID0gYWxsb3dEdXBsaWNhdGVzO1xuICAgIGlmICh0aGlzLmxvb2t1cCkge1xuICAgICAgdGhpcy5sb29rdXAuc2V0dGluZ3MuYWxsb3dEdXBsaWNhdGVzID0gdGhpcy5zZXR0aW5ncy5hbGxvd0R1cGxpY2F0ZXM7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldCBhbGxvd0R1cGxpY2F0ZXMoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuYWxsb3dEdXBsaWNhdGVzO1xuICB9XG5cbiAgQElucHV0KCkgbXVsdGlzZWxlY3QgPSBmYWxzZTtcblxuICBASW5wdXQoKSBuYW1lPzogc3RyaW5nO1xuXG4gIC8vIE1ha2Ugc3VyZSB5b3UgYmluZCB0aGUgY29udGV4dCB0byB0aGUgZnVuY3Rpb25cbiAgQElucHV0KCkgc291cmNlPzogU29ob0RhdGFHcmlkU291cmNlRnVuY3Rpb247XG5cbiAgQElucHV0KCkgdG9vbGJhcjogYW55O1xuXG4gIC8vIEF1dG9jb21wbGV0ZSB0ZW1wbGF0ZSBzZXR0aW5nc1xuICBASW5wdXQoKSBhdXRvQ29tcGxldGVTZXR0aW5ncz86IFNvaG9Mb29rdXBBdXRvQ29tcGxldGU7XG5cbiAgLyoqXG4gICAqIEF2YWlsYWJsZSBTb2hvIFRlbXBsYXRlIGV2ZW50cyBhcyBPdXRwdXQgKEV2ZW50RW1pdHRlcnMgcGFzc2luZyB0aGUgZXZlbnQpXG4gICAqIFNob3VsZCBtYXRjaCB0aGUgU29obyBldmVudCBuYW1lcyBmb3IgdGhlIGNvbXBvbmVudFxuICAgKi9cbiAgQE91dHB1dCgpIGFmdGVyb3BlbjogRXZlbnRFbWl0dGVyPE9iamVjdD4gPSBuZXcgRXZlbnRFbWl0dGVyPE9iamVjdD4oKTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGFuZ3VsYXItZXNsaW50L25vLW91dHB1dC1uYXRpdmUsIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtcmVuYW1lXG4gIEBPdXRwdXQoKSBzdGFydDogRXZlbnRFbWl0dGVyPE9iamVjdD4gPSBuZXcgRXZlbnRFbWl0dGVyPE9iamVjdD4oKTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGFuZ3VsYXItZXNsaW50L25vLW91dHB1dC1uYXRpdmUsIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtcmVuYW1lXG4gIEBPdXRwdXQoKSBjb21wbGV0ZTogRXZlbnRFbWl0dGVyPE9iamVjdD4gPSBuZXcgRXZlbnRFbWl0dGVyPE9iamVjdD4oKTtcbiAgQE91dHB1dCgpIGJlZm9yZW9wZW46IEV2ZW50RW1pdHRlcjxPYmplY3Q+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3Q+KCk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtbmF0aXZlLCBAYW5ndWxhci1lc2xpbnQvbm8tb3V0cHV0LXJlbmFtZVxuICBAT3V0cHV0KCkgY2hhbmdlOiBFdmVudEVtaXR0ZXI8U29ob0xvb2t1cENoYW5nZUV2ZW50W10+ID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvTG9va3VwQ2hhbmdlRXZlbnRbXT4oKTtcbiAgQE91dHB1dCgpIGlucHV0RXZ0OiBFdmVudEVtaXR0ZXI8T2JqZWN0PiA9IG5ldyBFdmVudEVtaXR0ZXI8T2JqZWN0PigpO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAYW5ndWxhci1lc2xpbnQvbm8tb3V0cHV0LW5hdGl2ZSwgQGFuZ3VsYXItZXNsaW50L25vLW91dHB1dC1yZW5hbWVcbiAgQE91dHB1dCgpIG9wZW46IEV2ZW50RW1pdHRlcjxPYmplY3Q+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3Q+KCk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtbmF0aXZlLCBAYW5ndWxhci1lc2xpbnQvbm8tb3V0cHV0LXJlbmFtZVxuICBAT3V0cHV0KCkgY2xvc2U6IEV2ZW50RW1pdHRlcjxPYmplY3Q+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3Q+KCk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtbmF0aXZlLCBAYW5ndWxhci1lc2xpbnQvbm8tb3V0cHV0LXJlbmFtZVxuICBAT3V0cHV0KCkgc2VsZWN0ZWQ6IEV2ZW50RW1pdHRlcjxPYmplY3Q+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3Q+KCk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtbmF0aXZlLCBAYW5ndWxhci1lc2xpbnQvbm8tb3V0cHV0LXJlbmFtZVxuICBAT3V0cHV0KCkgYWZ0ZXJwYWdpbmc6IEV2ZW50RW1pdHRlcjxPYmplY3Q+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3Q+KCk7XG5cbiAgLyoqXG4gICAqIEJpbmQgYXR0cmlidXRlcyB0byB0aGUgaG9zdCBpbnB1dCBlbGVtZW50XG4gICAqL1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmxvb2t1cCcpIGdldCBpc0xvb2t1cCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJcyB0aGUgbG9va3VwIGNvbnRyb2wgZGlzYWJsZWQ/XG4gICAqL1xuICBASG9zdEJpbmRpbmcoJ2Rpc2FibGVkJylcbiAgcHJpdmF0ZSBfZGlzYWJsZWQ6IGJvb2xlYW4gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEFjY2Vzc29yIGZvciBfZGlzYWJsZWQuXG4gICAqL1xuICBwdWJsaWMgZ2V0IGlzRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1pbnB1dC1yZW5hbWVcbiAgQElucHV0KFwiZGlzYWJsZWRcIilcbiAgcHVibGljIHNldCBpc0Rpc2FibGVkKGRpc2FibGVkOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKHRoaXMuX2Rpc2FibGVkICE9PSBkaXNhYmxlZCkge1xuICAgICAgdGhpcy5fZGlzYWJsZWQgPSBkaXNhYmxlZDtcblxuICAgICAgLy8gRW5zdXJlIHRoZSB3aWRnZXQgaXMgdXBkYXRlZC5cbiAgICAgIGlmICh0aGlzLl9kaXNhYmxlZCkge1xuICAgICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLmxvb2t1cD8uZGlzYWJsZSgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMubG9va3VwPy5lbmFibGUoKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBjbGFzcyBiaW5kaW5nLlxuICAgKi9cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pcy1kaXNhYmxlZCcpXG4gIHB1YmxpYyBnZXQgZGlzYWJsZWRDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gIH1cblxuICAvKipcbiAgICogSXMgdGhlIGxvb2t1cCBjb250cm9sIHJlYWRvbmx5P1xuICAgKi9cbiAgQEhvc3RCaW5kaW5nKCdyZWFkb25seScpXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAYW5ndWxhci1lc2xpbnQvbm8taW5wdXQtcmVuYW1lXG4gIEBJbnB1dCgncmVhZG9ubHknKSBfcmVhZG9ubHk6IGJvb2xlYW4gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIExvY2FsIHZhcmlhYmxlc1xuICAgKi9cbiAgcHJpdmF0ZSBqUXVlcnlFbGVtZW50PzogSlF1ZXJ5O1xuXG4gIC8qKlxuICAgKiBTb2hvIExvb2t1cCB3aWRnZXQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGxvb2t1cD86IFNvaG9Mb29rdXBTdGF0aWMgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBdXRvY29tcGxldGVcbiAgICovXG4gIHByaXZhdGUgYXV0b2NvbXBsZXRlITogU29ob0F1dG9Db21wbGV0ZVN0YXRpYyB8IG51bGw7XG5cbiAgcHJpdmF0ZSBzZXR0aW5nczogU29ob0xvb2t1cE9wdGlvbnMgPSB7fTtcblxuICAvKiogSW5pdGlhbCBkYXRhc2V0ICovXG4gIHByaXZhdGUgX2RhdGFzZXQ/OiBPYmplY3RbXTtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50IGFzc29jaWF0ZWQgZWxlbWVudFxuICAgKiBAcGFyYW0gbmdab25lIGFuZ3VsYXIgem9uZVxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmLCBwcml2YXRlIG5nWm9uZTogTmdab25lKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ2tleXVwJywgWyckZXZlbnQnXSlcbiAgb25LZXlVcChfZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAvLyBUaGlzIGlzIHJlcXVpcmVkLCBvdGhlcndpc2UgdGhlIGZvcm0gYmluZGluZyBkb2VzIG5vdCBzZWUgdXBkYXRlcy5cbiAgICB0aGlzLmludGVybmFsVmFsdWUgPSB0aGlzLmpRdWVyeUVsZW1lbnQ/LnZhbCgpIGFzIHN0cmluZztcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQgPSBqUXVlcnkodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgY29uc3QgZGF0YVNldCA9IHRoaXMuX2RhdGFzZXQgPyB0aGlzLl9kYXRhc2V0IDogW107XG5cbiAgICAgIC8vIFRoZSBkZWZhdWx0IG9wdGlvbnMgZm9yIHRoZSBkYXRhIGdyaWQsIHdoaWNoIHdpbGxcbiAgICAgIC8vIGJlIG92ZXJyaWRlbiBieSB0aGUgb3B0aW9ucyBwcm92aWRlZCBieSB0aGUgY2FsbGVyXG4gICAgICAvLyBvbiBhIGZpZWxkIGJ5IGZpZWxkIGJhc2lzLlxuICAgICAgY29uc3QgZGF0YWdyaWRDb25maWc6IFNvaG9EYXRhR3JpZE9wdGlvbnMgPSB7XG4gICAgICAgIGNlbGxOYXZpZ2F0aW9uOiBmYWxzZSxcbiAgICAgICAgY29sdW1uczogdGhpcy5jb2x1bW5zLFxuICAgICAgICBkYXRhc2V0OiBkYXRhU2V0LFxuICAgICAgICBzZWxlY3RhYmxlOiB0aGlzLmlzTXVsdGlzZWxlY3QoKSA/ICdtdWx0aXBsZScgOiAnc2luZ2xlJyxcbiAgICAgICAgdG9vbGJhcjogT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgYWN0aW9uczogdHJ1ZSxcbiAgICAgICAgICBhZHZhbmNlZEZpbHRlcjogZmFsc2UsXG4gICAgICAgICAgZGF0ZUZpbHRlcjogZmFsc2UsXG4gICAgICAgICAgZnVsbFdpZHRoOiB0cnVlLFxuICAgICAgICAgIGtleXdvcmRGaWx0ZXI6IHRydWUsXG4gICAgICAgICAgcmVzdWx0czogdHJ1ZSxcbiAgICAgICAgICByb3dIZWlnaHQ6IHRydWUsXG4gICAgICAgICAgdmlld3M6IGZhbHNlLFxuICAgICAgICB9LCB0aGlzLnRvb2xiYXIpLFxuICAgICAgICBzb3VyY2U6IHRoaXMuc291cmNlXG4gICAgICB9O1xuXG4gICAgICB0aGlzLnNldHRpbmdzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGRhdGFncmlkQ29uZmlnLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lmxvb2t1cCh0aGlzLnNldHRpbmdzKTtcblxuICAgICAgLy8gc2V0dXAgYXV0b2NvbXBsZXRlXG4gICAgICBpZiAodGhpcy5hdXRvQ29tcGxldGVTZXR0aW5ncykge1xuICAgICAgICBjb25zdCBhY0RhdGFzZXQgPSBkYXRhU2V0Lm1hcCgoZGF0YTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmF1dG9Db21wbGV0ZVNldHRpbmdzID8ge1xuICAgICAgICAgICAgaWQ6IGRhdGFbdGhpcy5hdXRvQ29tcGxldGVTZXR0aW5ncy5pZF0sXG4gICAgICAgICAgICB2YWx1ZTogZGF0YVt0aGlzLmF1dG9Db21wbGV0ZVNldHRpbmdzLnZhbHVlXSxcbiAgICAgICAgICAgIGxhYmVsOiBkYXRhW3RoaXMuYXV0b0NvbXBsZXRlU2V0dGluZ3MubGFiZWxdXG4gICAgICAgICAgfSA6IGRhdGE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGFjU2V0dGluZ3M6IFNvaG9BdXRvQ29tcGxldGVPcHRpb25zID0geyBzb3VyY2U6IGFjRGF0YXNldCB9O1xuXG4gICAgICAgIGlmICh0aGlzLmF1dG9Db21wbGV0ZVNldHRpbmdzLnRlbXBsYXRlKSB7XG4gICAgICAgICAgYWNTZXR0aW5ncy50ZW1wbGF0ZSA9IHRoaXMuYXV0b0NvbXBsZXRlU2V0dGluZ3MudGVtcGxhdGU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmpRdWVyeUVsZW1lbnQuYXV0b2NvbXBsZXRlKGFjU2V0dGluZ3MpO1xuXG4gICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlID0gdGhpcy5qUXVlcnlFbGVtZW50LmRhdGEoJ2F1dG9jb21wbGV0ZScpO1xuXG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudFxuICAgICAgICAgIC5vbignc2VsZWN0ZWQuYXV0b2NvbXBsZXRlJywgKC4uLmFyZ3MpID0+IHRoaXMub25BdXRvY29tcGxldGVTZWxlY3RlZChhcmdzKSlcbiAgICAgICAgICAub24oJ2NoYW5nZS5hdXRvY29tcGxldGUnLCAoX2U6IGFueSwgYXJnczogYW55W10pID0+IHRoaXMub25BdXRvY29tcGxldGVDaGFuZ2UoYXJncykpXG4gICAgICAgICAgLm9uKCdiZWZvcmVvcGVuLmF1dG9jb21wbGV0ZScsIChfZTogYW55LCBhcmdzOiBTb2hvQXV0b0NvbXBsZXRlRXZlbnQpID0+IHRoaXMub25BdXRvY29tcGxldGVCZWZvcmVPcGVuKGFyZ3MpKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBCaW5kIHRvIGpRdWVyeUVsZW1lbnQncyBldmVudHNcbiAgICAgICAqL1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdhZnRlcm9wZW4nLCAoLi4uYXJnczogYW55W10pID0+IHRoaXMubW9kYWxPcGVuZWQoYXJncykpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdiZWZvcmVvcGVuJywgKCkgPT4gdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMuYmVmb3Jlb3Blbi5lbWl0KHVuZGVmaW5lZCkpKTtcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vbignb3BlbicsICgpID0+IHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLm9wZW4uZW1pdCh1bmRlZmluZWQpKSk7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQub24oJ2NoYW5nZS5sb29rdXAnLCAoX2U6IGFueSwgYXJnczogU29ob0xvb2t1cENoYW5nZUV2ZW50W10pID0+IHRoaXMub25DaGFuZ2UoYXJncykpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdibHVyJywgKF9lOiBhbnkpID0+IHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLnRvdWNoZWQoKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdzdGFydCcsICgpID0+IHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLnN0YXJ0LmVtaXQodW5kZWZpbmVkKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdjb21wbGV0ZScsICgpID0+IHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLmNvbXBsZXRlLmVtaXQodW5kZWZpbmVkKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdpbnB1dCcsICgpID0+IHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLmlucHV0RXZ0LmVtaXQodW5kZWZpbmVkKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdjbG9zZScsICgpID0+IHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLmNsb3NlLmVtaXQodW5kZWZpbmVkKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdzZWxlY3RlZCcsIChfZTogYW55LCBzZWxlY3RlZFJvd3M6IGFueSwgb3A6IGFueSwgcm93RGF0YTogYW55LCBsb29rdXA6IGFueSkgPT4gdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMuc2VsZWN0ZWQuZW1pdCh7IHNlbGVjdGVkUm93cywgb3AsIHJvd0RhdGEsIGxvb2t1cCB9KSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdhZnRlcnBhZ2luZycsIChfZTogYW55LCBwYWdpbmdJbmZvOiBhbnksIGxvb2t1cDogYW55KSA9PiB0aGlzLm5nWm9uZS5ydW4oKCkgPT4gdGhpcy5hZnRlcnBhZ2luZy5lbWl0KHsgcGFnaW5nSW5mbywgbG9va3VwIH0pKSk7XG5cbiAgICAgIHRoaXMubG9va3VwID0gdGhpcy5qUXVlcnlFbGVtZW50LmRhdGEoJ2xvb2t1cCcpO1xuXG4gICAgICAvLyBQaWNrIHVwIHRoZSBpbnRlcm5hbCB2YWx1ZSBmcm9tIHRoZSBmb3JtIGNvbnRyb2wuXG4gICAgICBpZiAodGhpcy5pbnRlcm5hbFZhbHVlKSB7XG4gICAgICAgIHRoaXMubG9va3VwPy5lbGVtZW50LnZhbCh0aGlzLmludGVybmFsVmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgc2VsZWN0ZWQgcm93c1xuICAgKi9cbiAgcHVibGljIHVwZGF0ZVNlbGVjdGVkUm93cyhyb3dzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxvb2t1cCAmJiBBcnJheS5pc0FycmF5KHJvd3MpKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiAoKHRoaXMubG9va3VwIGFzIGFueSkudXBkYXRlU2VsZWN0ZWRSb3dzKHJvd3MpKSk7XG4gICAgICB0aGlzLm1hcmtGb3JVcGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluZCB0aGUgcm93IGFuZCBzZWxlY3QgaXQgYmFzZWQgb24gc2VsZWN0IHZhbHVlIC8gZnVuY3Rpb24gLyBmaWVsZCB2YWx1ZVxuICAgKi9cbiAgcHVibGljIHNlbGVjdFJvd0J5VmFsdWUoZmllbGQ6IFN0cmluZywgdmFsdWU6IFN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxvb2t1cCkge1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy5sb29rdXA/LnNlbGVjdFJvd0J5VmFsdWUoZmllbGQsIHZhbHVlKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEdldCB0aGUgc2VsZWN0ZWQgcm93cyBhbmQgcmV0dXJuIHRoZW0gdG8gdGhlIFVJICoqL1xuICBwdWJsaWMgaW5zZXJ0Um93cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMubG9va3VwPy5pbnNlcnRSb3dzKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRoZSByb3dzIGN1cnJlbnRseSBzZWxlY3RlZCAqKi9cbiAgcHVibGljIHNlbGVjdGVkUm93cygpOiBhbnlbXSB7XG4gICAgcmV0dXJuIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHJldHVybiAoKHRoaXMubG9va3VwIGFzIGFueSkuc2VsZWN0ZWRSb3dzIHx8IFtdKS5zbGljZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEVuYWJsZSB0aGUgaW5wdXQuICoqL1xuICBwdWJsaWMgZW5hYmxlKCk6IHZvaWQge1xuICAgIHRoaXMuX2Rpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5fcmVhZG9ubHkgPSBmYWxzZTtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLmxvb2t1cD8uZW5hYmxlKCkpO1xuICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICB9XG5cbiAgLyoqIERpc2FibGUgdGhlIGlucHV0LiAqKi9cbiAgcHVibGljIGRpc2FibGUoKTogdm9pZCB7XG4gICAgdGhpcy5fZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMubG9va3VwPy5kaXNhYmxlKCkpO1xuICAgIHRoaXMubWFya0ZvclVwZGF0ZSgpO1xuICB9XG5cbiAgLyoqIE1ha2UgdGhlIGlucHV0IHJlYWRvbmx5LiAqKi9cbiAgcHVibGljIHJlYWRvbmx5KCk6IHZvaWQge1xuICAgIHRoaXMuX3JlYWRvbmx5ID0gdHJ1ZTtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLmxvb2t1cD8ucmVhZG9ubHkoKSk7XG4gICAgdGhpcy5tYXJrRm9yVXBkYXRlKCk7XG4gIH1cblxuICAvKiogIFNlbmQgaW4gYSBuZXcgZGF0YSBzZXQgdG8gZGlzcGxheSBpbiB0aGUgZGF0YWdyaWQgaW4gdGhlIGxvb2t1cC4gKiovXG4gIHB1YmxpYyB1cGRhdGVEYXRhc2V0KGRhdGFzZXQ6IE9iamVjdFtdLCBwYWdlckluZm86IFNvaG9QYWdlclBhZ2luZ0luZm8pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sb29rdXApIHtcbiAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMubG9va3VwPy51cGRhdGVEYXRhc2V0KGRhdGFzZXQsIHBhZ2VySW5mbykpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIHRvIG5vdGlmeSB0aGUgbG9va3VwIGFib3V0IGFueSBkb20vc2V0dGluZ3MgY2hhbmdlc1xuICAgKi9cbiAgcHVibGljIHVwZGF0ZWQoc2V0dGluZ3M/OiBhbnkpOiB2b2lkIHtcbiAgICBpZiAoc2V0dGluZ3MpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3MgPSBTb2hvLnV0aWxzLm1lcmdlU2V0dGluZ3MoKHRoaXMuZWxlbWVudCBhcyBhbnkpWzBdLCBzZXR0aW5ncywgdGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubG9va3VwKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLmxvb2t1cD8udXBkYXRlZCh0aGlzLnNldHRpbmdzKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3lzIHRoZSBtb2RhbCBsb29rdXAuXG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmxvb2t1cCkge1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy5sb29rdXA/LmRlc3Ryb3koKSk7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgIGlmICh0aGlzLnVwZGF0ZVJlcXVpcmVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZWQoKTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICAvLyBjYWxsIG91dHNpZGUgdGhlIGFuZ3VsYXIgem9uZSBzbyBjaGFuZ2UgZGV0ZWN0aW9uIGlzbid0IHRyaWdnZXJlZCBieSB0aGUgc29obyBjb21wb25lbnQuXG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgICB0aGlzLmpRdWVyeUVsZW1lbnQub2ZmKCk7XG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubG9va3VwKSB7XG4gICAgICAgIHRoaXMubG9va3VwLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5sb29rdXAgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5hdXRvY29tcGxldGUpIHtcbiAgICAgICAgdGhpcy5hdXRvY29tcGxldGUuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmF1dG9jb21wbGV0ZSA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpc011bHRpc2VsZWN0KCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLm11bHRpc2VsZWN0ICE9PSBmYWxzZSB8fCAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5zZWxlY3RhYmxlID09PSAnbXVsdGlwbGUnKTtcbiAgfVxuXG4gIG1vZGFsT3BlbmVkKGFyZ3M6IGFueVtdKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMubW9kYWwgPSB0aGlzLmxvb2t1cD8ubW9kYWw7XG5cbiAgICAgIC8qKlxuICAgICAgICogVGVtcG9yYXJ5IGZpeCBmb3IgaW5hYmlsaXR5IGZvciBncmlkIHRvIGFzeW5jIGNhbGwgZGF0YSBhbmQgcmVzaXplIG1vZGFsIG9uIHJldHVybmVkXG4gICAgICAgKiB2YWx1ZXMgKG9ubHkgbmVjZXNzYXJ5IHdoZW4gdGhlIHBhZ2Ugc2l6ZSBpcyBsYXJnZSBlbm91Z2ggdG8gbWFrZSB0aGUgZGF0YWdyaWQgbGFyZ2VyXG4gICAgICAgKiB0aGFuIHRoZSBjdXJyZW50IG1vZGFsIGNvbnRlbnQgd2luZG93IGhlaWdodCk6XG4gICAgICAgKiBqaXJhL2Jyb3dzZS9TT0hPLTQzNDdcbiAgICAgICAqL1xuICAgICAgaWYgKGFyZ3NbMV0gJiYgYXJnc1syXSkge1xuXG4gICAgICAgIGNvbnN0IGRhdGFncmlkOiBTb2hvRGF0YUdyaWRTdGF0aWMgPSBhcmdzWzFdO1xuICAgICAgICBjb25zdCBtb2RhbDogU29ob01vZGFsU3RhdGljID0gYXJnc1syXTtcblxuICAgICAgICBpZiAoZGF0YWdyaWQucGFnZXJBUEkpIHtcbiAgICAgICAgICBkYXRhZ3JpZC5wYWdlckFQSS5lbGVtZW50Lm9uKCdhZnRlcnBhZ2luZycsICgpID0+IHtcbiAgICAgICAgICAgIG1vZGFsLnJlc2l6ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmFmdGVyb3Blbi5lbWl0KGFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgY29udHJvbCBiZWluZyBjaGFuZ2VkLlxuICAgKi9cbiAgb25DaGFuZ2UoZXZlbnQ6IFNvaG9Mb29rdXBDaGFuZ2VFdmVudFtdKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMucGFyc2VWYWx1ZShldmVudCk7XG4gICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgIC8vIHByZXZlbnQgdW5kZWZpbmVkIGV4Y2VwdGlvbiB3aGVuIGV2ZW50IGlzIHVuZGVmaW5lZC5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyB0b2RvOiB3aHkgaXMgdGhpcyBoZXJlLCB2YWx1ZSBpcyBub3QgZGVmaW5lZCBhbnl3aGVyZSwgbm90IHN1cmUgd2hlcmUgaXQncyB1c2VkIHNvIHJlbHVjdGFudCB0byByZW1vdmUgaXQuXG4gICAgICBldmVudC52YWx1ZXMgPSB0aGlzLmludGVybmFsVmFsdWU7XG4gICAgICB0aGlzLmNoYW5nZS5lbWl0KGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uQXV0b2NvbXBsZXRlQ2hhbmdlKGV2ZW50OiBhbnkpIHtcbiAgICBpZiAodGhpcy5hdXRvQ29tcGxldGVTZXR0aW5ncyAmJiB0aGlzLmF1dG9Db21wbGV0ZVNldHRpbmdzLmNoYW5nZSkge1xuICAgICAgdGhpcy5hdXRvQ29tcGxldGVTZXR0aW5ncz8uY2hhbmdlKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBvbkF1dG9jb21wbGV0ZVNlbGVjdGVkKGV2ZW50OiBhbnkpIHtcbiAgICBpZiAodGhpcy5hdXRvQ29tcGxldGVTZXR0aW5ncyAmJiB0aGlzLmF1dG9Db21wbGV0ZVNldHRpbmdzLnNlbGVjdGVkKSB7XG4gICAgICB0aGlzLmF1dG9Db21wbGV0ZVNldHRpbmdzPy5zZWxlY3RlZChldmVudCk7XG4gICAgfVxuICB9XG5cbiAgb25BdXRvY29tcGxldGVCZWZvcmVPcGVuKGV2ZW50OiBhbnkpIHtcbiAgICBpZiAodGhpcy5hdXRvQ29tcGxldGVTZXR0aW5ncyAmJiB0aGlzLmF1dG9Db21wbGV0ZVNldHRpbmdzLmJlZm9yZW9wZW4pIHtcbiAgICAgIHRoaXMuYXV0b0NvbXBsZXRlU2V0dGluZ3M/LmJlZm9yZW9wZW4oZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZDogYm9vbGVhbiB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSB0aGUgalF1ZXJ5IHdpZGdldCB3aXRoIHRoZSByZXF1ZXN0ZWQgZGlzYWJsZWQgc3RhdGUuXG4gICAgdGhpcy5pc0Rpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBOZWVkZWQgdG8gZXh0cmFjdCB0aGlzIGZ1bmN0aW9uIGZyb20gdGhlICdpbnNlcnRSb3dzJyBmdW5jdGlvbiB3aXRoaW4gdGhlXG4gICAqIFNvaG8gTG9va3VwIGNvbnRyb2wgb2JqZWN0LlxuICAgKiBUT0RPOiBFeHBvc2UgdGhpcyBpbiB0aGUgU29ob3hpIGxpYnJhcnkgQHRpbSBAZWQuY295bGVcbiAgICpcbiAgICogQHRvZG8gcmFpc2UgU09ITyBqaXJhIGlzc3VlXG4gICAqL1xuICBwcm9jZXNzVmFsdWUodmFsdWU6IE9iamVjdCB8IE9iamVjdFtdKTogc3RyaW5nIHtcbiAgICBpZiAoIXZhbHVlIHx8ICF0aGlzLmxvb2t1cCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBsZXQgdmFsID0gJyc7XG4gICAgbGV0IHRvUHJvY2VzczogT2JqZWN0W10gPSB2YWx1ZSBhcyBPYmplY3RbXTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodG9Qcm9jZXNzKSkge1xuICAgICAgdG9Qcm9jZXNzID0gW3RvUHJvY2Vzc107XG4gICAgfVxuXG4gICAgLy8gbWltaWNzIGZ1bmN0aW9uYWxpdHkgaW4gc29ob3hpIGxvb2t1cCBpbnNlcnRSb3dzKClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvUHJvY2Vzcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGN1cnJlbnQgPSAnJztcblxuICAgICAgaWYgKHR5cGVvZiB0b1Byb2Nlc3NbaV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5zZXR0aW5ncy5maWVsZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGN1cnJlbnQgPSAodGhpcy5zZXR0aW5ncy5maWVsZCBhcyBTb2hvTG9va3VwRmllbGRGdW5jdGlvbikodG9Qcm9jZXNzW2ldLCB0aGlzLmxvb2t1cC5lbGVtZW50LCB0aGlzLmxvb2t1cC5ncmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50ID0gKHRvUHJvY2Vzc1tpXSBhcyBhbnkpW3RoaXMuc2V0dGluZ3MuZmllbGQgYXMgc3RyaW5nXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudCA9IHRvUHJvY2Vzc1tpXSBhcyBzdHJpbmc7XG4gICAgICB9XG5cbiAgICAgIHZhbCArPSAoaSAhPT0gMCA/ICcsJyA6ICcnKSArIGN1cnJlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgbG9va3VwIHZhbHVlIHRvIGFsbG93IHRoZSBsb29rdXAgZWxlbWVudCB0byBiZSB1cGRhdGVkIGNvcnJlY3RseS5cbiAgICogVXNlZCB3aGVuIHRoZSBjbGljayBwcm9wZXJ0eSBpcyBzZXQgb24gdGhlIHNvaG94aSBjb250cm9sLlxuICAgKlxuICAgKiBAcGFyYW0gZXZlbnQgLSBzZWxlY3RlZCByb3dcbiAgICogVE9ETzogRXhwb3NlIHRoaXMgaW4gdGhlIFNvaG94aSBsaWJyYXJ5IEB0aW0gQGVkLmNveWxlXG4gICAqXG4gICAqIEB0b2RvIHJhaXNlIFNPSE8gamlyYSBpc3N1ZVxuICAgKi9cbiAgc2V0VmFsdWUoZXZlbnQ6IFNvaG9Mb29rdXBDaGFuZ2VFdmVudFtdKSB7XG4gICAgaWYgKHRoaXMubG9va3VwKSB7XG4gICAgICB0aGlzLnBhcnNlVmFsdWUoZXZlbnQpO1xuXG4gICAgICAvLyBtaW1pY3MgZnVuY3Rpb25hbGl0eSBpbiBzb2hveGkgbG9va3VwIGluc2VydFJvd3MoKVxuICAgICAgdGhpcy5sb29rdXAuZWxlbWVudC52YWwodGhpcy5pbnRlcm5hbFZhbHVlKS50cmlnZ2VyKCdjaGFuZ2UnLCBbZXZlbnRdKTtcbiAgICAgIHRoaXMubG9va3VwLmVsZW1lbnQudHJpZ2dlcignZm9jdXMnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgd3JpdGVWYWx1ZSB0byBhbGxvdyB0aGUgbG9va3VwXG4gICAqIGVsZW1lbnQgdG8gYmUgdXBkYXRlZCBjb3JyZWN0bHkuXG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZSAtIHRoZSBuZXcgdmFsdWVcbiAgICovXG4gIHdyaXRlVmFsdWUodmFsdWU6IGFueSkge1xuICAgIHN1cGVyLndyaXRlVmFsdWUodmFsdWUpO1xuICAgIGlmICh0aGlzLmxvb2t1cCkge1xuICAgICAgLy8gVGhlIHByb2Nlc3NpbmcgaXMgcmVxdWlyZWQgdG8gZW5zdXJlIHdlIHVzZSB0aGUgY29ycmVjdCBmb3JtYXRcbiAgICAgIC8vIGluIHRoZSBjb250cm9sLlxuICAgICAgdGhpcy5sb29rdXAuZWxlbWVudC52YWwodGhpcy5wcm9jZXNzVmFsdWUodmFsdWUpKTtcbiAgICB9XG4gIH1cblxuICAvLyBwcml2YXRlIG1ldGhvZHNcblxuICAvKipcbiAgICogRXZhbHVhdGUgdGhlIGV2ZW50IHBhcmFtIGFuZCBwYXJzZSB0aGUgdmFsdWVcbiAgICovXG4gIHByaXZhdGUgcGFyc2VWYWx1ZShldmVudDogU29ob0xvb2t1cENoYW5nZUV2ZW50W10pIHtcbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAvLyBzb21ldGltZXMgdGhlIGV2ZW50IGlzIG5vdCBhdmFpbGFibGVcbiAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZSA9IHRoaXMubG9va3VwPy5lbGVtZW50LnZhbCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudC5sZW5ndGggJiYgZXZlbnQubGVuZ3RoID09PSAxICYmICF0aGlzLmlzTXVsdGlzZWxlY3QoKSkge1xuICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlID0gdGhpcy5hc29iamVjdCA/IGV2ZW50WzBdLmRhdGEgOiB0aGlzLnByb2Nlc3NWYWx1ZShldmVudFswXS5kYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlID0gZXZlbnQubWFwKHZhbCA9PiB0aGlzLmFzb2JqZWN0ID8gdmFsLmRhdGEgOiB0aGlzLnByb2Nlc3NWYWx1ZSh2YWwuZGF0YSkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbWFya0ZvclVwZGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgfVxufVxuIl19