import { Component, Input, HostBinding, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';
import * as i0 from "@angular/core";
export class SohoTagListComponent {
    get isTagList() {
        return true;
    }
    /**
     * Creates an instance of SohoTagListComponent.
     *
     * @param element wrapped element.
     * @param ngZone angular zone.
     *
     */
    constructor(element, ngZone) {
        this.element = element;
        this.ngZone = ngZone;
        /**
         * Fired before a tag item is removed.
         */
        this.beforeRemove = new EventEmitter();
        /**
         * Fired after a tag item is removed.
         */
        this.afterRemove = new EventEmitter();
    }
    ngAfterViewInit() {
        // Call outside the angular zone so change detection
        // isn't triggered by the soho component.
        this.ngZone.runOutsideAngular(() => {
            this.jQueryElement = jQuery(this.element.nativeElement);
            // Add event handlers for the outer tag list.
            this.jQueryElement
                .on('aftertagremove', (e, tag) => this.onAfterTagRemove(e, tag));
            this.jQueryElement
                .on('beforetagremove', (e, tag) => this.onBeforeTagRemove(e, tag));
        });
    }
    onAfterTagRemove(e, tag) {
        this.ngZone.run(() => {
            e.tag = tag;
            this.afterRemove.next(e);
        });
    }
    onBeforeTagRemove(e, tag) {
        this.ngZone.run(() => {
            e.tag = tag;
            this.beforeRemove.next(e);
        });
    }
    ngOnDestroy() {
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                // remove the event listeners on this element.
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoTagListComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoTagListComponent, selector: "[soho-tag-list]", outputs: { beforeRemove: "beforeRemove", afterRemove: "afterRemove" }, host: { properties: { "class.tag-list": "this.isTagList" } }, ngImport: i0, template: '<ng-content></ng-content>', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoTagListComponent, decorators: [{
            type: Component,
            args: [{
                    selector: '[soho-tag-list]',
                    template: '<ng-content></ng-content>',
                    changeDetection: ChangeDetectionStrategy.OnPush
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { isTagList: [{
                type: HostBinding,
                args: ['class.tag-list']
            }], beforeRemove: [{
                type: Output
            }], afterRemove: [{
                type: Output
            }] } });
/**
 * Angular Support for elements styled as SohoXi tags.  The styling can be
 * controlled using the additional tag type, specified on element.
 *
 * They can be mixed in with other elements like lists, grids and search fields.
 *
 *<pre>
 * {@code
 * <span soho-tag='error'>#Error</span>
 * }
 *</pre>
 *
 * @export
 *
 *
 *
 */
export class SohoTagComponent {
    // -------------------------------------------
    // Supported tag types.
    // -------------------------------------------
    static { this.ALERT = 'alert'; }
    static { this.GOOD = 'good'; }
    static { this.SECONDARY = 'secondary'; }
    static { this.ERROR = 'error'; }
    static { this.INFO = 'info'; }
    static { this.DEFAULT = undefined; }
    get isTag() {
        return true;
    }
    get alert() {
        return this.tagType === SohoTagComponent.ALERT;
    }
    get good() {
        return this.tagType === SohoTagComponent.GOOD;
    }
    get secondary() {
        return this.tagType === SohoTagComponent.SECONDARY;
    }
    get error() {
        return this.tagType === SohoTagComponent.ERROR;
    }
    get info() {
        return this.tagType === SohoTagComponent.INFO;
    }
    /**
     * Allow override of element name, to match the component name.
     */
    // eslint-disable-next-line @angular-eslint/no-input-rename
    set sohoTag(type) {
        if (!type) {
            type = SohoTagComponent.DEFAULT;
        }
        this.tagType = type;
        this.options.style = type;
        this.updated();
    }
    /**
     * Creates an instance of SohoTagComponent.
     */
    constructor(element, ngZone) {
        this.element = element;
        this.ngZone = ngZone;
        // -------------------------------------------
        // Component Output
        // -------------------------------------------
        /**
         * Fired before a tag item is removed.
         */
        this.beforeTagRemove = new EventEmitter();
        /**
         * Fired after a tag item is removed.
         *
         * @todo remove usage of native element
         */
        // eslint-disable-next-line @angular-eslint/no-output-native
        this.click = new EventEmitter();
        /** Options. */
        this.options = {};
    }
    ngAfterViewInit() {
        // call outside the angular zone so change detection
        // isn't triggered by the soho component.
        this.ngZone.runOutsideAngular(() => {
            // assign element to local variable
            this.jQueryElement = jQuery(this.element.nativeElement);
            // initialise the tag control
            this.jQueryElement.tag(this.options);
            // extract the api
            this.tag = this.jQueryElement.data('tag');
            // @todo - add event binding control so we don't bind if not required.
            // this.jQueryElement
            const tagElem = this.tag?.element;
            const parent = tagElem ? jQuery(tagElem).parent() : null;
            this.jQueryElement
                .on('click', (e) => this.onClick(e));
            if (parent) {
                parent.on('beforetagremove', (e, tag) => this.onBeforeTagRemove(e, tag));
            }
        });
    }
    onBeforeTagRemove(event, tag) {
        this.ngZone.run(() => {
            event.tag = tag;
            this.beforeTagRemove.next(event);
        });
    }
    onClick(event) {
        this.ngZone.run(() => this.click.next(event));
    }
    /**
     * The settings have been updated.
     */
    updated() {
        if (this.tag) {
            this.ngZone.runOutsideAngular(() => this.tag?.updated(this.options));
        }
    }
    /**
     * Destroys the component.
     *
     *
     */
    ngOnDestroy() {
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                // remove the event listeners on this element.
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
            // Destroy any widget resources.
            if (this.tag) {
                this.tag.destroy();
                this.tag = null;
            }
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoTagComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoTagComponent, selector: "[soho-tag]", inputs: { isClickable: "isClickable", isDismissible: "isDismissible", sohoTag: ["soho-tag", "sohoTag"] }, outputs: { beforeTagRemove: "beforeTagRemove", click: "click" }, host: { properties: { "class.tag": "this.isTag", "class.alert": "this.alert", "class.good": "this.good", "class.secondary": "this.secondary", "class.error": "this.error", "class.info": "this.info", "class.is-linkable": "this.isClickable", "class.is-dismissible": "this.isDismissible" } }, ngImport: i0, template: '<ng-content></ng-content>', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoTagComponent, decorators: [{
            type: Component,
            args: [{
                    selector: '[soho-tag]',
                    template: '<ng-content></ng-content>',
                    changeDetection: ChangeDetectionStrategy.OnPush
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { beforeTagRemove: [{
                type: Output
            }], click: [{
                type: Output
            }], isTag: [{
                type: HostBinding,
                args: ['class.tag']
            }], alert: [{
                type: HostBinding,
                args: ['class.alert']
            }], good: [{
                type: HostBinding,
                args: ['class.good']
            }], secondary: [{
                type: HostBinding,
                args: ['class.secondary']
            }], error: [{
                type: HostBinding,
                args: ['class.error']
            }], info: [{
                type: HostBinding,
                args: ['class.info']
            }], isClickable: [{
                type: HostBinding,
                args: ['class.is-linkable']
            }, {
                type: Input
            }], isDismissible: [{
                type: HostBinding,
                args: ['class.is-dismissible']
            }, {
                type: Input
            }], sohoTag: [{
                type: Input,
                args: ['soho-tag']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby10YWcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi90YWcvc29oby10YWcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLFdBQVcsRUFLWCxNQUFNLEVBQ04sWUFBWSxFQUNaLHVCQUF1QixFQUN4QixNQUFNLGVBQWUsQ0FBQzs7QUFzQnZCLE1BQU0sT0FBTyxvQkFBb0I7SUFDL0IsSUFBbUMsU0FBUztRQUMxQyxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFpQkQ7Ozs7OztPQU1HO0lBQ0gsWUFDVSxPQUFtQixFQUNuQixNQUFjO1FBRGQsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQUNuQixXQUFNLEdBQU4sTUFBTSxDQUFRO1FBeEJ4Qjs7V0FFRztRQUNPLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQTRCLENBQUM7UUFFdEU7O1dBRUc7UUFDTyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUEyQixDQUFDO0lBZ0J4QyxDQUFDO0lBRTdCLGVBQWU7UUFDYixvREFBb0Q7UUFDcEQseUNBQXlDO1FBQ3pDLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFO1lBQ2pDLElBQUksQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7WUFFeEQsNkNBQTZDO1lBQzdDLElBQUksQ0FBQyxhQUFhO2lCQUNmLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLENBQXdCLEVBQUUsR0FBWSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDbkcsSUFBSSxDQUFDLGFBQWE7aUJBQ2YsRUFBRSxDQUFDLGlCQUFpQixFQUFFLENB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LEVBQUU7Z0JBQ3RCLDhDQUE4QztnQkFDOUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLEVBQUUsQ0FBQztnQkFDekIsSUFBSSxDQUFDLGFBQWEsR0FBRyxTQUFTLENBQUM7YUFDaEM7WUFFRCxnQ0FBZ0M7WUFDaEMsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFO2dCQUNaLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ25CLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDO2FBQ2pCO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDOzhHQTlKVSxnQkFBZ0I7a0dBQWhCLGdCQUFnQiw4ZkFIakIsMkJBQTJCOzsyRkFHMUIsZ0JBQWdCO2tCQUw1QixTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxZQUFZO29CQUN0QixRQUFRLEVBQUUsMkJBQTJCO29CQUNyQyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTtpQkFDaEQ7c0hBb0JXLGVBQWU7c0JBQXhCLE1BQU07Z0JBUUcsS0FBSztzQkFBZCxNQUFNO2dCQUt1QixLQUFLO3NCQUFsQyxXQUFXO3VCQUFDLFdBQVc7Z0JBS3BCLEtBQUs7c0JBRFIsV0FBVzt1QkFBQyxhQUFhO2dCQU10QixJQUFJO3NCQURQLFdBQVc7dUJBQUMsWUFBWTtnQkFNckIsU0FBUztzQkFEWixXQUFXO3VCQUFDLGlCQUFpQjtnQkFNMUIsS0FBSztzQkFEUixXQUFXO3VCQUFDLGFBQWE7Z0JBTXRCLElBQUk7c0JBRFAsV0FBVzt1QkFBQyxZQUFZO2dCQUtrQixXQUFXO3NCQUFyRCxXQUFXO3VCQUFDLG1CQUFtQjs7c0JBQUcsS0FBSztnQkFFTSxhQUFhO3NCQUExRCxXQUFXO3VCQUFDLHNCQUFzQjs7c0JBQUcsS0FBSztnQkFNcEIsT0FBTztzQkFBN0IsS0FBSzt1QkFBQyxVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgSG9zdEJpbmRpbmcsXG4gIEVsZW1lbnRSZWYsXG4gIEFmdGVyVmlld0luaXQsXG4gIE9uRGVzdHJveSxcbiAgTmdab25lLFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3lcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbi8qKlxuICogU3VwcG9ydCBUYWcgdHlwZXMuXG4gKlxuICogYGVycm9yYCBkaXNwbGF5ZWQgYXMgYW4gZXJyb3IgKGZvciBleGFtcGxlIHdpdGggYSByZWQgYmFja2dyb3VuZCkuXG4gKiBgZ29vZGAgZGlzcGxheWVkIHRvIG1lYW4gY29ycmVjdCBvciB2YWxpZCAoZm9yIGV4YW1wbGUgd2l0aCBhIGdyZWVuIGJhY2tncm91bmQpLlxuICogYGFsZXJ0YCBkaXNwbGF5ZWQgYXMgYW4gYWxlcnQgKGZvciBleGFtcGxlIHdpdGggYSB5ZWxsb3cgYmFja2dyb3VuZCkuXG4gKiBgc2Vjb25kYXJ5YCBkaXNwbGF5ZWQgYXMgZ3JleSAtIGxpa2UgYSBzZWNvbmRhcnkgYnV0dG9uLlxuICpcbiAqIExlYXZpbmcgdGhlIHZhbHVlIG9mZiB0aGUgZWxlbWVudCBkaXNwbGF5cyB0aGUgZWxlbWVudCBpbiBpdCdzIGRlZmF1bHQgc3RhdGUuXG4gKlxuICogTm90ZTogWW91IHNob3VsZCBub3QgdXNlIGNvbG9yIGFsb25lIHRvIGluZGljYXRlIHN0YXRlLCB0aGlzIHNob3VsZCBiZSBlaXRoZXJcbiAqIHN1cHBsZW1lbnRlZCB3aXRoIG9mZi1zY3JlZW4gbGFiZWxzIG9yIHZpc3VhbCBsYWJlbHMgbmVhciB0aGUgZWxlbWVudCBleHBsYWluaW5nIHRoZSBzdGF0ZS5cbiAqL1xuZXhwb3J0IHR5cGUgU29ob1RhZ1R5cGUgPSAnZXJyb3InIHwgJ2dvb2QnIHwgJ2FsZXJ0JyB8ICdzZWNvbmRhcnknIHwgJ2luZm8nIHwgdW5kZWZpbmVkO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdbc29oby10YWctbGlzdF0nLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHRlbXBsYXRlOiAnPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PicsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9UYWdMaXN0Q29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy50YWctbGlzdCcpIGdldCBpc1RhZ0xpc3QoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRmlyZWQgYmVmb3JlIGEgdGFnIGl0ZW0gaXMgcmVtb3ZlZC5cbiAgICovXG4gIEBPdXRwdXQoKSBiZWZvcmVSZW1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9UYWdCZWZvcmVSZW1vdmVFdmVudD4oKTtcblxuICAvKipcbiAgICogRmlyZWQgYWZ0ZXIgYSB0YWcgaXRlbSBpcyByZW1vdmVkLlxuICAgKi9cbiAgQE91dHB1dCgpIGFmdGVyUmVtb3ZlID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvVGFnQWZ0ZXJSZW1vdmVFdmVudD4oKTtcblxuICAvKipcbiAgICogVGhlIHdyYXBwZWQgalF1ZXJ5IGVsZW1lbnQuXG4gICAqL1xuICBwcml2YXRlIGpRdWVyeUVsZW1lbnQ/OiBKUXVlcnk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU29ob1RhZ0xpc3RDb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50IHdyYXBwZWQgZWxlbWVudC5cbiAgICogQHBhcmFtIG5nWm9uZSBhbmd1bGFyIHpvbmUuXG4gICAqXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkgeyB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIC8vIENhbGwgb3V0c2lkZSB0aGUgYW5ndWxhciB6b25lIHNvIGNoYW5nZSBkZXRlY3Rpb25cbiAgICAvLyBpc24ndCB0cmlnZ2VyZWQgYnkgdGhlIHNvaG8gY29tcG9uZW50LlxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudCA9IGpRdWVyeSh0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudCk7XG5cbiAgICAgIC8vIEFkZCBldmVudCBoYW5kbGVycyBmb3IgdGhlIG91dGVyIHRhZyBsaXN0LlxuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50XG4gICAgICAgIC5vbignYWZ0ZXJ0YWdyZW1vdmUnLCAoZTogSlF1ZXJ5LlRyaWdnZXJlZEV2ZW50LCB0YWc6IFNvaG9UYWcpID0+IHRoaXMub25BZnRlclRhZ1JlbW92ZShlLCB0YWcpKTtcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudFxuICAgICAgICAub24oJ2JlZm9yZXRhZ3JlbW92ZScsIChlOiBKUXVlcnkuVHJpZ2dlcmVkRXZlbnQsIHRhZzogU29ob1RhZykgPT4gdGhpcy5vbkJlZm9yZVRhZ1JlbW92ZShlLCB0YWcpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgb25BZnRlclRhZ1JlbW92ZShlOiBTb2hvVGFnQWZ0ZXJSZW1vdmVFdmVudCwgdGFnOiBTb2hvVGFnKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIGUudGFnID0gdGFnO1xuICAgICAgdGhpcy5hZnRlclJlbW92ZS5uZXh0KGUpXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIG9uQmVmb3JlVGFnUmVtb3ZlKGU6IFNvaG9UYWdCZWZvcmVSZW1vdmVFdmVudCwgdGFnOiBTb2hvVGFnKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHtcbiAgICAgIGUudGFnID0gdGFnO1xuICAgICAgdGhpcy5iZWZvcmVSZW1vdmUubmV4dChlKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgICAvLyByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVycyBvbiB0aGlzIGVsZW1lbnQuXG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vZmYoKTtcbiAgICAgICAgdGhpcy5qUXVlcnlFbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQW5ndWxhciBTdXBwb3J0IGZvciBlbGVtZW50cyBzdHlsZWQgYXMgU29ob1hpIHRhZ3MuICBUaGUgc3R5bGluZyBjYW4gYmVcbiAqIGNvbnRyb2xsZWQgdXNpbmcgdGhlIGFkZGl0aW9uYWwgdGFnIHR5cGUsIHNwZWNpZmllZCBvbiBlbGVtZW50LlxuICpcbiAqIFRoZXkgY2FuIGJlIG1peGVkIGluIHdpdGggb3RoZXIgZWxlbWVudHMgbGlrZSBsaXN0cywgZ3JpZHMgYW5kIHNlYXJjaCBmaWVsZHMuXG4gKlxuICo8cHJlPlxuICoge0Bjb2RlXG4gKiA8c3BhbiBzb2hvLXRhZz0nZXJyb3InPiNFcnJvcjwvc3Bhbj5cbiAqIH1cbiAqPC9wcmU+XG4gKlxuICogQGV4cG9ydFxuICpcbiAqXG4gKlxuICovXG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ1tzb2hvLXRhZ10nLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHRlbXBsYXRlOiAnPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PicsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9UYWdDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFN1cHBvcnRlZCB0YWcgdHlwZXMuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBzdGF0aWMgQUxFUlQ6IFNvaG9UYWdUeXBlID0gJ2FsZXJ0JztcbiAgc3RhdGljIEdPT0Q6IFNvaG9UYWdUeXBlID0gJ2dvb2QnO1xuICBzdGF0aWMgU0VDT05EQVJZOiBTb2hvVGFnVHlwZSA9ICdzZWNvbmRhcnknO1xuICBzdGF0aWMgRVJST1I6IFNvaG9UYWdUeXBlID0gJ2Vycm9yJztcbiAgc3RhdGljIElORk86IFNvaG9UYWdUeXBlID0gJ2luZm8nO1xuICBzdGF0aWMgREVGQVVMVDogU29ob1RhZ1R5cGUgPSB1bmRlZmluZWQ7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBDb21wb25lbnQgT3V0cHV0XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvKipcbiAgICogRmlyZWQgYmVmb3JlIGEgdGFnIGl0ZW0gaXMgcmVtb3ZlZC5cbiAgICovXG4gIEBPdXRwdXQoKSBiZWZvcmVUYWdSZW1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9UYWdCZWZvcmVSZW1vdmVFdmVudD4oKTtcblxuICAvKipcbiAgICogRmlyZWQgYWZ0ZXIgYSB0YWcgaXRlbSBpcyByZW1vdmVkLlxuICAgKlxuICAgKiBAdG9kbyByZW1vdmUgdXNhZ2Ugb2YgbmF0aXZlIGVsZW1lbnRcbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAYW5ndWxhci1lc2xpbnQvbm8tb3V0cHV0LW5hdGl2ZVxuICBAT3V0cHV0KCkgY2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9UYWdBZnRlclJlbW92ZUV2ZW50PigpO1xuXG4gIC8qKiBPcHRpb25zLiAqL1xuICBwcml2YXRlIG9wdGlvbnM6IFNvaG9UYWdPcHRpb25zID0ge307XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy50YWcnKSBnZXQgaXNUYWcoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmFsZXJ0JylcbiAgZ2V0IGFsZXJ0KCkge1xuICAgIHJldHVybiB0aGlzLnRhZ1R5cGUgPT09IFNvaG9UYWdDb21wb25lbnQuQUxFUlQ7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmdvb2QnKVxuICBnZXQgZ29vZCgpIHtcbiAgICByZXR1cm4gdGhpcy50YWdUeXBlID09PSBTb2hvVGFnQ29tcG9uZW50LkdPT0Q7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnNlY29uZGFyeScpXG4gIGdldCBzZWNvbmRhcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFnVHlwZSA9PT0gU29ob1RhZ0NvbXBvbmVudC5TRUNPTkRBUlk7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmVycm9yJylcbiAgZ2V0IGVycm9yKCkge1xuICAgIHJldHVybiB0aGlzLnRhZ1R5cGUgPT09IFNvaG9UYWdDb21wb25lbnQuRVJST1I7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmluZm8nKVxuICBnZXQgaW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy50YWdUeXBlID09PSBTb2hvVGFnQ29tcG9uZW50LklORk87XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmlzLWxpbmthYmxlJykgQElucHV0KCkgaXNDbGlja2FibGU/OiBib29sZWFuO1xuXG4gIEBIb3N0QmluZGluZygnY2xhc3MuaXMtZGlzbWlzc2libGUnKSBASW5wdXQoKSBpc0Rpc21pc3NpYmxlPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQWxsb3cgb3ZlcnJpZGUgb2YgZWxlbWVudCBuYW1lLCB0byBtYXRjaCB0aGUgY29tcG9uZW50IG5hbWUuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGFuZ3VsYXItZXNsaW50L25vLWlucHV0LXJlbmFtZVxuICBASW5wdXQoJ3NvaG8tdGFnJykgc2V0IHNvaG9UYWcodHlwZTogU29ob1RhZ1R5cGUpIHtcbiAgICBpZiAoIXR5cGUpIHtcbiAgICAgIHR5cGUgPSBTb2hvVGFnQ29tcG9uZW50LkRFRkFVTFQ7XG4gICAgfVxuICAgIHRoaXMudGFnVHlwZSA9IHR5cGU7XG4gICAgdGhpcy5vcHRpb25zLnN0eWxlID0gdHlwZTtcbiAgICB0aGlzLnVwZGF0ZWQoKTtcbiAgfVxuXG4gIHByaXZhdGUgdGFnVHlwZTogU29ob1RhZ1R5cGU7XG5cbiAgcHJpdmF0ZSBqUXVlcnlFbGVtZW50PzogSlF1ZXJ5O1xuXG4gIHRhZz86IFNvaG9UYWcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIFNvaG9UYWdDb21wb25lbnQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkgeyB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIC8vIGNhbGwgb3V0c2lkZSB0aGUgYW5ndWxhciB6b25lIHNvIGNoYW5nZSBkZXRlY3Rpb25cbiAgICAvLyBpc24ndCB0cmlnZ2VyZWQgYnkgdGhlIHNvaG8gY29tcG9uZW50LlxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIC8vIGFzc2lnbiBlbGVtZW50IHRvIGxvY2FsIHZhcmlhYmxlXG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQgPSBqUXVlcnkodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xuXG4gICAgICAvLyBpbml0aWFsaXNlIHRoZSB0YWcgY29udHJvbFxuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50LnRhZyh0aGlzLm9wdGlvbnMpO1xuXG4gICAgICAvLyBleHRyYWN0IHRoZSBhcGlcbiAgICAgIHRoaXMudGFnID0gdGhpcy5qUXVlcnlFbGVtZW50LmRhdGEoJ3RhZycpO1xuXG4gICAgICAvLyBAdG9kbyAtIGFkZCBldmVudCBiaW5kaW5nIGNvbnRyb2wgc28gd2UgZG9uJ3QgYmluZCBpZiBub3QgcmVxdWlyZWQuXG4gICAgICAvLyB0aGlzLmpRdWVyeUVsZW1lbnRcbiAgICAgIGNvbnN0IHRhZ0VsZW0gPSB0aGlzLnRhZz8uZWxlbWVudDtcbiAgICAgIGNvbnN0IHBhcmVudCA9IHRhZ0VsZW0gPyBqUXVlcnkodGFnRWxlbSkucGFyZW50KCkgOiBudWxsO1xuXG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnRcbiAgICAgICAgLm9uKCdjbGljaycsIChlOiBKUXVlcnkuVHJpZ2dlcmVkRXZlbnQpID0+IHRoaXMub25DbGljayhlKSk7XG5cbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50Lm9uKCdiZWZvcmV0YWdyZW1vdmUnLCAoZTogSlF1ZXJ5LlRyaWdnZXJlZEV2ZW50LCB0YWc6IFNvaG9UYWcpID0+IHRoaXMub25CZWZvcmVUYWdSZW1vdmUoZSwgdGFnKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIG9uQmVmb3JlVGFnUmVtb3ZlKGV2ZW50OiBTb2hvVGFnQmVmb3JlUmVtb3ZlRXZlbnQsIHRhZzogU29ob1RhZykge1xuICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB7XG4gICAgICBldmVudC50YWcgPSB0YWc7XG4gICAgICB0aGlzLmJlZm9yZVRhZ1JlbW92ZS5uZXh0KGV2ZW50KVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBvbkNsaWNrKGV2ZW50OiBKUXVlcnkuVHJpZ2dlcmVkRXZlbnQpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT5cbiAgICAgIHRoaXMuY2xpY2submV4dChldmVudCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzZXR0aW5ncyBoYXZlIGJlZW4gdXBkYXRlZC5cbiAgICovXG4gIHB1YmxpYyB1cGRhdGVkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRhZykge1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy50YWc/LnVwZGF0ZWQodGhpcy5vcHRpb25zKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3lzIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqXG4gICAqL1xuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAgIC8vIHJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXJzIG9uIHRoaXMgZWxlbWVudC5cbiAgICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9mZigpO1xuICAgICAgICB0aGlzLmpRdWVyeUVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIERlc3Ryb3kgYW55IHdpZGdldCByZXNvdXJjZXMuXG4gICAgICBpZiAodGhpcy50YWcpIHtcbiAgICAgICAgdGhpcy50YWcuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnRhZyA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==