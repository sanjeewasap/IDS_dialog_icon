/**
 * Wrapper for the jQuery about control.
 */
export class SohoAboutRef {
    /**
     * Sets the whole options block for this modal dialog.
     *
     * @param options - the options to set.
     */
    options(options) {
        this._options = options || {};
        return this;
    }
    /**
     * Sets the appName on the about dialog
     *
     * @param appName - the application name
     */
    appName(appName) {
        this._options.appName = appName;
        return this;
    }
    /**
     * Sets the additional 'content' that the about dialog displays.
     *
     * @param content - the additional text content
     */
    content(content) {
        this._options.content = content;
        return this;
    }
    /**
     * Sets the copyrightYear of the about dialog.
     */
    copyrightYear(copyrightYear) {
        this._options.copyrightYear = copyrightYear;
        return this;
    }
    /**
     * Sets Whether or not to show the deviceSpecs
     *
     * @param deviceSpecs - if true; the about dialog will show device info
     */
    deviceSpecs(deviceSpecs) {
        this._options.deviceSpecs = deviceSpecs;
        return this;
    }
    /**
     * Sets The Additional productName
     *
     * @param productName - the product name
     */
    productName(productName) {
        this._options.productName = productName;
        return this;
    }
    /**
     * Sets The Additional productName
     *
     * @param productName - the product name
     */
    useDefaultCopyright(useDefaultCopyright) {
        this._options.useDefaultCopyright = useDefaultCopyright;
        return this;
    }
    /**
     * Sets about dialog version
     *
     * @param version - the semantic version no fx 4.0.1
     */
    version(version) {
        this._options.version = version;
        return this;
    }
    /**
     * Add extra attributes like id's to the component
     *
     * @param attributes - the array or object of attributes to add
     */
    attributes(attributes) {
        this._options.attributes = attributes;
        return this;
    }
    /**
     * Constructor.
     *
     * @param placeholder for the about dialog; defaults to the body.
     */
    constructor(ngZone) {
        this.ngZone = ngZone;
        this.eventGuard = {};
        // -------------------------------------------
        // Default options block
        // -------------------------------------------
        /**
         * Cached options.
         */
        this._options = {};
        this._placeholder = $('body');
    }
    /**
     * Displays the about dialog.
     *
     * @return the dialog ref.
     */
    open() {
        // Returns the body!
        this._placeholder.about(this._options);
        // Need a better way of locating the about dialog dialog.
        this.jQueryElement = this._placeholder.find('.about');
        this._about = this.jQueryElement.data('about');
        this.jQueryElement?.off('beforeopen.about').on('beforeopen.about', ((event) => this.ngZone.run(() => this.onBeforeOpen(event))));
        this.jQueryElement?.off('close.about').on('close.about', ((event) => this.ngZone.run(() => this.onClose(event))));
        this.jQueryElement?.off('afterclose.about').on('afterclose.about', ((event) => this.ngZone.run(() => this.onAfterClose(event))));
        return this;
    }
    /**
     * Closes the about dialog, if open.
     *
     * @param dialogResult - optional result - held for the caller.
     */
    close() {
        if (this._about) {
            this._about.close();
        }
        return this;
    }
    /**
     * Registers a before open guard.
     *
     * @param eventFn - the function to call before openning the dialog.
     */
    beforeOpen(eventFn) {
        this.eventGuard.beforeOpen = eventFn;
        return this;
    }
    /**
     * Registers a closed guard.
     *
     * @param eventFn - the function to call before openning the dialog.
     */
    closed(eventFn) {
        this.eventGuard.closed = eventFn;
        return this;
    }
    /**
     * Registers a after close guard.
     *
     * @param eventFn - the function to call before openning the dialog.
     */
    afterClose(eventFn) {
        this.eventGuard.afterClose = eventFn;
        return this;
    }
    /**
     * Handles the 'beforeOpen' event, fired before the modal dialog
     * has been opened.
     *
     * @param event - full event object.
     *
     * @return true if the dialog can be opened; otherwise false if veoted.
     */
    onBeforeOpen(_event) {
        const fn = this.eventGuard?.beforeOpen;
        return fn ? fn.call(this.eventGuard, this) : true;
    }
    /**
     * Handles the 'closed' event, fired before the modal dialog
     * has been opened.
     *
     * @param event - full event object.
     *
     * @return true if the dialog can be opened; otherwise false if veoted.
     */
    onClose(_event) {
        const fn = this.eventGuard?.closed;
        return fn ? fn.call(this.eventGuard, this) : true;
    }
    /**
     * Handles the 'afterClose' event, fired before the modal dialog
     * has been opened.
     *
     * @param event - full event object.
     *
     * @return true if the dialog can be opened; otherwise false if veoted.
     */
    onAfterClose(_event) {
        const fn = this.eventGuard?.afterClose;
        return fn ? fn.call(this.eventGuard, this) : true;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1hYm91dC5yZWYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9pZHMtZW50ZXJwcmlzZS1uZy9zcmMvbGliL2Fib3V0L3NvaG8tYWJvdXQucmVmLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBOztHQUVHO0FBQ0gsTUFBTSxPQUFPLFlBQVk7SUFxQnZCOzs7O09BSUc7SUFDSCxPQUFPLENBQUMsT0FBMEI7UUFDaEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLElBQUksRUFBRSxDQUFDO1FBQzlCLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxPQUFPLENBQUMsT0FBZTtRQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDaEMsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILE9BQU8sQ0FBQyxPQUFlO1FBQ3JCLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUNoQyxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRDs7T0FFRztJQUNILGFBQWEsQ0FBQyxhQUFxQjtRQUNqQyxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7UUFDNUMsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFdBQVcsQ0FBQyxXQUFvQjtRQUM5QixJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDeEMsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFdBQVcsQ0FBQyxXQUFtQjtRQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDeEMsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILG1CQUFtQixDQUFDLG1CQUE0QjtR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QUFDLFVBQWtCLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQztRQUM5QyxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0ssWUFBWSxDQUFDLE1BQVc7UUFDOUIsTUFBTSxFQUFFLEdBQWMsSUFBSSxDQUFDLFVBQVUsRUFBRSxVQUFrQixDQUFDO1FBQzFELE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUNwRCxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNLLE9BQU8sQ0FBQyxNQUFXO1FBQ3pCLE1BQU0sRUFBRSxHQUFjLElBQUksQ0FBQyxVQUFVLEVBQUUsTUFBYyxDQUFDO1FBQ3RELE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUNwRCxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNLLFlBQVksQ0FBQyxNQUFXO1FBQzlCLE1BQU0sRUFBRSxHQUFjLElBQUksQ0FBQyxVQUFVLEVBQUUsVUFBa0IsQ0FBQztRQUMxRCxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDcEQsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmdab25lIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbi8qKlxuICogV3JhcHBlciBmb3IgdGhlIGpRdWVyeSBhYm91dCBjb250cm9sLlxuICovXG5leHBvcnQgY2xhc3MgU29ob0Fib3V0UmVmIHtcbiAgcHJpdmF0ZSBldmVudEd1YXJkOiBTb2hvQWJvdXREaWFsb2dFdmVudEd1YXJkIHwgbnVsbCB8IHVuZGVmaW5lZCA9IHt9O1xuXG4gIC8qKiBTZWxlY3RvciByZWZlcmVuY2luZyB0aGUgYWJvdXQtZGlhbG9nIGFmdGVyIGl0IGhhcyBiZWVuIG1vdmVkIHRvIHRoZSBkaWFsb2cgY29udGFpbmVyLiAqL1xuICBwcml2YXRlIGpRdWVyeUVsZW1lbnQ/OiBKUXVlcnk7XG5cbiAgLyoqIFNvaG8gQ29udHJvbCBBcGkgKi9cbiAgcHJpdmF0ZSBfYWJvdXQ/OiBTb2hvQWJvdXRTdGF0aWM7XG5cbiAgLyoqIERpYWxvZyBwbGFjZWhvbGRlciwgZGVmYXVsdHMgdG8gJCgnYm9keScpKi9cbiAgcHJpdmF0ZSBfcGxhY2Vob2xkZXI6IEpRdWVyeTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIERlZmF1bHQgb3B0aW9ucyBibG9ja1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLyoqXG4gICAqIENhY2hlZCBvcHRpb25zLlxuICAgKi9cbiAgcHJpdmF0ZSBfb3B0aW9uczogU29ob0Fib3V0T3B0aW9ucyA9IHt9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB3aG9sZSBvcHRpb25zIGJsb2NrIGZvciB0aGlzIG1vZGFsIGRpYWxvZy5cbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMgLSB0aGUgb3B0aW9ucyB0byBzZXQuXG4gICAqL1xuICBvcHRpb25zKG9wdGlvbnM/OiBTb2hvQWJvdXRPcHRpb25zKTogU29ob0Fib3V0UmVmIHtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhcHBOYW1lIG9uIHRoZSBhYm91dCBkaWFsb2dcbiAgICpcbiAgICogQHBhcmFtIGFwcE5hbWUgLSB0aGUgYXBwbGljYXRpb24gbmFtZVxuICAgKi9cbiAgYXBwTmFtZShhcHBOYW1lOiBzdHJpbmcpOiBTb2hvQWJvdXRSZWYge1xuICAgIHRoaXMuX29wdGlvbnMuYXBwTmFtZSA9IGFwcE5hbWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgYWRkaXRpb25hbCAnY29udGVudCcgdGhhdCB0aGUgYWJvdXQgZGlhbG9nIGRpc3BsYXlzLlxuICAgKlxuICAgKiBAcGFyYW0gY29udGVudCAtIHRoZSBhZGRpdGlvbmFsIHRleHQgY29udGVudFxuICAgKi9cbiAgY29udGVudChjb250ZW50OiBzdHJpbmcpOiBTb2hvQWJvdXRSZWYge1xuICAgIHRoaXMuX29wdGlvbnMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY29weXJpZ2h0WWVhciBvZiB0aGUgYWJvdXQgZGlhbG9nLlxuICAgKi9cbiAgY29weXJpZ2h0WWVhcihjb3B5cmlnaHRZZWFyOiBzdHJpbmcpOiBTb2hvQWJvdXRSZWYge1xuICAgIHRoaXMuX29wdGlvbnMuY29weXJpZ2h0WWVhciA9IGNvcHlyaWdodFllYXI7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBXaGV0aGVyIG9yIG5vdCB0byBzaG93IHRoZSBkZXZpY2VTcGVjc1xuICAgKlxuICAgKiBAcGFyYW0gZGV2aWNlU3BlY3MgLSBpZiB0cnVlOyB0aGUgYWJvdXQgZGlhbG9nIHdpbGwgc2hvdyBkZXZpY2UgaW5mb1xuICAgKi9cbiAgZGV2aWNlU3BlY3MoZGV2aWNlU3BlY3M6IGJvb2xlYW4pOiBTb2hvQWJvdXRSZWYge1xuICAgIHRoaXMuX29wdGlvbnMuZGV2aWNlU3BlY3MgPSBkZXZpY2VTcGVjcztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIFRoZSBBZGRpdGlvbmFsIHByb2R1Y3ROYW1lXG4gICAqXG4gICAqIEBwYXJhbSBwcm9kdWN0TmFtZSAtIHRoZSBwcm9kdWN0IG5hbWVcbiAgICovXG4gIHByb2R1Y3ROYW1lKHByb2R1Y3ROYW1lOiBzdHJpbmcpOiBTb2hvQWJvdXRSZWYge1xuICAgIHRoaXMuX29wdGlvbnMucHJvZHVjdE5hbWUgPSBwcm9kdWN0TmFtZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIFRoZSBBZGRpdGlvbmFsIHByb2R1Y3ROYW1lXG4gICAqXG4gICAqIEBwYXJhbSBwcm9kdWN0TmFtZSAtIHRoZSBwcm9kdWN0IG5hbWVcbiAgICovXG4gIHVzZURlZmF1bHRDb3B5cmlnaHQodXNlRGVmYXVsdENvcHlyaWdodDogYm9vbGVhbik6IFNvaG9BYm91dFJlZiB7XG4gICAgdGhpcy5fb3B0aW9ucy51c2VEZWZhdWx0Q29weXJpZ2h0ID0gdXNlRGVmYXVsdENvcHlyaWdodDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFib3V0IGRpYWxvZyB2ZXJzaW9uXG4gICAqXG4gICAqIEBwYXJhbSB2ZXJzaW9uIC0gdGhlIHNlbWFudGljIHZlcnNpb24gbm8gZnggNC4wLjFcbiAgICovXG4gIHZlcnNpb24odmVyc2lvbjogc3RyaW5nKTogU29ob0Fib3V0UmVmIHtcbiAgICB0aGlzLl9vcHRpb25zLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBleHRyYSBhdHRyaWJ1dGVzIGxpa2UgaWQncyB0byB0aGUgY29tcG9uZW50XG4gICAqXG4gICAqIEBwYXJhbSBhdHRyaWJ1dGVzIC0gdGhlIGFycmF5IG9yIG9iamVjdCBvZiBhdHRyaWJ1dGVzIHRvIGFkZFxuICAgKi9cbiAgYXR0cmlidXRlcyhhdHRyaWJ1dGVzOiBBcnJheTxPYmplY3Q+IHwgT2JqZWN0KTogU29ob0Fib3V0UmVmIHtcbiAgICB0aGlzLl9vcHRpb25zLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0gcGxhY2Vob2xkZXIgZm9yIHRoZSBhYm91dCBkaWFsb2c7IGRlZmF1bHRzIHRvIHRoZSBib2R5LlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkge1xuICAgIHRoaXMuX3BsYWNlaG9sZGVyID0gJCgnYm9keScpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXlzIHRoZSBhYm91dCBkaWFsb2cuXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIGRpYWxvZyByZWYuXG4gICAqL1xuICBvcGVuKCk6IFNvaG9BYm91dFJlZiB7XG4gICAgLy8gUmV0dXJucyB0aGUgYm9keSFcbiAgICB0aGlzLl9wbGFjZWhvbGRlci5hYm91dCh0aGlzLl9vcHRpb25zKTtcblxuICAgIC8vIE5lZWQgYSBiZXR0ZXIgd2F5IG9mIGxvY2F0aW5nIHRoZSBhYm91dCBkaWFsb2cgZGlhbG9nLlxuICAgIHRoaXMualF1ZXJ5RWxlbWVudCA9IHRoaXMuX3BsYWNlaG9sZGVyLmZpbmQoJy5hYm91dCcpO1xuICAgIHRoaXMuX2Fib3V0ID0gdGhpcy5qUXVlcnlFbGVtZW50LmRhdGEoJ2Fib3V0Jyk7XG5cbiAgICB0aGlzLmpRdWVyeUVsZW1lbnQ/Lm9mZignYmVmb3Jlb3Blbi5hYm91dCcpLm9uKCdiZWZvcmVvcGVuLmFib3V0JywgKChldmVudDogYW55KSA9PiB0aGlzLm5nWm9uZS5ydW4oKCkgPT4gdGhpcy5vbkJlZm9yZU9wZW4oZXZlbnQpKSkpO1xuICAgIHRoaXMualF1ZXJ5RWxlbWVudD8ub2ZmKCdjbG9zZS5hYm91dCcpLm9uKCdjbG9zZS5hYm91dCcsICgoZXZlbnQ6IGFueSkgPT4gdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMub25DbG9zZShldmVudCkpKSk7XG4gICAgdGhpcy5qUXVlcnlFbGVtZW50Py5vZmYoJ2FmdGVyY2xvc2UuYWJvdXQnKS5vbignYWZ0ZXJjbG9zZS5hYm91dCcsICgoZXZlbnQ6IGFueSkgPT4gdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMub25BZnRlckNsb3NlKGV2ZW50KSkpKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgYWJvdXQgZGlhbG9nLCBpZiBvcGVuLlxuICAgKlxuICAgKiBAcGFyYW0gZGlhbG9nUmVzdWx0IC0gb3B0aW9uYWwgcmVzdWx0IC0gaGVsZCBmb3IgdGhlIGNhbGxlci5cbiAgICovXG4gIGNsb3NlKCk6IFNvaG9BYm91dFJlZiB7XG4gICAgaWYgKHRoaXMuX2Fib3V0KSB7XG4gICAgICB0aGlzLl9hYm91dC5jbG9zZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBiZWZvcmUgb3BlbiBndWFyZC5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50Rm4gLSB0aGUgZnVuY3Rpb24gdG8gY2FsbCBiZWZvcmUgb3Blbm5pbmcgdGhlIGRpYWxvZy5cbiAgICovXG4gIGJlZm9yZU9wZW4oZXZlbnRGbjogKGRpYWxvZ1JlZj86IFNvaG9BYm91dFJlZikgPT4gYm9vbGVhbik6IFNvaG9BYm91dFJlZiB7XG4gICAgKHRoaXMuZXZlbnRHdWFyZCBhcyBhbnkpLmJlZm9yZU9wZW4gPSBldmVudEZuO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGNsb3NlZCBndWFyZC5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50Rm4gLSB0aGUgZnVuY3Rpb24gdG8gY2FsbCBiZWZvcmUgb3Blbm5pbmcgdGhlIGRpYWxvZy5cbiAgICovXG4gIGNsb3NlZChldmVudEZuOiAoZGlhbG9nUmVmPzogU29ob0Fib3V0UmVmKSA9PiBib29sZWFuKTogU29ob0Fib3V0UmVmIHtcbiAgICAodGhpcy5ldmVudEd1YXJkIGFzIGFueSkuY2xvc2VkID0gZXZlbnRGbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBhZnRlciBjbG9zZSBndWFyZC5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50Rm4gLSB0aGUgZnVuY3Rpb24gdG8gY2FsbCBiZWZvcmUgb3Blbm5pbmcgdGhlIGRpYWxvZy5cbiAgICovXG4gIGFmdGVyQ2xvc2UoZXZlbnRGbjogKGRpYWxvZ1JlZj86IFNvaG9BYm91dFJlZikgPT4gYm9vbGVhbik6IFNvaG9BYm91dFJlZiB7XG4gICAgKHRoaXMuZXZlbnRHdWFyZCBhcyBhbnkpLmFmdGVyQ2xvc2UgPSBldmVudEZuO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlICdiZWZvcmVPcGVuJyBldmVudCwgZmlyZWQgYmVmb3JlIHRoZSBtb2RhbCBkaWFsb2dcbiAgICogaGFzIGJlZW4gb3BlbmVkLlxuICAgKlxuICAgKiBAcGFyYW0gZXZlbnQgLSBmdWxsIGV2ZW50IG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB0cnVlIGlmIHRoZSBkaWFsb2cgY2FuIGJlIG9wZW5lZDsgb3RoZXJ3aXNlIGZhbHNlIGlmIHZlb3RlZC5cbiAgICovXG4gIHByaXZhdGUgb25CZWZvcmVPcGVuKF9ldmVudDogYW55KTogYm9vbGVhbiB7XG4gICAgY29uc3QgZm46IEZ1bmN0aW9uID0gKHRoaXMuZXZlbnRHdWFyZD8uYmVmb3JlT3BlbiBhcyBhbnkpO1xuICAgIHJldHVybiBmbiA/IGZuLmNhbGwodGhpcy5ldmVudEd1YXJkLCB0aGlzKSA6IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgJ2Nsb3NlZCcgZXZlbnQsIGZpcmVkIGJlZm9yZSB0aGUgbW9kYWwgZGlhbG9nXG4gICAqIGhhcyBiZWVuIG9wZW5lZC5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50IC0gZnVsbCBldmVudCBvYmplY3QuXG4gICAqXG4gICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgZGlhbG9nIGNhbiBiZSBvcGVuZWQ7IG90aGVyd2lzZSBmYWxzZSBpZiB2ZW90ZWQuXG4gICAqL1xuICBwcml2YXRlIG9uQ2xvc2UoX2V2ZW50OiBhbnkpOiBib29sZWFuIHtcbiAgICBjb25zdCBmbjogRnVuY3Rpb24gPSAodGhpcy5ldmVudEd1YXJkPy5jbG9zZWQgYXMgYW55KTtcbiAgICByZXR1cm4gZm4gPyBmbi5jYWxsKHRoaXMuZXZlbnRHdWFyZCwgdGhpcykgOiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlICdhZnRlckNsb3NlJyBldmVudCwgZmlyZWQgYmVmb3JlIHRoZSBtb2RhbCBkaWFsb2dcbiAgICogaGFzIGJlZW4gb3BlbmVkLlxuICAgKlxuICAgKiBAcGFyYW0gZXZlbnQgLSBmdWxsIGV2ZW50IG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB0cnVlIGlmIHRoZSBkaWFsb2cgY2FuIGJlIG9wZW5lZDsgb3RoZXJ3aXNlIGZhbHNlIGlmIHZlb3RlZC5cbiAgICovXG4gIHByaXZhdGUgb25BZnRlckNsb3NlKF9ldmVudDogYW55KTogYm9vbGVhbiB7XG4gICAgY29uc3QgZm46IEZ1bmN0aW9uID0gKHRoaXMuZXZlbnRHdWFyZD8uYWZ0ZXJDbG9zZSBhcyBhbnkpO1xuICAgIHJldHVybiBmbiA/IGZuLmNhbGwodGhpcy5ldmVudEd1YXJkLCB0aGlzKSA6IHRydWU7XG4gIH1cbn1cblxuXG4vKipcbiAqIEV2ZW50IEhhbmRsZXJzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNvaG9BYm91dERpYWxvZ0V2ZW50R3VhcmQge1xuICAvKipcbiAgICogSW52b2tlZCBiZWZvcmUgYSBtb2RhbCBpcyBvcGVuZWQuXG4gICAqXG4gICAqIEByZXR1cm4gZmFsc2UgdG8gdmV0byB0aGUgb3BlbiBhY3Rpb247IG90aGVyd2lzZSB0cnVlLlxuICAgKi9cbiAgYmVmb3JlT3Blbj8oZGlhbG9nUmVmOiBTb2hvQWJvdXRSZWYpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gY2xvc2luZyBhIG1vZGFsLlxuICAgKlxuICAgKiBAcmV0dXJuIGZhbHNlIHRvIHZldG8gdGhlIG9wZW4gYWN0aW9uOyBvdGhlcndpc2UgdHJ1ZS5cbiAgICovXG4gIGNsb3NlZD8oZGlhbG9nUmVmOiBTb2hvQWJvdXRSZWYpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBJbnZva2VkIGFmdGVyIHRoZSBtb2RhbCBpcyBjbG9zZWQuXG4gICAqXG4gICAqIEByZXR1cm4gZmFsc2UgdG8gdmV0byB0aGUgb3BlbiBhY3Rpb247IG90aGVyd2lzZSB0cnVlLlxuICAgKi9cbiAgYWZ0ZXJDbG9zZT8oZGlhbG9nUmVmOiBTb2hvQWJvdXRSZWYpOiBib29sZWFuO1xufVxuIl19