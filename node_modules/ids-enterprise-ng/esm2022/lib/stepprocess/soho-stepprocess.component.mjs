import { Component, EventEmitter, HostBinding, Input, Output } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "../button/soho-button.component";
import * as i2 from "../toolbar/soho-toolbar.component";
/**************************************************************
 * STEP LIST TITLE
 **************************************************************/
export class SohoStepListTitleComponent {
    get title() {
        return true;
    }
    get titleWide() {
        return true;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepListTitleComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoStepListTitleComponent, selector: "div[soho-step-list-title]", host: { properties: { "class.title": "this.title", "class.title-wide": "this.titleWide" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepListTitleComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'div[soho-step-list-title]',
                    template: `<ng-content></ng-content>`
                }]
        }], propDecorators: { title: [{
                type: HostBinding,
                args: ['class.title']
            }], titleWide: [{
                type: HostBinding,
                args: ['class.title-wide']
            }] } });
/**************************************************************
 * STEP LIST
 **************************************************************/
export class SohoStepListComponent {
    constructor() {
        this.isTree = true;
        this.isJSStepTreeScroll = true;
        // -----------------------------------------------------------------
        // required by stepcontrol. make sure this id and the one passed
        // into the stepcontrol settings match.
        // -----------------------------------------------------------------
        this.id = 'step-list';
        // -----------------------------------------------------------------
        // disallow jquery.initialize() from initializing this as a tree
        // control. Needed due to desire for tree styles but not an actual
        // tree itself.
        // -----------------------------------------------------------------
        this.dataInit = false;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepListComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoStepListComponent, selector: "ul[soho-step-list]", host: { properties: { "class.tree": "this.isTree", "class.js-step-list-scroll": "this.isJSStepTreeScroll", "attr.id": "this.id", "attr.data-init": "this.dataInit" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepListComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'ul[soho-step-list]',
                    template: `<ng-content></ng-content>`
                }]
        }], propDecorators: { isTree: [{
                type: HostBinding,
                args: ['class.tree']
            }], isJSStepTreeScroll: [{
                type: HostBinding,
                args: ['class.js-step-list-scroll']
            }], id: [{
                type: HostBinding,
                args: ['attr.id']
            }], dataInit: [{
                type: HostBinding,
                args: ['attr.data-init']
            }] } });
/**************************************************************
 * SUB STEP LIST
 **************************************************************/
export class SohoSubstepListComponent {
    constructor() {
        this.isFolder = true;
        this.isJSStepFolder = true;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoSubstepListComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoSubstepListComponent, selector: "ul[soho-substep-list]", host: { properties: { "class.folder": "this.isFolder", "class.js-step-folder": "this.isJSStepFolder" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoSubstepListComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'ul[soho-substep-list]',
                    template: `<ng-content></ng-content>`
                }]
        }], propDecorators: { isFolder: [{
                type: HostBinding,
                args: ['class.folder']
            }], isJSStepFolder: [{
                type: HostBinding,
                args: ['class.js-step-folder']
            }] } });
/**************************************************************
 * STEP LIST ITEM
 **************************************************************/
export class SohoStepListItemComponent {
    constructor() {
        this.isSelected = false;
    }
    get jsStep() {
        return true;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepListItemComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoStepListItemComponent, selector: "li[soho-step-list-item]", inputs: { isSelected: "isSelected" }, host: { properties: { "class.js-step": "this.jsStep", "class.is-selected": "this.isSelected" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepListItemComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'li[soho-step-list-item]',
                    template: `<ng-content></ng-content>`
                }]
        }], propDecorators: { jsStep: [{
                type: HostBinding,
                args: ['class.js-step']
            }], isSelected: [{
                type: HostBinding,
                args: ['class.is-selected']
            }, {
                type: Input
            }] } });
/**************************************************************
 * STEP LIST ITEM ANCHOR
 **************************************************************/
export class SohoStepListItemAnchorComponent {
    constructor() {
        this.isJsStepLink = true;
    }
    get hrefAttr() {
        return this.stepId ? '#' + this.stepId : null;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepListItemAnchorComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoStepListItemAnchorComponent, selector: "a[soho-step-list-item-anchor]", inputs: { stepId: "stepId" }, host: { properties: { "class.js-step-link": "this.isJsStepLink", "attr.href": "this.hrefAttr" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepListItemAnchorComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'a[soho-step-list-item-anchor]',
                    template: `<ng-content></ng-content>`
                }]
        }], propDecorators: { isJsStepLink: [{
                type: HostBinding,
                args: ['class.js-step-link']
            }], hrefAttr: [{
                type: HostBinding,
                args: ['attr.href']
            }], stepId: [{
                type: Input
            }] } });
/**************************************************************
 * STEP LIST ITEM TITLE
 **************************************************************/
export class SohoStepListItemTitleComponent {
    constructor() {
        this.treeText = true;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepListItemTitleComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoStepListItemTitleComponent, selector: "span[soho-step-list-item-title]", host: { properties: { "class.tree-text": "this.treeText" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepListItemTitleComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'span[soho-step-list-item-title]',
                    template: `<ng-content></ng-content>`
                }]
        }], propDecorators: { treeText: [{
                type: HostBinding,
                args: ['class.tree-text']
            }] } });
/**************************************************************
 * STEP CONTENT TITLE
 **************************************************************/
export class SohoStepContentTitleComponent {
    constructor() {
        this.isHeading = true;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepContentTitleComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoStepContentTitleComponent, selector: "div[soho-step-content-title]", host: { properties: { "class.heading": "this.isHeading" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepContentTitleComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'div[soho-step-content-title]',
                    template: `<ng-content></ng-content>`
                }]
        }], propDecorators: { isHeading: [{
                type: HostBinding,
                args: ['class.heading']
            }] } });
/**************************************************************
 * STEP CONTENT
 **************************************************************/
export class SohoStepContentComponent {
    get isScrollable() {
        return true;
    }
    get iStepContainer() {
        return true;
    }
    get isJsStepPanelsScroll() {
        return true;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepContentComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoStepContentComponent, selector: "div[soho-step-content]", host: { properties: { "class.scrollable": "this.isScrollable", "class.step-container": "this.iStepContainer", "class.js-step-container-scroll": "this.isJsStepPanelsScroll" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepContentComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'div[soho-step-content]',
                    template: `<ng-content></ng-content>`,
                }]
        }], propDecorators: { isScrollable: [{
                type: HostBinding,
                args: ['class.scrollable']
            }], iStepContainer: [{
                type: HostBinding,
                args: ['class.step-container']
            }], isJsStepPanelsScroll: [{
                type: HostBinding,
                args: ['class.js-step-container-scroll']
            }] } });
/**************************************************************
 * STEP CONTENT PANEL
 **************************************************************/
export class SohoStepContentPanelComponent {
    get isJsStepProcessPanel() {
        return true;
    }
    get idAttr() {
        return this.stepId;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepContentPanelComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoStepContentPanelComponent, selector: "div[soho-step-content-panel]", inputs: { stepId: "stepId" }, host: { properties: { "class.js-step-panel": "this.isJsStepProcessPanel", "attr.id": "this.idAttr" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepContentPanelComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'div[soho-step-content-panel]',
                    template: `<ng-content></ng-content>`,
                }]
        }], propDecorators: { isJsStepProcessPanel: [{
                type: HostBinding,
                args: ['class.js-step-panel']
            }], idAttr: [{
                type: HostBinding,
                args: ['attr.id']
            }], stepId: [{
                type: Input
            }] } });
/**************************************************************
 * MAIN STEP PROCESS COMPONENT
 **************************************************************/
export class SohoStepProcessComponent {
    // ------------------------------------------------------------------------
    // @Inputs
    // ------------------------------------------------------------------------
    /**
     * Whether or not to restrict navigation to next and previous buttons only.
     */
    set linearProgression(linearProgression) {
        this.stepProcessOptions.linearProgression = linearProgression;
        if (this.jQueryElement) {
            this.stepprocess.settings.linearProgression = linearProgression;
        }
    }
    set nextButtonEnable(enabled) {
        if (this.jQueryElement) {
            this.jQueryElement.find('.js-step-link-next').prop('disabled', !enabled);
        }
    }
    set previousButtonEnable(enabled) {
        if (this.jQueryElement) {
            this.jQueryElement.find('.js-step-link-prev').prop('disabled', !enabled);
        }
    }
    set saveCloseButtonEnable(enabled) {
        if (this.jQueryElement) {
            this.jQueryElement.find('.js-btn-save-changes').prop('disabled', !enabled);
        }
    }
    constructor(element) {
        this.element = element;
        this.isStepProcessContainer = true;
        this.isTwoColumn = true;
        this.isFixed = true;
        this.isPageContainer = true;
        this.isNoScroll = true;
        this.nextButtonLabel = 'Next';
        this.previousButtonLabel = 'Previous';
        this.continueButtonLabel = 'Continue';
        this.saveAndCloseButtonLabel = 'Save & Close';
        // ------------------------------------------------------------------------
        // @Outputs
        // ------------------------------------------------------------------------
        this.beforeSelectStep = new EventEmitter();
        this.saveClose = new EventEmitter();
        // The internal stepsOptions object used to construct the stepproces control
        this.stepProcessOptions = {};
        // beforeStepSelect callback that is adapted to an Angular EventEmittier
        this.beforeSelectStepDeferred = $.Deferred();
        this.beforeSelectStepPromise = (args) => {
            this.beforeSelectStepDeferred = $.Deferred();
            if (this.beforeSelectStep.observers.length > 0) {
                // not sure what it would mean to have a multiple observers potentially
                // calling the response function.
                if (this.beforeSelectStep.observers.length !== 1) {
                    console.warn('stepprocess: only 1 observer is allowed for the beforeSelectStep event emitter');
                }
                const beforeSelectStepEvent = {};
                // ------------------------------------------------------------------------------
                // The first beforeSelectStep is called before the this.stepprocess can be set.
                // In that case there is no currentSelectedStep so getting teh currentStepId
                // can be skipped.
                // ------------------------------------------------------------------------------
                if (this.stepprocess) {
                    const $selectedStep = this.stepprocess.getSelectedStep();
                    beforeSelectStepEvent.currentStepId = $selectedStep?.children('a')?.attr('href')?.substring(1);
                }
                if (args.stepLink) {
                    beforeSelectStepEvent.targetStepId = $(args.stepLink)?.attr('href')?.substring(1);
                }
                else {
                    beforeSelectStepEvent.targetStepId = beforeSelectStepEvent.currentStepId;
                }
                beforeSelectStepEvent.isStepping = args.isStepping;
                beforeSelectStepEvent.response = this.beforeSelectStepResponse;
                this.beforeSelectStep.emit(beforeSelectStepEvent);
            }
            else {
                this.beforeSelectStepDeferred.resolve(true);
            }
            return this.beforeSelectStepDeferred.promise();
        };
        this.beforeSelectStepResponse = (response) => {
            if (response.overrideTargetStepId) {
                const stepLinkToSelect = $('.js-step-link[href="#' + response.overrideTargetStepId + '"]');
                this.beforeSelectStepDeferred.resolve(response.continue, stepLinkToSelect);
            }
            else {
                this.beforeSelectStepDeferred.resolve(response.continue);
            }
        };
    }
    ngAfterViewInit() {
        this.stepProcessOptions.stepList = '#step-list';
        this.stepProcessOptions.beforeSelectStep = this.beforeSelectStepPromise;
        this.jQueryElement = jQuery(this.element.nativeElement);
        this.jQueryElement.stepprocess(this.stepProcessOptions);
        this.stepprocess = this.jQueryElement.data('stepprocess');
        this.jQueryElement.find('.js-btn-save-changes').
            on('click', (_e) => {
            this.fireOnSaveClose();
        });
    }
    fireOnSaveClose() {
        const $selectedStep = this.stepprocess?.getSelectedStep();
        const currentStepId = $selectedStep?.children('a')?.attr('href')?.substring(1);
        const event = {
            currentStepId
        };
        this.saveClose.emit(event);
    }
    ngOnDestroy() {
        if (this.stepprocess) {
            this.stepprocess.destroy();
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepProcessComponent, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoStepProcessComponent, selector: "div[soho-stepprocess]", inputs: { linearProgression: "linearProgression", nextButtonLabel: "nextButtonLabel", previousButtonLabel: "previousButtonLabel", continueButtonLabel: "continueButtonLabel", saveAndCloseButtonLabel: "saveAndCloseButtonLabel", nextButtonEnable: "nextButtonEnable", previousButtonEnable: "previousButtonEnable", saveCloseButtonEnable: "saveCloseButtonEnable" }, outputs: { beforeSelectStep: "beforeSelectStep", saveClose: "saveClose" }, host: { properties: { "class.step-process-container": "this.isStepProcessContainer", "class.two-column": "this.isTwoColumn", "class.fixed": "this.isFixed", "class.page-container": "this.isPageContainer", "class.no-scroll": "this.isNoScroll" } }, ngImport: i0, template: "\n<!-- STEP CONTROL STEPS -->\n<div class=\"sidebar\">\n  <div soho-toolbar class=\"toolbar-custom toolbar-collapsible phone-visible\">\n    <soho-toolbar-title>\n      <ng-content select=\"div[soho-step-list-title]\"></ng-content>\n    </soho-toolbar-title>\n  </div>\n  <ng-content select=\"ul[soho-step-list]\"></ng-content>\n  <div class=\"phone-action-bar phone-visible\">\n    <button soho-button=\"secondary\" class=\"btn btn-secondary js-btn-save-changes\">{{saveAndCloseButtonLabel}}</button>\n    <button soho-button=\"primary\" class=\"btn btn-primary js-toggle-sidebar\">{{continueButtonLabel}}</button>\n  </div>\n</div>\n\n<!-- STEP CONTROL CONTENT -->\n<div class=\"main no-scroll\">\n\n  <div class=\"toolbar-custom toolbar-collapsible\">\n    <button soho-button=\"icon\" icon=\"bullet-steps\" class=\"btn-icon btn-toggle-steps js-toggle-sidebar\"></button>\n\n    <ng-content select=\"div[soho-step-content-title]\"></ng-content>\n\n    <div class=\"actions phone-hidden\">\n      <button soho-button=\"tertiary\" class=\"btn-tertiary js-step-link-prev\">{{previousButtonLabel}}</button>\n      <button soho-button=\"tertiary\" class=\"btn-tertiary js-step-link-next\">{{nextButtonLabel}}</button>\n    </div>\n  </div>\n\n  <!-- STEP CONTROL PHONE CONTROLS -->\n  <ng-content select=\"div[soho-step-content]\"></ng-content>\n    <div class=\"phone-action-bar phone-visible\">\n      <button soho-button=\"secondary\" class=\"btn btn-secondary js-btn-save-changes\">{{saveAndCloseButtonLabel}}</button>\n      <button soho-button=\"primary\" class=\"btn btn-primary js-step-link-next\">{{nextButtonLabel}}</button>\n    </div>\n</div>\n", dependencies: [{ kind: "component", type: i1.SohoButtonComponent, selector: "button[soho-button]", inputs: ["soho-button", "buttonOptions", "toggleOnIcon", "toggleOffIcon", "replaceText", "hideMenuArrow", "hitbox", "notificationBadge", "notificationBadgeOptions", "extraIconClass", "isToggle", "isTogglePressed", "icon", "iconAlign", "isSubmit", "ripple", "state", "toggle", "expandableExpander", "moveToLeft", "moveToRight", "moveToSelected"] }, { kind: "component", type: i2.SohoToolbarComponent, selector: "soho-toolbar, div[soho-toolbar]", inputs: ["noActionsButton", "hasMoreButton", "maxVisibleButtons", "rightAligned", "rightAlign", "resizeContainers", "favorButtonset", "moreMenuSettings", "attributes"], outputs: ["beforeActivated", "activated", "afterActivated", "selected", "menuItemMouseOver"] }, { kind: "component", type: i2.SohoToolbarTitleComponent, selector: "soho-toolbar-title" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoStepProcessComponent, decorators: [{
            type: Component,
            args: [{ selector: 'div[soho-stepprocess]', template: "\n<!-- STEP CONTROL STEPS -->\n<div class=\"sidebar\">\n  <div soho-toolbar class=\"toolbar-custom toolbar-collapsible phone-visible\">\n    <soho-toolbar-title>\n      <ng-content select=\"div[soho-step-list-title]\"></ng-content>\n    </soho-toolbar-title>\n  </div>\n  <ng-content select=\"ul[soho-step-list]\"></ng-content>\n  <div class=\"phone-action-bar phone-visible\">\n    <button soho-button=\"secondary\" class=\"btn btn-secondary js-btn-save-changes\">{{saveAndCloseButtonLabel}}</button>\n    <button soho-button=\"primary\" class=\"btn btn-primary js-toggle-sidebar\">{{continueButtonLabel}}</button>\n  </div>\n</div>\n\n<!-- STEP CONTROL CONTENT -->\n<div class=\"main no-scroll\">\n\n  <div class=\"toolbar-custom toolbar-collapsible\">\n    <button soho-button=\"icon\" icon=\"bullet-steps\" class=\"btn-icon btn-toggle-steps js-toggle-sidebar\"></button>\n\n    <ng-content select=\"div[soho-step-content-title]\"></ng-content>\n\n    <div class=\"actions phone-hidden\">\n      <button soho-button=\"tertiary\" class=\"btn-tertiary js-step-link-prev\">{{previousButtonLabel}}</button>\n      <button soho-button=\"tertiary\" class=\"btn-tertiary js-step-link-next\">{{nextButtonLabel}}</button>\n    </div>\n  </div>\n\n  <!-- STEP CONTROL PHONE CONTROLS -->\n  <ng-content select=\"div[soho-step-content]\"></ng-content>\n    <div class=\"phone-action-bar phone-visible\">\n      <button soho-button=\"secondary\" class=\"btn btn-secondary js-btn-save-changes\">{{saveAndCloseButtonLabel}}</button>\n      <button soho-button=\"primary\" class=\"btn btn-primary js-step-link-next\">{{nextButtonLabel}}</button>\n    </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; }, propDecorators: { isStepProcessContainer: [{
                type: HostBinding,
                args: ['class.step-process-container']
            }], isTwoColumn: [{
                type: HostBinding,
                args: ['class.two-column']
            }], isFixed: [{
                type: HostBinding,
                args: ['class.fixed']
            }], isPageContainer: [{
                type: HostBinding,
                args: ['class.page-container']
            }], isNoScroll: [{
                type: HostBinding,
                args: ['class.no-scroll']
            }], linearProgression: [{
                type: Input
            }], nextButtonLabel: [{
                type: Input
            }], previousButtonLabel: [{
                type: Input
            }], continueButtonLabel: [{
                type: Input
            }], saveAndCloseButtonLabel: [{
                type: Input
            }], nextButtonEnable: [{
                type: Input
            }], previousButtonEnable: [{
                type: Input
            }], saveCloseButtonEnable: [{
                type: Input
            }], beforeSelectStep: [{
                type: Output
            }], saveClose: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1zdGVwcHJvY2Vzcy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9pZHMtZW50ZXJwcmlzZS1uZy9zcmMvbGliL3N0ZXBwcm9jZXNzL3NvaG8tc3RlcHByb2Nlc3MuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi9zdGVwcHJvY2Vzcy9zb2hvLXN0ZXBwcm9jZXNzLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFTCxTQUFTLEVBRVQsWUFBWSxFQUNaLFdBQVcsRUFDWCxLQUFLLEVBRUwsTUFBTSxFQUNQLE1BQU0sZUFBZSxDQUFDOzs7O0FBRXZCOztnRUFFZ0U7QUFLaEUsTUFBTSxPQUFPLDBCQUEwQjtJQUNyQyxJQUFnQyxLQUFLO1FBQ25DLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUNELElBQXFDLFNBQVM7UUFDNUMsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDOzhHQU5VLDBCQUEwQjtrR0FBMUIsMEJBQTBCLDhKQUYzQiwyQkFBMkI7OzJGQUUxQiwwQkFBMEI7a0JBSnRDLFNBQVM7bUJBQUM7b0JBQ1QsUUFBUSxFQUFFLDJCQUEyQjtvQkFDckMsUUFBUSxFQUFFLDJCQUEyQjtpQkFDdEM7OEJBRWlDLEtBQUs7c0JBQXBDLFdBQVc7dUJBQUMsYUFBYTtnQkFHVyxTQUFTO3NCQUE3QyxXQUFXO3VCQUFDLGtCQUFrQjs7QUFLakM7O2dFQUVnRTtBQUtoRSxNQUFNLE9BQU8scUJBQXFCO0lBSmxDO1FBSzZCLFdBQU0sR0FBRyxJQUFJLENBQUM7UUFDQyx1QkFBa0IsR0FBRyxJQUFJLENBQUM7UUFFcEUsb0VBQW9FO1FBQ3BFLGdFQUFnRTtRQUNoRSx1Q0FBdUM7UUFDdkMsb0VBQW9FO1FBQzVDLE9BQUUsR0FBRyxXQUFXLENBQUM7UUFFekMsb0VBQW9FO1FBQ3BF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d25EQW9DQTs7MkZEMkhhLHdCQUF3QjtrQkFKcEMsU0FBUzsrQkFDRSx1QkFBdUI7aUdBSVksc0JBQXNCO3NCQUFsRSxXQUFXO3VCQUFDLDhCQUE4QjtnQkFDVixXQUFXO3NCQUEzQyxXQUFXO3VCQUFDLGtCQUFrQjtnQkFDSCxPQUFPO3NCQUFsQyxXQUFXO3VCQUFDLGFBQWE7Z0JBQ1csZUFBZTtzQkFBbkQsV0FBVzt1QkFBQyxzQkFBc0I7Z0JBQ0gsVUFBVTtzQkFBekMsV0FBVzt1QkFBQyxpQkFBaUI7Z0JBU2pCLGlCQUFpQjtzQkFBN0IsS0FBSztnQkFPRyxlQUFlO3NCQUF2QixLQUFLO2dCQUVHLG1CQUFtQjtzQkFBM0IsS0FBSztnQkFFRyxtQkFBbUI7c0JBQTNCLEtBQUs7Z0JBRUcsdUJBQXVCO3NCQUEvQixLQUFLO2dCQUVPLGdCQUFnQjtzQkFBNUIsS0FBSztnQkFNTyxvQkFBb0I7c0JBQWhDLEtBQUs7Z0JBTU8scUJBQXFCO3NCQUFqQyxLQUFLO2dCQVVJLGdCQUFnQjtzQkFBekIsTUFBTTtnQkFFRyxTQUFTO3NCQUFsQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIEhvc3RCaW5kaW5nLFxuICBJbnB1dCxcbiAgT25EZXN0cm95LFxuICBPdXRwdXRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogU1RFUCBMSVNUIFRJVExFXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkaXZbc29oby1zdGVwLWxpc3QtdGl0bGVdJywgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9TdGVwTGlzdFRpdGxlQ29tcG9uZW50IHtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy50aXRsZScpIGdldCB0aXRsZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnRpdGxlLXdpZGUnKSBnZXQgdGl0bGVXaWRlKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogU1RFUCBMSVNUXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd1bFtzb2hvLXN0ZXAtbGlzdF0nLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHRlbXBsYXRlOiBgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PmBcbn0pXG5leHBvcnQgY2xhc3MgU29ob1N0ZXBMaXN0Q29tcG9uZW50IHtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy50cmVlJykgaXNUcmVlID0gdHJ1ZTtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5qcy1zdGVwLWxpc3Qtc2Nyb2xsJykgaXNKU1N0ZXBUcmVlU2Nyb2xsID0gdHJ1ZTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyByZXF1aXJlZCBieSBzdGVwY29udHJvbC4gbWFrZSBzdXJlIHRoaXMgaWQgYW5kIHRoZSBvbmUgcGFzc2VkXG4gIC8vIGludG8gdGhlIHN0ZXBjb250cm9sIHNldHRpbmdzIG1hdGNoLlxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBASG9zdEJpbmRpbmcoJ2F0dHIuaWQnKSBpZCA9ICdzdGVwLWxpc3QnO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIGRpc2FsbG93IGpxdWVyeS5pbml0aWFsaXplKCkgZnJvbSBpbml0aWFsaXppbmcgdGhpcyBhcyBhIHRyZWVcbiAgLy8gY29udHJvbC4gTmVlZGVkIGR1ZSB0byBkZXNpcmUgZm9yIHRyZWUgc3R5bGVzIGJ1dCBub3QgYW4gYWN0dWFsXG4gIC8vIHRyZWUgaXRzZWxmLlxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBASG9zdEJpbmRpbmcoJ2F0dHIuZGF0YS1pbml0JykgZGF0YUluaXQgPSBmYWxzZTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBTVUIgU1RFUCBMSVNUXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd1bFtzb2hvLXN1YnN0ZXAtbGlzdF0nLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHRlbXBsYXRlOiBgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PmBcbn0pXG5leHBvcnQgY2xhc3MgU29ob1N1YnN0ZXBMaXN0Q29tcG9uZW50IHtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mb2xkZXInKSBpc0ZvbGRlciA9IHRydWU7XG4gIEBIb3N0QmluZGluZygnY2xhc3MuanMtc3RlcC1mb2xkZXInKSBpc0pTU3RlcEZvbGRlciA9IHRydWU7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogU1RFUCBMSVNUIElURU1cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpW3NvaG8tc3RlcC1saXN0LWl0ZW1dJywgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9TdGVwTGlzdEl0ZW1Db21wb25lbnQge1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmpzLXN0ZXAnKSBnZXQganNTdGVwKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIEBIb3N0QmluZGluZygnY2xhc3MuaXMtc2VsZWN0ZWQnKSBASW5wdXQoKSBpc1NlbGVjdGVkID0gZmFsc2U7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogU1RFUCBMSVNUIElURU0gQU5DSE9SXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhW3NvaG8tc3RlcC1saXN0LWl0ZW0tYW5jaG9yXScsIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgdGVtcGxhdGU6IGA8bmctY29udGVudD48L25nLWNvbnRlbnQ+YFxufSlcbmV4cG9ydCBjbGFzcyBTb2hvU3RlcExpc3RJdGVtQW5jaG9yQ29tcG9uZW50IHtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5qcy1zdGVwLWxpbmsnKSBpc0pzU3RlcExpbmsgPSB0cnVlO1xuICBASG9zdEJpbmRpbmcoJ2F0dHIuaHJlZicpIGdldCBocmVmQXR0cigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGVwSWQgPyAnIycgKyB0aGlzLnN0ZXBJZCA6IG51bGw7XG4gIH1cblxuICBASW5wdXQoKSBzdGVwSWQ/OiBzdHJpbmc7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogU1RFUCBMSVNUIElURU0gVElUTEVcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3NwYW5bc29oby1zdGVwLWxpc3QtaXRlbS10aXRsZV0nLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHRlbXBsYXRlOiBgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PmBcbn0pXG5leHBvcnQgY2xhc3MgU29ob1N0ZXBMaXN0SXRlbVRpdGxlQ29tcG9uZW50IHtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy50cmVlLXRleHQnKSB0cmVlVGV4dCA9IHRydWU7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogU1RFUCBDT05URU5UIFRJVExFXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkaXZbc29oby1zdGVwLWNvbnRlbnQtdGl0bGVdJywgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9TdGVwQ29udGVudFRpdGxlQ29tcG9uZW50IHtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5oZWFkaW5nJykgaXNIZWFkaW5nID0gdHJ1ZTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBTVEVQIENPTlRFTlRcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Rpdltzb2hvLXN0ZXAtY29udGVudF0nLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIHRlbXBsYXRlOiBgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PmAsXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9TdGVwQ29udGVudENvbXBvbmVudCB7XG4gIEBIb3N0QmluZGluZygnY2xhc3Muc2Nyb2xsYWJsZScpIGdldCBpc1Njcm9sbGFibGUoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zdGVwLWNvbnRhaW5lcicpIGdldCBpU3RlcENvbnRhaW5lcigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmpzLXN0ZXAtY29udGFpbmVyLXNjcm9sbCcpIGdldCBpc0pzU3RlcFBhbmVsc1Njcm9sbCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIFNURVAgQ09OVEVOVCBQQU5FTFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZGl2W3NvaG8tc3RlcC1jb250ZW50LXBhbmVsXScsIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgdGVtcGxhdGU6IGA8bmctY29udGVudD48L25nLWNvbnRlbnQ+YCxcbn0pXG5leHBvcnQgY2xhc3MgU29ob1N0ZXBDb250ZW50UGFuZWxDb21wb25lbnQge1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmpzLXN0ZXAtcGFuZWwnKSBnZXQgaXNKc1N0ZXBQcm9jZXNzUGFuZWwoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgQEhvc3RCaW5kaW5nKCdhdHRyLmlkJykgZ2V0IGlkQXR0cigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGVwSWQ7XG4gIH1cbiAgQElucHV0KCkgc3RlcElkPzogc3RyaW5nO1xufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIE1BSU4gU1RFUCBQUk9DRVNTIENPTVBPTkVOVFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZGl2W3NvaG8tc3RlcHByb2Nlc3NdJywgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB0ZW1wbGF0ZVVybDogJ3NvaG8tc3RlcHByb2Nlc3MuY29tcG9uZW50Lmh0bWwnLFxufSlcbmV4cG9ydCBjbGFzcyBTb2hvU3RlcFByb2Nlc3NDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnN0ZXAtcHJvY2Vzcy1jb250YWluZXInKSBpc1N0ZXBQcm9jZXNzQ29udGFpbmVyID0gdHJ1ZTtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy50d28tY29sdW1uJykgaXNUd29Db2x1bW4gPSB0cnVlO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmZpeGVkJykgaXNGaXhlZCA9IHRydWU7XG4gIEBIb3N0QmluZGluZygnY2xhc3MucGFnZS1jb250YWluZXInKSBpc1BhZ2VDb250YWluZXIgPSB0cnVlO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLm5vLXNjcm9sbCcpIGlzTm9TY3JvbGwgPSB0cnVlO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBASW5wdXRzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0byByZXN0cmljdCBuYXZpZ2F0aW9uIHRvIG5leHQgYW5kIHByZXZpb3VzIGJ1dHRvbnMgb25seS5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBsaW5lYXJQcm9ncmVzc2lvbihsaW5lYXJQcm9ncmVzc2lvbjogYm9vbGVhbikge1xuICAgIHRoaXMuc3RlcFByb2Nlc3NPcHRpb25zLmxpbmVhclByb2dyZXNzaW9uID0gbGluZWFyUHJvZ3Jlc3Npb247XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgKHRoaXMuc3RlcHByb2Nlc3MgYXMgYW55KS5zZXR0aW5ncy5saW5lYXJQcm9ncmVzc2lvbiA9IGxpbmVhclByb2dyZXNzaW9uO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIG5leHRCdXR0b25MYWJlbCA9ICdOZXh0JztcblxuICBASW5wdXQoKSBwcmV2aW91c0J1dHRvbkxhYmVsID0gJ1ByZXZpb3VzJztcblxuICBASW5wdXQoKSBjb250aW51ZUJ1dHRvbkxhYmVsID0gJ0NvbnRpbnVlJztcblxuICBASW5wdXQoKSBzYXZlQW5kQ2xvc2VCdXR0b25MYWJlbCA9ICdTYXZlICYgQ2xvc2UnO1xuXG4gIEBJbnB1dCgpIHNldCBuZXh0QnV0dG9uRW5hYmxlKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQuZmluZCgnLmpzLXN0ZXAtbGluay1uZXh0JykucHJvcCgnZGlzYWJsZWQnLCAhZW5hYmxlZCk7XG4gICAgfVxuICB9XG5cbiAgQElucHV0KCkgc2V0IHByZXZpb3VzQnV0dG9uRW5hYmxlKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQuZmluZCgnLmpzLXN0ZXAtbGluay1wcmV2JykucHJvcCgnZGlzYWJsZWQnLCAhZW5hYmxlZCk7XG4gICAgfVxuICB9XG5cbiAgQElucHV0KCkgc2V0IHNhdmVDbG9zZUJ1dHRvbkVuYWJsZShlbmFibGVkOiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMualF1ZXJ5RWxlbWVudCkge1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50LmZpbmQoJy5qcy1idG4tc2F2ZS1jaGFuZ2VzJykucHJvcCgnZGlzYWJsZWQnLCAhZW5hYmxlZCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEBPdXRwdXRzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIEBPdXRwdXQoKSBiZWZvcmVTZWxlY3RTdGVwID0gbmV3IEV2ZW50RW1pdHRlcjxCZWZvcmVTZWxlY3RTdGVwRXZlbnQ+KCk7XG5cbiAgQE91dHB1dCgpIHNhdmVDbG9zZTogRXZlbnRFbWl0dGVyPFNvaG9TdGVwU2F2ZUNsb3NlRXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvU3RlcFNhdmVDbG9zZUV2ZW50PigpO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJlZmVyZW5jZSB0byB0aGUgalF1ZXJ5IGNvbnRyb2wuXG4gIHByaXZhdGUgalF1ZXJ5RWxlbWVudD86IEpRdWVyeTtcblxuICAvLyBSZWZlcmVuY2UgdG8gdGhlIHNvaG8gc3RlcHByb2Nlc3MgY29udHJvbCBhcGkuXG4gIHByaXZhdGUgc3RlcHByb2Nlc3M/OiBTb2hvU3RlcFByb2Nlc3NTdGF0aWM7XG5cbiAgLy8gVGhlIGludGVybmFsIHN0ZXBzT3B0aW9ucyBvYmplY3QgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHN0ZXBwcm9jZXMgY29udHJvbFxuICBwcml2YXRlIHN0ZXBQcm9jZXNzT3B0aW9uczogU29ob1N0ZXBQcm9jZXNzT3B0aW9ucyA9IHt9O1xuXG4gIC8vIGJlZm9yZVN0ZXBTZWxlY3QgY2FsbGJhY2sgdGhhdCBpcyBhZGFwdGVkIHRvIGFuIEFuZ3VsYXIgRXZlbnRFbWl0dGllclxuICBwcml2YXRlIGJlZm9yZVNlbGVjdFN0ZXBEZWZlcnJlZDogSlF1ZXJ5RGVmZXJyZWQ8Ym9vbGVhbj4gPSAkLkRlZmVycmVkKCk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmKSB7IH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5zdGVwUHJvY2Vzc09wdGlvbnMuc3RlcExpc3QgPSAnI3N0ZXAtbGlzdCc7XG4gICAgdGhpcy5zdGVwUHJvY2Vzc09wdGlvbnMuYmVmb3JlU2VsZWN0U3RlcCA9IHRoaXMuYmVmb3JlU2VsZWN0U3RlcFByb21pc2U7XG5cbiAgICB0aGlzLmpRdWVyeUVsZW1lbnQgPSBqUXVlcnkodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xuICAgIHRoaXMualF1ZXJ5RWxlbWVudC5zdGVwcHJvY2Vzcyh0aGlzLnN0ZXBQcm9jZXNzT3B0aW9ucyk7XG4gICAgdGhpcy5zdGVwcHJvY2VzcyA9IHRoaXMualF1ZXJ5RWxlbWVudC5kYXRhKCdzdGVwcHJvY2VzcycpO1xuICAgIHRoaXMualF1ZXJ5RWxlbWVudC5maW5kKCcuanMtYnRuLXNhdmUtY2hhbmdlcycpLlxuICAgICAgb24oJ2NsaWNrJywgKF9lOiBKUXVlcnkuVHJpZ2dlcmVkRXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5maXJlT25TYXZlQ2xvc2UoKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBiZWZvcmVTZWxlY3RTdGVwUHJvbWlzZSA9IChhcmdzOiB7IHN0ZXBMaW5rOiBKUXVlcnk7IGlzU3RlcHBpbmc6IFN0ZXBEaXJlY3Rpb24gfSk6IEpRdWVyeVByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgIHRoaXMuYmVmb3JlU2VsZWN0U3RlcERlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgaWYgKHRoaXMuYmVmb3JlU2VsZWN0U3RlcC5vYnNlcnZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gbm90IHN1cmUgd2hhdCBpdCB3b3VsZCBtZWFuIHRvIGhhdmUgYSBtdWx0aXBsZSBvYnNlcnZlcnMgcG90ZW50aWFsbHlcbiAgICAgIC8vIGNhbGxpbmcgdGhlIHJlc3BvbnNlIGZ1bmN0aW9uLlxuICAgICAgaWYgKHRoaXMuYmVmb3JlU2VsZWN0U3RlcC5vYnNlcnZlcnMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybignc3RlcHByb2Nlc3M6IG9ubHkgMSBvYnNlcnZlciBpcyBhbGxvd2VkIGZvciB0aGUgYmVmb3JlU2VsZWN0U3RlcCBldmVudCBlbWl0dGVyJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJlZm9yZVNlbGVjdFN0ZXBFdmVudDogQmVmb3JlU2VsZWN0U3RlcEV2ZW50ID0ge30gYXMgYW55O1xuXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIC8vIFRoZSBmaXJzdCBiZWZvcmVTZWxlY3RTdGVwIGlzIGNhbGxlZCBiZWZvcmUgdGhlIHRoaXMuc3RlcHByb2Nlc3MgY2FuIGJlIHNldC5cbiAgICAgIC8vIEluIHRoYXQgY2FzZSB0aGVyZSBpcyBubyBjdXJyZW50U2VsZWN0ZWRTdGVwIHNvIGdldHRpbmcgdGVoIGN1cnJlbnRTdGVwSWRcbiAgICAgIC8vIGNhbiBiZSBza2lwcGVkLlxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICBpZiAodGhpcy5zdGVwcHJvY2Vzcykge1xuICAgICAgICBjb25zdCAkc2VsZWN0ZWRTdGVwID0gdGhpcy5zdGVwcHJvY2Vzcy5nZXRTZWxlY3RlZFN0ZXAoKTtcbiAgICAgICAgYmVmb3JlU2VsZWN0U3RlcEV2ZW50LmN1cnJlbnRTdGVwSWQgPSAkc2VsZWN0ZWRTdGVwPy5jaGlsZHJlbignYScpPy5hdHRyKCdocmVmJyk/LnN1YnN0cmluZygxKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFyZ3Muc3RlcExpbmspIHtcbiAgICAgICAgYmVmb3JlU2VsZWN0U3RlcEV2ZW50LnRhcmdldFN0ZXBJZCA9ICQoYXJncy5zdGVwTGluayk/LmF0dHIoJ2hyZWYnKT8uc3Vic3RyaW5nKDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmVmb3JlU2VsZWN0U3RlcEV2ZW50LnRhcmdldFN0ZXBJZCA9IGJlZm9yZVNlbGVjdFN0ZXBFdmVudC5jdXJyZW50U3RlcElkO1xuICAgICAgfVxuXG4gICAgICBiZWZvcmVTZWxlY3RTdGVwRXZlbnQuaXNTdGVwcGluZyA9IGFyZ3MuaXNTdGVwcGluZztcbiAgICAgIGJlZm9yZVNlbGVjdFN0ZXBFdmVudC5yZXNwb25zZSA9IHRoaXMuYmVmb3JlU2VsZWN0U3RlcFJlc3BvbnNlO1xuICAgICAgdGhpcy5iZWZvcmVTZWxlY3RTdGVwLmVtaXQoYmVmb3JlU2VsZWN0U3RlcEV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5iZWZvcmVTZWxlY3RTdGVwRGVmZXJyZWQucmVzb2x2ZSh0cnVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5iZWZvcmVTZWxlY3RTdGVwRGVmZXJyZWQucHJvbWlzZSgpO1xuICB9O1xuICBwcml2YXRlIGJlZm9yZVNlbGVjdFN0ZXBSZXNwb25zZSA9IChyZXNwb25zZTogQmVmb3JlU2VsZWN0U3RlcFJlc3VsdCkgPT4ge1xuICAgIGlmIChyZXNwb25zZS5vdmVycmlkZVRhcmdldFN0ZXBJZCkge1xuICAgICAgY29uc3Qgc3RlcExpbmtUb1NlbGVjdCA9ICQoJy5qcy1zdGVwLWxpbmtbaHJlZj1cIiMnICsgcmVzcG9uc2Uub3ZlcnJpZGVUYXJnZXRTdGVwSWQgKyAnXCJdJyk7XG4gICAgICB0aGlzLmJlZm9yZVNlbGVjdFN0ZXBEZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmNvbnRpbnVlLCBzdGVwTGlua1RvU2VsZWN0IGFzIGFueSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmVmb3JlU2VsZWN0U3RlcERlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuY29udGludWUpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIGZpcmVPblNhdmVDbG9zZSgpOiB2b2lkIHtcbiAgICBjb25zdCAkc2VsZWN0ZWRTdGVwID0gdGhpcy5zdGVwcHJvY2Vzcz8uZ2V0U2VsZWN0ZWRTdGVwKCk7XG4gICAgY29uc3QgY3VycmVudFN0ZXBJZCA9ICRzZWxlY3RlZFN0ZXA/LmNoaWxkcmVuKCdhJyk/LmF0dHIoJ2hyZWYnKT8uc3Vic3RyaW5nKDEpO1xuICAgIGNvbnN0IGV2ZW50OiBTb2hvU3RlcFNhdmVDbG9zZUV2ZW50ID0ge1xuICAgICAgY3VycmVudFN0ZXBJZFxuICAgIH07XG4gICAgdGhpcy5zYXZlQ2xvc2UuZW1pdChldmVudCk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5zdGVwcHJvY2Vzcykge1xuICAgICAgdGhpcy5zdGVwcHJvY2Vzcy5kZXN0cm95KCk7XG4gICAgfVxuICB9XG59XG4iLCJcbjwhLS0gU1RFUCBDT05UUk9MIFNURVBTIC0tPlxuPGRpdiBjbGFzcz1cInNpZGViYXJcIj5cbiAgPGRpdiBzb2hvLXRvb2xiYXIgY2xhc3M9XCJ0b29sYmFyLWN1c3RvbSB0b29sYmFyLWNvbGxhcHNpYmxlIHBob25lLXZpc2libGVcIj5cbiAgICA8c29oby10b29sYmFyLXRpdGxlPlxuICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiZGl2W3NvaG8tc3RlcC1saXN0LXRpdGxlXVwiPjwvbmctY29udGVudD5cbiAgICA8L3NvaG8tdG9vbGJhci10aXRsZT5cbiAgPC9kaXY+XG4gIDxuZy1jb250ZW50IHNlbGVjdD1cInVsW3NvaG8tc3RlcC1saXN0XVwiPjwvbmctY29udGVudD5cbiAgPGRpdiBjbGFzcz1cInBob25lLWFjdGlvbi1iYXIgcGhvbmUtdmlzaWJsZVwiPlxuICAgIDxidXR0b24gc29oby1idXR0b249XCJzZWNvbmRhcnlcIiBjbGFzcz1cImJ0biBidG4tc2Vjb25kYXJ5IGpzLWJ0bi1zYXZlLWNoYW5nZXNcIj57e3NhdmVBbmRDbG9zZUJ1dHRvbkxhYmVsfX08L2J1dHRvbj5cbiAgICA8YnV0dG9uIHNvaG8tYnV0dG9uPVwicHJpbWFyeVwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGpzLXRvZ2dsZS1zaWRlYmFyXCI+e3tjb250aW51ZUJ1dHRvbkxhYmVsfX08L2J1dHRvbj5cbiAgPC9kaXY+XG48L2Rpdj5cblxuPCEtLSBTVEVQIENPTlRST0wgQ09OVEVOVCAtLT5cbjxkaXYgY2xhc3M9XCJtYWluIG5vLXNjcm9sbFwiPlxuXG4gIDxkaXYgY2xhc3M9XCJ0b29sYmFyLWN1c3RvbSB0b29sYmFyLWNvbGxhcHNpYmxlXCI+XG4gICAgPGJ1dHRvbiBzb2hvLWJ1dHRvbj1cImljb25cIiBpY29uPVwiYnVsbGV0LXN0ZXBzXCIgY2xhc3M9XCJidG4taWNvbiBidG4tdG9nZ2xlLXN0ZXBzIGpzLXRvZ2dsZS1zaWRlYmFyXCI+PC9idXR0b24+XG5cbiAgICA8bmctY29udGVudCBzZWxlY3Q9XCJkaXZbc29oby1zdGVwLWNvbnRlbnQtdGl0bGVdXCI+PC9uZy1jb250ZW50PlxuXG4gICAgPGRpdiBjbGFzcz1cImFjdGlvbnMgcGhvbmUtaGlkZGVuXCI+XG4gICAgICA8YnV0dG9uIHNvaG8tYnV0dG9uPVwidGVydGlhcnlcIiBjbGFzcz1cImJ0bi10ZXJ0aWFyeSBqcy1zdGVwLWxpbmstcHJldlwiPnt7cHJldmlvdXNCdXR0b25MYWJlbH19PC9idXR0b24+XG4gICAgICA8YnV0dG9uIHNvaG8tYnV0dG9uPVwidGVydGlhcnlcIiBjbGFzcz1cImJ0bi10ZXJ0aWFyeSBqcy1zdGVwLWxpbmstbmV4dFwiPnt7bmV4dEJ1dHRvbkxhYmVsfX08L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5cbiAgPCEtLSBTVEVQIENPTlRST0wgUEhPTkUgQ09OVFJPTFMgLS0+XG4gIDxuZy1jb250ZW50IHNlbGVjdD1cImRpdltzb2hvLXN0ZXAtY29udGVudF1cIj48L25nLWNvbnRlbnQ+XG4gICAgPGRpdiBjbGFzcz1cInBob25lLWFjdGlvbi1iYXIgcGhvbmUtdmlzaWJsZVwiPlxuICAgICAgPGJ1dHRvbiBzb2hvLWJ1dHRvbj1cInNlY29uZGFyeVwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnkganMtYnRuLXNhdmUtY2hhbmdlc1wiPnt7c2F2ZUFuZENsb3NlQnV0dG9uTGFiZWx9fTwvYnV0dG9uPlxuICAgICAgPGJ1dHRvbiBzb2hvLWJ1dHRvbj1cInByaW1hcnlcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBqcy1zdGVwLWxpbmstbmV4dFwiPnt7bmV4dEJ1dHRvbkxhYmVsfX08L2J1dHRvbj5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuIl19