import { Directive, Input } from '@angular/core';
import * as i0 from "@angular/core";
/**
 * Angular Wrapper for the SohoEmptyMessage Control.
 */
export class SohoEmptyMessageDirective {
    /**
     * The `emptyMessage` option.
     */
    set emptyMessageOptions(options) {
        /** Check for undefined/null and reset to the default message */
        options = options || {
            title: (Soho.Locale ? Soho.Locale.translate('NoData') : 'No Data Available'),
            info: '',
            icon: 'icon-empty-no-data'
        };
        this._emptyMessageOptions = options;
        if (this.jQueryElement) {
            this.emptymessage.settings = options;
            this.markForCheck();
        }
    }
    get emptyMessageOptions() {
        if (this.emptymessage) {
            return this.emptymessage.settings;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._emptyMessageOptions;
    }
    set title(title) {
        this._emptyMessageOptions.title = title;
        if (this.emptymessage) {
            this.emptymessage.settings.title = title;
            this.markForCheck();
        }
    }
    get title() {
        if (this.emptymessage) {
            return this.emptymessage.settings.title;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._emptyMessageOptions.title;
    }
    set info(info) {
        this._emptyMessageOptions.info = info;
        if (this.emptymessage) {
            this.emptymessage.settings.info = info;
            this.markForCheck();
        }
    }
    get info() {
        if (this.emptymessage) {
            return this.emptymessage.settings.info;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._emptyMessageOptions.info;
    }
    set icon(icon) {
        this._emptyMessageOptions.icon = icon;
        if (this.emptymessage) {
            this.emptymessage.settings.icon = icon;
            this.markForCheck();
        }
    }
    get icon() {
        if (this.emptymessage) {
            return this.emptymessage.settings.icon;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._emptyMessageOptions.icon;
    }
    set height(height) {
        this._emptyMessageOptions.height = height;
        if (this.emptymessage) {
            this.emptymessage.settings.height = height;
            this.markForCheck();
        }
    }
    get height() {
        if (this.emptymessage) {
            return this.emptymessage.settings.height;
        }
        return this._emptyMessageOptions.height;
    }
    set button(button) {
        this._emptyMessageOptions.button = button;
        if (this.emptymessage) {
            this.emptymessage.settings.button = button;
            this.markForCheck();
        }
    }
    get button() {
        if (this.emptymessage) {
            return this.emptymessage.settings.button;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._emptyMessageOptions.button;
    }
    set color(color) {
        this._emptyMessageOptions.color = color;
        if (this.emptymessage) {
            this.emptymessage.settings.color = color;
            this.markForCheck();
        }
    }
    get color() {
        if (this.emptymessage) {
            return this.emptymessage.settings.color;
        }
        // ... we've been called before the component has completed
        // initialisation, so return the current value from the
        // options.
        return this._emptyMessageOptions.color;
    }
    set attributes(attributes) {
        this._emptyMessageOptions.attributes = attributes;
        if (this.emptymessage) {
            this.emptymessage.settings.attributes = attributes;
            this.markForCheck();
        }
    }
    get attributes() {
        if (this.emptymessage) {
            return this.emptymessage.settings.attributes;
        }
        return this._emptyMessageOptions.attributes;
    }
    constructor(changeDetector, element) {
        this.changeDetector = changeDetector;
        this.element = element;
        this._emptyMessageOptions = {};
        this.updateComponent = false;
    }
    /**
     * After the control has been initialised and the view is ready,
     * construct the empty message sohoxi component.
     */
    ngAfterViewInit() {
        this.jQueryElement = jQuery(this.element.nativeElement);
        this.jQueryElement.emptymessage(this.emptyMessageOptions);
        this.emptymessage = this.jQueryElement.data('emptymessage');
    }
    /**
     *
     */
    ngAfterViewChecked() {
        if (this.updateComponent) {
            this.emptymessage?.updated();
            this.updateComponent = false;
        }
    }
    /**
     * Marks the components as requiring a rebuild after the next update.
     */
    markForCheck() {
        this.updateComponent = true;
        // ... make sure the change detector kicks in, otherwise if the inputs
        // were change programmatially the component may not be eligible for
        // updating.
        this.changeDetector.markForCheck();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoEmptyMessageDirective, deps: [{ token: i0.ChangeDetectorRef }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive }); }
    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "16.1.4", type: SohoEmptyMessageDirective, selector: "[soho-emptymessage]", inputs: { emptyMessageOptions: "emptyMessageOptions", title: "title", info: "info", icon: "icon", height: "height", button: "button", color: "color", attributes: "attributes" }, exportAs: ["soho-emptymessage"], ngImport: i0 }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoEmptyMessageDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[soho-emptymessage]',
                    exportAs: 'soho-emptymessage'
                }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i0.ElementRef }]; }, propDecorators: { emptyMessageOptions: [{
                type: Input
            }], title: [{
                type: Input
            }], info: [{
                type: Input
            }], icon: [{
                type: Input
            }], height: [{
                type: Input
            }], button: [{
                type: Input
            }], color: [{
                type: Input
            }], attributes: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1lbXB0eW1lc3NhZ2UuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi9lbXB0eW1lc3NhZ2Uvc29oby1lbXB0eW1lc3NhZ2UuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFJTCxTQUFTLEVBRVQsS0FBSyxFQUNOLE1BQU0sZUFBZSxDQUFDOztBQUV2Qjs7R0FFRztBQUtILE1BQU0sT0FBTyx5QkFBeUI7SUFFcEM7O09BRUc7SUFDSCxJQUFhLG1CQUFtQixDQUFDLE9BQWdDO1FBQy9ELGdFQUFnRTtRQUNoRSxPQUFPLEdBQUcsT0FBTyxJQUFJO1lBQ25CLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQztZQUM1RSxJQUFJLEVBQUUsRUFBRTtZQUNSLElBQUksRUFBRSxvQkFBb0I7U0FDM0IsQ0FBQztRQUVGLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxPQUFPLENBQUM7UUFDcEMsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxZQUFvQixDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUM7WUFDOUMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1NBQ3JCO0lBQ0gsQ0FBQztJQUVELElBQUksbUJBQW1CO1FBQ3JCLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNyQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDO1NBQ25DO1FBRUQsMkRBQTJEO1FBQzNELHVEQUF1RDtRQUN2RCxXQUFXO1FBQ1gsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQWEsS0FBSyxDQUFDLEtBQXlCO1FB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QixLQUFLO2dCQWVPLE1BQU07c0JBQWxCLEtBQUs7Z0JBbUJPLEtBQUs7c0JBQWpCLEtBQUs7Z0JBbUJPLFVBQVU7c0JBQXRCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdDaGVja2VkLFxuICBBZnRlclZpZXdJbml0LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgRGlyZWN0aXZlLFxuICBFbGVtZW50UmVmLFxuICBJbnB1dFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuLyoqXG4gKiBBbmd1bGFyIFdyYXBwZXIgZm9yIHRoZSBTb2hvRW1wdHlNZXNzYWdlIENvbnRyb2wuXG4gKi9cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tzb2hvLWVtcHR5bWVzc2FnZV0nLCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIGV4cG9ydEFzOiAnc29oby1lbXB0eW1lc3NhZ2UnXG59KVxuZXhwb3J0IGNsYXNzIFNvaG9FbXB0eU1lc3NhZ2VEaXJlY3RpdmUgaW1wbGVtZW50cyBBZnRlclZpZXdDaGVja2VkLCBBZnRlclZpZXdJbml0IHtcblxuICAvKipcbiAgICogVGhlIGBlbXB0eU1lc3NhZ2VgIG9wdGlvbi5cbiAgICovXG4gIEBJbnB1dCgpIHNldCBlbXB0eU1lc3NhZ2VPcHRpb25zKG9wdGlvbnM6IFNvaG9FbXB0eU1lc3NhZ2VPcHRpb25zKSB7XG4gICAgLyoqIENoZWNrIGZvciB1bmRlZmluZWQvbnVsbCBhbmQgcmVzZXQgdG8gdGhlIGRlZmF1bHQgbWVzc2FnZSAqL1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHtcbiAgICAgIHRpdGxlOiAoU29oby5Mb2NhbGUgPyBTb2hvLkxvY2FsZS50cmFuc2xhdGUoJ05vRGF0YScpIDogJ05vIERhdGEgQXZhaWxhYmxlJyksXG4gICAgICBpbmZvOiAnJyxcbiAgICAgIGljb246ICdpY29uLWVtcHR5LW5vLWRhdGEnXG4gICAgfTtcblxuICAgIHRoaXMuX2VtcHR5TWVzc2FnZU9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICh0aGlzLmVtcHR5bWVzc2FnZSBhcyBhbnkpLnNldHRpbmdzID0gb3B0aW9ucztcbiAgICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGVtcHR5TWVzc2FnZU9wdGlvbnMoKTogU29ob0VtcHR5TWVzc2FnZU9wdGlvbnMge1xuICAgIGlmICh0aGlzLmVtcHR5bWVzc2FnZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZW1wdHltZXNzYWdlLnNldHRpbmdzO1xuICAgIH1cblxuICAgIC8vIC4uLiB3ZSd2ZSBiZWVuIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBoYXMgY29tcGxldGVkXG4gICAgLy8gaW5pdGlhbGlzYXRpb24sIHNvIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZVxuICAgIC8vIG9wdGlvbnMuXG4gICAgcmV0dXJuIHRoaXMuX2VtcHR5TWVzc2FnZU9wdGlvbnM7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgdGl0bGUodGl0bGU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2VtcHR5TWVzc2FnZU9wdGlvbnMudGl0bGUgPSB0aXRsZTtcbiAgICBpZiAodGhpcy5lbXB0eW1lc3NhZ2UpIHtcbiAgICAgIHRoaXMuZW1wdHltZXNzYWdlLnNldHRpbmdzLnRpdGxlID0gdGl0bGU7XG4gICAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIGdldCB0aXRsZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmVtcHR5bWVzc2FnZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZW1wdHltZXNzYWdlLnNldHRpbmdzLnRpdGxlO1xuICAgIH1cblxuICAgIC8vIC4uLiB3ZSd2ZSBiZWVuIGNhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBoYXMgY29tcGxldGVkXG4gICAgLy8gaW5pdGlhbGlzYXRpb24sIHNvIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmcm9tIHRoZVxuICAgIC8vIG9wdGlvbnMuXG4gICAgcmV0dXJuIHRoaXMuX2VtcHR5TWVzc2FnZU9wdGlvbnMudGl0bGU7XG4gIH1cblxuICBASW5wdXQoKSBzZXQgaW5mbyhpbmZvOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9lbXB0eU1lc3NhZ2VPcHRpb25zLmluZm8gPSBpbmZvO1xuICAgIGlmICh0aGlzLmVtcHR5bWVzc2FnZSkge1xuICAgICAgdGhpcy5lbXB0eW1lc3NhZ2Uuc2V0dGluZ3MuaW5mbyA9IGluZm87XG4gICAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpbmZvKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZW1wdHltZXNzYWdlKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbXB0eW1lc3NhZ2Uuc2V0dGluZ3MuaW5mbztcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9lbXB0eU1lc3NhZ2VPcHRpb25zLmluZm87XG4gIH1cblxuICBASW5wdXQoKSBzZXQgaWNvbihpY29uOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9lbXB0eU1lc3NhZ2VPcHRpb25zLmljb24gPSBpY29uO1xuICAgIGlmICh0aGlzLmVtcHR5bWVzc2FnZSkge1xuICAgICAgdGhpcy5lbXB0eW1lc3NhZ2Uuc2V0dGluZ3MuaWNvbiA9IGljb247XG4gICAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBpY29uKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuZW1wdHltZXNzYWdlKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbXB0eW1lc3NhZ2Uuc2V0dGluZ3MuaWNvbjtcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9lbXB0eU1lc3NhZ2VPcHRpb25zLmljb247XG4gIH1cblxuICBASW5wdXQoKSBzZXQgaGVpZ2h0KGhlaWdodDogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZW1wdHlNZXNzYWdlT3B0aW9ucy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgaWYgKHRoaXMuZW1wdHltZXNzYWdlKSB7XG4gICAgICB0aGlzLmVtcHR5bWVzc2FnZS5zZXR0aW5ncy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBoZWlnaHQoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5lbXB0eW1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiB0aGlzLmVtcHR5bWVzc2FnZS5zZXR0aW5ncy5oZWlnaHQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lbXB0eU1lc3NhZ2VPcHRpb25zLmhlaWdodDtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBidXR0b24oYnV0dG9uOiBTb2hvRW1wdHlNZXNzYWdlQnV0dG9uT3B0aW9ucyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX2VtcHR5TWVzc2FnZU9wdGlvbnMuYnV0dG9uID0gYnV0dG9uO1xuICAgIGlmICh0aGlzLmVtcHR5bWVzc2FnZSkge1xuICAgICAgdGhpcy5lbXB0eW1lc3NhZ2Uuc2V0dGluZ3MuYnV0dG9uID0gYnV0dG9uO1xuICAgICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cblxuICBnZXQgYnV0dG9uKCk6IFNvaG9FbXB0eU1lc3NhZ2VCdXR0b25PcHRpb25zIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5lbXB0eW1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiB0aGlzLmVtcHR5bWVzc2FnZS5zZXR0aW5ncy5idXR0b247XG4gICAgfVxuXG4gICAgLy8gLi4uIHdlJ3ZlIGJlZW4gY2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGhhcyBjb21wbGV0ZWRcbiAgICAvLyBpbml0aWFsaXNhdGlvbiwgc28gcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlIGZyb20gdGhlXG4gICAgLy8gb3B0aW9ucy5cbiAgICByZXR1cm4gdGhpcy5fZW1wdHlNZXNzYWdlT3B0aW9ucy5idXR0b247XG4gIH1cblxuICBASW5wdXQoKSBzZXQgY29sb3IoY29sb3I6IEVtcHR5TWVzc2FnZUNvbG9yIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fZW1wdHlNZXNzYWdlT3B0aW9ucy5jb2xvciA9IGNvbG9yO1xuICAgIGlmICh0aGlzLmVtcHR5bWVzc2FnZSkge1xuICAgICAgdGhpcy5lbXB0eW1lc3NhZ2Uuc2V0dGluZ3MuY29sb3IgPSBjb2xvcjtcbiAgICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGNvbG9yKCk6IEVtcHR5TWVzc2FnZUNvbG9yIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5lbXB0eW1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiB0aGlzLmVtcHR5bWVzc2FnZS5zZXR0aW5ncy5jb2xvcjtcbiAgICB9XG5cbiAgICAvLyAuLi4gd2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaGFzIGNvbXBsZXRlZFxuICAgIC8vIGluaXRpYWxpc2F0aW9uLCBzbyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgZnJvbSB0aGVcbiAgICAvLyBvcHRpb25zLlxuICAgIHJldHVybiB0aGlzLl9lbXB0eU1lc3NhZ2VPcHRpb25zLmNvbG9yO1xuICB9XG5cbiAgQElucHV0KCkgc2V0IGF0dHJpYnV0ZXMoYXR0cmlidXRlczogQXJyYXk8T2JqZWN0PiB8IE9iamVjdCB8IHVuZGVmaW5lZCApIHtcbiAgICB0aGlzLl9lbXB0eU1lc3NhZ2VPcHRpb25zLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgIGlmICh0aGlzLmVtcHR5bWVzc2FnZSkge1xuICAgICAgdGhpcy5lbXB0eW1lc3NhZ2Uuc2V0dGluZ3MuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBhdHRyaWJ1dGVzKCk6IEFycmF5PE9iamVjdD4gfCBPYmplY3QgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmVtcHR5bWVzc2FnZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZW1wdHltZXNzYWdlLnNldHRpbmdzLmF0dHJpYnV0ZXM7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lbXB0eU1lc3NhZ2VPcHRpb25zLmF0dHJpYnV0ZXM7XG4gIH1cblxuICBwcml2YXRlIF9lbXB0eU1lc3NhZ2VPcHRpb25zOiBTb2hvRW1wdHlNZXNzYWdlT3B0aW9ucyA9IHt9O1xuICBwcml2YXRlIGpRdWVyeUVsZW1lbnQ/OiBKUXVlcnk7XG4gIHByaXZhdGUgZW1wdHltZXNzYWdlPzogU29ob0VtcHR5TWVzc2FnZVN0YXRpYztcbiAgcHJpdmF0ZSB1cGRhdGVDb21wb25lbnQgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnRSZWYsXG4gICkgeyB9XG5cbiAgLyoqXG4gICAqIEFmdGVyIHRoZSBjb250cm9sIGhhcyBiZWVuIGluaXRpYWxpc2VkIGFuZCB0aGUgdmlldyBpcyByZWFkeSxcbiAgICogY29uc3RydWN0IHRoZSBlbXB0eSBtZXNzYWdlIHNvaG94aSBjb21wb25lbnQuXG4gICAqL1xuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5qUXVlcnlFbGVtZW50ID0galF1ZXJ5KHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50KTtcbiAgICB0aGlzLmpRdWVyeUVsZW1lbnQuZW1wdHltZXNzYWdlKHRoaXMuZW1wdHlNZXNzYWdlT3B0aW9ucyk7XG4gICAgdGhpcy5lbXB0eW1lc3NhZ2UgPSB0aGlzLmpRdWVyeUVsZW1lbnQuZGF0YSgnZW1wdHltZXNzYWdlJyk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICBpZiAodGhpcy51cGRhdGVDb21wb25lbnQpIHtcbiAgICAgIHRoaXMuZW1wdHltZXNzYWdlPy51cGRhdGVkKCk7XG4gICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJrcyB0aGUgY29tcG9uZW50cyBhcyByZXF1aXJpbmcgYSByZWJ1aWxkIGFmdGVyIHRoZSBuZXh0IHVwZGF0ZS5cbiAgICovXG4gIHByaXZhdGUgbWFya0ZvckNoZWNrKCkge1xuXG4gICAgdGhpcy51cGRhdGVDb21wb25lbnQgPSB0cnVlO1xuXG4gICAgLy8gLi4uIG1ha2Ugc3VyZSB0aGUgY2hhbmdlIGRldGVjdG9yIGtpY2tzIGluLCBvdGhlcndpc2UgaWYgdGhlIGlucHV0c1xuICAgIC8vIHdlcmUgY2hhbmdlIHByb2dyYW1tYXRpYWxseSB0aGUgY29tcG9uZW50IG1heSBub3QgYmUgZWxpZ2libGUgZm9yXG4gICAgLy8gdXBkYXRpbmcuXG4gICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgfVxufVxuIl19