import { ChangeDetectionStrategy, Component, EventEmitter, HostBinding, Input, Output, } from '@angular/core';
import * as i0 from "@angular/core";
export class SohoPieComponent {
    get isPie() {
        return true;
    }
    /** Defines the data to use, must be specified for this component. */
    set dataset(dataset) {
        this.options.dataset = dataset;
        if (this.pie) {
            this.pie.settings.dataset = dataset;
            this.updateRequired = true;
        }
    }
    /** If true it renders as a donut chart. */
    set isDonut(value) {
        this.options.isDonut = value;
        if (this.pie) {
            this.pie.settings.isDonut = value;
            this.updateRequired = true;
        }
    }
    /** Controls the animation speed. */
    set animationSpeed(value) {
        this.options.animationSpeed = value;
        if (this.pie) {
            this.pie.settings.animationSpeed = value;
            this.updateRequired = true;
        }
    }
    /** true|false - will do or not do the animation and 'initial' will do only first time the animation. */
    set animate(value) {
        this.options.animate = value;
        if (this.pie) {
            this.pie.settings.animate = value;
            this.updateRequired = true;
        }
    }
    /** If true, the component will not resize when resizing the page. There is tooltip values provided.
     * It will not be shown. If you still want lines at the lower breakpoint you can set this to true */
    set redrawOnResize(value) {
        this.options.redrawOnResize = value;
        if (this.pie) {
            this.pie.settings.redrawOnResize = value;
            this.updateRequired = true;
        }
    }
    /** If false the center label will not be shown. */
    set hideCenterLabel(value) {
        this.options.hideCenterLabel = value;
        if (this.pie) {
            this.pie.settings.hideCenterLabel = value;
            this.updateRequired = true;
        }
    }
    /** If false connector lines wont be shown. */
    set showLines(value) {
        this.options.showLines = value;
        if (this.pie) {
            this.pie.settings.showLines = value;
            this.updateRequired = true;
        }
    }
    /** This defaults to false, when false and under 450px the lines. */
    set showLinesMobile(value) {
        this.options.showLinesMobile = value;
        if (this.pie) {
            this.pie.settings.showLinesMobile = value;
            this.updateRequired = true;
        }
    }
    /** A setting that controls the line values and format. */
    set lines(value) {
        this.options.lines = value;
        if (this.pie) {
            this.pie.settings.lines = value;
            this.updateRequired = true;
        }
    }
    /** If false the legend will not be shown. */
    set showLegend(value) {
        this.options.showLegend = value;
        if (this.pie) {
            this.pie.settings.showLegend = value;
            this.updateRequired = true;
        }
    }
    /** Where to locate the legend. This can be bottom or right at the moment. */
    set legendPlacement(value) {
        this.options.legendPlacement = value;
        if (this.pie) {
            this.pie.settings.legendPlacement = value;
            this.updateRequired = true;
        }
    }
    /** Where to locate the legend. This can be bottom or right at the moment. */
    set forceLegendPopup(value) {
        this.options.forceLegendPopup = value;
        if (this.pie) {
            this.pie.settings.forceLegendPopup = value;
            this.updateRequired = true;
        }
    }
    /** A setting that controls the legend values and format. */
    set legend(value) {
        this.options.legend = value;
        if (this.pie) {
            this.pie.settings.legend = value;
            this.updateRequired = true;
        }
    }
    /** If false now tooltips will be shown */
    set showTooltips(value) {
        this.options.showTooltips = value;
        if (this.pie) {
            this.pie.settings.showTooltips = value;
            this.updateRequired = true;
        }
    }
    /** A setting that controls the tooltip values and format. */
    set tooltip(value) {
        this.options.tooltip = value;
        if (this.pie) {
            this.pie.settings.tooltip = value;
            this.updateRequired = true;
        }
    }
    /** If true center tooltip will be shown */
    set showCenterTooltip(value) {
        this.options.showCenterTooltip = value;
        if (this.pie) {
            this.pie.settings.showCenterTooltip = value;
            this.updateRequired = true;
        }
    }
    /** If true chart height will fit in parent available height. */
    set fitHeight(value) {
        this.options.fitHeight = value;
        if (this.pie) {
            this.pie.settings.fitHeight = value;
            this.updateRequired = true;
        }
    }
    /** An empty message will be displayed when there is no chart data. */
    set emptyMessage(value) {
        this.options.emptyMessage = value;
        if (this.pie) {
            this.pie.settings.emptyMessage = value;
            this.updateRequired = true;
        }
    }
    constructor(element, ngZone) {
        this.element = element;
        this.ngZone = ngZone;
        /** Options. */
        this.options = {};
        /** Events */
        this.selected = new EventEmitter();
        this.unselected = new EventEmitter();
        this.rendered = new EventEmitter();
        // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename
        this.dblclick = new EventEmitter();
        /**
         * @todo remove override of native element
         */
        // eslint-disable-next-line @angular-eslint/no-output-native
        this.contextmenu = new EventEmitter();
        this.updateRequired = false;
    }
    /** Setup */
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            this.jQueryElement = jQuery(this.element.nativeElement);
            this.options.type = 'pie';
            this.jQueryElement.chart(this.options);
            this.pie = this.jQueryElement.data('pie');
            // Setup the events
            this.jQueryElement.on('selected', (_e, args) => this.ngZone.run(() => this.selected.emit(args)));
            this.jQueryElement.on('unselected', (_e, args) => this.ngZone.run(() => this.unselected.emit(args)));
            this.jQueryElement.on('rendered', (...args) => this.ngZone.run(() => this.rendered.emit(args)));
            this.jQueryElement.on('contextmenu', (...args) => this.ngZone.run(() => this.contextmenu?.emit(args)));
            this.jQueryElement.on('dblclick', (_e, args) => this.ngZone.run(() => this.dblclick.emit(args)));
        });
    }
    ngAfterViewChecked() {
        if (this.pie && this.updateRequired) {
            this.ngZone.runOutsideAngular(() => this.pie?.updated(this.pie.settings));
            this.updateRequired = false;
        }
    }
    updated() {
        this.ngZone.runOutsideAngular(() => {
            this.options.type = 'pie';
            this.jQueryElement?.chart(this.options);
            this.pie = this.jQueryElement?.data('pie');
        });
    }
    /** Tear Down */
    ngOnDestroy() {
        // call outside the angular zone so change detection isn't triggered by the soho component.
        this.ngZone.runOutsideAngular(() => {
            if (this.jQueryElement) {
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
            if (this.pie) {
                this.pie.destroy();
                this.pie = null;
            }
        });
    }
    setSelected(selected) {
        this.ngZone.runOutsideAngular(() => this.pie?.setSelected(selected));
    }
    toggleSelected(selected) {
        this.ngZone.runOutsideAngular(() => this.pie?.toggleSelected(selected));
    }
    getSelected() {
        return this.ngZone.runOutsideAngular(() => this.pie?.getSelected());
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoPieComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoPieComponent, selector: "[soho-pie]", inputs: { dataset: "dataset", isDonut: "isDonut", animationSpeed: "animationSpeed", animate: "animate", redrawOnResize: "redrawOnResize", hideCenterLabel: "hideCenterLabel", showLines: "showLines", showLinesMobile: "showLinesMobile", lines: "lines", showLegend: "showLegend", legendPlacement: "legendPlacement", forceLegendPopup: "forceLegendPopup", legend: "legend", showTooltips: "showTooltips", tooltip: "tooltip", showCenterTooltip: "showCenterTooltip", fitHeight: "fitHeight", emptyMessage: "emptyMessage" }, outputs: { selected: "selected", unselected: "unselected", rendered: "rendered", dblclick: "dblclick", contextmenu: "contextmenu" }, host: { properties: { "class.chart-container": "this.isPie" } }, ngImport: i0, template: '<ng-content></ng-content>', isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoPieComponent, decorators: [{
            type: Component,
            args: [{
                    selector: '[soho-pie]',
                    template: '<ng-content></ng-content>',
                    changeDetection: ChangeDetectionStrategy.OnPush
                }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { isPie: [{
                type: HostBinding,
                args: ['class.chart-container']
            }], dataset: [{
                type: Input
            }], isDonut: [{
                type: Input
            }], animationSpeed: [{
                type: Input
            }], animate: [{
                type: Input
            }], redrawOnResize: [{
                type: Input
            }], hideCenterLabel: [{
                type: Input
            }], showLines: [{
                type: Input
            }], showLinesMobile: [{
                type: Input
            }], lines: [{
                type: Input
            }], showLegend: [{
                type: Input
            }], legendPlacement: [{
                type: Input
            }], forceLegendPopup: [{
                type: Input
            }], legend: [{
                type: Input
            }], showTooltips: [{
                type: Input
            }], tooltip: [{
                type: Input
            }], showCenterTooltip: [{
                type: Input
            }], fitHeight: [{
                type: Input
            }], emptyMessage: [{
                type: Input
            }], selected: [{
                type: Output
            }], unselected: [{
                type: Output
            }], rendered: [{
                type: Output
            }], dblclick: [{
                type: Output
            }], contextmenu: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1waWUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi9waWUvc29oby1waWUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFHTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUVULFlBQVksRUFDWixXQUFXLEVBQ1gsS0FBSyxFQUdMLE1BQU0sR0FDUCxNQUFNLGVBQWUsQ0FBQzs7QUFRdkIsTUFBTSxPQUFPLGdCQUFnQjtJQUkzQixJQUEwQyxLQUFLO1FBQzdDLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELHFFQUFxRTtJQUNyRSxJQUFhLE9BQU8sQ0FBQyxPQUFtQjtRQUN0QyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFFL0IsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ1osSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztZQUNwQyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztTQUM1QjtJQUNILENBQUM7SUFFRCwyQ0FBMkM7SUFDM0MsSUFBYSxPQUFPLENBQUMsS0FBYztRQUNqQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7UUFFN0IsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ1osSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUNsQyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztTQUM1QjtJQUNILENBQUM7SUFFRCxvQ0FBb0M7SUFDcEMsSUFBYSxjQUFjLENBQUMsS0FBYTtRQUN2QyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7UUFFcEMsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFO1lB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QUFHLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQztJQUN0RSxDQUFDOzhHQW5SVSxnQkFBZ0I7a0dBQWhCLGdCQUFnQiwwdkJBSmpCLDJCQUEyQjs7MkZBSTFCLGdCQUFnQjtrQkFONUIsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsWUFBWTtvQkFDdEIsUUFBUSxFQUFFLDJCQUEyQjtvQkFDckMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07aUJBQ2hEO3NIQU0yQyxLQUFLO3NCQUE5QyxXQUFXO3VCQUFDLHVCQUF1QjtnQkFLdkIsT0FBTztzQkFBbkIsS0FBSztnQkFVTyxPQUFPO3NCQUFuQixLQUFLO2dCQVVPLGNBQWM7c0JBQTFCLEtBQUs7Z0JBVU8sT0FBTztzQkFBbkIsS0FBSztnQkFXTyxjQUFjO3NCQUExQixLQUFLO2dCQVVPLGVBQWU7c0JBQTNCLEtBQUs7Z0JBVU8sU0FBUztzQkFBckIsS0FBSztnQkFVTyxlQUFlO3NCQUEzQixLQUFLO2dCQVVPLEtBQUs7c0JBQWpCLEtBQUs7Z0JBVU8sVUFBVTtzQkFBdEIsS0FBSztnQkFVTyxlQUFlO3NCQUEzQixLQUFLO2dCQVVPLGdCQUFnQjtzQkFBNUIsS0FBSztnQkFVTyxNQUFNO3NCQUFsQixLQUFLO2dCQVVPLFlBQVk7c0JBQXhCLEtBQUs7Z0JBVU8sT0FBTztzQkFBbkIsS0FBSztnQkFVTyxpQkFBaUI7c0JBQTdCLEtBQUs7Z0JBVU8sU0FBUztzQkFBckIsS0FBSztnQkFVTyxZQUFZO3NCQUF4QixLQUFLO2dCQVVJLFFBQVE7c0JBQWpCLE1BQU07Z0JBQ0csVUFBVTtzQkFBbkIsTUFBTTtnQkFDRyxRQUFRO3NCQUFqQixNQUFNO2dCQUVHLFFBQVE7c0JBQWpCLE1BQU07Z0JBTUcsV0FBVztzQkFBcEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyVmlld0NoZWNrZWQsXG4gIEFmdGVyVmlld0luaXQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBOZ1pvbmUsXG4gIE9uRGVzdHJveSxcbiAgT3V0cHV0LFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnW3NvaG8tcGllXScsIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgdGVtcGxhdGU6ICc8bmctY29udGVudD48L25nLWNvbnRlbnQ+JyxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5cbmV4cG9ydCBjbGFzcyBTb2hvUGllQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95IHtcbiAgLyoqIE9wdGlvbnMuICovXG4gIHByaXZhdGUgb3B0aW9uczogU29ob1BpZU9wdGlvbnMgPSB7fTtcblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmNoYXJ0LWNvbnRhaW5lcicpIGdldCBpc1BpZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKiBEZWZpbmVzIHRoZSBkYXRhIHRvIHVzZSwgbXVzdCBiZSBzcGVjaWZpZWQgZm9yIHRoaXMgY29tcG9uZW50LiAqL1xuICBASW5wdXQoKSBzZXQgZGF0YXNldChkYXRhc2V0OiBBcnJheTxhbnk+KSB7XG4gICAgdGhpcy5vcHRpb25zLmRhdGFzZXQgPSBkYXRhc2V0O1xuXG4gICAgaWYgKHRoaXMucGllKSB7XG4gICAgICB0aGlzLnBpZS5zZXR0aW5ncy5kYXRhc2V0ID0gZGF0YXNldDtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBJZiB0cnVlIGl0IHJlbmRlcnMgYXMgYSBkb251dCBjaGFydC4gKi9cbiAgQElucHV0KCkgc2V0IGlzRG9udXQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLm9wdGlvbnMuaXNEb251dCA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucGllKSB7XG4gICAgICB0aGlzLnBpZS5zZXR0aW5ncy5pc0RvbnV0ID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogQ29udHJvbHMgdGhlIGFuaW1hdGlvbiBzcGVlZC4gKi9cbiAgQElucHV0KCkgc2V0IGFuaW1hdGlvblNwZWVkKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uU3BlZWQgPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnBpZSkge1xuICAgICAgdGhpcy5waWUuc2V0dGluZ3MuYW5pbWF0aW9uU3BlZWQgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiB0cnVlfGZhbHNlIC0gd2lsbCBkbyBvciBub3QgZG8gdGhlIGFuaW1hdGlvbiBhbmQgJ2luaXRpYWwnIHdpbGwgZG8gb25seSBmaXJzdCB0aW1lIHRoZSBhbmltYXRpb24uICovXG4gIEBJbnB1dCgpIHNldCBhbmltYXRlKHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLm9wdGlvbnMuYW5pbWF0ZSA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucGllKSB7XG4gICAgICB0aGlzLnBpZS5zZXR0aW5ncy5hbmltYXRlID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogSWYgdHJ1ZSwgdGhlIGNvbXBvbmVudCB3aWxsIG5vdCByZXNpemUgd2hlbiByZXNpemluZyB0aGUgcGFnZS4gVGhlcmUgaXMgdG9vbHRpcCB2YWx1ZXMgcHJvdmlkZWQuXG4gICAqIEl0IHdpbGwgbm90IGJlIHNob3duLiBJZiB5b3Ugc3RpbGwgd2FudCBsaW5lcyBhdCB0aGUgbG93ZXIgYnJlYWtwb2ludCB5b3UgY2FuIHNldCB0aGlzIHRvIHRydWUgKi9cbiAgQElucHV0KCkgc2V0IHJlZHJhd09uUmVzaXplKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnJlZHJhd09uUmVzaXplID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5waWUpIHtcbiAgICAgIHRoaXMucGllLnNldHRpbmdzLnJlZHJhd09uUmVzaXplID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogSWYgZmFsc2UgdGhlIGNlbnRlciBsYWJlbCB3aWxsIG5vdCBiZSBzaG93bi4gKi9cbiAgQElucHV0KCkgc2V0IGhpZGVDZW50ZXJMYWJlbCh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5oaWRlQ2VudGVyTGFiZWwgPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnBpZSkge1xuICAgICAgdGhpcy5waWUuc2V0dGluZ3MuaGlkZUNlbnRlckxhYmVsID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogSWYgZmFsc2UgY29ubmVjdG9yIGxpbmVzIHdvbnQgYmUgc2hvd24uICovXG4gIEBJbnB1dCgpIHNldCBzaG93TGluZXModmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLm9wdGlvbnMuc2hvd0xpbmVzID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5waWUpIHtcbiAgICAgIHRoaXMucGllLnNldHRpbmdzLnNob3dMaW5lcyA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIFRoaXMgZGVmYXVsdHMgdG8gZmFsc2UsIHdoZW4gZmFsc2UgYW5kIHVuZGVyIDQ1MHB4IHRoZSBsaW5lcy4gKi9cbiAgQElucHV0KCkgc2V0IHNob3dMaW5lc01vYmlsZSh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMub3B0aW9ucy5zaG93TGluZXNNb2JpbGUgPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnBpZSkge1xuICAgICAgdGhpcy5waWUuc2V0dGluZ3Muc2hvd0xpbmVzTW9iaWxlID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogQSBzZXR0aW5nIHRoYXQgY29udHJvbHMgdGhlIGxpbmUgdmFsdWVzIGFuZCBmb3JtYXQuICovXG4gIEBJbnB1dCgpIHNldCBsaW5lcyh2YWx1ZTogU29ob1BpZUxpbmVzT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucy5saW5lcyA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucGllKSB7XG4gICAgICB0aGlzLnBpZS5zZXR0aW5ncy5saW5lcyA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIElmIGZhbHNlIHRoZSBsZWdlbmQgd2lsbCBub3QgYmUgc2hvd24uICovXG4gIEBJbnB1dCgpIHNldCBzaG93TGVnZW5kKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNob3dMZWdlbmQgPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnBpZSkge1xuICAgICAgdGhpcy5waWUuc2V0dGluZ3Muc2hvd0xlZ2VuZCA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIFdoZXJlIHRvIGxvY2F0ZSB0aGUgbGVnZW5kLiBUaGlzIGNhbiBiZSBib3R0b20gb3IgcmlnaHQgYXQgdGhlIG1vbWVudC4gKi9cbiAgQElucHV0KCkgc2V0IGxlZ2VuZFBsYWNlbWVudCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5vcHRpb25zLmxlZ2VuZFBsYWNlbWVudCA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucGllKSB7XG4gICAgICB0aGlzLnBpZS5zZXR0aW5ncy5sZWdlbmRQbGFjZW1lbnQgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBXaGVyZSB0byBsb2NhdGUgdGhlIGxlZ2VuZC4gVGhpcyBjYW4gYmUgYm90dG9tIG9yIHJpZ2h0IGF0IHRoZSBtb21lbnQuICovXG4gIEBJbnB1dCgpIHNldCBmb3JjZUxlZ2VuZFBvcHVwKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLmZvcmNlTGVnZW5kUG9wdXAgPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnBpZSkge1xuICAgICAgdGhpcy5waWUuc2V0dGluZ3MuZm9yY2VMZWdlbmRQb3B1cCA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIEEgc2V0dGluZyB0aGF0IGNvbnRyb2xzIHRoZSBsZWdlbmQgdmFsdWVzIGFuZCBmb3JtYXQuICovXG4gIEBJbnB1dCgpIHNldCBsZWdlbmQodmFsdWU6IFNvaG9QaWVMZWdlbmRPcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zLmxlZ2VuZCA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucGllKSB7XG4gICAgICB0aGlzLnBpZS5zZXR0aW5ncy5sZWdlbmQgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBJZiBmYWxzZSBub3cgdG9vbHRpcHMgd2lsbCBiZSBzaG93biAqL1xuICBASW5wdXQoKSBzZXQgc2hvd1Rvb2x0aXBzKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNob3dUb29sdGlwcyA9IHZhbHVlO1xuXG4gICAgaWYgKHRoaXMucGllKSB7XG4gICAgICB0aGlzLnBpZS5zZXR0aW5ncy5zaG93VG9vbHRpcHMgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBBIHNldHRpbmcgdGhhdCBjb250cm9scyB0aGUgdG9vbHRpcCB2YWx1ZXMgYW5kIGZvcm1hdC4gKi9cbiAgQElucHV0KCkgc2V0IHRvb2x0aXAodmFsdWU6IFNvaG9QaWVUb29sdGlwT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucy50b29sdGlwID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5waWUpIHtcbiAgICAgIHRoaXMucGllLnNldHRpbmdzLnRvb2x0aXAgPSB2YWx1ZTtcbiAgICAgIHRoaXMudXBkYXRlUmVxdWlyZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBJZiB0cnVlIGNlbnRlciB0b29sdGlwIHdpbGwgYmUgc2hvd24gKi9cbiAgQElucHV0KCkgc2V0IHNob3dDZW50ZXJUb29sdGlwKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5vcHRpb25zLnNob3dDZW50ZXJUb29sdGlwID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5waWUpIHtcbiAgICAgIHRoaXMucGllLnNldHRpbmdzLnNob3dDZW50ZXJUb29sdGlwID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogSWYgdHJ1ZSBjaGFydCBoZWlnaHQgd2lsbCBmaXQgaW4gcGFyZW50IGF2YWlsYWJsZSBoZWlnaHQuICovXG4gIEBJbnB1dCgpIHNldCBmaXRIZWlnaHQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLm9wdGlvbnMuZml0SGVpZ2h0ID0gdmFsdWU7XG5cbiAgICBpZiAodGhpcy5waWUpIHtcbiAgICAgIHRoaXMucGllLnNldHRpbmdzLmZpdEhlaWdodCA9IHZhbHVlO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIEFuIGVtcHR5IG1lc3NhZ2Ugd2lsbCBiZSBkaXNwbGF5ZWQgd2hlbiB0aGVyZSBpcyBubyBjaGFydCBkYXRhLiAqL1xuICBASW5wdXQoKSBzZXQgZW1wdHlNZXNzYWdlKHZhbHVlOiBTb2hvRW1wdHlNZXNzYWdlT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucy5lbXB0eU1lc3NhZ2UgPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLnBpZSkge1xuICAgICAgdGhpcy5waWUuc2V0dGluZ3MuZW1wdHlNZXNzYWdlID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZVJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogRXZlbnRzICovXG4gIEBPdXRwdXQoKSBzZWxlY3RlZDogRXZlbnRFbWl0dGVyPFNvaG9QaWVTZWxlY3RFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPFNvaG9QaWVTZWxlY3RFdmVudD4oKTtcbiAgQE91dHB1dCgpIHVuc2VsZWN0ZWQ6IEV2ZW50RW1pdHRlcjxTb2hvUGllU2VsZWN0RXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxTb2hvUGllU2VsZWN0RXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSByZW5kZXJlZDogRXZlbnRFbWl0dGVyPE9iamVjdD4gPSBuZXcgRXZlbnRFbWl0dGVyPE9iamVjdD4oKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtbmF0aXZlLCBAYW5ndWxhci1lc2xpbnQvbm8tb3V0cHV0LXJlbmFtZVxuICBAT3V0cHV0KCkgZGJsY2xpY2s6IEV2ZW50RW1pdHRlcjxPYmplY3Q+ID0gbmV3IEV2ZW50RW1pdHRlcjxPYmplY3Q+KCk7XG5cbiAgLyoqXG4gICAqIEB0b2RvIHJlbW92ZSBvdmVycmlkZSBvZiBuYXRpdmUgZWxlbWVudFxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9uby1vdXRwdXQtbmF0aXZlXG4gIEBPdXRwdXQoKSBjb250ZXh0bWVudT86IEV2ZW50RW1pdHRlcjxPYmplY3RbXT4gPSBuZXcgRXZlbnRFbWl0dGVyPE9iamVjdFtdPigpO1xuXG4gIHByaXZhdGUgalF1ZXJ5RWxlbWVudD86IEpRdWVyeTtcbiAgcHJpdmF0ZSBwaWU/OiBTb2hvUGllIHwgbnVsbDtcbiAgcHJpdmF0ZSB1cGRhdGVSZXF1aXJlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZWxlbWVudDogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIG5nWm9uZTogTmdab25lLFxuICApIHsgfVxuXG4gIC8qKiBTZXR1cCAqL1xuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuXG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQgPSBqUXVlcnkodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xuXG4gICAgICB0aGlzLm9wdGlvbnMudHlwZSA9ICdwaWUnO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50LmNoYXJ0KHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLnBpZSA9IHRoaXMualF1ZXJ5RWxlbWVudC5kYXRhKCdwaWUnKTtcblxuICAgICAgLy8gU2V0dXAgdGhlIGV2ZW50c1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdzZWxlY3RlZCcsIChfZTogYW55LCBhcmdzOiBTb2hvUGllU2VsZWN0RXZlbnQpID0+XG4gICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLnNlbGVjdGVkLmVtaXQoYXJncykpKTtcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vbigndW5zZWxlY3RlZCcsIChfZTogYW55LCBhcmdzOiBTb2hvUGllU2VsZWN0RXZlbnQpID0+XG4gICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLnVuc2VsZWN0ZWQuZW1pdChhcmdzKSkpO1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9uKCdyZW5kZXJlZCcsICguLi5hcmdzKSA9PlxuICAgICAgICB0aGlzLm5nWm9uZS5ydW4oKCkgPT4gdGhpcy5yZW5kZXJlZC5lbWl0KGFyZ3MpKSk7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQub24oJ2NvbnRleHRtZW51JywgKC4uLmFyZ3MpID0+XG4gICAgICAgIHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLmNvbnRleHRtZW51Py5lbWl0KGFyZ3MpKSk7XG4gICAgICB0aGlzLmpRdWVyeUVsZW1lbnQub24oJ2RibGNsaWNrJywgKF9lOiBhbnksIGFyZ3M6IE9iamVjdCkgPT5cbiAgICAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IHRoaXMuZGJsY2xpY2suZW1pdChhcmdzKSkpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgIGlmICh0aGlzLnBpZSAmJiB0aGlzLnVwZGF0ZVJlcXVpcmVkKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLnBpZT8udXBkYXRlZCh0aGlzLnBpZS5zZXR0aW5ncykpO1xuICAgICAgdGhpcy51cGRhdGVSZXF1aXJlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZWQoKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5vcHRpb25zLnR5cGUgPSAncGllJztcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudD8uY2hhcnQodGhpcy5vcHRpb25zKTtcbiAgICAgIHRoaXMucGllID0gdGhpcy5qUXVlcnlFbGVtZW50Py5kYXRhKCdwaWUnKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBUZWFyIERvd24gKi9cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgLy8gY2FsbCBvdXRzaWRlIHRoZSBhbmd1bGFyIHpvbmUgc28gY2hhbmdlIGRldGVjdGlvbiBpc24ndCB0cmlnZ2VyZWQgYnkgdGhlIHNvaG8gY29tcG9uZW50LlxuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmpRdWVyeUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5qUXVlcnlFbGVtZW50Lm9mZigpO1xuICAgICAgICB0aGlzLmpRdWVyeUVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5waWUpIHtcbiAgICAgICAgdGhpcy5waWUuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnBpZSA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc2V0U2VsZWN0ZWQoc2VsZWN0ZWQ6IFNvaG9QaWVTZWxlY3RlZCkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHRoaXMucGllPy5zZXRTZWxlY3RlZChzZWxlY3RlZCkpO1xuICB9XG5cbiAgcHVibGljIHRvZ2dsZVNlbGVjdGVkKHNlbGVjdGVkOiBTb2hvUGllU2VsZWN0ZWQpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB0aGlzLnBpZT8udG9nZ2xlU2VsZWN0ZWQoc2VsZWN0ZWQpKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZWxlY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy5waWU/LmdldFNlbGVjdGVkKCkpO1xuICB9XG59XG4iXX0=