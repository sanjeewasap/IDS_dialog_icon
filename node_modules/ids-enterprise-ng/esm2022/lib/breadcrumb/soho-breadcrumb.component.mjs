import { ChangeDetectionStrategy, Component, HostBinding, Input, } from '@angular/core';
import * as i0 from "@angular/core";
/**
 * Soho Breadcrumb Component
 */
export class SohoBreadcrumbComponent {
    get isBreadcrumb() {
        return true;
    }
    /** Allow Breadcrumb Definition by Input */
    set breadcrumbs(items) {
        this.options.breadcrumbs = items;
        this.updated();
    }
    get breadcrumbs() {
        return this.options.breadcrumbs;
    }
    /** Allow change to alternate styling via Input **/
    set alternate(val) {
        this.options.style = val ? 'alternate' : 'default';
        this.updated();
    }
    get alternate() {
        return this.options.style === 'alternate';
    }
    /** Add truncatling behavior when a lot of items */
    set truncate(truncate) {
        this.options.truncate = truncate;
        this.updated();
    }
    get truncate() {
        return this.options.truncate;
    }
    /** Add extra attributes like id's to the component **/
    set attributes(attributes) {
        this.options.attributes = attributes;
        this.updated();
    }
    get attributes() {
        return this.options.attributes;
    }
    /** Provides access to the internal array of currently-invoked IDS Breadcrumb APIs */
    get breadcrumbAPIs() {
        if (!this.breadcrumbAPI) {
            return [];
        }
        return this.breadcrumbAPI.breadcrumbs;
    }
    /** Provides access to the IDS Breadcrumb's disabled property */
    get disabled() {
        return this.breadcrumbAPI?.disabled;
    }
    /**
     * Constructor
     *
     * @param elementRef - the element matching the component's selector.
     */
    constructor(element, ngZone) {
        this.element = element;
        this.ngZone = ngZone;
        // Default Options
        this.options = {
            style: 'default'
        };
    }
    // ------------------------------------------
    // Lifecycle Events
    // ------------------------------------------
    ngAfterViewInit() {
        this.ngZone.runOutsideAngular(() => {
            this.jQueryElement = jQuery(this.element.nativeElement);
            this.jQueryElement.breadcrumb(this.options);
            this.breadcrumbAPI = this.jQueryElement.data('breadcrumb');
        });
    }
    ngOnDestroy() {
        this.ngZone.runOutsideAngular(() => {
            if (this.breadcrumbAPI) {
                this.breadcrumbAPI.destroy();
                this.breadcrumbAPI = null;
            }
            if (this.jQueryElement) {
                this.jQueryElement.off();
                this.jQueryElement = undefined;
            }
        });
    }
    ngOnInit() {
    }
    // -------------------------------------------------------------
    // All the below methods pass through to the IDS Breadcrumb API
    // -------------------------------------------------------------
    enable() {
        if (!this.breadcrumbAPI) {
            return;
        }
        this.ngZone.runOutsideAngular(() => {
            this.breadcrumbAPI?.enable();
        });
    }
    disable() {
        if (!this.breadcrumbAPI) {
            return;
        }
        this.ngZone.runOutsideAngular(() => {
            this.breadcrumbAPI?.disable();
        });
    }
    /**
     * Adds a new breadcrumb item to the list
     */
    add(settings, doRender) {
        if (!this.breadcrumbAPI) {
            return;
        }
        this.ngZone.runOutsideAngular(() => {
            this.breadcrumbAPI?.add(settings, doRender);
        });
    }
    /**
     * Removes a single breadcrumb item from the list
     */
    remove(item, doRender) {
        if (!this.breadcrumbAPI) {
            return;
        }
        this.ngZone.runOutsideAngular(() => {
            this.breadcrumbAPI?.remove(item, doRender);
        });
    }
    /**
     * Removes all breadcrumb items from the list
     */
    removeAll(doRender) {
        if (!this.breadcrumbAPI) {
            return;
        }
        this.ngZone.runOutsideAngular(() => {
            this.breadcrumbAPI?.removeAll(doRender);
        });
    }
    /**
     * Gets references related to a particular Breadcrumb Item.
     * The return object contains:
     * - 'a' : a reference to the breadcrumb item's anchor tag
     * - 'api' : a reference to the breadcrumb item's API
     * - 'i' : a number representing the current index of the breadcrumb item.
     */
    getBreadcrumbItem(item) {
        if (!this.breadcrumbAPI) {
            return;
        }
        return this.breadcrumbAPI.getBreadcrumbItemAPI(item);
    }
    /**
     * Takes a reference to a Breadcrumb item and makes it "Current",
     * styling it with bold text and popping it out of truncation.
     */
    makeCurrent(item) {
        if (!this.breadcrumbAPI) {
            return;
        }
        this.ngZone.runOutsideAngular(() => {
            this.breadcrumbAPI?.makeCurrent(item);
        });
    }
    /**
     * Updates the Breadcrumb List with new incoming settings
     */
    updated(settings) {
        if (settings) {
            this.options = settings;
        }
        if (!this.breadcrumbAPI) {
            return;
        }
        this.ngZone.runOutsideAngular(() => {
            this.breadcrumbAPI?.updated(this.options);
        });
    }
    /**
     * Destroys this component and tears down the IDS Breadcrumb
     */
    destroy() {
        if (!this.breadcrumbAPI) {
            return;
        }
        this.ngZone.runOutsideAngular(() => {
            this.breadcrumbAPI?.destroy();
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoBreadcrumbComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoBreadcrumbComponent, selector: "[soho-breadcrumb]", inputs: { breadcrumbs: "breadcrumbs", alternate: "alternate", truncate: "truncate", attributes: "attributes" }, host: { properties: { "class.breadcrumb": "this.isBreadcrumb" } }, ngImport: i0, template: "<ng-content></ng-content>\n", changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoBreadcrumbComponent, decorators: [{
            type: Component,
            args: [{ selector: '[soho-breadcrumb]', changeDetection: ChangeDetectionStrategy.OnPush, template: "<ng-content></ng-content>\n" }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { isBreadcrumb: [{
                type: HostBinding,
                args: ['class.breadcrumb']
            }], breadcrumbs: [{
                type: Input
            }], alternate: [{
                type: Input
            }], truncate: [{
                type: Input
            }], attributes: [{
                type: Input
            }] } });
export class SohoBreadcrumbListComponent {
    constructor() {
        this.isBreadcrumbList = true;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoBreadcrumbListComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.4", type: SohoBreadcrumbListComponent, selector: "[soho-breadcrumb-list]", host: { properties: { "class.breadcrumb-list": "this.isBreadcrumbList" } }, ngImport: i0, template: `<ng-content></ng-content>`, isInline: true, changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.4", ngImport: i0, type: SohoBreadcrumbListComponent, decorators: [{
            type: Component,
            args: [{
                    selector: '[soho-breadcrumb-list]',
                    template: `<ng-content></ng-content>`,
                    changeDetection: ChangeDetectionStrategy.OnPush
                }]
        }], propDecorators: { isBreadcrumbList: [{
                type: HostBinding,
                args: ['class.breadcrumb-list']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29oby1icmVhZGNydW1iLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2lkcy1lbnRlcnByaXNlLW5nL3NyYy9saWIvYnJlYWRjcnVtYi9zb2hvLWJyZWFkY3J1bWIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWRzLWVudGVycHJpc2Utbmcvc3JjL2xpYi9icmVhZGNydW1iL3NvaG8tYnJlYWRjcnVtYi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBRUwsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFFVCxXQUFXLEVBQ1gsS0FBSyxHQUlOLE1BQU0sZUFBZSxDQUFDOztBQUV2Qjs7R0FFRztBQU1ILE1BQU0sT0FBTyx1QkFBdUI7SUFVbEMsSUFBcUMsWUFBWTtRQUMvQyxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCwyQ0FBMkM7SUFDM0MsSUFDVyxXQUFXLENBQUMsS0FBOEM7UUFDbkUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNqQixDQUFDO0lBQ0QsSUFBVyxXQUFXO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7SUFDbEMsQ0FBQztJQUVELG1EQUFtRDtJQUNuRCxJQUNXLFNBQVMsQ0FBQyxHQUFZO1FBQy9CLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7UUFDbkQsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2pCLENBQUM7SUFDRCxJQUFXLFNBQVM7UUFDbEIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssS0FBSyxXQUFXLENBQUM7SUFDNUMsQ0FBQztJQUVELG1EQUFtRDtJQUNuRCxJ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MkJBQTJCO0lBTHhDO1FBTXdDLHFCQUFnQixHQUFHLElBQUksQ0FBQztLQUMvRDs4R0FGWSwyQkFBMkI7a0dBQTNCLDJCQUEyQiwwSUFINUIsMkJBQTJCOzsyRkFHMUIsMkJBQTJCO2tCQUx2QyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSx3QkFBd0I7b0JBQ2xDLFFBQVEsRUFBRSwyQkFBMkI7b0JBQ3JDLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO2lCQUNoRDs4QkFFdUMsZ0JBQWdCO3NCQUFyRCxXQUFXO3VCQUFDLHVCQUF1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyVmlld0luaXQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEhvc3RCaW5kaW5nLFxuICBJbnB1dCxcbiAgTmdab25lLFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbi8qKlxuICogU29obyBCcmVhZGNydW1iIENvbXBvbmVudFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdbc29oby1icmVhZGNydW1iXScsIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgdGVtcGxhdGVVcmw6ICdzb2hvLWJyZWFkY3J1bWIuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBTb2hvQnJlYWRjcnVtYkNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgT25Jbml0IHtcblxuICBwcml2YXRlIGpRdWVyeUVsZW1lbnQ/OiBKUXVlcnk8SFRNTEVsZW1lbnQ+O1xuICBwcml2YXRlIGJyZWFkY3J1bWJBUEk/OiBTb2hvQnJlYWRjcnVtYlN0YXRpYyB8IG51bGw7XG5cbiAgLy8gRGVmYXVsdCBPcHRpb25zXG4gIHByaXZhdGUgb3B0aW9uczogU29ob0JyZWFkY3J1bWJPcHRpb25zID0ge1xuICAgIHN0eWxlOiAnZGVmYXVsdCdcbiAgfTtcblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmJyZWFkY3J1bWInKSBnZXQgaXNCcmVhZGNydW1iKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqIEFsbG93IEJyZWFkY3J1bWIgRGVmaW5pdGlvbiBieSBJbnB1dCAqL1xuICBASW5wdXQoKVxuICBwdWJsaWMgc2V0IGJyZWFkY3J1bWJzKGl0ZW1zOiBTb2hvQnJlYWRjcnVtYkl0ZW1PcHRpb25zW10gfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLm9wdGlvbnMuYnJlYWRjcnVtYnMgPSBpdGVtcztcbiAgICB0aGlzLnVwZGF0ZWQoKTtcbiAgfVxuICBwdWJsaWMgZ2V0IGJyZWFkY3J1bWJzKCk6IFNvaG9CcmVhZGNydW1iSXRlbU9wdGlvbnNbXSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5icmVhZGNydW1icztcbiAgfVxuXG4gIC8qKiBBbGxvdyBjaGFuZ2UgdG8gYWx0ZXJuYXRlIHN0eWxpbmcgdmlhIElucHV0ICoqL1xuICBASW5wdXQoKVxuICBwdWJsaWMgc2V0IGFsdGVybmF0ZSh2YWw6IGJvb2xlYW4pIHtcbiAgICB0aGlzLm9wdGlvbnMuc3R5bGUgPSB2YWwgPyAnYWx0ZXJuYXRlJyA6ICdkZWZhdWx0JztcbiAgICB0aGlzLnVwZGF0ZWQoKTtcbiAgfVxuICBwdWJsaWMgZ2V0IGFsdGVybmF0ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnN0eWxlID09PSAnYWx0ZXJuYXRlJztcbiAgfVxuXG4gIC8qKiBBZGQgdHJ1bmNhdGxpbmcgYmVoYXZpb3Igd2hlbiBhIGxvdCBvZiBpdGVtcyAqL1xuICBASW5wdXQoKVxuICBwdWJsaWMgc2V0IHRydW5jYXRlKHRydW5jYXRlOiBib29sZWFuIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5vcHRpb25zLnRydW5jYXRlID0gdHJ1bmNhdGU7XG4gICAgdGhpcy51cGRhdGVkKCk7XG4gIH1cbiAgcHVibGljIGdldCB0cnVuY2F0ZSgpOiBib29sZWFuIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRydW5jYXRlO1xuICB9XG5cbiAgLyoqIEFkZCBleHRyYSBhdHRyaWJ1dGVzIGxpa2UgaWQncyB0byB0aGUgY29tcG9uZW50ICoqL1xuICBASW5wdXQoKVxuICBwdWJsaWMgc2V0IGF0dHJpYnV0ZXMoYXR0cmlidXRlczogQXJyYXk8T2JqZWN0PiB8IE9iamVjdCB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMub3B0aW9ucy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICB0aGlzLnVwZGF0ZWQoKTtcbiAgfVxuICBwdWJsaWMgZ2V0IGF0dHJpYnV0ZXMoKTogQXJyYXk8T2JqZWN0PiB8IE9iamVjdCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5hdHRyaWJ1dGVzO1xuICB9XG5cbiAgLyoqIFByb3ZpZGVzIGFjY2VzcyB0byB0aGUgaW50ZXJuYWwgYXJyYXkgb2YgY3VycmVudGx5LWludm9rZWQgSURTIEJyZWFkY3J1bWIgQVBJcyAqL1xuICBwdWJsaWMgZ2V0IGJyZWFkY3J1bWJBUElzKCk6IFNvaG9CcmVhZGNydW1iSXRlbVN0YXRpY1tdIHtcbiAgICBpZiAoIXRoaXMuYnJlYWRjcnVtYkFQSSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5icmVhZGNydW1iQVBJLmJyZWFkY3J1bWJzO1xuICB9XG5cbiAgLyoqIFByb3ZpZGVzIGFjY2VzcyB0byB0aGUgSURTIEJyZWFkY3J1bWIncyBkaXNhYmxlZCBwcm9wZXJ0eSAqL1xuICBwdWJsaWMgZ2V0IGRpc2FibGVkKCk6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmJyZWFkY3J1bWJBUEk/LmRpc2FibGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50UmVmIC0gdGhlIGVsZW1lbnQgbWF0Y2hpbmcgdGhlIGNvbXBvbmVudCdzIHNlbGVjdG9yLlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgbmdab25lOiBOZ1pvbmVcbiAgKSB7IH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gTGlmZWN5Y2xlIEV2ZW50c1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5qUXVlcnlFbGVtZW50ID0galF1ZXJ5KHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50KTtcbiAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5icmVhZGNydW1iKHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLmJyZWFkY3J1bWJBUEkgPSB0aGlzLmpRdWVyeUVsZW1lbnQuZGF0YSgnYnJlYWRjcnVtYicpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuYnJlYWRjcnVtYkFQSSkge1xuICAgICAgICB0aGlzLmJyZWFkY3J1bWJBUEkuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmJyZWFkY3J1bWJBUEkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5qUXVlcnlFbGVtZW50KSB7XG4gICAgICAgIHRoaXMualF1ZXJ5RWxlbWVudC5vZmYoKTtcbiAgICAgICAgdGhpcy5qUXVlcnlFbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEFsbCB0aGUgYmVsb3cgbWV0aG9kcyBwYXNzIHRocm91Z2ggdG8gdGhlIElEUyBCcmVhZGNydW1iIEFQSVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgZW5hYmxlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5icmVhZGNydW1iQVBJKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5icmVhZGNydW1iQVBJPy5lbmFibGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2FibGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmJyZWFkY3J1bWJBUEkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmJyZWFkY3J1bWJBUEk/LmRpc2FibGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgbmV3IGJyZWFkY3J1bWIgaXRlbSB0byB0aGUgbGlzdFxuICAgKi9cbiAgYWRkKHNldHRpbmdzPzogU29ob0JyZWFkY3J1bWJJdGVtT3B0aW9ucywgZG9SZW5kZXI/OiBib29sZWFuKSB7XG4gICAgaWYgKCF0aGlzLmJyZWFkY3J1bWJBUEkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmJyZWFkY3J1bWJBUEk/LmFkZChzZXR0aW5ncywgZG9SZW5kZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzaW5nbGUgYnJlYWRjcnVtYiBpdGVtIGZyb20gdGhlIGxpc3RcbiAgICovXG4gIHJlbW92ZShpdGVtOiBTb2hvQnJlYWRjcnVtYlJlZiwgZG9SZW5kZXI/OiBib29sZWFuKSB7XG4gICAgaWYgKCF0aGlzLmJyZWFkY3J1bWJBUEkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmJyZWFkY3J1bWJBUEk/LnJlbW92ZShpdGVtLCBkb1JlbmRlcik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgYnJlYWRjcnVtYiBpdGVtcyBmcm9tIHRoZSBsaXN0XG4gICAqL1xuICByZW1vdmVBbGwoZG9SZW5kZXI/OiBib29sZWFuKSB7XG4gICAgaWYgKCF0aGlzLmJyZWFkY3J1bWJBUEkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmJyZWFkY3J1bWJBUEk/LnJlbW92ZUFsbChkb1JlbmRlcik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyByZWZlcmVuY2VzIHJlbGF0ZWQgdG8gYSBwYXJ0aWN1bGFyIEJyZWFkY3J1bWIgSXRlbS5cbiAgICogVGhlIHJldHVybiBvYmplY3QgY29udGFpbnM6XG4gICAqIC0gJ2EnIDogYSByZWZlcmVuY2UgdG8gdGhlIGJyZWFkY3J1bWIgaXRlbSdzIGFuY2hvciB0YWdcbiAgICogLSAnYXBpJyA6IGEgcmVmZXJlbmNlIHRvIHRoZSBicmVhZGNydW1iIGl0ZW0ncyBBUElcbiAgICogLSAnaScgOiBhIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIGJyZWFkY3J1bWIgaXRlbS5cbiAgICovXG4gIGdldEJyZWFkY3J1bWJJdGVtKGl0ZW06IFNvaG9CcmVhZGNydW1iUmVmKSB7XG4gICAgaWYgKCF0aGlzLmJyZWFkY3J1bWJBUEkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5icmVhZGNydW1iQVBJLmdldEJyZWFkY3J1bWJJdGVtQVBJKGl0ZW0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgcmVmZXJlbmNlIHRvIGEgQnJlYWRjcnVtYiBpdGVtIGFuZCBtYWtlcyBpdCBcIkN1cnJlbnRcIixcbiAgICogc3R5bGluZyBpdCB3aXRoIGJvbGQgdGV4dCBhbmQgcG9wcGluZyBpdCBvdXQgb2YgdHJ1bmNhdGlvbi5cbiAgICovXG4gIG1ha2VDdXJyZW50KGl0ZW06IFNvaG9CcmVhZGNydW1iUmVmKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmJyZWFkY3J1bWJBUEkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmJyZWFkY3J1bWJBUEk/Lm1ha2VDdXJyZW50KGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIEJyZWFkY3J1bWIgTGlzdCB3aXRoIG5ldyBpbmNvbWluZyBzZXR0aW5nc1xuICAgKi9cbiAgdXBkYXRlZChzZXR0aW5ncz86IFNvaG9CcmVhZGNydW1iT3B0aW9ucykge1xuICAgIGlmIChzZXR0aW5ncykge1xuICAgICAgdGhpcy5vcHRpb25zID0gc2V0dGluZ3M7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmJyZWFkY3J1bWJBUEkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmJyZWFkY3J1bWJBUEk/LnVwZGF0ZWQodGhpcy5vcHRpb25zKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyB0aGlzIGNvbXBvbmVudCBhbmQgdGVhcnMgZG93biB0aGUgSURTIEJyZWFkY3J1bWJcbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgaWYgKCF0aGlzLmJyZWFkY3J1bWJBUEkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLmJyZWFkY3J1bWJBUEk/LmRlc3Ryb3koKTtcbiAgICB9KTtcbiAgfVxufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdbc29oby1icmVhZGNydW1iLWxpc3RdJywgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBTb2hvQnJlYWRjcnVtYkxpc3RDb21wb25lbnQge1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmJyZWFkY3J1bWItbGlzdCcpIGlzQnJlYWRjcnVtYkxpc3QgPSB0cnVlO1xufVxuIiwiPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuIl19