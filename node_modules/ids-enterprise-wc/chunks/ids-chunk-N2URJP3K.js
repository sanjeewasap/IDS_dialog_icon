import{a as m}from"./ids-chunk-I2SLSNHQ.js";import{a as A}from"./ids-chunk-AKCO43TX.js";import{a as g,b as f}from"./ids-chunk-XE4WFW5M.js";import{a as c}from"./ids-chunk-GFV2Z7F5.js";import{e as a}from"./ids-chunk-QPDOZZIG.js";import{a as e}from"./ids-chunk-EQJWBFQ2.js";import{a as d}from"./ids-chunk-U7OOVFXE.js";var b=`
:host(ids-draggable) {
  height: fit-content;
  width: fit-content;
}

:host(ids-draggable:not([handle])) {
  cursor: var(--ids-cursor-move);
  touch-action: none;
}

:host(ids-draggable[disabled]:not([handle])) {
  cursor: inherit;
}

:host(ids-draggable[axis=x]:not([disabled])) {
  cursor: var(--ids-cursor-resize-x);
}

:host(ids-draggable[axis=y]:not([disabled])) {
  cursor: var(--ids-cursor-resize-y);
}

ids-draggable[is-dragging]:not([handle]) {
  cursor: var(--ids-cursor-grabbing);
}`;var l=32,u=class extends A(c){#i={};constructor(){super()}static get attributes(){return[...super.attributes,e.AXIS,e.DISABLED,e.HANDLE,e.IS_DRAGGING,e.MAX_TRANSFORM_X,e.MAX_TRANSFORM_Y,e.MIN_TRANSFORM_X,e.MIN_TRANSFORM_Y,e.PARENT_CONTAINMENT]}template(){return"<slot></slot>"}connectedCallback(){super.connectedCallback(),this.#l(),this.#t.style.position="absolute",this.#t.style.opacity=0,this.#t.style.width=`${l}px`,this.#t.style.height=`${l}px`,this.#t.style.cursor=this.#u(),this.setAttribute("aria-valuenow","0")}disconnectedCallback(){super.disconnectedCallback()}set axis(t){let s;switch(t){case"y":{s="y";break}case"x":{s="x";break}default:{s=void 0;break}}s?(this.setAttribute(e.AXIS,s),this.isDragging=!1,this.#t.style.cursor=this.#u()):!s&&this.hasAttribute(e.AXIS)&&(this.removeAttribute(e.AXIS),this.isDragging=!1,this.#t.style.cursor=this.#u())}get axis(){return this.getAttribute("axis")}set parentContainment(t){let s=a(t);s?this.getAttribute(e.PARENT_CONTAINMENT)!==""&&this.setAttribute(e.PARENT_CONTAINMENT,""):!s&&this.hasAttribute(e.PARENT_CONTAINMENT)&&this.removeAttribute(e.PARENT_CONTAINMENT)}get parentContainment(){return a(this.getAttribute(e.PARENT_CONTAINMENT))}set disabled(t){let s=a(t);s&&this.getAttribute(e.DISABLED)!==""?(this.offEvent("mousemove",window.document,this.onMouseMove),this.setAttribute(e.DISABLED,"")):!s&&this.hasAttribute(e.DISABLED)&&this.removeAttribute(e.DISABLED)}get disabled(){return a(this.getAttribute(e.DISABLED))}set handle(t){this.getAttribute(e.HANDLE)!==t&&(this.hasAttribute(e.HANDLE)&&!t?this.removeAttribute(e.HANDLE):t&&this.setAttribute(e.HANDLE,t),this.#l())}get handle(){return this.getAttribute(e.HANDLE)}#l=()=>{this.offEvent("mousedown",this.#r),this.offEvent("mouseup",window.document,this.onMouseUp),this.offEvent("mousemove",window.document,this.onMouseMove),this.#r=this.handle?document.querySelector(this.handle)||this:this,this.#r!==this&&(this.#r.style.cursor=this.#u()),this.onEvent("mousedown",this.#r,t=>{if(this.disabled||t.button!==0)return;t.preventDefault(),this.isDragging=!0,this.onEvent("mouseup",document,this.onMouseUp),this.onEvent("mousemove",document,this.onMouseMove),this.parentContainment&&this.#d(t?.path||t?.composedPath?.()),this.#n={x:t.x,y:t.y};let s=m(this);this.#s={x:this.axis!=="y"?s.x:0,y:this.axis!=="x"?s.y:0},this.triggerEvent("dragstart",this,{detail:{mouseX:t.x,mouseY:t.y,translateX:this.#s.x,transitionY:this.#s.y}});let i=this.getBoundingClientRect();this.#o={width:i.width,height:i.height,left:i.left-this.#s.x,right:i.right-this.#s.x,top:i.top-this.#s.y,bottom:i.bottom-this.#s.y};let r=0,n=0,o=0,h=0;this.#e&&(r=this.#e.left-this.#o.left,n=this.#e.right-this.#o.right,o=this.#e.top-this.#o.top,h=this.#e.bottom-this.#o.bottom),this.#a={left:r+(this.#i.left||0),right:n-(this.#i.right||0),top:o+(this.#i.top||0),bottom:h-(this.#i.bottom||0)},this.#t.style.pointerEvents="all",(document.body.querySelector("ids-container")||document.body).appendChild(this.#t)})};#h(t,s,i){let r=parseInt(i);r!==null&&!Number.isNaN(r)?parseInt(t.getAttribute(s))!==r&&t.setAttribute(s,r):i===null&&t.hasAttribute(s)&&t.removeAttribute(s)}set minTransformX(t){this.#h(this,e.MIN_TRANSFORM_X,t)}get minTransformX(){return parseInt(this.getAttribute(e.MIN_TRANSFORM_X)??"0")}set maxTransformX(t){this.#h(this,e.MAX_TRANSFORM_X,t)}get maxTransformX(){return parseInt(this.getAttribute(e.MAX_TRANSFORM_X)??"0")}set minTransformY(t){this.#h(this,e.MIN_TRANSFORM_Y,t)}get minTransformY(){return parseInt(this.getAttribute(e.MIN_TRANSFORM_Y)??"0")}get maxTransformY(){return parseInt(this.getAttribute(e.MAX_TRANSFORM_Y)??"0")}set maxTransformY(t){this.#h(this,e.MAX_TRANSFORM_Y,t)}#m=(t,s)=>{let i=0,r=0;return this.axis!=="y"&&(i=this.#s.x+t),this.axis!=="x"&&(r=this.#s.y+s),this.parentContainment&&(this.axis!=="y"&&(i=Math.max(this.#a.left,i),i=Math.min(this.#a.right,i)),this.axis!=="x"&&(r=Math.max(this.#a.top,r),r=Math.min(this.#a.bottom,r))),this.hasAttribute(e.MIN_TRANSFORM_X)&&(i=Math.max(i,this.minTransformX)),this.hasAttribute(e.MAX_TRANSFORM_X)&&(i=Math.min(i,this.maxTransformX)),this.hasAttribute(e.MIN_TRANSFORM_Y)&&(r=Math.max(r,this.minTransformY)),this.hasAttribute(e.MAX_TRANSFORM_Y)&&(r=Math.min(r,this.maxTransformY)),this.style.setProperty("transform",`translate(${i}px, ${r}px)`),this.setAttribute("aria-valuenow",(this.axis==="x"?i:r).toString()),[i,r]};onMouseMove=t=>{t.preventDefault();let s={};if(this.isDragging){let i=t.x-this.#n.x,r=t.y-this.#n.y,[n,o]=this.#m(i,r);this.#e&&(s.parentRect=this.#e),s.mouseX=t.x,s.mouseY=t.y,s.clientX=t.clientX,s.clientY=t.clientY,s.dragDeltaX=i,s.dragDeltaY=r,s.translateX=n,s.translateY=o,this.#t&&(this.#t.style.left=`${t.x-l/2}px`,this.#t.style.top=`${t.y-l/2}px`)}s.originalEvent=t,this.triggerEvent("drag",this,{detail:s})};onMouseUp=t=>{if(this.isDragging){this.isDragging=!1;let s=m(this);this.triggerEvent("dragend",this,{detail:{mouseX:t.x,mouseY:t.y,dragDeltaX:t.x-this.#n.x,dragDeltaY:t.y-this.#n.y,translateX:s.x,translateY:s.y}}),(document.body.querySelector("ids-container")||document.body)?.removeChild(this.#t)}this.offEvent("mousemove",document,this.onMouseMove),this.offEvent("mouseup",document,this.onMouseUp),this.#t.style.pointerEvents="none"};set isDragging(t){let s=a(t);s&&this.getAttribute(e.IS_DRAGGING)!==""?this.setAttribute(e.IS_DRAGGING,""):!s&&this.hasAttribute(e.IS_DRAGGING)&&this.removeAttribute(e.IS_DRAGGING)}get isDragging(){return a(this.getAttribute(e.IS_DRAGGING))}#u(){switch(this.axis){case"x":return"ew-resize";case"y":return"ns-resize";default:return"move"}}#r;#e;#n;#s;#o;#a;#t=document.createElement("div");#d(t){this.#e=void 0;let s=0,i=t[s],r=!1,n=!1,o=!1;for(;(!this.#e||!r||o||n)&&s+1<t.length;){if(i===this&&(r=!0),s++,i=t[s],n=i.tagName==="SLOT",o=i instanceof ShadowRoot,o||n)continue;let h=i?.getBoundingClientRect?.();h?.height!==0&&h?.width!==0&&(this.#e=h)}}set relativeBounds(t){if(t){this.setAttribute(e.RELATIVE_BOUNDS,String(t)),this.#g();return}this.removeAttribute(e.RELATIVE_BOUNDS)}get relativeBounds(){return this.getAttribute(e.RELATIVE_BOUNDS)}getBoundsHash(t){return`${t?.left||0}_${t?.right||0}_${t?.top||0}_${t?.bottom||0}`}#g(){let t=this.getAttribute(e.RELATIVE_BOUNDS),s=Object.fromEntries(t?.split(";").map(i=>{let[r,n]=i?.split?.(":");return[r,Number.isNaN(parseInt(n))?0:parseInt(n)]})??[]);this.getBoundsHash(s)!==this.getBoundsHash(this.#i)&&(this.#i=s)}};u=d([g("ids-draggable"),f(b)],u);export{u as a};
