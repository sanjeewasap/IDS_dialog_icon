import{m as i}from"./ids-chunk-ODGLGMPF.js";import{b as d}from"./ids-chunk-QPDOZZIG.js";import{a}from"./ids-chunk-EQJWBFQ2.js";var h=o=>class extends o{legendsHref=[];constructor(...e){super(...e)}static get attributes(){return[...o.attributes,a.LEGEND_PLACEMENT]}connectedCallback(){super.connectedCallback?.(),this.attachLegendEvents()}set legendPlacement(e){let t=this.shadowRoot?.querySelector(".ids-chart-container");this.setAttribute(a.LEGEND_PLACEMENT,e),t?.classList.remove("legend-top","legend-bottom","legend-left","legend-right"),t?.classList.add(`legend-${e}`)}get legendPlacement(){return this.getAttribute(a.LEGEND_PLACEMENT)||"bottom"}legendTemplate(e="name"){let t='<div class="chart-legend">';return this.data.forEach((n,r)=>{let s=n[e]?n[e]:n.name,l=n.pattern?`<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg">
        <rect width="12" height="12" fill="url(#${n.pattern})"></rect>
      </svg>`:"",c=n.pattern?"":`color-${r+1}`;t+=`<a href="#legend-${d(s)}" data-index="${r}" class="chart-legend-item"><div class="swatch ${c}">${l}</div>${s}</a>`}),t+="</div>",t}adjustLabels(){let e=this.shadowRoot?.querySelector(".chart-legend");e&&i(e)&&(e.outerHTML=this.legendTemplate("shortName")),e=this.shadowRoot?.querySelector(".chart-legend"),e&&i(e)&&(e.outerHTML=this.legendTemplate("abbreviatedName"))}legendsClickable(e){if(!this.shadowRoot)return;let t=[...this.shadowRoot.querySelectorAll(".chart-legend-item")];if(!t[0])return;let n=!1;this.legendsHref=this.legendsHref||t.map(r=>r.getAttribute("href")),e&&!t[0].hasAttribute("href")?(t.forEach((r,s)=>{r.setAttribute("href",this.legendsHref[s]??"#"),r.removeAttribute("aria-hidden")}),n=!0):!e&&t[0].hasAttribute("href")&&(t.forEach(r=>{r.setAttribute("aria-hidden","true"),r.removeAttribute("href")}),n=!0),n&&this[e?"attachLegendEvents":"detachLegendEvents"]()}attachLegendEvents(){let e=this.shadowRoot?.querySelector('slot[name="legend"]');this.offEvent("click.chartlegend",e),this.onEvent("click.chartlegend",e,async t=>{let n=t.target;if(n?.classList?.contains("chart-legend-item")){t.preventDefault();let r=n.getAttribute("data-index");this.setSelection?.(r,!0)}})}detachLegendEvents(){let e=this.shadowRoot?.querySelector('slot[name="legend"]');this.offEvent("click.chartlegend",e)}},u=h;export{u as a};
