import{a as T}from"./ids-chunk-RRSHSZ55.js";import{a as O}from"./ids-chunk-AKCO43TX.js";import{a as v,b as E}from"./ids-chunk-XE4WFW5M.js";import{a as y}from"./ids-chunk-GFV2Z7F5.js";import{d as A,e as c}from"./ids-chunk-QPDOZZIG.js";import{a as n}from"./ids-chunk-EQJWBFQ2.js";import{a as g}from"./ids-chunk-U7OOVFXE.js";var I=`
/* Ids Toolbar More Actions Component */
:host {
  display: inline-flex;
}

::slotted(ids-separator) {
  align-self: center;
  justify-self: center;
}

.ids-toolbar-more-actions {
  padding: var(--ids-toolbar-more-actions-padding);
  white-space: nowrap;
  width: auto;
}`;var l=`[${n.MORE_ACTIONS}]`,w=["formatter"],B=T(O(y)),d=class extends B{constructor(){super()}static get attributes(){return[...super.attributes,n.DISABLED,n.OVERFLOW,n.TOOLBAR_TYPE,n.VISIBLE]}connectedCallback(){super.connectedCallback(),(!this.menu||!this.button)&&this.#t(),this.#s(),this.#o(),this.button?.configureMenu?.(),requestAnimationFrame(()=>{this.#i()})}disconnectedCallback(){super.disconnectedCallback?.(),this.overflowMenuItems.forEach(e=>{e.removeAttribute(n.OVERFLOWED)})}template(){return`<div class="ids-toolbar-section ids-toolbar-more-actions more">
      <slot></slot>
    </div>`}colorVariants=["alternate-formatter"];#t(){let e="more-actions",t="more-actions-menu",o=this.disabled?" disabled":"",i=this.getAttribute("icon")||"more";this.insertAdjacentHTML("afterbegin",`<ids-menu-button id="${e}" menu="${t}"${o}>
        <ids-icon icon="${i}"></ids-icon>
        <span class="audible">More Actions Button</span>
      </ids-menu-button>
      <ids-popup-menu id="${t}" target="#${e}" trigger-type="click"></ids-popup-menu>`),this.querySelectorAll(":scope > ids-menu-group")?.forEach(u=>this.menu?.append(u))}#n(){let e=()=>this.toolbar?.items?.map(t=>this.#e(t)).join("")||"";return`<ids-menu-group ${n.MORE_ACTIONS}>
      ${e()}
    </ids-menu-group>`}#e(e,t=!1){let o="",i="",r="",u="",m="",h="",a="";t||(h=this.isOverflowed(e)?"":" hidden");let b=s=>{s.disabled&&(u=" disabled"),s.icon&&(i=` icon="${s.icon}"`,a=s.iconEl?.viewbox,a=a?` viewbox="${a}"`:""),o=s.text},p=s=>{let f=t?"submenu":"menuEl";s[f]&&(m=`<ids-popup-menu slot="submenu">
          <ids-menu-group>
            ${s[f].items.map(S=>this.#e(S,!0)).join("")||""}
          </ids-menu-group>
        </ids-popup-menu>`)},L=s=>{s.disabled&&(u=" disabled"),s.icon&&(i=` icon="${s.icon}"`),s.hidden&&(r=" hidden"),o=s.text,s.submenu&&p(s)};switch(e.tagName){case"IDS-MENU-BUTTON":b(e),p(e);break;case"IDS-MENU-ITEM":L(e);break;case"IDS-BUTTON":b(e);break;default:o=e.textContent;break}return o=A(o)?.trim(),`<ids-menu-item${u}${i}${a}${r||h}>
      ${o}
      ${m}
    </ids-menu-item>`}get button(){return this.querySelector("ids-menu-button")}get menu(){return this.querySelector("ids-popup-menu")||null}get predefinedMenuItems(){return[...this.querySelectorAll(`:scope > ids-popup-menu > ids-menu-group:not(${l}) > ids-menu-item`)]}get overflowMenuItems(){return this.querySelector(l)?[...this.querySelector(l)?.children??[]]:[]}get toolbar(){return this.parentElement}set disabled(e){let t=c(e);t?this.setAttribute(n.DISABLED,e.toString()):this.removeAttribute(n.DISABLED),this.button?.setAttribute(n.DISABLED,t.toString()),this.container?.classList[t?"add":"remove"](n.DISABLED)}get disabled(){return!!this.container?.classList.contains(n.DISABLED)}set overflow(e){let t=c(e),o=this.overflow;t!==o&&(t?this.setAttribute(n.OVERFLOW,""):this.removeAttribute(n.OVERFLOW))}get overflow(){return this.hasAttribute(n.OVERFLOW)}set toolbarType(e){e&&w.includes(e)?(this.setAttribute(n.TOOLBAR_TYPE,e),this.container?.classList.add(e)):(this.removeAttribute(n.TOOLBAR_TYPE),this.container?.classList.remove(w[0]))}get toolbarType(){return this.getAttribute(n.TOOLBAR_TYPE)}set type(e){this.removeAttribute(n.TYPE)}get type(){return"more"}set visible(e){c(e)?(this.setAttribute(n.VISIBLE,""),this.menu?.showIfAble()):(this.removeAttribute(n.VISIBLE),this.menu?.hide())}get visible(){return this.menu?.visible||!1}#o(){this.onEvent("beforeshow",this.menu,e=>{this.triggerEvent("beforeshow",this,{bubbles:e.bubbles,detail:e.detail}),this.refreshOverflowedItems()}),this.onEvent("selected",this.menu,e=>{let t=e.detail.elem;t.overflowTarget&&(e.preventDefault(),e.stopPropagation(),this.toolbar.triggerSelectedEvent(t,!0))}),this.onEvent("show",this.menu,()=>{this.visible=!0}),this.onEvent("hide",this.menu,()=>{this.visible=!1})}#s(){this.menu?.popup&&(this.menu.popup.align="bottom, right",this.menu.popup.alignEdge="bottom"),this.onColorVariantRefresh()}refreshOverflowedItems(){this.overflowMenuItems.forEach(e=>{let t=!this.isOverflowed(e.overflowTarget);e.hidden=t,t?e.overflowTarget.removeAttribute(n.OVERFLOWED):e.overflowTarget.setAttribute(n.OVERFLOWED,"")}),this.button&&(this.button.hidden=!this.hasVisibleActions(),this.button.disabled=!this.hasEnabledActions()),this.menu?.visible&&this.menu.refreshIconAlignment()}#i(){if(!this.menu)return;let e=this.menu.querySelector(l);!e&&this.overflow&&this.menu.insertAdjacentHTML("afterbegin",this.#n()),e&&!this.overflow&&e.remove();let t=(o,i)=>{i&&[...o.submenu.children].forEach((r,u)=>{r.overflowTarget=i.items[u],r.submenu&&t(r,r.overflowTarget.submenu)})};this.overflowMenuItems.forEach((o,i)=>{o.overflowTarget=this.toolbar.items[i],o.submenu&&t(o,o.overflowTarget.menuEl)})}focus(){this.visible?this.menu?.focusTarget?.focus():this.button?.focus()}hasVisibleActions(){return this.predefinedMenuItems.length>0||this.querySelectorAll(`:scope > ids-popup-menu > ids-menu-group${l} > ids-menu-item:not([hidden])`).length>0}hasEnabledActions(){return this.querySelectorAll(`:scope > ids-popup-menu > ids-menu-group${l} > ids-menu-item:not([disabled])`).length>0}isOverflowed(e){if(!this.toolbar.contains(e)||e.hidden)return!1;let t=e.getBoundingClientRect(),i=e.parentElement.getBoundingClientRect(),r=t.right>i.right;return t.left<i.left||r}onColorVariantRefresh(){this.colorVariant==="alternate-formatter"?this.button?.setAttribute(n.COLOR_VARIANT,"alternate-formatter"):this.button?.removeAttribute(n.COLOR_VARIANT)}};d=g([v("ids-toolbar-more-actions"),E(I)],d);export{d as a};
