import{a as b}from"./ids-chunk-44CLLQBZ.js";import{a as u}from"./ids-chunk-N7RNTKMO.js";import{a as p}from"./ids-chunk-T6ZV4PDM.js";import{a as E}from"./ids-chunk-AKCO43TX.js";import{a as c,b as f}from"./ids-chunk-XE4WFW5M.js";import{a as v}from"./ids-chunk-GFV2Z7F5.js";import{a as i}from"./ids-chunk-EQJWBFQ2.js";import{a as g}from"./ids-chunk-U7OOVFXE.js";var I=`
:host {
  display: inherit;
  border: var(--ids-swappable-active-border);
  height: 100%;
}

:host([active]) {
  border-color: var(--ids-swappable-color-border-active);
}`;var L=p(u(E(b(v)))),n=class extends L{draggingElements=[];constructor(){super()}connectedCallback(){super.connectedCallback(),this.setAttribute("dropzone","move"),this.attachEventListeners()}static get attributes(){return[...super.attributes,i.ACTIVE,i.SELECTION]}template(){return"<slot></slot>"}get overElement(){return this.querySelector("ids-swappable-item[over]")}get selectedItems(){return this.querySelectorAll("ids-swappable-item[selected]")}#t=null;#r(t){this.#t=t.clientY,!(this.selectedItems.length<=1)&&this.selectedItems.forEach(e=>{e.originalHtml=e.innerHTML,e.innerHTML=e.innerHTML.replace(e.innerText,`${this.selectedItems.length} Items Selected`)})}#i(t){this.selectedItems.forEach(e=>{this.#h(t,e)})}getDragAfterElement=(t,e)=>{let r=[...t.querySelectorAll("ids-swappable-item:not([dragging])")],y=r.length-1;return r.reduce((a,h,d)=>{if(this.#t===null)return a;let{top:l,bottom:A,height:m}=h.getBoundingClientRect(),s={val:0,calc:Math.ceil(m/4)};d===0&&this.#t>A&&(s.val=s.calc),d===y&&this.#t<l&&(s.val=s.calc*-1);let T=l+m/2,o=e-(T+s.val);return o<0&&o>a.offset?{offset:o,element:h}:a},{offset:Number.NEGATIVE_INFINITY}).element};#s(t){t.preventDefault();let e=this.getDragAfterElement(this,t.clientY);this.draggingElements?.length>0&&(e?this.draggingElements.forEach(r=>{this.#e(r),this.insertBefore(r,e)}):this.draggingElements.forEach(r=>{this.#e(r),this.appendChild(r)})),this.removeAttribute(i.ACTIVE),this.#t=null}#n(){this.removeAttribute(i.ACTIVE)}#a(t){t.preventDefault(),this.overElement?this.removeAttribute(i.ACTIVE):this.setAttribute(i.ACTIVE,"");let e=t.composedPath().find(r=>{if(r.nodeType===1&&(r.nodeName==="IDS-SWAPPABLE-ITEM"||r.nodeName==="IDS-SWAPPABLE"))return r});if(e){let r=e.getRootNode();this.draggingElements=r.querySelectorAll("ids-swappable-item[dragging]")}}#h(t,e){e.setAttribute("aria-grabbed",!0),e.setAttribute("aria-dropeffect",t.dataTransfer.dropEffect),e.setAttribute("dragging",""),!(this.selectedItems.length<=1)&&e!==t.target&&e.classList.add("is-hidden")}#e(t){t.originalHtml&&(t.innerHTML=t.originalHtml),t.removeAttribute("dragging"),t.removeAttribute("aria-grabbed"),t.removeAttribute("aria-dropeffect"),t.classList.remove("is-hidden")}#o(){this.draggingElements.forEach(t=>{this.#e(t)}),this.removeAttribute(i.ACTIVE)}attachEventListeners(){this.offEvent("dragstart",this,t=>this.#r(t)),this.onEvent("dragstart",this,t=>this.#r(t)),this.offEvent("drag",this,t=>this.#i(t)),this.onEvent("drag",this,t=>this.#i(t)),this.offEvent("drop",this,t=>this.#s(t)),this.onEvent("drop",this,t=>this.#s(t)),this.offEvent("dragover",this,t=>this.#a(t)),this.onEvent("dragover",this,t=>this.#a(t)),this.offEvent("dragleave",this,()=>this.#n()),this.onEvent("dragleave",this,()=>this.#n()),this.offEvent("dragend",this,()=>this.#o()),this.onEvent("dragend",this,()=>this.#o())}};n=g([c("ids-swappable"),f(I)],n);export{n as a};
