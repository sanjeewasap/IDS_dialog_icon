import{a as f}from"./ids-chunk-YOW7TP7H.js";import{a}from"./ids-chunk-PKNHTUVH.js";import{a as w}from"./ids-chunk-KFIQ3AIC.js";import{a as v}from"./ids-chunk-D5QL7Z2W.js";import{a as L}from"./ids-chunk-OX5EA55S.js";import{a as c}from"./ids-chunk-U34YTPJC.js";import{a as y}from"./ids-chunk-UV7FAVD2.js";import{a as E}from"./ids-chunk-J6DDVFGW.js";import{j as l}from"./ids-chunk-ODGLGMPF.js";import{a as g}from"./ids-chunk-T6ZV4PDM.js";import{a as b}from"./ids-chunk-AKCO43TX.js";import{e as m}from"./ids-chunk-CK6SA7FU.js";import{a as h,b as u}from"./ids-chunk-XE4WFW5M.js";import{a as k}from"./ids-chunk-GFV2Z7F5.js";import{e as p}from"./ids-chunk-QPDOZZIG.js";import{a as s}from"./ids-chunk-EQJWBFQ2.js";import{a as d}from"./ids-chunk-U7OOVFXE.js";var S=`
/* Ids Modal Component */
:host {
  display: block;
  position: fixed;
  height: 100%;
  width: 100%;
  top: 0;
  left: 0;
}

:host(:not([visible])) {
  pointer-events: none;
}

.ids-modal {
  display: block;
  pointer-events: none;
}
.ids-modal[visible] {
  pointer-events: auto;
}

.ids-modal-header {
  padding: var(--ids-modal-header-padding);
}

.ids-modal-content {
  padding: var(--ids-modal-content-padding);
  flex-grow: 1;
  flex-shrink: 1;
  overflow: auto;
}

.ids-modal-header + .ids-modal-content {
  padding-block-start: 0;
}

.ids-modal-header,
.ids-modal-footer {
  align-items: center;
  display: flex;
}

.ids-modal-footer {
  margin: var(--ids-modal-footer-margin);
  border-top: 1px solid var(--ids-modal-footer-color-border);
}
.ids-modal-footer[hidden] {
  border-top: none;
}

.ids-modal-container {
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  height: 100%;
  width: 100%;
}

::slotted([slot=buttons]) {
  flex-grow: 1;
  display: flex;
}

::slotted([slot=buttons]:not(:first-of-type)) {
  border-left: 1px solid var(--ids-modal-footer-color-border);
}

.ids-modal-button:not(.ids-modal-icon-button):not(:first-of-type) {
  border-left: 1px solid var(--ids-modal-footer-color-border);
}

@media screen and (min-width: 600px) {
  ::slotted([slot=title]) {
    font-size: var(--ids-font-size-60);
  }
}`;var I=w(f(v(g(y(E(b(k))))))),n=class extends I{shouldUpdate=!1;onButtonClick;globalKeydownListener=t=>{switch(t.key){case"Escape":t.stopImmediatePropagation(),this.hide();break;default:break}};constructor(){super(),this.state||(this.state={}),this.state.fullsize="",this.state.overlay=null,this.state.messageTitle=null}static get attributes(){return[...super.attributes,s.FULLSIZE,s.MESSAGE_TITLE,s.VISIBLE]}vetoableEventTypes=["beforeshow","beforehide"];connectedCallback(){super.connectedCallback?.(),this.popup&&(this.popup.type="modal",this.popup.animated=!0,this.popup.animationStyle="scale-in"),this.messageTitle=this.querySelector('[slot="title"]')?.textContent??"",this.setAttribute("role","dialog"),this.refreshAriaLabel(),this.#s(this.overlay),this.attachEventHandlers(),this.shouldUpdate=!0,this.#i(),this.#a()}disconnectedCallback(){super.disconnectedCallback?.(),this.#t()}template(){let t=this.name!=="ids-modal"?this.name:"",e=t?` ${t}-content`:"",i=t?` ${t}-header`:"",o=t?` ${t}-footer`:"",r=this.buttons.length?"":" hidden";return`<ids-popup part="modal" class="ids-modal" type="modal" position-style="viewport">
      <div class="ids-modal-container" slot="content">
        <div class="ids-modal-header${i}">
          <slot name="title"></slot>
        </div>
        <div class="ids-modal-content${e}">
          <slot></slot>
        </div>
        <div class="ids-modal-footer${o}" ${r}>
          <slot name="buttons"></slot>
        </div>
      </div>
    </ids-popup>`}get ariaLabelContent(){return this.messageTitle}get buttons(){return this.querySelectorAll('[slot="buttons"]')}get fullsize(){return this.state.fullsize}set fullsize(t){let e=this.state.fullsize,i=r=>{this.popup&&(this.popup.classList[r?"add":"remove"](s.FULLSIZE),this.popup.width=r?"100%":"",this.popup.height=r?"100%":"",this.popup.place(),this.popup.open&&this.popup.correct3dMatrix())},o=`${t}`;if(e!==t)switch(t){case"always":this.#t(),this.state.fullsize="always",this.popup?.classList.add("can-fullsize"),i(!0);break;case null:case"null":case"":this.state.fullsize="",this.#t(),this.removeAttribute(s.FULLSIZE),this.popup?.classList.remove("can-fullsize"),i(!1);break;default:Object.keys(c).includes(o)&&(this.state.fullsize=o,this.setAttribute(s.FULLSIZE,o),this.popup?.classList.add("can-fullsize"),this.respondDown=o,this.onBreakpointDownResponse=(r,x)=>{i(x)}),this.respondToCurrentBreakpoint();break}}#t(){this.respondDown&&(this.respondDown=null),this.onBreakpointDownResponse&&(this.onBreakpointDownResponse=void 0)}#i(){this.hasAttribute(s.FULLSIZE)?this.fullsize=this.getAttribute(s.FULLSIZE):this.fullsize="sm"}get overlay(){return this.state.overlay||this.shadowRoot?.querySelector("ids-overlay")}set overlay(t){t instanceof HTMLElement||t instanceof SVGElement?this.state.overlay=t:this.state.overlay=null,this.#s(this.state.overlay)}get messageTitle(){return this.querySelector('[slot="title"]')?.textContent||this.state.messageTitle}set messageTitle(t){let e=this.xssSanitize(t);this.state.messageTitle!==e&&(typeof e=="string"&&e.length?(this.state.messageTitle=e,this.setAttribute(s.MESSAGE_TITLE,e)):(this.state.messageTitle="",this.removeAttribute(s.MESSAGE_TITLE)),this.#o(!!e))}#o(t){let e=[...this.querySelectorAll('[slot="title"]')];t&&(e.length||(this.insertAdjacentHTML("afterbegin",`<ids-text slot="title" type="h2" font-size="24">${this.state.messageTitle}</ids-text>`),e=[this.querySelector('[slot="title"]')])),this.refreshAriaLabel(),e.forEach((i,o)=>{if(t){if(o>0){i.remove();return}i.textContent=this.state.messageTitle}else i.remove()})}refreshAriaLabel(){let t=this.ariaLabelContent;if(t){this.setAttribute("aria-label",t);return}this.removeAttribute("aria-label")}#r(){if(!this.container)return;let t=this.container.querySelector(".ids-modal-footer");this.buttons.length?t?.removeAttribute("hidden"):t?.setAttribute("hidden","")}#e=!1;get visible(){return this.#e}set visible(t){let e=p(t);this.#e!==e&&(this.#e=e,e?this.setAttribute(s.VISIBLE,""):this.removeAttribute(s.VISIBLE),this.#n(e))}async show(){if(this.triggerVetoableEvent("beforeshow")){if(!this.visible){this.visible=!0;return}if(this.container){let t=this.container.querySelector(".ids-modal-footer");this.buttons.length?t?.removeAttribute(s.HIDDEN):t?.setAttribute(s.HIDDEN,"")}this.style.setProperty("z-index",String(a.increment())),this.overlay&&(this.overlay.visible=!0),this.popup&&(this.popup.visible=!0,this.popup.animated&&this.popup.container&&await l(this.popup.container,"opacity")),this.removeAttribute("aria-hidden"),this.capturesFocus=!0,this.setFocus("last"),this.addOpenEvents(),this.triggerEvent("show",this,{bubbles:!0,detail:{elem:this}}),this.popup&&(this.popup.animated=!1),this.respondToCurrentBreakpoint(),this.triggerEvent("aftershow",this,{bubbles:!0,detail:{elem:this}})}}async hide(){if(!this.triggerVetoableEvent("beforehide"))return;if(this.visible){this.visible=!1;return}let t=this.popup;t&&(t.animated=!0),this.removeOpenEvents(),this.overlay.visible=!1,t&&(t.visible=!1),t&&t.container&&t.animated&&await l(t.container,"opacity"),this.style.zIndex="",this.setAttribute("aria-hidden","true"),a.decrement(),this.capturesFocus=!1,this.triggerEvent("hide",this,{bubbles:!0,detail:{elem:this}}),this.#l(),this.triggerEvent("afterhide",this,{bubbles:!0,detail:{elem:this}})}addOpenEvents(){if(super.addOpenEvents(),document.addEventListener("keydown",this.globalKeydownListener),this.container){let t=this.container.querySelector('slot[name="buttons"]');this.onEvent("click.buttons",t,e=>{this.handleButtonClick(e)})}}removeOpenEvents(){super.removeOpenEvents(),document.removeEventListener("keydown",this.globalKeydownListener),this.unlisten("Escape"),this.offEvent("click.buttons")}#s(t){if(!this.shadowRoot)return;let e;t?(e=this.shadowRoot.querySelector("ids-overlay"),e&&e.remove()):(e=new L,this.shadowRoot.prepend(e),this.popupOpenEventsTarget=this.overlay)}#n(t){t?this.show():this.hide()}#l(){this.target&&this.target.focus()}#a=async()=>{this.visible=this.getAttribute("visible"),this.visible&&this.setFocus("last")};attachEventHandlers(){let t=this.container?.querySelector('slot[name="title"]'),e=this.container?.querySelector('slot[name="buttons"]');window.requestAnimationFrame(()=>{this.onEvent("slotchange.title",t,()=>{let i=t?.assignedNodes();i?.length&&(this.messageTitle=i[0].textContent??"")}),this.onEvent("slotchange.buttonset",e,()=>{this.#r()}),this.visible&&this.addOpenEvents()}),this.refreshTriggerEvents()}async handleButtonClick(t){await m(200),typeof this.onButtonClick=="function"&&this.onButtonClick(t.target),t.target.closest("ids-modal-button")?.cancel&&this.hide()}onTriggerClick(){this.show()}onOutsideClick(t){!t||!t?.target||this.hide()}};n=d([h("ids-modal"),u(S)],n);export{n as a};
