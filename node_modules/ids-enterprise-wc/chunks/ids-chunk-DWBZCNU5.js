import{a as n}from"./ids-chunk-5YNJJUQD.js";import{a as x}from"./ids-chunk-OIS6KGMU.js";import{a as L}from"./ids-chunk-N7RNTKMO.js";import{e as S,f as C}from"./ids-chunk-LCUXCSNZ.js";import{a as T}from"./ids-chunk-AKCO43TX.js";import{a as y,b as p}from"./ids-chunk-XE4WFW5M.js";import{a as O}from"./ids-chunk-GFV2Z7F5.js";import{a as N,e as E}from"./ids-chunk-QPDOZZIG.js";import{a as r}from"./ids-chunk-EQJWBFQ2.js";import{a as A}from"./ids-chunk-U7OOVFXE.js";var I=`
/* Ids Tree Component */
@keyframes keyframes-rotate-forward {
  0% {
    transform: rotate(-90deg);
  }
  100% {
    transform: rotate(0deg);
  }
}
@keyframes keyframes-rotate-backward {
  0% {
    transform: rotate(45deg);
  }
  100% {
    transform: rotate(0deg);
  }
}
.ids-tree {
  list-style-type: none;
  margin-bottom: var(--ids-space-10);
  margin-block-start: 0;
  margin-block-end: 0;
  padding-inline-start: 0;
}
.ids-tree ids-badge::part(badge) {
  border-width: 0;
  margin: 0;
  margin-inline-end: 8px;
}

ids-badge::part(badge) {
  border-width: 0;
  margin: 0;
  margin-inline-end: 8px;
}`;var G=L(T(O)),m=class extends G{constructor(){super()}connectedCallback(){super.connectedCallback(),this.datasource?.data?.length?this.#o():this.#a()}static get attributes(){return[...super.attributes,r.COLLAPSE_ICON,r.DISABLED,r.EXPAND_ICON,r.EXPANDED,r.ICON,r.LABEL,r.SELECTABLE,r.TOGGLE_COLLAPSE_ICON,r.TOGGLE_EXPAND_ICON,r.TOGGLE_ICON_ROTATE,r.USE_TOGGLE_TARGET]}template(){let e=this.disabled?" disabled":"";return`
      <ul class="ids-tree" part="tree" role="tree"${` aria-label="${this.label}"`}${e}>
        <slot></slot>
      </ul>`}datasource=new x;collapseAll(){this.#t.filter(e=>e.elem.isGroup).forEach(e=>{e.elem.expanded=!1})}expandAll(){this.#t.filter(e=>e.elem.isGroup).forEach(e=>{e.elem.expanded=!0})}collapse(e){let t=this.getNode(e);this.#c(t)}expand(e){let t=this.getNode(e);this.#u(t)}toggle(e){let t=this.getNode(e);this.#l(t)}select(e){let t=this.getNode(e);this.isMultiSelect&&this.#h(t),this.#n(t)}unselect(e){let t=this.getNode(e);this.#L(t)}isSelected(e){return!!this.getNode(e)?.elem?.isSelected}getNode(e){return this.#t.find(t=>t.elem.matches(e))}#e={old:null,current:null,selectedOld:null,selectedCurrent:null};#t=[];#r=[];#m(){let e=a=>/&#?[^\s].{1,9};/g.test(a)?S(a):a,t=a=>C(e(a)),l="",s=[],i=a=>{a.forEach(o=>{let h=(c,u=o)=>typeof u[c]<"u",d=(c,u)=>{if(h(c)){let g=u==="label"?t(o[c]):o[c];l+=` ${u||c}="${g}"`}};if(s.push(o),l+="<ids-tree-node",d("id"),d("disabled"),d("selected"),h("children"))d("collapseIcon"),d("expandIcon"),d(h("expanded")?"expanded":"open","expanded"),d(h("label")?"label":"text","label"),l+=">",i(o.children);else{d("icon"),d(this.isMultiSelect&&h("label")?"label":"text","label");let c=h("label")?o.label:o.text||"";l+=`>${t(c)}`}if(h("badge")){let c=g=>h(g,o.badge),u='<ids-badge slot="badge"';c("color")&&(u+=` color="${o.badge.color}"`),c("shape")&&(u+=` shape="${o.badge.shape}"`),u+=">",c("text")&&(u+=`${o.badge.text}`),c("textAudible")&&(u+=` <ids-text audible="true">${o.badge.textAudible}</ids-text>`),c("icon")&&(u+=` <ids-icon icon="${o.badge.icon}" size="normal"></ids-icon>`),u+="</ids-badge>",l+=u}l+="</ids-tree-node>"})};return i(this.data),{html:l,data:s}}#o(){if(this.data.length===0||!this.shadowRoot)return;let e=this.shadowRoot?.querySelector("slot");if(e){let{data:t,html:l}=this.#m();this.#r=t,e.innerHTML=l,this.#a()}}#a(){return this.#E(),this.#f(),this.#b(),this.#d(),this.#S(),this}#E(){this.#t=[];let e=s=>/^ids-tree-node$/i.test(s.nodeName),t=0,l=(s,i)=>{let a=[];i===0?a=s.childNodes.length?[...s.childNodes].filter(h=>e(h)):s.shadowRoot.querySelectorAll("slot > ids-tree-node"):a=s.shadowRoot.querySelectorAll(".group-nodes > ids-tree-node");let o=a.length;for(let h=0;h<o;h++){let d=a[h],c=t+i,u=i+1,g=h+1,f=o;d.setAttribute("role","none"),d.nodeContainer?.setAttribute("aria-level",`${u}`),d.nodeContainer?.setAttribute("aria-setsize",`${f}`),d.nodeContainer?.setAttribute("aria-posinset",`${g}`);let b={elem:d,level:u,posinset:g,setsize:f,idx:c,isGroup:d.isGroup};this.#r[c]&&(b.data=this.#r[c]),this.#t.push(b),d.isGroup&&l(d,i+1),t++}};return l(this,0),this}#f(){let e=this.getAttribute(r.COLLAPSE_ICON),t=this.getAttribute(r.EXPAND_ICON),l=this.getAttribute(r.ICON),s=this.getAttribute(r.USE_TOGGLE_TARGET);return e&&this.#s(r.COLLAPSE_ICON),t&&this.#s(r.EXPAND_ICON),l&&this.#s(r.ICON),s&&this.#s(r.USE_TOGGLE_TARGET),this}#b(){let e=this.#t.find(t=>!t.elem.disabled);return e&&(this.#e.current=e,this.#e.current.elem.tabbable=!0),this}#d(){let e=this.#t.filter(s=>s.elem.isSelected),t=e.length,l=s=>{s.forEach(i=>{i.elem.selected=!1})};return this.#s(r.SELECTABLE),this.selectable==="single"&&t?t>1?(this.#e.selectedCurrent=e.shift(),l(e)):this.#e.selectedCurrent=e[0]:l(e),this}#A(e){return this.#t.find(t=>t.elem===e)}#y(e){let t=this.#t.length;return e.idx+1<t?[...this.#t].splice(e.idx+1).find(l=>e.elem.isGroup&&!e.elem.expanded?l.level===e.level:!l.elem.disabled):this.#t[t-1]}#p(e){let t=[...this.#t].splice(e.idx+1),l=t.findIndex(s=>s.level===e.level);return l>0&&(t=t.splice(0,l).filter(s=>s.level===e.level+1)),t.find(s=>!s.elem.disabled)}#N(e){return e.idx-1>-1?[...this.#t].slice(0,e.idx).reverse().find(t=>{if(t.level>e.level){let l=t.elem.getRootNode().host;if(!l.expanded)return l===t.elem}return!t.elem.disabled}):this.#t[0]}#i(e){e&&e.elem&&e.elem!==this.#e.current?.elem&&(this.#e.old=this.#e.current,this.#e.current=e,this.#e.current.elem.tabbable=!0,this.#e.old.elem.tabbable=!1,this.#e.current.elem.setFocus())}#n(e){if(e&&e.elem&&e.elem!==this.#e.selectedCurrent?.elem){let t=!0,l=s=>{t=!!s};if(this.triggerEvent(n.EVENTS.beforeselected,this,{detail:{elem:this,response:l,node:e}}),!t)return;this.#e.selectedOld=this.#e.selectedCurrent,this.#e.selectedCurrent=e,this.#e.selectedCurrent.elem.selected=!0,this.#e.selectedOld&&(this.#e.selectedOld.elem.selected=!1),this.triggerEvent(n.EVENTS.selected,this,{detail:{elem:this,node:e}})}}#h(e){if(e&&e.elem){let t=!0,l=i=>{t=!!i};if(this.triggerEvent(n.EVENTS.beforeselected,this,{detail:{elem:this,response:l,node:e}}),!t)return;let s=this.getParentNode(e);e.elem.selected=!0,e.isGroup&&this.selectNestedNodes(e),s&&this.selectParentNodes(s),this.triggerEvent(n.EVENTS.selected,this,{detail:{elem:this,node:e}})}}#L(e){if(e&&e.elem&&e.elem===this.#e.selectedCurrent?.elem){let t=!0,l=s=>{t=!!s};if(this.triggerEvent(n.EVENTS.beforeunselected,this,{detail:{elem:this,response:l,node:e}}),!t)return;this.#e.selectedCurrent.elem.selected=!1,this.#e.selectedOld=null,this.#e.selectedCurrent=null,this.triggerEvent(n.EVENTS.unselected,this,{detail:{elem:this,node:e}})}}#T(e){let t=!0,l=i=>{t=!!i};if(this.triggerEvent(n.EVENTS.beforeunselected,this,{detail:{elem:this,response:l,node:e}}),!t)return;let s=this.getParentNode(e);e.elem.selected=null,e.isGroup&&this.unselectNestedNodes(e),s&&this.selectParentNodes(s),this.triggerEvent(n.EVENTS.unselected,this,{detail:{elem:this,node:e}})}getParentNode(e){let t=[],l=s=>{s&&s?.classList?.contains("ids-tree-node")||s.elem&&s?.elem?.classList?.contains("ids-tree-node")?t.push(s.getRootNode().host):s&&s.parentElement?(l(s.parentElement),s.getRootNode().host?.parentElement&&l(s.getRootNode().host.parentElement)):s.elem&&s.elem.parentElement&&l(s.elem.parentElement)};return l(e),t}getAllChildNodes(e){return e.elem?e.elem.shadowRoot.querySelectorAll(".group-nodes > ids-tree-node"):e.shadowRoot?e.shadowRoot.querySelectorAll(".group-nodes > ids-tree-node"):Array.isArray(e)?e.map(t=>t.shadowRoot.querySelectorAll(".group-nodes > ids-tree-node")):e.querySelectorAll(".group-nodes > ids-tree-node")}selectParentNodes(e){e.forEach(t=>{let l=t.container.querySelector("ids-checkbox"),s=[...this.getAllChildNodes(t)].filter(a=>a.selected===!0),i=s.filter(a=>a.shadowRoot.querySelector("ids-checkbox").indeterminate==="true");t.selected=!0,this.getAllChildNodes(t).length===s.length&&(l.indeterminate=null),s.length===0&&(t.selected=null,l.indeterminate=null),this.getAllChildNodes(t).length===s.length&&(t.selected=!0,l.indeterminate=null),(s.length!==0&&this.getAllChildNodes(t).length>s.length||i.length>0)&&(l.indeterminate=!0),this.triggerEvent(n.EVENTS.selected,this,{detail:{elem:this,node:t}})})}selectNestedNodes(e){let t=l=>{if(l.elem&&l.elem.hasChildNodes()){let s=[...this.getAllChildNodes(l.elem)];s.forEach(i=>{i.hasChildNodes()&&!i.disabled&&(i.selected=!0,this.triggerEvent(n.EVENTS.selected,this,{detail:{elem:this,childNode:i}})),t(i)}),requestAnimationFrame(()=>{let i=[...this.getAllChildNodes(l.elem)].filter(o=>o.selected===!0),a=[...this.getAllChildNodes(l.elem)].filter(o=>o.shadowRoot.querySelector("ids-checkbox")?.indeterminate==="true");s.length>i.length||a.length>0?l.elem.shadowRoot.querySelector("ids-checkbox").indeterminate=!0:l.elem.shadowRoot.querySelector("ids-checkbox").indeterminate=null})}else if(l&&l.shadowRoot?.querySelector(".group-nodes")){let s=[...this.getAllChildNodes(l)];s.forEach(i=>{i.hasChildNodes()&&!i.disabled&&(i.selected=!0,this.triggerEvent(n.EVENTS.selected,this,{detail:{elem:this,childNode:i}})),t(i)}),requestAnimationFrame(()=>{let i=[...this.getAllChildNodes(l)].filter(o=>o.selected===!0),a=[...this.getAllChildNodes(l)].filter(o=>o.shadowRoot.querySelector("ids-checkbox")?.indeterminate==="true");s.length>i.length||a.length>0?l.shadowRoot.querySelector("ids-checkbox").indeterminate=!0:l.shadowRoot.querySelector("ids-checkbox").indeterminate=null})}};t(e)}unselectNestedNodes(e){let t=l=>{l.elem&&l.elem.hasChildNodes()?([...this.getAllChildNodes(l.elem)].forEach(i=>{i.hasChildNodes()&&!i.disabled&&(i.selected=null,this.triggerEvent(n.EVENTS.unselected,this,{detail:{elem:this,childNode:i}})),t(i)}),l.elem.shadowRoot.querySelector("ids-checkbox").indeterminate=null):l&&l.shadowRoot?.querySelector(".group-nodes")&&([...this.getAllChildNodes(l)].forEach(i=>{i.hasChildNodes()&&!i.disabled&&(i.selected=null,this.triggerEvent(n.EVENTS.unselected,this,{detail:{elem:this,childNode:i}})),t(i)}),l.shadowRoot.querySelector("ids-checkbox").indeterminate=null)};t(e)}#c(e){e&&e.elem?.isGroup&&e.elem?.expanded&&this.#l(e)}#u(e){e&&e.elem?.isGroup&&!e.elem?.expanded&&this.#l(e)}#l(e){if(e&&e.elem?.isGroup){let t=e.elem.expanded?{before:n.EVENTS.beforecollapsed,after:n.EVENTS.collapsed}:{before:n.EVENTS.beforeexpanded,after:n.EVENTS.expanded},l=!0,s=i=>{l=!!i};if(this.triggerEvent(t.before,this,{detail:{elem:this,response:s,node:e}}),!l)return;e.elem.expanded=!e.elem.expanded,this.triggerEvent(t.after,this,{detail:{elem:this,node:e}})}}#g(){this.#t.forEach(e=>{e.isGroup&&e.elem.shadowRoot?.querySelector(".toggle-icon")?.setAttribute(r.ICON,e.elem.toggleIcon)})}#s(e,t){this.#t.forEach(l=>{let s=l.elem.getAttribute(e),i=this[N(e)];(t||s!==i)&&l.elem.setAttribute(e,i?.toString())})}#S(){let e={next:s=>{let i=this.#y(s);i&&this.#i(i)},previous:s=>{let i=this.#N(s);i&&this.#i(i)},forward:s=>{if(s.elem.isGroup)if(s.elem.expanded){let i=this.#p(s);this.#i(i)}else this.#u(s)},backward:s=>{if(s.elem.isGroup&&s.elem.expanded)this.#c(s);else if(s.level>1){let i={elem:s.elem.getRootNode().host};this.#i(i)}}},t=(s,i)=>i.split(" ").some(a=>s.classList.contains(a)),l=(s,i)=>{if(!i.elem.disabled)if(this.useToggleTarget||this.isMultiSelect)if(i.elem.isGroup&&t(s.target,"icon toggle-icon"))this.#l(i);else{if(this.isMultiSelect){i.elem.selected?this.#T(i):this.#h(i);return}this.#n(i),this.#i(i)}else i.elem.isGroup&&this.#l(i),this.#n(i),this.#i(i)};this.#t.forEach(s=>{this.onEvent("keydown.tree",s.elem.nodeContainer,i=>{if(s.elem.disabled)return;let a=["ArrowDown","ArrowRight","ArrowUp","ArrowLeft","Space"],o=i.code;if(a.indexOf(o)>-1){let h=this.#A(s.elem),d=this.localeAPI.isRTL();o==="ArrowDown"?e.next(h):o==="ArrowUp"?e.previous(h):o==="ArrowRight"?e[d?"backward":"forward"](h):o==="ArrowLeft"&&e[d?"forward":"backward"](h),i.preventDefault(),i.stopPropagation()}}),this.onEvent("keyup.tree",s.elem.nodeContainer,i=>{let a=["Space","Enter"],o=i.code;a.indexOf(o)>-1&&(l(i,s),i.preventDefault(),i.stopPropagation())}),this.onEvent("click.tree",s.elem.nodeContainer,i=>{i.stopPropagation(),l(i,s)})})}get selected(){if(this.selectable){let e=this.#t.filter(l=>l.elem.isSelected),t=e.length;return this.selectable==="single"?t?e[0]:null:e}return null}set collapseIcon(e){e?this.setAttribute(r.COLLAPSE_ICON,e.toString()):this.removeAttribute(r.COLLAPSE_ICON),this.#s(r.COLLAPSE_ICON)}get collapseIcon(){return n.getVal(this,r.COLLAPSE_ICON)}set data(e){if(e&&e.constructor===Array){this.datasource.data=e,this.#o();return}this.datasource.data=null}get data(){return this.datasource?.data||[]}set disabled(e){E(e)?(this.setAttribute(r.DISABLED,""),this.container?.setAttribute(r.DISABLED,"")):(this.removeAttribute(r.DISABLED),this.container?.removeAttribute(r.DISABLED)),this.#s(r.DISABLED)}get disabled(){return E(this.getAttribute(r.DISABLED))}set expandIcon(e){e?this.setAttribute(r.EXPAND_ICON,e.toString()):this.removeAttribute(r.EXPAND_ICON),this.#s(r.EXPAND_ICON)}get expandIcon(){return n.getVal(this,r.EXPAND_ICON)}set expanded(e){n.isBool(e)?this.setAttribute(r.EXPANDED,`${e}`):this.removeAttribute(r.EXPANDED),this.#s(r.EXPANDED,!0)}get expanded(){return n.getBoolVal(this,r.EXPANDED)}set icon(e){e?this.setAttribute(r.ICON,e.toString()):this.removeAttribute(r.ICON),this.#s(r.ICON)}get icon(){return n.getVal(this,r.ICON)}set label(e){e?(this.setAttribute(r.LABEL,e.toString()),this.container?.setAttribute("aria-label",e.toString())):(this.removeAttribute(r.LABEL),this.container?.setAttribute("aria-label",n.TREE_ARIA_LABEL))}get label(){return this.getAttribute(r.LABEL)||n.TREE_ARIA_LABEL}set selectable(e){let t=`${e}`;n.SELECTABLE.indexOf(t)>-1?this.setAttribute(r.SELECTABLE,t):this.removeAttribute(r.SELECTABLE),this.#d()}get selectable(){let e=this.getAttribute(r.SELECTABLE);return e==="false"?!1:e!==null?e:n.DEFAULTS.selectable}get isMultiSelect(){return this.selectable==="multiple"}set toggleCollapseIcon(e){e?this.setAttribute(r.TOGGLE_COLLAPSE_ICON,e.toString()):this.removeAttribute(r.TOGGLE_COLLAPSE_ICON),this.#g()}get toggleCollapseIcon(){return n.getVal(this,r.TOGGLE_COLLAPSE_ICON)}set toggleExpandIcon(e){e?this.setAttribute(r.TOGGLE_EXPAND_ICON,e.toString()):this.removeAttribute(r.TOGGLE_EXPAND_ICON),this.#g()}get toggleExpandIcon(){return n.getVal(this,r.TOGGLE_EXPAND_ICON)}set toggleIconRotate(e){n.isBool(e)?this.setAttribute(r.TOGGLE_ICON_ROTATE,`${e}`):this.removeAttribute(r.TOGGLE_ICON_ROTATE)}get toggleIconRotate(){return n.getBoolVal(this,r.TOGGLE_ICON_ROTATE)}set useToggleTarget(e){n.isBool(e)?this.setAttribute(r.USE_TOGGLE_TARGET,`${e}`):this.removeAttribute(r.USE_TOGGLE_TARGET),this.#s(r.USE_TOGGLE_TARGET)}get useToggleTarget(){return n.getBoolVal(this,r.USE_TOGGLE_TARGET)}};m=A([y("ids-tree"),p(I)],m);export{m as a};
