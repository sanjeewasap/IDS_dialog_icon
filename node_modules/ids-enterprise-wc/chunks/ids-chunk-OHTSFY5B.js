import{e as r}from"./ids-chunk-QPDOZZIG.js";import{a as n}from"./ids-chunk-EQJWBFQ2.js";var o=i=>class extends i{inputClearableEvents=["blur.clearmixin","change.clearmixin","keyup.clearmixin"];constructor(...t){super(...t)}static get attributes(){return[...i.attributes,n.CLEARABLE,n.CLEARABLE_FORCED]}connectedCallback(){super.connectedCallback?.(),this.render(),this.handleClearable()}handleClearable(){let t=this.clearable&&!(this.disabled||this.readonly);t=`${t||this.clearableForced}`.toLowerCase()==="true",t?this.appendClearableButton():this.destroyClearable()}refreshClearableButtonStyles(){this.shadowRoot?.querySelector(".btn-clear")||(this.removeClearableButton(),this.appendClearableButton())}#t(){let t=document.createElement("ids-trigger-button"),e=document.createElement("ids-icon"),a=document.createElement("ids-text");return e.setAttribute("icon","close"),e.setAttribute("size","small"),a.setAttribute("audible","true"),a.textContent="clear",t.appendChild(a),t.appendChild(e),t.refreshProtoClasses(),this.colorVariant&&(t.colorVariant=this.colorVariant==="app-menu"?"alternate":this.colorVariant),t.setAttribute("part","clearable-button"),t.className="btn-clear",t.noMargins=!0,t}appendClearableButton(){if(!this.shadowRoot)return;let t=this.shadowRoot.querySelector(".btn-clear");t||(t=this.#t(),this.shadowRoot.querySelector(".ids-input, .ids-textarea")?.querySelector(".field-container")?.appendChild(t),this.shadowRoot?.querySelector(".ids-input-field, .ids-textarea-field")?.after(t),this.attachClearableEvents()),this.container?.classList.add("has-clearable")}removeClearableButton(){let t=this.shadowRoot?.querySelector(".btn-clear");t&&(t.remove(),this.container?.classList.remove("has-clearable"))}clear(){let t=this;t.input&&(t.value="",t.input.dispatchEvent(new Event("change")),t.input.focus(),this.checkContents(),this.triggerEvent("cleared",this,{detail:{elem:this,value:t.value}}))}checkContents(){let t=this,e=this.shadowRoot?.querySelector(".btn-clear");if(e){let a=t.input?.value;!a||!a.length?e.classList.add("is-empty"):e.classList.remove("is-empty"),this.triggerEvent("contents-checked",this,{detail:{elem:this,value:t.value}})}}attachClearableEvents(){this.handleClearBtnClick(""),this.inputClearableEvents.forEach(t=>this.handleClearableInputEvents(t,"")),this.checkContents()}handleClearBtnClick(t){let e=this.shadowRoot?.querySelector(".btn-clear");if(e){let a="click";if(t==="remove"){let s=this?.handledEvents?.get(a);s&&s.target===e&&this.offEvent(a,e)}else this.onEvent(a,e,()=>{this.clear()})}}handleClearableInputEvents(t,e){let a=this;if(a.input&&t&&typeof t=="string"){let s=t;if(e==="remove"){let l=this.handledEvents?.get(s);l&&l.target===a.input&&this.offEvent(s,a.input)}else this.onEvent(s,a.input,()=>{this.checkContents()})}}destroyClearable(){this.input?.classList.remove("has-clearable"),this.handleClearBtnClick("remove"),this.inputClearableEvents.forEach(t=>this.handleClearableInputEvents(t,"remove")),this.removeClearableButton()}set clearable(t){let e=r(t);e?this.setAttribute(n.CLEARABLE,e.toString()):this.removeAttribute(n.CLEARABLE),this.container&&this.handleClearable()}get clearable(){return r(this.getAttribute(n.CLEARABLE))}set clearableForced(t){let e=r(t);e?this.setAttribute(n.CLEARABLE_FORCED,e.toString()):this.removeAttribute(n.CLEARABLE_FORCED),this.handleClearable()}get clearableForced(){return this.getAttribute(n.CLEARABLE_FORCED)}},u=o;export{u as a};
