import{a as H}from"./ids-chunk-MAULHKDE.js";import{f as C}from"./ids-chunk-ODGLGMPF.js";import{a as N}from"./ids-chunk-XE4WFW5M.js";import{a as I}from"./ids-chunk-GFV2Z7F5.js";import{e as L,g as R}from"./ids-chunk-QPDOZZIG.js";import{a as h}from"./ids-chunk-EQJWBFQ2.js";import{a as D,b as w,c as E,d as A}from"./ids-chunk-U7OOVFXE.js";var m,v,b=class extends I{constructor(){super({noShadowRoot:!0});E(this,m);w(this,"rootNode")}static get attributes(){return[...super.attributes,h.DISABLED,h.ROW_INDEX]}connectedCallback(){super.connectedCallback()}get dataGrid(){return this.rootNode||(this.rootNode=this.getRootNode()),this.rootNode.host}get data(){return this.dataGrid?.data||[]}get columns(){return this.dataGrid?.columns||[]}get visibleColumns(){return this.dataGrid?.visibleColumns||[]}get dimensions(){return this.getBoundingClientRect()}set disabled(e){L(e)?(this.setAttribute(h.DISABLED,""),this.setAttribute("aria-disabled","true")):(this.removeAttribute(h.DISABLED),this.removeAttribute("aria-disabled"))}get disabled(){return this.hasAttribute(h.DISABLED)}set rowIndex(e){e!==null&&e>=0?this.setAttribute(h.ROW_INDEX,String(e)):this.removeAttribute(h.ROW_INDEX)}get rowIndex(){return Number(this.getAttribute(h.ROW_INDEX)??-1)}attributeChangedCallback(e,a,i){a!==i&&e===h.ROW_INDEX&&this.renderRow(Number(i))}renderRow(e){let a=this.dataGrid.cacheHash,i=Number(e),s=this.dataGrid.data[e].rowSelected?"select":"deselect",d=`${a}:${i}:${s}`;b.rowCache[d]=b.rowCache[d]??this.cellsHTML(),this.innerHTML=b.rowCache[d],A(this,m,v).call(this)}refreshRow(){this.querySelectorAll(":scope > ids-data-grid-cell").forEach(e=>e.refreshCell()),A(this,m,v).call(this)}toggleSelection(){this.dataGrid?.resetCache();let e=this.classList.contains("selected"),a=Number(this.getAttribute("data-index"));e&&!this.dataGrid?.suppressRowDeselection?this.dataGrid?.deSelectRow(a):this.dataGrid?.selectRow(a),this.dataGrid?.triggerEvent("selectionchanged",this.dataGrid,{detail:{elem:this,selectedRows:this.dataGrid?.selectedRows}})}toggleExpandCollapse(e=!1){let a=this.getAttribute("aria-expanded")==="true";if(this.dataGrid?.expandableRow){let i=this.querySelector(".ids-data-grid-expandable-row");a?i.setAttribute("hidden",""):i.removeAttribute("hidden"),this.setAttribute("aria-expanded",String(!a)),this.dataGrid?.updateDataset(Number(this.getAttribute("data-index")),{rowExpanded:!a}),this.querySelector(".ids-data-grid-tree-container ids-button ids-icon")?.setAttribute("icon",a?"plusminus-folder-closed":"plusminus-folder-open")}if(this.dataGrid?.treeGrid){this.setAttribute("aria-expanded",String(!a)),this.dataGrid?.updateDataset(Number(this.getAttribute("data-index")),{rowExpanded:!a}),this.querySelector(".ids-data-grid-tree-container ids-button ids-icon").setAttribute("icon",a?"plusminus-folder-closed":"plusminus-folder-open");let i=this.getAttribute("aria-level"),s=!1;C(this,`[aria-level="${i}"]`).forEach(d=>{Number(d.getAttribute("aria-level"))>Number(i)&&!s&&(a?d.setAttribute("hidden",""):d.removeAttribute("hidden"),this.dataGrid?.updateDataset(Number(d.getAttribute("data-index")),{rowHidden:a})),d.getAttribute("aria-expanded")&&(s=d.getAttribute("aria-expanded")==="false")})}if(!e){let i=Number(this.getAttribute("data-index"));this.dataGrid?.triggerEvent(`row${a?"collapsed":"expanded"}`,this.dataGrid,{bubbles:!0,detail:{elem:this,row:i,data:this.dataGrid?.data[i]}})}}toggleRowActivation(){let e=this.classList.contains("activated"),a=Number(this.getAttribute("aria-rowindex"))-1;e&&!this.dataGrid?.suppressRowDeactivation?this.dataGrid?.deactivateRow(a):(this.dataGrid?.activatedRow.index&&this.dataGrid?.deactivateRow(this.dataGrid?.activatedRow.index),this.dataGrid?.activateRow(a)),this.dataGrid?.triggerEvent("activationchanged",this.dataGrid,{detail:{elem:this,data:this.dataGrid?.activatedRow,row:Number(this.getAttribute("data-index"))}})}toggleChildRowSelection(e){let a=this?.getAttribute("aria-level");C(this,`[aria-level="${a}"]`).forEach(i=>{Number(i.getAttribute("aria-level"))>Number(a)&&this.dataGrid&&(this.dataGrid.groupSelectsChildren=!1,e?this.dataGrid?.selectRow(Number(i.getAttribute("data-index"))):this.dataGrid?.deSelectRow(Number(i.getAttribute("data-index"))),this.dataGrid.groupSelectsChildren=!0)})}set selected(e){e?(this.classList.add("selected"),this.setAttribute("aria-selected","true"),this.dataGrid?.rowSelection==="mixed"&&this?.classList.add("mixed")):(this.classList.remove("selected"),this.removeAttribute("aria-selected"))}get selected(){return this.classList.contains("selected")}updateCells(e){let a=this,i=a.querySelectorAll(".ids-data-grid-cell");i?.length&&[...i].forEach((s,d)=>{let n=this.dataGrid?.columns[d],l=n.cssPart||"cell";(this.dataGrid?.rowSelection==="mixed"&&a.classList.contains("activated")||(this.dataGrid?.rowSelection==="single"||this.dataGrid?.rowSelection==="multiple")&&a.classList.contains("selected"))&&(n.cellSelectedCssPart?l=n.cellSelectedCssPart:l="cell-selected"),typeof l=="function"&&(l=l(e,d)),s.setAttribute("part",l)})}static template(e,a,i,s){let d=`${e?.rowSelected?" selected":""}`;d+=`${e?.rowSelected&&s?.rowSelection==="mixed"?" mixed":""}`,d+=`${e?.rowActivated?" activated":""}`;let n="";s?.treeGrid&&(n+=` aria-setsize="${e.ariaSetSize}" aria-level="${e.ariaLevel}" aria-posinset="${e.ariaPosinset}"`,e.children&&(n+=e.rowExpanded===!1?' aria-expanded="false"':' aria-expanded="true"')),s?.pagination==="client-side"&&s?.pageNumber>1&&(i+=(Number(s?.pageNumber)-1)*Number(s?.pageSize));let l=e?.rowHidden?" hidden":"",f=(()=>{let G=p=>typeof p<"u"&&p!==null&&(typeof p=="boolean"&&p===!0||typeof p=="string"&&p.toLowerCase()==="true"),g=e.disabled;return G(typeof g=="function"?g(a,e):g)})(),x=f?' disabled aria-disabled="true"':"";return e&&f&&(e.idstempcanrowdisabled=f),`
      <ids-data-grid-row
        row-index="${a}"
        role="row"
        part="row"
        aria-rowindex="${i}"
        data-index="${a}"
        ${l}
        class="ids-data-grid-row${d}"
        ${n}
        ${x}
      >
      </ids-data-grid-row>
    `}cellsHTML(){let e=this.rowIndex,a=e,i=this.data[e],s=this.dataGrid,d=(t,r,o)=>{let c=t.cssPart||"cell";return typeof c=="function"?c(r,o):c},n=(t,r,o)=>t.dirtyCells?t.dirtyCells.findIndex(c=>c.cell===o)!==-1:!1,l=(t,r,o)=>t.invalidCells?t.invalidCells.findIndex(c=>c.cell===o)!==-1:!1,S=(t,r)=>t.readonly&&t?.readonly===!0?!0:typeof t?.readonly=="function"?t?.readonly(e,r,t,i):!1,f=(t,r)=>t?.disabled?typeof t?.disabled=="function"?t?.disabled(e,r,t,i):typeof t?.disabled=="boolean"?t?.disabled:!1:!1,x=(t,r)=>typeof t?.uppercase=="function"?t.uppercase("body-cell",t,e,r,i):t?.uppercase==="true"||t?.uppercase===!0,G="";if(s?.expandableRow){let t=R(s?.querySelector(`#${s?.expandableRowTemplate}`)?.innerHTML||"",i);G=`<div class="ids-data-grid-expandable-row"${i.rowExpanded===!0?"":" hidden"}>${t}</div>`}let g=s?.leftFrozenColumns.length,p=s?.visibleColumns.map((t,r)=>{let o=H.template(i,t,a,s),c=S(t,o),y=this.disabled||f(t,o),z=x(t,o),$=t.editor?.type,u="ids-data-grid-cell";return u+=`${$?` is-${$}`:""}`,u+=`${c?" is-readonly":""}`,u+=`${y?" is-disabled":""}`,u+=`${z?" is-uppercase":""}`,u+=`${n(i,t,r)?" is-dirty":""}`,u+=`${l(i,t,r)?" is-invalid":""}`,u+=`${t?.align?` align-${t?.align}`:""}`,u+=`${t?.frozen?` frozen frozen-${t?.frozen}${r+1===g?" frozen-last":""}`:""}`,u+=`${t?.editor&&!c&&!y?` is-editable${t?.editor?.inline?" is-inline":""}`:""}`,`<ids-data-grid-cell role="gridcell" part="${d(t,e,r)}" class="${u}" aria-colindex="${r+1}">${o}</ids-data-grid-cell>`}).join("");return i?.idstempcanrowdisabled&&delete i.idstempcanrowdisabled,`${p}${G}`}};m=new WeakSet,v=function(){let e=this.rowIndex;this.setAttribute("data-index",String(e)),this.setAttribute("aria-rowindex",String(e+1)),this.dataGrid.data[e]?.rowSelected&&(this.selected=this.dataGrid.data[e].rowSelected),!this.dataGrid.data[e]?.rowSelected&&this.classList.contains("selected")&&(this.selected=this.dataGrid.data[e].rowSelected),this.dataGrid?.treeGrid&&(this.setAttribute("aria-setsize",this.dataGrid.data[e]?.ariaSetSize),this.setAttribute("aria-level",this.dataGrid.data[e]?.ariaLevel),this.setAttribute("aria-posinset",this.dataGrid.data[e]?.ariaPosinset),this.dataGrid.data[e]?.children&&this.setAttribute("aria-expanded",this.dataGrid.data[e]?.rowExpanded===!1?"false":"true")),this.dataGrid.data[e]?.rowExpanded&&this.setAttribute("aria-expanded","true"),!this.dataGrid.data[e]?.rowExpanded&&this.getAttribute("aria-expanded")==="false"&&this.setAttribute("aria-expanded","false"),!this.dataGrid.data[e]?.rowExpanded&&this.dataGrid.expandableRow&&this.setAttribute("aria-expanded","false"),this.dataGrid.data[e]?.rowHidden&&(this.hidden=!0,this.classList.add("hidden")),!this.dataGrid.data[e]?.rowHidden&&this.classList.contains("hidden")&&(this.hidden=!1,this.classList.remove("hidden"))},w(b,"rowCache",{}),b=D([N("ids-data-grid-row")],b);export{b as a};
