import{a as tt}from"./ids-chunk-YXHOBTS7.js";import{a as st}from"./ids-chunk-PUWUN5N4.js";import{a as S,b as E,c as p,d as nt,e as ot}from"./ids-chunk-LYCR2TW5.js";import{a as it}from"./ids-chunk-J3OLORFB.js";import{f as et}from"./ids-chunk-I2COW2SQ.js";import{a as at}from"./ids-chunk-E2RRN5KD.js";import{a as G}from"./ids-chunk-N7RNTKMO.js";import{b as F,f as R,g as f,h as x,j as P,k as O,l as C,m as $,n as L,o as V,p as j,q as U,s as X,v as Q}from"./ids-chunk-4W3JMIJK.js";import{a as J}from"./ids-chunk-AKCO43TX.js";import{a as Y,b as q}from"./ids-chunk-XE4WFW5M.js";import{a as Z}from"./ids-chunk-GFV2Z7F5.js";import{e as u,f as K,h as B}from"./ids-chunk-QPDOZZIG.js";import{a as o}from"./ids-chunk-EQJWBFQ2.js";import{a as N}from"./ids-chunk-U7OOVFXE.js";var rt=`
:host {
  contain: content;
}

.ids-month-view {
  display: flex;
  background-color: var(--ids-calendar-month-view-color-background-default);
  width: 100%;
  box-sizing: border-box;
  flex-direction: column;
  overflow: auto;
  max-width: inherit;
}
.ids-month-view .month-view-container {
  background-color: var(--ids-calendar-month-view-color-background-default);
  flex-shrink: 0;
}
.ids-month-view .month-view-table-header th {
  background-clip: padding-box;
  height: 30px;
  line-height: 30px;
  text-align: center;
  width: 14.3%;
}
.ids-month-view .month-view-table {
  width: 100%;
  border-spacing: 0;
  border-collapse: collapse;
}
.ids-month-view .trigger-icon {
  color: var(--ids-color-azure-60);
}
.ids-month-view .month-view-legend {
  margin: 0 auto;
  padding: 10px 5px 0;
}
.ids-month-view .month-view-legend-swatch,
.ids-month-view .month-view-legend-item,
.ids-month-view .month-view-legend-text {
  display: inline-block;
}
.ids-month-view .month-view-legend-item {
  margin-bottom: 2px;
}
.ids-month-view .month-view-legend-swatch {
  background-color: var(--legend-color);
  opacity: 0.3;
  width: 16px;
  height: 16px;
}
.ids-month-view .month-view-legend-item.event-type .month-view-legend-swatch {
  border-radius: 10px;
  opacity: 1;
  width: 14px;
  height: 14px;
}
.ids-month-view .month-view-legend-text {
  position: relative;
  color: var(--ids-calendar-month-view-legend-color-text);
  padding: 0 10px 0 8px;
  top: -2px;
}
.ids-month-view .events-container {
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
}
.ids-month-view .events-container .events-overflow {
  position: absolute;
  bottom: 0;
  cursor: pointer;
  text-indent: 12px;
}
.ids-month-view .events-container ids-text::part(text) {
  text-transform: capitalize;
}

.ids-month-view.is-compact {
  position: relative;
}
.ids-month-view.is-compact .month-view-table-header th {
  line-height: unset;
  vertical-align: top;
  height: 22px;
}
.ids-month-view.is-compact .month-view-table {
  margin-top: 13px;
}
.ids-month-view.is-compact .weekday-text {
  color: var(--ids-calendar-month-view-weekday-color-text-compact);
}
.ids-month-view.is-compact td {
  width: 44px;
  height: 44px;
  text-align: center;
}
.ids-month-view.is-compact td:not(.is-disabled):hover {
  cursor: pointer;
}
.ids-month-view.is-compact td .day-container {
  display: inline-block;
  position: relative;
  border-radius: 50%;
  border: 1px solid transparent;
  margin: 5px 0;
}
.ids-month-view.is-compact td .day-text {
  display: inline-block;
  position: relative;
  z-index: 2;
  border-radius: 50%;
  margin: 2px;
  color: var(--ids-calendar-month-view-color-text-default);
  white-space: nowrap;
  transition: 0.2s background-color ease;
}
.ids-month-view.is-compact td.alternate .day-text {
  color: var(--ids-calendar-month-view-color-text-compact);
}
.ids-month-view.is-compact td.is-disabled .day-text {
  background-color: var(--ids-color-neutral-10);
  color: var(--ids-color-neutral-30);
}
.ids-month-view.is-compact td ids-text::part(text) {
  border-radius: 50%;
  box-sizing: border-box;
  width: 35px;
  height: 35px;
  line-height: 35px;
  text-align: center;
  display: inline-block;
}
.ids-month-view.is-compact td:hover .day-text {
  color: var(--ids-calendar-month-view-weekday-color-text-compact-hover);
}
.ids-month-view.is-compact td.is-selected .day-text {
  color: var(--ids-calendar-month-view-weekday-color-text-compact-selected-hover);
  background-color: var(--ids-calendar-month-view-day-color-background-compact-selected);
}
.ids-month-view.is-compact td.is-selected:focus {
  outline: none;
  outline-style: none;
}
.ids-month-view.is-compact td.is-selected:not(.is-disabled):not(.range-selection):focus ids-text::part(text) {
  width: 31px;
  height: 31px;
  line-height: 31px;
}
.ids-month-view.is-compact td.is-selected:not(.is-disabled):not(.range-selection):focus ids-text {
  margin: 2px;
}
.ids-month-view.is-compact td.is-selected:not(.is-disabled):not(.range-selection):focus .day-container {
  border-color: var(--ids-calendar-month-view-day-color-background-compact-selected);
  z-index: 2;
  box-shadow: 0 0 2px 0 var(--ids-calendar-month-view-day-color-background-compact-selected);
}
.ids-month-view.is-compact td.is-today:not(.is-selected) .day-text::part(text) {
  border: 1px solid var(--ids-calendar-month-view-today-color-border-compact);
}
.ids-month-view.is-compact td:not(.is-disabled):not(.is-selected):not(.has-legend):not(.range-selection):hover .day-text, .ids-month-view.is-compact td:not(.is-disabled):not(.is-selected):not(.has-legend):not(.range-selection):active .day-text {
  background-color: var(--ids-calendar-month-view-day-color-background-compact-hover);
}
.ids-month-view.is-compact td.has-legend:not(.is-disabled):hover .day-container::after {
  opacity: 0.7;
}
.ids-month-view.is-compact td.has-legend .day-container::after {
  border-radius: 50%;
  position: absolute;
  content: "";
  background-color: var(--legend-color);
  display: inline-block;
  width: 35px;
  height: 35px;
  overflow: hidden;
  opacity: 0.3;
  transition: 0.2s opacity ease;
  inset: 0;
  margin: auto;
}
.ids-month-view.is-compact td.range-selection + .range-selection, .ids-month-view.is-compact td.range-next:not(:first-of-type), .ids-month-view.is-compact td.range-prev:not(:last-of-type) {
  position: relative;
}
.ids-month-view.is-compact td.range-selection + .range-selection::before, .ids-month-view.is-compact td.range-next:not(:first-of-type)::before, .ids-month-view.is-compact td.range-prev:not(:last-of-type)::before {
  position: absolute;
  width: 100%;
  z-index: 1;
  content: "";
  display: inline-block;
  height: 35px;
  top: 0;
  bottom: 0;
  margin-top: auto;
  margin-bottom: auto;
}
.ids-month-view.is-compact td.is-disabled.range-selection.not-included + .range-selection::before, .ids-month-view.is-compact td.is-disabled.range-prev.not-included::before {
  content: none;
}
.ids-month-view.is-compact td:not(.is-disabled.not-included).range-prev .day-text, .ids-month-view.is-compact td:not(.is-disabled.not-included).range-next .day-text, .ids-month-view.is-compact td:not(.is-disabled.not-included).range-next:not(:first-of-type)::before, .ids-month-view.is-compact td.range-prev:not(:last-of-type)::before {
  background-color: var(--ids-calendar-month-view-range-color-background-compact);
}
.ids-month-view.is-compact td.range-selection:not(:first-of-type)::before, .ids-month-view.is-compact td:not(.is-disabled.not-included).range-selection .day-text {
  background-color: var(--ids-calendar-month-view-range-color-background-compact-selected);
}
.ids-month-view.is-compact td.range-selection:not(.alternate):not(.is-disabled.not-included) .day-text {
  color: var(--ids-calendar-month-view-range-color-text-compact-selected);
}
.ids-month-view.is-compact td.range-selection:not(:first-of-type)::before, .ids-month-view.is-compact td.range-next:not(:first-of-type)::before {
  right: 50%;
}
.ids-month-view.is-compact td.range-prev:not(:last-of-type)::before {
  right: -50%;
}
.ids-month-view.is-compact td.range-selection .day-text, .ids-month-view.is-compact td.range-prev .day-text, .ids-month-view.is-compact td.range-next .day-text {
  border-radius: 50%;
  z-index: 2;
  transition: none;
}
.ids-month-view.is-compact th,
.ids-month-view.is-compact td {
  padding: 0;
}
.ids-month-view.is-compact.range-select-week td .day-text {
  transition: none;
}
.ids-month-view.is-compact .btn-today {
  margin-right: -7px;
}
.ids-month-view.is-compact .btn-today::part(button) {
  padding-inline: 4px;
  padding-block: 2px;
  margin: 3px;
}
.ids-month-view.is-compact .btn-previous,
.ids-month-view.is-compact .btn-next {
  padding-inline-start: 0;
  margin: 3px;
}
.ids-month-view.is-compact .btn-previous::part(button),
.ids-month-view.is-compact .btn-next::part(button) {
  padding: 0;
  width: 44px;
  height: 44px;
}
.ids-month-view.is-compact .month-view-legend {
  padding-top: 27px;
  max-width: 300px;
}
.ids-month-view.is-compact .week-num-cell {
  border-inline-end: 1px solid var(--ids-calendar-month-view-color-border);
}
.ids-month-view.is-compact .week-num-cell ids-text {
  color: var(--ids-month-view-week-number-text-color);
  cursor: default;
}

.ids-month-view.is-fullsize {
  border-style: solid;
  border-width: 1px 1px 0;
  border-color: var(--ids-calendar-month-view-color-border);
}
.ids-month-view.is-fullsize .weekday-text {
  color: var(--ids-calendar-month-view-weekday-color-text);
}
.ids-month-view.is-fullsize .day-text {
  color: var(--ids-calendar-month-view-color-text-default);
}
.ids-month-view.is-fullsize td {
  border-style: solid;
  border-width: 0 1px 1px;
  position: relative;
  transition: 0.1s background-color ease-out;
  height: 99px;
  width: 14.3%;
  overflow: hidden;
  user-select: none;
}
.ids-month-view.is-fullsize td:last-child {
  border-right: 0;
}
.ids-month-view.is-fullsize td:first-child {
  border-left: 0;
}
.ids-month-view.is-fullsize td:not(.is-selected):not(.has-legend):hover, .ids-month-view.is-fullsize td:not(.is-selected):not(.has-legend):active {
  background-color: var(--ids-calendar-month-view-color-background-hover);
}
.ids-month-view.is-fullsize td.is-disabled {
  opacity: 0.5;
  background-color: var(--ids-calendar-month-view-color-background-disabled);
}
.ids-month-view.is-fullsize td.is-selected:not(.has-legend) {
  background-color: var(--ids-calendar-month-view-color-background-selected);
}
.ids-month-view.is-fullsize td.is-selected {
  box-shadow: inset 0 5px 0 0 var(--ids-calendar-month-view-color-selected);
}
.ids-month-view.is-fullsize td.is-selected:focus {
  outline: none;
}
.ids-month-view.is-fullsize td.is-selected ids-text::part(text) {
  font-weight: 600;
}
.ids-month-view.is-fullsize td.has-legend::after {
  position: absolute;
  width: 100%;
  background-color: var(--legend-color);
  content: "";
  inset: 0;
  opacity: 0.3;
}
.ids-month-view.is-fullsize td.has-legend.is-selected::after {
  top: 5px;
}
.ids-month-view.is-fullsize td.has-legend:hover::after {
  opacity: 0.7;
}
.ids-month-view.is-fullsize td.alternate .day-text {
  color: var(--ids-calendar-month-view-color-text-alternate);
}
.ids-month-view.is-fullsize td .day-text {
  position: absolute;
  cursor: pointer;
  z-index: 1;
  left: calc(100% - 25px);
  top: var(--ids-month-view-day-text-top, 13px);
  width: 10px;
  text-align: center;
}
.ids-month-view.is-fullsize td.month-label .day-text {
  left: auto;
  width: 100%;
  text-align: right;
}
.ids-month-view.is-fullsize td.month-label ids-text::part(text) {
  font-weight: 600;
  padding-right: 10px;
}
.ids-month-view.is-fullsize th,
.ids-month-view.is-fullsize td {
  padding: 0;
  border-bottom: 1px solid;
  border-color: var(--ids-calendar-month-view-color-border);
}
.ids-month-view.is-fullsize.has-legend .month-view-container {
  border-bottom: 1px solid var(--ids-calendar-month-view-color-border);
}

.ids-month-view.is-date-picker {
  overflow: visible;
}
.ids-month-view.is-date-picker .month-view-container {
  padding-left: 10px;
  padding-right: 10px;
}
.ids-month-view.is-date-picker td .day-container {
  margin: 0;
}
.ids-month-view.is-date-picker ids-date-picker {
  margin-left: 12px;
}

.ids-month-view.is-date-picker .month-view-legend,
.ids-month-view.is-fullsize .month-view-legend {
  text-align: center;
}

.month-view-legend-item.event-type .month-view-legend-swatch {
  border-radius: 10px;
  opacity: 1;
}

ids-toolbar ids-menu-button[menu=view-picker] {
  margin-inline-end: 8px;
}

:host([dir=rtl]) .ids-month-view.is-fullsize td .day-text {
  left: unset;
  right: calc(100% - 25px);
}
:host([dir=rtl]) .ids-month-view.is-fullsize td.month-label .day-text {
  right: auto;
  text-align: left;
}
:host([dir=rtl]) .ids-month-view.is-fullsize td.month-label ids-text::part(text) {
  padding-right: unset;
  padding-left: 10px;
}
:host([dir=rtl]) .ids-month-view.is-fullsize td:last-child {
  border-left: 0;
}
:host([dir=rtl]) .ids-month-view.is-date-picker ids-date-picker {
  margin-left: 0;
  margin-right: 12px;
}
:host([dir=rtl]) .ids-month-view.is-date-picker .btn-today {
  margin-right: 0;
  margin-left: -7px;
}`;var yt=st(it(tt(G(J(Z))))),W=class extends yt{constructor(){super()}connectedCallback(){super.connectedCallback(),this.#y(),this.#r(),this.#t()}#l=!1;static get attributes(){return[...super.attributes,o.COMPACT,o.END_DATE,o.FIRST_DAY_OF_WEEK,o.IS_DATEPICKER,o.SHOW_PICKLIST_MONTH,o.SHOW_PICKLIST_WEEK,o.SHOW_PICKLIST_YEAR,o.SHOW_TODAY,o.START_DATE]}template(){return`<div class="ids-month-view ${this.compact?"is-compact":"is-fullsize"}${this.isDatePicker?" is-date-picker":""}" part="container">
      <div class="month-view-container" part="table-container">
        <table class="month-view-table" aria-label="${this.localeAPI?.translate("Calendar")}" role="application">
          <thead class="month-view-table-header">
            <tr></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>`}#y(){return this.offEvent("click.month-view-dayselect"),this.onEvent("click.month-view-dayselect",this.container?.querySelector("tbody"),t=>{if(t.target?.classList.contains("week-num-text")){t.stopImmediatePropagation(),t.stopPropagation();return}this.#f(t.target.closest("td"))}),this.offEvent("mouseover.month-view-range"),this.onEvent("mouseover.month-view-range",this.container?.querySelector("tbody"),t=>{let i=t.target.closest("td");if(!i)return;let{year:e,month:s,day:n}=i.dataset;this.#a(e,s,n)}),this.offEvent("mouseleave.month-view-range"),this.onEvent("mouseleave.month-view-range",this.container?.querySelector("tbody"),()=>{this.container?.querySelectorAll("td").forEach(t=>t.classList.remove("range-next","range-prev"))}),this.onEvent("click.overflow",this.container,t=>{if(t.target.tagName==="IDS-TEXT"&&t.target.classList.contains("events-overflow")){t.stopPropagation();let i=new Date(t.target.getAttribute("data-date"));this.triggerEvent("overflow-click",this,{detail:{date:i},bubbles:!0,cancelable:!0,composed:!0})}}),this}onLanguageChange=()=>{this.setDirection(),this.#t()};onLocaleChange=()=>{this.setDirection(),this.#t()};#r(){let t=[33,34,35,36,37,38,39,40,187,189];return this.#e()?this.offEvent("keydown.month-view-keyboard"):(this.offEvent("keydown.month-view-keyboard"),this.onEvent("keydown.month-view-keyboard",this.container?.querySelector(".month-view-table"),i=>{let e=i.keyCode;if(t.includes(e)&&(i.stopPropagation(),i.stopImmediatePropagation(),i.preventDefault()),this.useRange){if(this.rangeSettings.start){e===27&&(this.rangeSettings.start=null,this.#s(),this.selectDay(this.year,this.month,this.day),this.focus()),e===38&&(this.changeDate("previous-week",!0),this.#a(this.year,this.month,this.day)),e===40&&(this.changeDate("next-week",!0),this.#a(this.year,this.month,this.day)),(e===39||e===187&&i.shiftKey)&&(this.changeDate("next-day",!0),this.#a(this.year,this.month,this.day)),(e===37||e===189&&!i.shiftKey)&&(this.changeDate("previous-day",!0),this.#a(this.year,this.month,this.day)),(e===13||e===32)&&(this.#d(this.year,this.month,this.day),this.#n()),this.focus();return}(e===13||e===32)&&(this.rangeSettings.selectWeek?(this.#h(this.year,this.month,this.day),this.#n()):(this.#d(this.year,this.month,this.day),this.focus()))}e===38&&this.changeDate("previous-week"),e===40&&this.changeDate("next-week"),(e===39||e===187&&i.shiftKey)&&this.changeDate("next-day"),(e===37||e===189&&!i.shiftKey)&&this.changeDate("previous-day"),e===33&&!i.altKey&&!(i.ctrlKey||i.metaKey)&&this.changeDate("previous-month"),e===34&&!i.altKey&&!(i.ctrlKey||i.metaKey)&&this.changeDate("next-month"),e===33&&(i.ctrlKey||i.metaKey)&&this.changeDate("previous-year"),e===34&&(i.ctrlKey||i.metaKey)&&this.changeDate("next-year"),e===36&&this.changeDate("start-month"),e===35&&this.changeDate("end-month"),e===84&&this.changeDate("today"),((t.includes(e)||e===84)&&!this.isDatePicker||e===32||e===13)&&this.#n(),(t.includes(e)||e===84)&&(this.isDatePicker&&this.selectDay(this.year,this.month,this.day),this.focus())})),this}#v(){let t=this.legend&&this.legend.length>0?`
      <div class="month-view-legend">
        ${this.legend.map(i=>`
          <div class="month-view-legend-item ${i.cssClass||""}">
            <span class="month-view-legend-swatch" data-color="${i.color}"></span>
            <ids-text class="month-view-legend-text" ${i.fontSize?`font-size="${i.fontSize}"`:""}>${i.name}</ids-text>
          </div>
        `).join("")}
      </div>
    `:"";this.container?.querySelector(".month-view-legend")?.remove(),this.container?.querySelector(".month-view-container")?.insertAdjacentHTML("beforeend",t),this.#u()}changeDate(t,i=!1){if(t==="next-month")if(this.localeAPI?.isIslamic()){let e=C(this.activeDate),s=e.month===11?e.year+1:e.year,n=e.month===11?0:e.month+1,a=O(s,n,e.day===30?1:e.day);this.day=a.getDate(),this.year=a.getFullYear(),this.month=a.getMonth()}else this.year=this.month===11?this.year+1:this.year,this.month=this.month===11?0:this.month+1,this.day=this.#o(this.day);if(t==="previous-month")if(this.localeAPI?.isIslamic()){let e=C(this.activeDate),s=e.month===0?e.year-1:e.year,n=e.month===0?11:e.month-1,a=O(s,n,e.day===30?1:e.day);this.day=a.getDate(),this.year=a.getFullYear(),this.month=a.getMonth()}else this.year=this.month===0?this.year-1:this.year,this.month=this.month===0?11:this.month-1,this.day=this.#o(this.day);if(t==="next-day"){let e=L(this.year,this.month,this.day,this.localeAPI?.isIslamic());if(e.getDate()===this.day&&i)return;if(this.localeAPI?.isIslamic()){let s=f(this.activeDate,1,"days");this.day=s.getDate(),this.year=s.getFullYear(),this.month=s.getMonth();return}if(e.getDate()===this.day){let s=f(e,1,"days");this.year=s.getFullYear(),this.month=s.getMonth(),this.day=s.getDate()}else this.day+=1}if(t==="previous-day"){let e=$(this.year,this.month,this.day,this.localeAPI?.isIslamic());if(e.getDate()===this.day&&i)return;if(this.localeAPI?.isIslamic()){let s=x(this.activeDate,1,"days");this.day=s.getDate(),this.year=s.getFullYear(),this.month=s.getMonth();return}if(e.getDate()===this.day){let s=x(e,1,"days");this.year=s.getFullYear(),this.month=s.getMonth(),this.day=s.getDate()}else this.day-=1}if(t==="next-year")if(this.localeAPI?.isIslamic()){let e=C(this.activeDate),s=O(e.year+1,e.month,e.day===30?1:e.day);this.day=s.getDate(),this.month=s.getMonth(),this.year=s.getFullYear()}else{let e=this.year+1;this.year=e,this.day=this.#o(this.day)}if(t==="previous-year")if(this.localeAPI?.isIslamic()){let e=C(this.activeDate),s=O(e.year-1,e.month,e.day===30?1:e.day);this.day=s.getDate(),this.month=s.getMonth(),this.year=s.getFullYear()}else{let e=this.year-1;this.year=e,this.day=this.#o(this.day)}if(t==="today"){let e=new Date;this.day=e.getDate(),this.year=e.getFullYear(),this.month=e.getMonth(),this.useRange&&(this.rangeSettings.start=e.getTime(),this.rangeSettings.end=e.getTime()),this.focus()}if(t==="next-week"){let e=f(this.activeDate,7,"days"),s=L(this.year,this.month,this.day,this.localeAPI?.isIslamic());if(e>s&&i)return;this.day=e.getDate(),(e>s||this.localeAPI?.isIslamic())&&(this.year=e.getFullYear(),this.month=e.getMonth())}if(t==="previous-week"){let e=x(this.activeDate,7,"days"),s=$(this.year,this.month,this.day,this.localeAPI?.isIslamic());if(e<s&&i)return;this.day=e.getDate(),(e<s||this.localeAPI?.isIslamic())&&(this.year=e.getFullYear(),this.month=e.getMonth())}if(t==="start-month"){let e=$(this.year,this.month,this.day,this.localeAPI?.isIslamic());this.day=e.getDate(),this.localeAPI?.isIslamic()&&(this.year=e.getFullYear(),this.month=e.getMonth())}if(t==="end-month"){let e=L(this.year,this.month,this.day,this.localeAPI?.isIslamic());this.day=e.getDate(),this.localeAPI?.isIslamic()&&(this.month=e.getMonth(),this.year=e.getFullYear())}this.triggerDateChange(this.activeDate,t)}#f(t){if(!t)return;let{month:i,year:e,day:s}=t.dataset;t.classList.contains("is-disabled")||(this.#d(e,i,s),this.day=s,(K(i)!==this.month||this.localeAPI?.isIslamic())&&(this.month=i),(K(e)!==this.year||this.localeAPI?.isIslamic())&&(this.year=e),this.focus(),this.#n())}#d(t,i,e){if(!this.useRange)return;let s=new Date(t,i,e),n=s.getTime(),a=this.rangeSettings.start?R(this.rangeSettings.start,s):0,h=this.rangeSettings.start&&!this.rangeSettings.end,l=!(this.rangeSettings.selectBackward||this.rangeSettings.selectForward),m=this.rangeSettings.selectBackward&&a<0,c=this.rangeSettings.selectForward&&a>0,v=new Date(this.rangeSettings.start),y=v.getTime(),r=this.rangeSettings.minDays,d=this.rangeSettings.maxDays,g=r>0&&Math.abs(a)<r,M=d>0&&Math.abs(a)>d,b=a>=0?f(v,r,"days"):x(v,r,"days");if(this.selectDay(t,i,e),!this.rangeSettings.selectWeek)if(h&&!M&&(l||m||c)){if(g){this.rangeSettings.end=n>=y?b.getTime():this.rangeSettings.start,this.rangeSettings.start=x(this.rangeSettings.end,r,"days"),this.#i();return}this.rangeSettings.end=n>=y?n:this.rangeSettings.start,this.rangeSettings.start=n<=y?n:this.rangeSettings.start,this.#i()}else this.rangeSettings.start=n,this.rangeSettings.end=null,this.#s()}#s(){this.container?.querySelectorAll("td").forEach(t=>t.classList.remove("range-next","range-prev","range-selection","not-included"))}#i(){if(!this.useRange)return;let t=new Date(this.rangeSettings.start),i=new Date(this.rangeSettings.end),e=this.rangeSettings.end?R(t,i):0;this.#s(),Array.from({length:e+1}).forEach((s,n)=>{let a=f(t,n,"days"),h=["td",`[data-year="${a.getFullYear()}"]`,`[data-month="${a.getMonth()}"]`,`[data-day="${a.getDate()}"]`].join(""),l=this.container?.querySelector(h);l?.classList.add("range-selection"),this.rangeSettings.includeDisabled||l?.classList.add("not-included"),(n===0||n===e)&&!this.rangeSettings.selectWeek&&(l?.setAttribute("aria-selected","true"),l?.setAttribute("role","gridcell"),l?.classList.add("is-selected"))})}#b(t){let i=new Date(this.rangeSettings.start),e=new Date(this.rangeSettings.end);return t.getTime()>=i.getTime()&&t.getTime()<=e.getTime()}#h(t,i,e){let s=F(new Date(t,i,e),this.firstDayOfWeek);s.getTime()!==this.rangeSettings.start?.getTime()&&(this.rangeSettings.start=s,this.rangeSettings.end=f(this.rangeSettings.start,7-1,"days"),this.selectDay(),this.#i())}#a(t,i,e){if(this.useRange){if(this.rangeSettings.selectWeek){this.#h(t,i,e);return}if(this.rangeSettings.start&&!(this.rangeSettings.end&&this.rangeSettings.start)){let s=new Date(this.rangeSettings.start),n=new Date(t,i,e),a=R(s,n);this.#s();let h=!(this.rangeSettings.selectBackward||this.rangeSettings.selectForward),l=this.rangeSettings.selectBackward&&a<0,m=this.rangeSettings.selectForward&&a>0,c=this.rangeSettings.maxDays,v=c>0&&Math.abs(a)>c;a!==0&&!v&&(h||l||m)&&Array.from({length:Math.abs(a)}).forEach((y,r)=>{let d=a>0?f(s,r+1,"days"):x(s,r+1,"days"),g=["td",`[data-year="${d.getFullYear()}"]`,`[data-month="${d.getMonth()}"]`,`[data-day="${d.getDate()}"]`].join("");this.container?.querySelector(g)?.classList.add(a>0?"range-next":"range-prev"),this.rangeSettings.includeDisabled||this.container?.querySelector(g)?.classList.add("not-included")})}}}isDisabledByDate(t){let{years:i,dayOfWeek:e,dates:s,minDate:n,maxDate:a,isEnable:h}=this.disableSettings,l=this.#e()&&(t<this.startDate||t>this.endDate),m=i.some(g=>g===t.getFullYear()),c=e.some(g=>g===t.getDay()),v=s.some(g=>new Date(g).getTime()===t.getTime()),y=t<=new Date(n)||t>=new Date(a),r=m||c||v||y;return(h?!r:r)||l}#p(t,i){let e=R(t,i)===0,s=this.localeAPI?.isIslamic()?C(t).day===1:t.getDate()===1;if(this.#e()&&(e||s))return"short"}#w(t){let i=this.#e()?this.startDate:$(this.year,this.month,this.day,this.localeAPI?.isIslamic()),e=this.#e()?this.endDate:L(this.year,this.month,this.day,this.localeAPI?.isIslamic()),s=F(i,this.firstDayOfWeek),n=f(s,t*7,"days"),a=new Date,h=this.compact,l=Array.from({length:7}).map((v,y)=>{let r=f(s,t*7+y,"days"),d=this.#p(r,s),g=this.localeAPI?.formatDate(r,{day:"numeric",month:d,numberingSystem:"latn"}),M=this.localeAPI?.formatDate(r,{dateStyle:"full"}),b=r.getDate(),w=r.getMonth(),D=r.getFullYear(),k=b===this.day&&D===this.year&&w===this.month,A=!this.useRange&&k,T=this.useRange&&!this.rangeSettings.start&&k,I=this.isDisabledByDate(r),dt=!this.#e()&&(r<i||r>e),_=this.getLegendByDate(r),lt=this.#b(r),ht=D===a.getFullYear()&&w===a.getMonth()&&b===a.getDate(),ct=B(dt&&"alternate",_&&"has-legend",I&&"is-disabled",(A||T)&&"is-selected",d&&"month-label",lt&&"range-selection",ht&&"is-today"),gt=A||T?'aria-selected="true" tabindex="0" role="gridcell"':'role="link"',mt=[`data-year="${D}"`,`data-month="${w}"`,`data-day="${b}"`].join(" "),ut=_?`data-color="${_.color}"`:"",H=this.generateDateKey(new Date(D,w,b)),z=`<td aria-label="${M}" ${mt} ${ct} ${gt} ${ut}>
        <span class="day-container">
          <ids-text
            aria-hidden="true"
            class="day-text"
            font-size="14"
          >${g}</ids-text>
        </span>
        ${h?"":`<div class="events-container" data-key="${H}"></div>`}
      </td>`;return typeof this.state.onDayRender=="function"&&(z=this.state.onDayRender(z,H)),z}).join(""),m=`<td class="week-num-cell">
      <ids-text class="week-num-text" font-size="14">${X(n)}</ids-text>
    </td>`;return`${this.showWeekNumbers?m:""}${l}`}#c(){let t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=t.map(a=>this.localeAPI?.translate(`${this.compact?"DayNarrow":"DayAbbreviated"}${a}`)),e=t.map(a=>this.localeAPI?.translate(`DayWide${a}`)),s=`<th scope="col" class="week-num-cell">
      <ids-text class="week-num-text" font-size="14">W#</ids-text>
    </th>`,n=this.showWeekNumbers?s:"";n+=i.map((a,h)=>{let l=(h+this.firstDayOfWeek)%7,m=i[l];return`
        <th scope="col" abbr="${e[l]}">
          <ids-text
            class="weekday-text"
            font-size="14"
          >${m}</ids-text>
        </th>
      `}).join(""),this.container?.querySelectorAll("thead th").forEach(a=>a.remove()),this.container?.querySelector("thead tr")?.insertAdjacentHTML("beforeend",n)}#t(){let t=this.#e()?U(this.startDate,this.endDate,this.firstDayOfWeek):j(this.year,this.month,this.day,this.firstDayOfWeek,this.localeAPI?.isIslamic());this.triggerEvent("beforerendermonth",this,{bubbles:!0,composed:!0});let i=Array.from({length:t}).map((e,s)=>`<tr>${this.#w(s)}</tr>`).join("");this.container?.querySelectorAll("tbody tr").forEach(e=>e.remove()),this.container?.querySelector("tbody")?.insertAdjacentHTML("beforeend",i),this.#c(),this.#u(),this.state.hasRendered=!0,!this.compact&&!this.isDatePicker&&this.renderEventsData()}getActiveDayEvents(){let t=this.getSelectedDay(),i=t?[...t.querySelectorAll("ids-calendar-event")]:[];if(this.#l&&t){let s=t.querySelectorAll(".events-container > [slot]");i=t?[...s]:[]}return i.map(s=>s.eventData)}#n(){if(this.isDisabledByDate(this.activeDate))return;let t={detail:{elem:this,date:this.activeDate,useRange:this.useRange,rangeStart:this.useRange&&this.rangeSettings.start?new Date(this.rangeSettings.start):null,rangeEnd:this.useRange&&this.rangeSettings.end?new Date(this.rangeSettings.end):null,value:this.getFormattedDate(this.activeDate)},bubbles:!0,cancelable:!0,composed:!0};!this.compact&&!this.isDatePicker&&(t.detail.events=this.getActiveDayEvents()),this.triggerEvent("dayselected",this,t)}selectDay(t,i,e){this.#m();let s=`td[data-year="${t}"][data-month="${i}"][data-day="${e}"]`,n=this.container?.querySelector(s);n&&this.#g(n)}#g(t){t&&(t.setAttribute(o.TABINDEX,"0"),t.setAttribute("aria-selected","true"),t.setAttribute("role","gridcell"),t.classList.add("is-selected"))}#D(t){t&&(t.removeAttribute(o.TABINDEX),t.removeAttribute("aria-selected"),t.setAttribute("role","link"),t.classList.remove("is-selected"))}#m(){this.container?.querySelectorAll("td.is-selected")?.forEach(t=>{this.#D(t)})}#e(){return P(this.startDate)&&P(this.endDate)&&this.endDate>=this.startDate}#o(t){let i=V(this.year,this.month);return t>i?1:t}#u(){this.container?.querySelectorAll("[data-color]").forEach(t=>{let i=t.dataset.color,e=i?.includes("#");i&&(t.style=`--legend-color: ${e?i:`var(--ids-color-${i})`}`)})}getSelectedDay(){let t=`td[data-year="${this.year}"][data-month="${this.month}"][data-day="${this.day}"]`;return this.container?.querySelector(t)||null}focus(){let t=this.getSelectedDay();t&&(t.classList.contains("is-disabled")||(this.#m(),this.#g(t),setTimeout(()=>t.focus(),10)))}onFirstDayOfWeekChange(){this.container&&this.#t()}onMonthChange(){this.container&&(this.#e()?this.selectDay(this.year,this.month,this.day):(this.#t(),this.#i()))}onYearChange(){this.container&&(this.#e()?this.selectDay(this.year,this.month,this.day):(this.#t(),this.#i()))}onDayChange(t,i){this.container&&!(this.rangeSettings.start||this.useRange)&&!this.isDatePicker&&this.selectDay(this.year,this.month,i?t:this.day)}get startDate(){let t=this.getAttribute(o.START_DATE)??"",i=new Date(t);return t&&P(i)?i:null}set startDate(t){t?this.setAttribute(o.START_DATE,String(t)):this.removeAttribute(o.START_DATE),this.container&&(this.#t(),this.#r())}get endDate(){let t=this.getAttribute(o.END_DATE)??"",i=new Date(t);return t&&P(i)?i:null}set endDate(t){t?this.setAttribute(o.END_DATE,String(t)):this.removeAttribute(o.END_DATE),this.container&&(this.#t(),this.#r())}get compact(){let t=this.getAttribute(o.COMPACT);return u(t)}set compact(t){let i=u(t);i?this.setAttribute(o.COMPACT,"true"):this.removeAttribute(o.COMPACT),this.container?.classList.toggle("is-fullsize",!i),this.container?.classList.toggle("is-compact",i),this.container&&this.#c()}set showWeekNumbers(t){u(t)?this.setAttribute(o.SHOW_WEEK_NUMBERS,""):this.removeAttribute(o.SHOW_WEEK_NUMBERS)}get showWeekNumbers(){return u(this.getAttribute(o.SHOW_WEEK_NUMBERS))}get isDatePicker(){let t=this.getAttribute(o.IS_DATEPICKER);return u(t)}set isDatePicker(t){let i=u(t);i?this.setAttribute(o.IS_DATEPICKER,"true"):this.removeAttribute(o.IS_DATEPICKER),this.container?.classList.toggle("is-date-picker",i)}onDisableSettingsChange(){this.#t()}onLegendSettingsChange(t){this.container&&(this.#t(),this.#v(),this.container.classList[t&&t.length?"add":"remove"]("has-legend"))}onRangeSettingsChange(t){this.container&&(this.useRange&&t?.start?this.selectDay():(this.#s(),this.selectDay(this.year,this.month,this.day)),this.container.classList.toggle("range-select-week",this.rangeSettings.selectWeek),this.#i())}onUseRangeChange(t){t?(this.selectDay(),this.#i()):(this.#s(),this.selectDay(this.year,this.month,this.day))}get showPicklistYear(){let t=this.getAttribute(o.SHOW_PICKLIST_YEAR);return t?u(t):!0}set showPicklistYear(t){let i=u(t);this.setAttribute(o.SHOW_PICKLIST_YEAR,String(i))}get showPicklistMonth(){let t=this.getAttribute(o.SHOW_PICKLIST_MONTH);return t?u(t):!0}set showPicklistMonth(t){let i=u(t);this.setAttribute(o.SHOW_PICKLIST_MONTH,String(i))}get showPicklistWeek(){return u(this.getAttribute(o.SHOW_PICKLIST_WEEK))}set showPicklistWeek(t){u(t)?this.setAttribute(o.SHOW_PICKLIST_WEEK,"true"):this.removeAttribute(o.SHOW_PICKLIST_WEEK)}removeAllEvents(){this.container?.querySelectorAll(".events-container").forEach(t=>{t.innerHTML=""})}#x(t){let i={};return t.forEach(e=>{let s=this.generateDateKey(new Date(e.starts)).toString();i[s]||(i[s]=[]),i[s].push(e)}),i}filterEventsByMonth(t=[]){return t.filter(i=>{let e=new Date(i.starts);return this.startDate&&this.endDate?this.startDate<=e&&e<this.endDate:e.getMonth()===this.month&&e.getFullYear()===this.year})}async renderEventsData(t=!1){if(!t&&typeof this.state.beforeEventsRender=="function"){let n=this.startDate||new Date(this.year,this.month,1),a=this.endDate||new Date(this.year,this.month+1,0);this.eventsData=await this.state.beforeEventsRender(n,a);return}if(this.removeAllEvents(),!this.state.hasRendered||!this.eventsData?.length)return;let i=this.filterEventsByMonth(this.eventsData),e=this.#x(i),s=this.querySelector('[slot="customCalendarEvent"]');for(let n in e)e.hasOwnProperty(n)&&this.#E(n,e[n],s)}#S(t,i){return Math.ceil((i.getTime()-t.getTime())/(1e3*60*60*24))}#E(t,i,e){if(!this.container)return;let s=this.container?.querySelector(`.events-container[data-key="${t}"]`),n=[...s?.childNodes||[]].map(l=>l.order),a=n.length?Math.max(...n)+1:0,h=!1;i.forEach((l,m)=>{let c=new Date(l.starts),v=new Date(l.ends),y=this.#S(c,v)||1;for(let r=0;r<y;r++){let d=this.#A(e),g=this.eventTypesData?.find(A=>A.id===l.type)??null,M=a+m;d.eventTypeData=g,d.eventData=l,d.cssClass=["is-month-view"],d.order=M,r>0&&c.setDate(c.getDate()+1);let b=c.getDate(),w=c.getFullYear(),D=c.getMonth();d.dateKey=`${w}${D}${b}`;let k=this.container?.querySelector(`td[data-year="${w}"][data-month="${D}"][data-day="${b}"]`);if(k){if(y>1){let I=["all-day"];r===0?I.push("calendar-event-start"):r===y-1?I.push("calendar-event-ends"):I.push("calendar-event-continue"),d.cssClass=I}let A=this.generateYOffset(d);d.setAttribute(o.Y_OFFSET,`${A}px`),h=this.isEventOverflowing(d),d.hidden=h,k.querySelector(".events-container")?.appendChild(d);let T=k.querySelector(".events-container");this.triggerEvent("beforeeventrendered",this,{detail:{elem:this,events:this.eventsData,event:d,dateCell:d,container:T},bubbles:!0}),T?.appendChild(d),this.triggerEvent("aftereventrendered",this,{detail:{elem:this,events:this.eventsData,event:d,dateCell:d,container:T},bubbles:!0})}}}),h&&s&&this.#k(s,t)}#k(t,i){if(!t)return;let s=[...t.childNodes].filter(c=>c.hidden),n=i.substring(0,4),a=parseInt(i.substring(4,6))+1,h=i.substring(6),m=`
      <ids-text data-date="${`${a}/${h}/${n}`}" class="events-overflow" font-size="12">
        ${s.length}+ ${this.localeAPI.translate("More")}
      </ids-text>
    `;t.insertAdjacentHTML("beforeend",m)}#A(t){if(t?.name==="MonthViewCalendarEventTemplate"){let i=t.assignedNodes()[0];if(i)return this.#l=!0,i.cloneNode(!0)}return new at}selectDayFromValue(t){let i=t;this.useRange&&this.rangeSettings.separator&&this.rangeSettings.end&&(i=Q(t,this.rangeSettings.separator));let{month:e,day:s,year:n}=et(i);this.day=s,this.month=e,this.year=n,this.useRange?(this.selectDay(),this.#i()):(this.#s(),this.selectDay(n,e,s))}get onDayRender(){return this.state.onDayRender}set onDayRender(t){this.state.onDayRender=t}generateYOffset(t){return t.order*16+35}isEventOverflowing(t){return t.order>3-1}};W=N([Y("ids-month-view"),q(rt)],W);var Kt=W;export{Kt as a};
