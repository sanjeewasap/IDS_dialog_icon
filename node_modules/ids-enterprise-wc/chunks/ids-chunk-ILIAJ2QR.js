import{a as L}from"./ids-chunk-PRFN5Z6E.js";import{a as v}from"./ids-chunk-GUNX4KFT.js";import{b as A}from"./ids-chunk-NZGHOKVC.js";import{a as I}from"./ids-chunk-SEZJIM5Z.js";import{a as E}from"./ids-chunk-WGF76AHI.js";import{a as c}from"./ids-chunk-N7RNTKMO.js";import{a as f}from"./ids-chunk-RRSHSZ55.js";import{a as g}from"./ids-chunk-AKCO43TX.js";import{a as d,b as p}from"./ids-chunk-XE4WFW5M.js";import{a as b}from"./ids-chunk-GFV2Z7F5.js";import{e as s}from"./ids-chunk-QPDOZZIG.js";import{a as e}from"./ids-chunk-EQJWBFQ2.js";import{a as u}from"./ids-chunk-U7OOVFXE.js";var m=`
.ids-upload {
  position: relative;
}
.ids-upload .ids-upload-filetype {
  opacity: 0;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: -webkit-fill-available;
  z-index: -1;
}`;var a="ids-upload-id",w=v(I(c(A(L(f(E(g(b)))))))),r=class extends w{constructor(){super()}isFormComponent=!0;isFilePickerOpened=!1;trigger;fileInput;files;static get attributes(){return[...super.attributes,e.ACCEPT,e.DISABLED,e.LABEL,e.LABEL_FILETYPE,e.LABEL_REQUIRED,e.MULTIPLE,e.NO_MARGINS,e.PLACEHOLDER,e.SIZE,e.READONLY,e.TABBABLE,e.TEXT_ELLIPSIS,e.TRIGGER_LABEL,e.VALIDATE,e.VALIDATION_EVENTS,e.VALUE]}colorVariants=["alternate-formatter"];onColorVariantRefresh(){this.textInput.colorVariant=this.colorVariant}onLabelChange(){this.textInput&&(this.textInput.label=this.label)}onLabelStateChange(){this.textInput.labelState=this.labelState}onLabelRequiredChange(){this.textInput&&(this.textInput.labelRequired=this.labelRequired)}onFieldHeightChange(t){if(t){let i=t==="compact"?{name:"compact",val:""}:{name:"field-height",val:t};this.textInput.setAttribute(i.name,i.val)}else this.textInput.removeAttribute("compact"),this.textInput.removeAttribute("field-height")}connectedCallback(){super.connectedCallback(),this.trigger=this.shadowRoot?.querySelector(".trigger"),this.fileInput=this.shadowRoot?.querySelector(`#${a}`),this.files=this.fileInput?.files,this.#t()}template(){let t=_=>s(_),i=this.accept?` accept="${this.accept}"`:"",n=t(this.dirtyTracker)?` dirty-tracker="${this.dirtyTracker}"`:"",l=t(this.disabled)?` disabled="${this.disabled}"`:"",o=t(this.readonly)?"":" readonly-background",x=t(this.textEllipsis)?' text-ellipsis="true"':"",y=this.label?` label="${this.label}"`:"",T=this.placeholder?` placeholder="${this.placeholder}"`:"",S=t(this.multiple)?' multiple="multiple"':"",C=t(this.readonly)?' readonly="true"':"",D=` clearable-forced="${this.hasAccess}"`,$=this.size?` size="${this.size}"`:"",B=this.triggerLabel||this.triggerLabelDefault,R=this.labelFiletype||this.labelFiletypeDefault,P=this.validate?` validate="${this.validate}"`:"",V=` validation-events="${this.validationEvents||this.validationEventsDefault}"`,h=this.value?` value="${this.value}"`:"",F=this.colorVariant?` color-variant="${this.colorVariant}"`:"",k=this.fieldHeight?` field-height="${this.fieldHeight}"`:"",M=this.labelState?` label-state="${this.labelState}"`:"",N=this.compact?" compact":"",O=this.noMargins?" no-margins":"";return`
      <div class="ids-upload" part="container">
        <label for="${a}" class="ids-upload-filetype-label" aria-hidden="true" tabindex="-1">
          <ids-text audible="true" class="label-filetype" part="label">${R}</ids-text>
        </label>
        <input id="${a}" type="file" class="ids-upload-filetype" aria-hidden="true" tabindex="-1"${i}${S}${h} />
        <ids-trigger-field
          readonly="true"
          ${o}
          ${F}${k}${N}${O}${M}
          ${D}${n}${l}${y}${T}${$}${P}${V}${x}${h}
          css-class="ids-upload"
          part="input"
        >
          <ids-trigger-button slot="trigger-end" part="button" class="trigger"${l}${C}>
            <ids-text audible="true" class="trigger-label">${B}</ids-text>
            <ids-icon icon="folder"></ids-icon>
          </ids-trigger-button>
        </ids-trigger-field>
      </div>`}onDirtyTrackerChange(t){this.textInput&&(this.textInput.dirtyTracker=t)}get input(){return this.container?.querySelector("ids-trigger-field")}clear(){this.hasAccess&&(this.value="")}open(){this.hasAccess&&(this.isFilePickerOpened=!0,this.fileInput?.click())}dispatchChangeEvent(t){this.triggerEvent("change",this,{detail:{files:this.fileInput?.files,textValue:this.value,elem:this,nativeEvent:t}})}handleWindowFocusEvent(){this.onEvent("focus",window,()=>{this.isFilePickerOpened&&(this.isFilePickerOpened=!1,setTimeout(()=>{let t=this.fileInput?.files,i=`files${t?.length?"select":"cancel"}`;this.triggerEvent(i,this.fileInput,{detail:{files:t,elem:this}})},20))})}handleFileInputChangeEvent(){this.onEvent("change",this.fileInput,t=>{let i=this.fileInput?.files;this.value=[].slice.call(i).map(n=>n.name).join(", "),this.dispatchChangeEvent(t)})}handleFileInputCancelEvent(){this.onEvent("filescancel",this.fileInput,()=>{this.textInput.input?.dispatchEvent(new Event("blur",{bubbles:!0}))})}handleTextInputDragDrop(){this.hasAccess&&(this.onEvent("dragenter",this.textInput,()=>{this.fileInput?.style.setProperty("z-index","1")}),["dragleave","dragend","drop"].forEach(i=>{this.onEvent(i,this.textInput,()=>{setTimeout(()=>{this.fileInput?.style.setProperty("z-index","")},1)})}))}handleTextInputKeydown(){this.onEvent("keydown",this.textInput,t=>{let i=["Backspace","Enter","Space"],n=t.code,l=t.path?.filter(o=>o?.classList?.contains("btn-clear")).length>0;i.indexOf(n)>-1&&!l&&(n==="Backspace"?(this.clear(),this.dispatchChangeEvent(t)):this.open(),t.preventDefault())})}handleTriggerClickEvent(){this.onEvent("click",this.trigger,()=>{this.open()})}handleInputClearedEvent(){this.onEvent("cleared",this.textInput,t=>{this.clear(),this.dispatchChangeEvent(t)})}#t(){this.handleWindowFocusEvent(),this.handleFileInputChangeEvent(),this.handleFileInputCancelEvent(),this.handleTextInputDragDrop(),this.handleTextInputKeydown(),this.handleTriggerClickEvent(),this.handleInputClearedEvent()}get textInput(){return this.shadowRoot?.querySelector("ids-trigger-field")}get labelFiletypeDefault(){let t=", Press Enter to Browse for files";return`${this.label||""}${t}`}get triggerLabelDefault(){return`trigger button for ${this.label||"fileupload"}`}get validationEventsDefault(){return"blur change"}get hasAccess(){let t=i=>s(i);return!(t(this.disabled)||t(this.readonly))}set accept(t){t?(this.setAttribute(e.ACCEPT,t),this.fileInput?.setAttribute(e.ACCEPT,t)):(this.removeAttribute(e.ACCEPT),this.fileInput?.removeAttribute(e.ACCEPT))}get accept(){return this.getAttribute(e.ACCEPT)}set disabled(t){let i=s(t);i?(this.setAttribute(e.DISABLED,i.toString()),this.textInput&&(this.textInput.disabled=!0),this.trigger&&(this.trigger.disabled=!0)):(this.removeAttribute(e.DISABLED),this.textInput&&(this.textInput.disabled=!1,this.textInput.readonly=this.readonly),this.trigger&&(this.trigger.disabled=!1))}get disabled(){return s(this.getAttribute(e.DISABLED))}set labelFiletype(t){let i=this.shadowRoot?.querySelector(".label-filetype");t?(this.setAttribute(e.LABEL_FILETYPE,t),i&&(i.textContent=t)):(this.removeAttribute(e.LABEL_FILETYPE),i&&(i.textContent=this.labelFiletypeDefault))}get labelFiletype(){return this.getAttribute(e.LABEL_FILETYPE)}set multiple(t){this.fileInput=this.shadowRoot?.querySelector(`#${a}`);let i=s(t);if(i){this.setAttribute(e.MULTIPLE,i.toString()),this.fileInput?.setAttribute(e.MULTIPLE,"multiple");return}this.removeAttribute(e.MULTIPLE),this.fileInput?.removeAttribute(e.MULTIPLE)}get multiple(){return s(this.getAttribute(e.MULTIPLE))}set noMargins(t){typeof t=="boolean"||typeof t=="string"?this.setAttribute(e.NO_MARGINS,t.toString()):this.removeAttribute(e.NO_MARGINS),this.textInput.noMargins=this.noMargins}get noMargins(){let t=this.getAttribute(e.NO_MARGINS);return t!==null?s(t):!1}set textEllipsis(t){typeof t=="boolean"||typeof t=="string"?this.setAttribute(e.TEXT_ELLIPSIS,t.toString()):this.removeAttribute(e.TEXT_ELLIPSIS),this.textInput.textEllipsis=this.textEllipsis}get textEllipsis(){let t=this.getAttribute(e.TEXT_ELLIPSIS);return t!==null?s(t):!0}set placeholder(t){if(t){this.setAttribute(e.PLACEHOLDER,t),this.textInput.placeholder=t;return}this.removeAttribute(e.PLACEHOLDER),this.textInput.placeholder=null}get placeholder(){return this.getAttribute(e.PLACEHOLDER)}set readonly(t){let i=s(t);this.textInput&&!this.textInput?.readonly&&(this.textInput.readonly=!0),i?(this.setAttribute(e.READONLY,i.toString()),this.container?.classList.add(e.READONLY),this.textInput&&(this.textInput.readonlyBackground=!1),this.trigger&&(this.trigger.readonly=!0)):(this.removeAttribute(e.READONLY),this.container?.classList.remove(e.READONLY),this.textInput&&(this.textInput.readonlyBackground=!0),this.trigger&&(this.trigger.readonly=!1))}get readonly(){return s(this.getAttribute(e.READONLY))}set size(t){t?(this.setAttribute(e.SIZE,t),this.textInput?.setAttribute(e.SIZE,t)):(this.removeAttribute(e.SIZE),this.textInput?.removeAttribute(e.SIZE))}get size(){return this.getAttribute(e.SIZE)}set tabbable(t){typeof t=="boolean"||typeof t=="string"?this.setAttribute(e.TABBABLE,t.toString()):this.removeAttribute(e.TABBABLE),this.textInput.tabbable=this.tabbable}get tabbable(){let t=this.getAttribute(e.TABBABLE);return t!==null?s(t):!1}set triggerLabel(t){let i=this.shadowRoot?.querySelector(".trigger-label");t?(this.setAttribute(e.TRIGGER_LABEL,t),i&&(i.textContent=t)):(this.removeAttribute(e.TRIGGER_LABEL),i&&(i.textContent=this.triggerLabelDefault))}get triggerLabel(){return this.getAttribute(e.TRIGGER_LABEL)}set validate(t){t?(this.setAttribute(e.VALIDATE,t),this.textInput&&(this.textInput.validate=t)):(this.removeAttribute(e.VALIDATE),this.textInput&&(this.textInput.validate=null))}get validate(){return this.getAttribute(e.VALIDATE)}set validationEvents(t){t?(this.setAttribute(e.VALIDATION_EVENTS,t),this.textInput&&(this.textInput.validationEvents=t)):(this.removeAttribute(e.VALIDATION_EVENTS),this.textInput&&(this.textInput.validationEvents=this.validationEventsDefault))}get validationEvents(){return this.getAttribute(e.VALIDATION_EVENTS)}set value(t){t?(this.setAttribute(e.VALUE,t),this.textInput&&(this.textInput.value=t)):(this.removeAttribute(e.VALUE),this.fileInput&&(this.fileInput.value=""),this.textInput&&(this.textInput.value="")),this.files&&(this.files=this.fileInput?.files)}get value(){return this.getAttribute(e.VALUE)}};r=u([d("ids-upload"),p(m)],r);export{r as a};
