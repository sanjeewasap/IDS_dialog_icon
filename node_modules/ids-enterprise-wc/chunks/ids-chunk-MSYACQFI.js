import{a as g}from"./ids-chunk-V25MGCID.js";import{j as s}from"./ids-chunk-4W3JMIJK.js";import{e as f}from"./ids-chunk-QPDOZZIG.js";var o=(n,t)=>{for(let i in t)n[i]=t[i]},d=class{type="input";input;init(t){let i=t?.column.editor?.inline;this.input=document.createElement("ids-input"),this.input.colorVariant=i?"in-cell":"borderless",this.input.size=i?"full":"",this.input.fieldHeight=String(t?.dataGrid?.rowHeight)==="xxs"?"xs":String(t?.dataGrid?.rowHeight),this.input.labelState="collapsed";let e=t?.innerText;t.innerHTML="",t?.appendChild(this.input),this.input.value=e,this.input instanceof g&&t&&(i||this.input.shadowRoot?.querySelector("input")?.style.setProperty("width",`${t.offsetWidth-5}px`),o(this.input,t?.column.editor?.editorSettings)),this.input.focus()}save(){return{value:this.input?.value}}destroy(){this.input=void 0}},u=class{type="checkbox";input;clickEvent;init(t){this.input=document.createElement("ids-checkbox");let i=f(t?.querySelector("[aria-checked]")?.getAttribute("aria-checked"));t.innerHTML="",this.clickEvent||(this.input.noAnimation=!0),this.input.checked=this.clickEvent?!i:i,t?.appendChild(this.input),this.input.focus(),this.clickEvent&&requestAnimationFrame(()=>{t?.endCellEdit(),t?.focus()})}save(){return{value:this.input?.checked}}destroy(){this.input?.offEvent("keydown"),this.input=void 0}},p=class{type="dropdown";input;#t;#i=this.stopPropagation.bind(this);clickEvent;init(t){this.#t=t?.querySelector("[data-value]")?.getAttribute("data-value")??null;let i=t?.column.editor?.inline,e={...t?.column?.editor?.editorSettings},r=e?.options??[];this.input=document.createElement("ids-dropdown"),this.input.insertAdjacentHTML("beforeend","<ids-list-box></ids-list-box>"),this.input.loadDataSet(r),delete e.options,o(this.input,e),this.input.typeahead=!1,t.innerHTML="",t.appendChild(this.input),this.input.value=this.#t,this.input.size="full",this.input.labelState="collapsed",this.input.colorVariant=i?"in-cell":"borderless",this.input.fieldHeight=String(t?.dataGrid?.rowHeight)==="xxs"?"xs":String(t?.dataGrid?.rowHeight),this.input.container?.querySelector("ids-trigger-field")?.focus(),this.#e(),this.input.open()}stopPropagation(t){let i=t.relatedTarget instanceof HTMLElement?t.relatedTarget.tagName:t.relatedTarget;(i==="IDS-DROPDOWN"||i==="IDS-LIST-BOX-OPTION")&&(t.stopPropagation(),t.stopImmediatePropagation())}#e(){this.input?.onEvent("change",this.input,t=>{this.#t=t.detail.value}),this.input?.onEvent("focusout",this.input,this.#i)}save(){return{value:this.#t,dirtyCheckValue:this.input?.input?.value}}destroy(){this.input?.offEvent("change"),this.input?.offEvent("focusout",this.input,this.#i),this.#t=void 0}},h=class{type="datepicker";input;clickEvent;#t;#i="";init(t){this.input=this.#e(t);let i=this.clickEvent?.target?.classList?.contains("editor-cell-icon");this.#n(t,t.originalValue),t.innerHTML="",t.appendChild(this.input),this.input.value=this.#i,this.input.popup?.syncDateAttributes(this.#t??new Date),this.input.input.autoselect=!0,this.input.input?.focus(),i&&requestAnimationFrame(()=>{this.input?.open()}),this.#a(t)}#e(t){let i=document.createElement("ids-date-picker");return o(i,t?.column.editor?.editorSettings),i.fieldHeight=String(t?.dataGrid?.rowHeight)==="xxs"?"xs":String(t?.dataGrid?.rowHeight),i.labelState="collapsed",i.colorVariant="borderless",i.size="full",i.mask=!0,i}#n(t,i){let e=t?.dataGrid.localeAPI.parseDate(i);s(e)&&(this.#t instanceof Date?(this.#t.setFullYear(e.getFullYear()),this.#t.setMonth(e.getMonth()),this.#t.setDate(e.getDate())):this.#t=e,this.#i=t.dataGrid.localeAPI.formatDate(this.#t))}#s(t){this.input?.popup?.hidden===!1&&t.stopImmediatePropagation()}#a(t){this.input?.onEvent("focusout",this.input,i=>this.#s(i)),this.input?.onEvent("outsideclick.datepicker",this.input,()=>t?.cancelCellEdit())}save(t){return this.#n(t,this.input?.input.value),{value:this.#t?.toISOString()??"",dirtyCheckValue:this.#i}}destroy(){this.input?.offEvent("focusout"),this.input?.offEvent("outsideclick.datepicker"),this.#t=void 0,this.#i=""}},l=class{type="timepicker";input;clickEvent;#t;init(t){this.input=this.#i(t);let i=this.clickEvent?.target?.classList?.contains("editor-cell-icon"),e=t.originalValue??"",r=t.column.formatOptions,c=t.dataGrid.localeAPI.parseDate(e,r,!0),m=s(c);this.#t=m?c:void 0,this.input.value=m?t.dataGrid.localeAPI.formatDate(this.#t,{pattern:this.input.format}):"",t.innerHTML="",t.appendChild(this.input),this.input.input.autoselect=!0,this.input.input?.focus(),i&&this.input.open(),this.#n()}#i(t){let i=document.createElement("ids-time-picker");return o(i,t?.column.editor?.editorSettings),i.id=`${t.column.field}-time-picker`,i.fieldHeight=String(t?.dataGrid?.rowHeight)==="xxs"?"xs":String(t?.dataGrid?.rowHeight),i.labelState="collapsed",i.colorVariant="borderless",i.size="full",i.mask=!0,i}#e(t){let i=t instanceof FocusEvent?t.relatedTarget:t.target,e=this.input?.container?.classList.contains("is-open");(i?.tagName==="IDS-DATA-GRID-CELL"||e)&&t.stopImmediatePropagation()}#n(){this.input?.onEvent("focusout",this.input,t=>this.#e(t),{capture:!0}),this.input?.listen(["Tab","Enter"],this.input,t=>this.#e(t))}save(){let t=this.input.value,i=s(this.#t)?new Date(this.#t):new Date;return t&&i.setHours(this.input.hours24,this.input.minutes,this.input.seconds),{value:t&&s(i)?i.toISOString():void 0,dirtyCheckValue:t}}destroy(){this.input?.offEvent("focusout"),this.input?.detachAllListeners(),this.#t=void 0}},a=[];a.push({type:"input",editor:new d});a.push({type:"checkbox",editor:new u});a.push({type:"dropdown",editor:new p});a.push({type:"datepicker",editor:new h});a.push({type:"timepicker",editor:new l});export{d as a,u as b,p as c,h as d,l as e,a as f};
