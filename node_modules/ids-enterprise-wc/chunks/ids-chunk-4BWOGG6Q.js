import{a as c}from"./ids-chunk-D4JC6QF5.js";var d=class{constructor(t){this.root=t}root;#t(){try{if(typeof localStorage?.getItem=="function")return!0}catch{return!1}return!1}#e(){return this.root.savePosition&&this.#t()}savePosition(){if(this.#e()){let t={sizes:[...this.root.sizes()]};["align","axis","disabled"].forEach(e=>{t[e]=this.root[e]}),localStorage.setItem(this.idTobeUse(this.root.uniqueId),JSON.stringify(t)),this.root.triggerEvent("save-position",this.root,{detail:{elem:this.root,uniqueId:this.root.uniqueId,value:t}})}}restorePosition(){if(!this.#e())return null;let t={},e=localStorage.getItem(this.idTobeUse(this.root.uniqueId));if(typeof e=="string"&&e!==""){t={...JSON.parse(e),canRestore:!1};let s=t?.sizes?.length,o=[...this.root.childNodes].filter(i=>i instanceof c);s&&s===o?.length&&(t.canRestore=!0,["align","axis","disabled"].forEach(i=>{t[i]!==this.root[i]&&(t.canRestore=!1)}))}return t?.canRestore?t:null}clearPosition(t){let e=[];if(this.#t()){let s=t||this.root.uniqueId,o=this.idTobeUse(s);Object.keys(localStorage).some(n=>n===o)&&(localStorage.removeItem(o),e.push(s))}this.root.triggerEvent("clear-position",this.root,{detail:{elem:this.root,clearIds:e}})}clearPositionAll(){let t=[];this.#t()&&Object.keys(localStorage).forEach(s=>{let o="{idstempclearstorage}",i=this.idTobeUse(o);if(new RegExp(`^${i.replace(o,"(.+)")}$`,"g").test(s)){let r=i.split(o),a=new RegExp(`^${r.join("|")}$`,"g"),l=s.replace(a,"");localStorage.removeItem(s),t.push(l)}}),this.root.triggerEvent("clear-position",this.root,{detail:{elem:this.root,clearIds:t}})}idTobeUse(t,e,s){let o={uniqueId:"",prefix:"ids-splitter",suffix:"usersettings-position"},i=[t,e,s].some(r=>r!=null),n=o.prefix;if(i){let r=(a,l)=>l??o[a];n=`${r("prefix",s)}-${r("uniqueId",t)}-${r("suffix",e)}`}return n}};export{d as a};
