import{a as T}from"./ids-chunk-MAULHKDE.js";import{n as w}from"./ids-chunk-ODGLGMPF.js";import{f as I}from"./ids-chunk-LCUXCSNZ.js";import{a as k}from"./ids-chunk-EQJWBFQ2.js";var D=0,q=class{constructor(e){this.root=e,D++}root;DEFAULTS={disableClientFilter:!1,filterable:!0,filterWhenTyping:!0,filterRowDisabled:!1};#i=[];#t={};#r=!1;focused;#a=!1;text(e){return this.#l("text",e)}integer(e){return this.#l("integer",e)}decimal(e){return this.#l("decimal",e)}contents(e){return this.#c("contents",e)}dropdown(e){return this.#c("dropdown",e)}checkbox(e){return this.#s("checkbox",e)}date(e){let t="date",i=`${this.#e(e)}-${t}`,r=e.filterOptions||{},d=r.format?` format="${r.format}"`:"",u=r.showToday?` show-today="${r.showToday}"`:"",s=r.firstDayOfWeek?` first-day-of-week="${r.firstDayOfWeek}"`:"",h=r.disabled?" disabled":"",a=this.#i.filter(y=>y.columnId===e.id)[0]?.value??null;this.#t[e.id]=this.#t[e.id]||{},this.#t[e.id].datePicker||(this.#t[e.id].datePicker={value:a}),a=a?` value="${a}"`:"";let n=`${this.#s(t,e)}`,p=`${this.#d(t,e,"calendar","DatePickerTriggerButton")}`,m=`<ids-date-picker-popup
      attachment=".ids-data-grid-wrapper"
      data-filter-type="${t}"
      trigger-type="click"
      id="popup-${i}"
      no-margins
      compact="true"
      ${d}${u}${s}${a}${h}></ids-date-picker-popup>`;return e.align==="right"?`${p}${n}${m}`:`${n}${p}${m}`}time(e){let t="time",i=`${this.#e(e)}-${t}`,r=e.filterOptions||{},d=r.label||"Filter time picker",u=r.format?` format="${r.format}"`:"",s=r.placeholder?` placeholder="${r.placeholder}"`:"",h=r.minuteInterval?` minute-interval="${r.minuteInterval}"`:"",l=r.secondInterval?` second-interval="${r.secondInterval}"`:"",a=r.autoselect?" autoselect":"",n=r.autoupdate?" autoupdate":"",p=r.disabled?" disabled":"",m=r.readonly?" readonly":"",v=this.#i.filter($=>$.columnId===e.id)[0]?.value??null;this.#t[e.id]=this.#t[e.id]||{},this.#t[e.id].timePicker||(this.#t[e.id].timePicker={value:v}),v=v?` value="${v}"`:"";let g=`${this.#s(t,e)}`,o=`${this.#d(t,e,"clock","TimePickerTriggerButton")}`,f=`<ids-time-picker-popup
        attachment=".ids-data-grid-wrapper"
        trigger-type="click"
        color-variant="${this.root.listStyle?"alternate-list-formatter":"alternate-formatter"}"
        data-filter-type="${t}"
        size="${r.size||"full"}"
        label="${d}"
        label-state="collapsed"
        id="${i}"
        no-margins
        compact
        ${u}${s}${h}${l}
        ${a}${n}${p}${m}${v}
      ></ids-time-picker-popup>`;return e?.align==="right"?`${o}${g}${f}`:`${g}${o}${f}`}filterWrapperById(e){return this.root.shadowRoot.querySelector(`.ids-data-grid-header-cell[column-id="${e}"]
      .ids-data-grid-header-cell-filter-wrapper`)}filterTemplate(e){let t=this.root.querySelector(`[slot="filter-${e.id}"]`),i="";if(t?i=`<slot name="filter-${e.id}"></slot>`:typeof e.filterType=="function"&&(i=e.filterType.apply(this,[e])),i!==""){let r="ids-data-grid-header-cell-filter-wrapper";r+=this.root.filterable?"":" hidden",r+=e.filterOptions?.disabled?" disabled":"",i=`<span class="${r}">${i}</span>`}return i}#o(e,t){if(e){let i=e.getAttribute("id")?.replace("field-","popup-"),r=this.root.wrapper.querySelector(`#${i}`);if(r)if(t==="in-range")r.useRange=!0;else{let d=r.value.split(r.rangeSettings.separator)[0];r.resetRangeSettings(),r.useRange=!1,r.value!==d&&(r.value=d)}}}resetFilters(){this.filterNodes?.forEach(e=>{let t=e.querySelector('slot[name^="filter-"]'),i=t?t.assignedElements()[0]:e;if(i){let r=e.closest(".ids-data-grid-header-cell"),d=this.root.columnDataByHeaderElem(r),u=this.#t[d.id],s=i.querySelector("ids-input"),h=i.querySelector("ids-dropdown"),l=i.querySelector("ids-trigger-field"),a=i.querySelector("ids-time-picker"),n=i.querySelector("ids-menu-button");if(s&&(s.value=u?.input?.value||""),h&&(h.value=u?.dropdown?.value||""),l&&(l.value=u?.triggerField?.value||""),a&&(a.value=u?.timePicker?.value||""),n){let p=n.menuEl.items.filter(m=>m.value===u?.btn?.value)[0];p||(p=n.menuEl.items[0]),p&&(n.menuEl.selectItem(p),l&&this.#o(l,p.value))}}})}setFilterConditions(e){this.#a=!0,this.resetFilters();let t=[];return e.forEach((i,r)=>{let d=this.filterWrapperById(i.columnId);if(!d||w(d,"disabled")||w(d,"readonly"))return;let u=d.querySelector('slot[name^="filter-"]'),s=u?u.assignedElements()[0]:d;if(s){let h=s.querySelector("ids-input"),l=s.querySelector("ids-menu-button"),a=s.querySelector("ids-dropdown"),n=s.querySelector("ids-trigger-field"),p=s.querySelector("ids-time-picker"),m=s.closest(".ids-data-grid-header-cell"),y=this.root.columnDataByHeaderElem(m);if(h&&(h.value=i.value||""),n&&(n.value=i.value||""),p&&(p.value=i.value||""),a&&(a.value=i.value||"",a.value===this.#n(y).value&&t.push(r)),p&&!y.formatOptions?.dateFormat&&!y.formatOptions?.timeStyle&&(y.formatOptions||(y.formatOptions={}),y.formatOptions.dateFormat=p.format,y.formatOptions.timeStyle="short"),l){let v=l.menuEl.items.filter(g=>g.value===i.operator)[0];v||(v=l.menuEl.items[0]),v&&l.menuEl.selectItem(v)}i.filterElem||(i.filterElem=p||n||a||h),this.#o(n,i.operator)}}),t.length&&(e=e.filter((i,r)=>!t.includes(r))),this.#a=!1,e}filterConditions(){let e=[];return this.filterNodes?.forEach(t=>{let i=t.querySelector('slot[name^="filter-"]'),r=i?i.assignedElements()[0]:t;if(r){let d=r.querySelector("ids-input"),u=r.querySelector("ids-trigger-field"),s=r.querySelector("ids-menu-button"),h=r.querySelector("ids-dropdown"),l=r.querySelector("ids-time-picker");if(!s&&!d&&!u&&!h)return;let a=t.closest(".ids-data-grid-header-cell"),n=this.root.columnDataByHeaderElem(a),p=s?.menuEl?.getSelectedValues()[0];p||(p=s?.menuEl?.items?.[0]?.value),!p&&!s&&d&&(p="contains");let m=d?.value??u?.value??h?.value??l?.value??"";if(h&&(p="equals",m===this.#n(n).value)||(l&&!n.formatOptions?.dateFormat&&!n.formatOptions?.timeStyle&&(n.formatOptions||(n.formatOptions={}),n.formatOptions.dateFormat=l.format,n.formatOptions.timeStyle="short"),this.#o(u,p),p==="selected-notselected")||m===""&&!h&&!/\b(is-not-empty|is-empty|selected|not-selected)\b/g.test(p))return;let y=l||h||u||d,v={columnId:n.id,columnData:n,filterElem:y,operator:p,value:m};e.push(v)}}),e}applyFilter(e){if(this.root?.resetCache(),this.#r||!this.root.filterable||this.root.filterRowDisabled)return;if(this.#r=!0,e?e=this.setFilterConditions(e):e=this.filterConditions(),this.#i=e,this.root.disableClientFilter){this.root.triggerEvent("filtered",this.root,{bubbles:!0,detail:{elem:this.root,conditions:e}}),this.#r=!1,this.root.saveSettings?.();return}if(!e?.length&&!this.root.datasource.filtered||!e){this.#r=!1;return}let t=!e.length&&this.root.datasource.filtered,i=!1,r=(d,u)=>{let s=!0;for(let h=0,l=e.length;h<l;h++){let a=e[h]||{};if(!a.columnData&&(a.columnData=this.root.columnDataById(a.columnId),!a.columnData)||typeof a.columnData.filterType!="function"&&typeof a.columnData.filterFunction!="function")continue;if(typeof a.columnData.filterFunction=="function"){if(s=a.columnData.filterFunction({data:d,index:u,condition:a}),!s)return this.#r=!1,!0;continue}let n=a.columnData.filterType?.name,p=this.filterWrapperById(a.columnId);if(w(p,"disabled")||w(p,"readonly"))continue;let m=a.columnData,y=$=>$==null?"":$.toString().toLowerCase(),v=()=>{let $=T.template(d,m,u,this.root),b=/(<([^>]+)>)|(amp;)|(&lt;([^>]+)&gt;)/ig;return $.replace(b,"").trim().toLowerCase()},g=y(a.value),o=d[m.field],f=y(o);if(/dropdown|multiselect|contents/g.test(n))if((o===null||typeof o>"u")&&a.value===""){let $="filter-blank-value-temp";o=$,g=$}else g=a.value;if(n==="text"&&(o=v(),f=y(o)),n==="integer"&&(o=v(),o=this.root.localeAPI?.parseNumber(o),g=this.root.localeAPI?.parseNumber(g)),n==="date"||n==="time"){/string|undefined/g.test(typeof o)&&(o=v());let $=(c,E)=>{let S=a.format||m.formatOptions||this.root.localeAPI?.calendar().timeFormat;return E=this.root.localeAPI?.parseDate(E,S),E&&(n==="time"&&(E.setDate(1),E.setMonth(0),E.setYear(0)),E=E.getTime()),typeof c=="string"&&c&&(c=this.root.localeAPI?.parseDate(c,S),c&&(n==="time"?(c.setDate(1),c.setMonth(0),c.setYear(0)):m.formatOptions?.showTime||(c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0)),c=c.getTime())),{rValue:c,cValue:E}},b=null;if(a.operator==="in-range"){let c=this.root.wrapper.querySelector(`#${a.filterElem.getAttribute("aria-controls")}`);if(c)if(a.value.indexOf(c.rangeSettings.separator)>-1){let E=a.value.split(c.rangeSettings.separator),S={start:$(o,E[0]),end:$(o,E[1])};b={rValue:S.start.rValue,cValue:{start:S.start.cValue,end:S.end.cValue}}}else b=$(o,a.value)}else b=$(o,a.value);o=b?b.rValue:o,g=b?b.cValue:g}switch(a.operator){case"equals":s=o===g&&o!=="";break;case"does-not-equal":s=o!==g;break;case"contains":s=f.indexOf(g)>-1&&o.toString()!=="";break;case"does-not-contain":s=f.indexOf(g)===-1;break;case"end-with":s=f.lastIndexOf(g)===f.length-g.toString().length&&f!==""&&f.length>=g.toString().length;break;case"start-with":s=f.indexOf(g)===0&&f!=="";break;case"does-not-end-with":s=f.lastIndexOf(g)===f.length-g.toString().length&&f!==""&&f.length>=g.toString().length,s=!s;break;case"does-not-start-with":s=!(f.indexOf(g)===0&&f!=="");break;case"is-empty":s=f==="";break;case"is-not-empty":if(o===""){s=o!=="";break}s=o!==null;break;case"in-range":typeof g=="object"?s=o>=g.start&&o<=g.end&&o!=="":s=o===g&&o!=="";break;case"less-than":s=o<g&&o!==""&&o!==null;break;case"less-equals":s=o<=g&&o!==""&&o!==null;break;case"greater-than":s=o>g&&o!==""&&o!==null;break;case"greater-equals":s=o>=g&&o!==""&&o!==null;break;case"selected":if(typeof a.columnData.isChecked=="function"){s=a.columnData.isChecked(o);break}s=(f==="1"||f==="true"||o===!0||o===1)&&f!=="";break;case"not-selected":if(typeof a.columnData.isChecked=="function"){s=!a.columnData.isChecked(o);break}s=f==="0"||f==="false"||o===!1||o===0||f==="";break;case"selected-notselected":s=!0;break;default:break}if(i=!0,!s)return this.#r=!1,!0}return this.#r=!1,!s};this.root.datasource.filter(r),this.root.redrawBody(),(t||i)&&(this.root.toggleEmptyMessage(),this.root.triggerEvent("filtered",this.root,{bubbles:!0,detail:{elem:this.root,type:t?"clear":"apply",conditions:e}}),this.root.saveSettings?.()),requestAnimationFrame(()=>{this.root.setActiveCell(0,0,!0)})}setFilterRowDisabled(){this.filterNodes?.forEach(e=>{let t=e.querySelector('slot[name^="filter-"]'),i=t?t.assignedElements()[0]:e;i&&[i.querySelector("ids-input"),i.querySelector("ids-menu-button"),i.querySelector("ids-dropdown"),i.querySelector("ids-date-picker"),i.querySelector("ids-trigger-field"),i.querySelector("ids-time-picker")].forEach(r=>{this.root.filterRowDisabled?(e.classList.add("disabled"),r?.setAttribute("disabled","")):(e.classList.remove("disabled"),r?.removeAttribute("disabled"))})})}attachFilterSettings(){this.root.filterRowDisabled&&this.setFilterRowDisabled();let e=t=>{t?.setAttribute("color-variant",this.root.listStyle?"alternate-list-formatter":"alternate-formatter"),t?.setAttribute("label-state","collapsed"),t?.setAttribute("no-margins",""),t?.setAttribute("compact","")};this.filterNodes?.forEach(t=>{let i=t.querySelector('slot[name^="filter-"]'),r=i?i.assignedElements()[0]:t,d=t.closest(".ids-data-grid-header-cell"),u=this.root.columnDataByHeaderElem(d),s=r?.querySelector("ids-input"),h=s?.getAttribute("data-filter-type"),l=r?.querySelector("ids-dropdown"),a=r?.querySelector("ids-dropdown-list"),n=r?.querySelector("ids-date-picker"),p=r?.querySelector("ids-time-picker"),m=r?.querySelector("ids-menu-button"),y=r?.querySelector("ids-popup-menu"),v=r?.querySelector("ids-trigger-button"),g=r?.querySelector("ids-trigger-field"),o=r?.querySelector("ids-date-picker-popup"),f=r?.querySelector("ids-time-picker-popup"),$=".ids-data-grid-wrapper";if(i&&(s||l||n||p||m)){$="ids-data-grid",this.#t[u.id]=this.#t[u.id]||{};let c=this.#t[u.id];s&&!c.input&&(c.input={value:s.value}),l&&!c.dropdown&&(c.dropdown={value:l.value}),n&&!c.datePicker&&(c.datePicker={value:n.value}),p&&!c.timePicker&&(c.timePicker={value:p.value}),m&&!c.btn&&(c.btn={value:m.menuEl?.getSelectedValues()[0]}),e(s),e(l),e(n),e(p),m&&(m.cssClass=[...new Set([...m.cssClass,"compact"])],m.setAttribute("color-variant",this.root.listStyle?"alternate-list-formatter":"alternate-formatter"),m.setAttribute("column-id",u.id),m.setAttribute("square","true")),y&&y.setAttribute("slot","menu-container")}y&&(y.setAttribute(k.TRIGGER_TYPE,"click"),y.setAttribute(k.ATTACHMENT,$),y.onOutsideClick=()=>{y.hide()},y.appendToTargetParent(),y.popupOpenEventsTarget=document.body,y.refreshTriggerEvents()),m?.setAttribute("data-filter-conditions-button","");let b=o||f;if(b&&(b.appendToTargetParent(),b.popupOpenEventsTarget=document.body,b.onOutsideClick=c=>{c.composedPath().includes(b)||b.hide()},b.setAttribute(k.TRIGGER_TYPE,"click"),b.setAttribute(k.TARGET,`#${g.getAttribute("id")}`),b.setAttribute(k.TRIGGER_ELEM,`#${v.getAttribute("id")}`),b.popup.setAttribute(k.ARROW_TARGET,`#${v.getAttribute("id")}`),b.popup.y=16,b.setAttribute(k.ATTACHMENT,$),b.refreshTriggerEvents()),o){let c=u.filterOptions?.rangeSettings;c&&(o.rangeSettings=c),o.useRange=m?.menuEl?.getSelectedValues()[0]==="in-range"}if(f){let c=this.root.localeAPI?.calendar().timeFormat;g.format=c,f.format=c}l&&a&&(a.configurePopup(),a.setAttribute("size","full"),l.input.value=(a.selected||a.listBox?.children[0])?.textContent||"",a.setAttribute(k.ATTACHMENT,$),a.appendToTargetParent(),a.popupOpenEventsTarget=document.body,a.setAttribute(k.TRIGGER_TYPE,"custom"),a.setAttribute(k.TARGET,`#${l.getAttribute("id")}`),a.setAttribute(k.TRIGGER_ELEM,`#${l.getAttribute("id")}`),l.onEvent("click",l,()=>{let c=a.popup;c&&(c.visible?l.close():l.open())}),a.onOutsideClick=c=>{c.composedPath().includes(a)||l.close()},a.refreshTriggerEvents()),h==="integer"&&(s.mask="number",s.maskOptions={allowDecimal:!1,allowNegative:!0,allowThousandsSeparator:!1}),h==="decimal"&&(s.mask="number",s.maskOptions={allowDecimal:!0,allowNegative:!0})})}attachFilterEventHandlers(){this.root.offEvent(`selected.${this.#e()}`,this.root.wrapper),this.root.onEvent(`selected.${this.#e()}`,this.root.wrapper,t=>{let i=t.detail?.elem;i&&(/ids-menu-item/gi.test(i.nodeName)&&this.#p(i),/ids-dropdown-list/gi.test(i.nodeName)&&(t.target.value=t.detail.value))});let e=this.root.container?.querySelector(".ids-data-grid-header:not(.column-groups)");this.root.onEvent(`change.${this.#e()}`,e,t=>{let i=t.target?.nodeName;!this.#a&&i&&/ids-(input|trigger-field|dropdown|multiselect)/gi.test(i)&&this.applyFilter()}),this.root.onEvent(`dayselected.${this.#e()}`,this.root.wrapper,t=>{t.target.value=t.detail.value}),this.root.onEvent(`timeselected.${this.#e()}`,this.root.wrapper,t=>{t.target.value=t.detail.value}),this.filterNodes?.forEach(t=>{let i=t.querySelector('slot[name^="filter-"]'),d=(i?i.assignedElements()[0]:t)?.querySelector("ids-date-picker, ids-time-picker");d&&this.root.onEvent(`change.${this.#e()}`,d.input,()=>this.applyFilter())}),this.setFilterWhenTyping()}#p(e){let t=e.menu?.target;if(!t?.hasAttribute("data-filter-conditions-button"))return;let{value:i,icon:r,text:d}=e;if(!r||!t||t.icon===r.replace(/^filter-/g,""))return;let u=t.getAttribute("column-id"),s=this.#t[u].btn,h={icon:t.icon,value:`${t.icon}`.replace(/^filter-/g,""),label:(t.text||"").trim()};t.icon=r,t.querySelector("span, ids-text").textContent=d,this.root.triggerEvent("filteroperatorchanged",this.root,{bubbles:!0,detail:{elem:this.root,targetElem:t,icon:r,value:i,label:d,initial:s,beforeChange:h}}),this.applyFilter()}setFilterWhenTyping(){this.filterNodes?.forEach(e=>{let t=e.querySelector('slot[name^="filter-"]'),r=(t?t.assignedElements()[0]:e)?.querySelector("ids-input");if(!r)return;let d=`keydownend.${r.id}`;this.root.filterWhenTyping?(e.classList.add("filter-when-typing"),this.root.onEvent(d,r,()=>{let u=r.value?.length>3||r.value?.length===0;this.focused=r,u&&this.applyFilter()})):(e.classList.remove("filter-when-typing"),this.root.offEvent(d,r))})}#l(e,t){let i=`${this.#f(e,t)}`,r=`${this.#s(e,t)}`;return t.align==="right"?`${i}${r}`:`${r}${i}`}#s(e,t){let i=this.#u(e,t);if(!i?.length)return"";let r=t.filterOptions||{},d=r.disabled?" disabled":"",u=r.readonly?" readonly":"",s=null,h=`${this.#e(t)}-${e}`;if(this.#i.length){let a=this.#i.filter(n=>n.columnId===t.id)[0];s=i.filter(n=>n.value===a?.operator)[0]}s||(s=i.filter(a=>a.selected)[0]),i.length||(s={value:"",icon:"",label:""});let l="";return i.forEach((a,n)=>{!s&&n===0&&(s=a);let m=a.value===s.value?' selected="true"':"";l+=`<ids-menu-item id="item-${n}-${h}" value="${a.value}" icon="${a.icon}"${m}>${a.label}</ids-menu-item>`}),this.#t[t.id]=this.#t[t.id]||{},this.#t[t.id].btn||(this.#t[t.id].btn={...s}),`
      <ids-menu-button
        color-variant="${this.root.listStyle?"alternate-list-formatter":"alternate-formatter"}"
        css-class="compact"
        icon="${s.icon}"
        column-id="${t.id}"
        id="btn-${h}"
        menu="menu-${h}"
        square="true"
        trigger-type="click"
        ${d}${u}
        dropdown-icon>
        <span class="audible">${s.label}</span>
      </ids-menu-button>
      <ids-popup-menu id="menu-${h}" target="#btn-${h}">
        <ids-menu-group select="single">${l}</ids-menu-group>
      </ids-popup-menu>`}#f(e,t){let i=`${this.#e(t)}-${e}`,r=t.filterOptions||{},d=r.label||"Filter Input",u=r.placeholder?` placeholder="${r.placeholder}"`:"",s=r.disabled?" disabled":"",h=r.readonly?" readonly":"",l=this.#i.filter(a=>a.columnId===t.id)[0]?.value??null;return this.#t[t.id]=this.#t[t.id]||{},this.#t[t.id].input||(this.#t[t.id].input={value:l}),l=l?` value="${l}"`:"",`<ids-input
      color-variant="${this.root.listStyle?"alternate-list-formatter":"alternate-formatter"}"
      data-filter-type="${e}"
      type="${r.type||"text"}"
      size="${r.size||"full"}"
      label="${d}"
      label-state="collapsed"
      ${this.root.rowHeight==="xxs"||this.root.rowHeight==="xxs"?'field-height="xs"':""}
      id="${i}"
      text-align="${t.align==="right"?"end":"start"}"
      no-margins
      compact
      ${u}${s}${h}${l}>
    </ids-input>`}#d(e,t,i,r){let d=`field-${this.#e(t)}-${e}`,u=`triggerBtn-${this.#e(t)}-${e}`,s=t.filterOptions||{},h=i?` icon="${i}"`:"",l=r?`<ids-text audible="true" translate-text="true">${r}</ids-text>`:"",a=s.label||"Filter Input",n=s.placeholder?` placeholder="${s.placeholder}"`:"",p=s.disabled?" disabled":"",m=s.readonly?" readonly":"",y=this.#i.filter(v=>v.columnId===t.id)[0]?.value??null;return this.#t[t.id]=this.#t[t.id]||{},this.#t[t.id].input||(this.#t[t.id].input={value:y}),y=y?` value="${y}"`:"",`<ids-trigger-field
      color-variant="${this.root.listStyle?"alternate-list-formatter":"alternate-formatter"}"
      data-filter-type="${e}"
      type="${s.type||"text"}"
      size="${s.size||"full"}"
      label="${a}"
      label-state="collapsed"
      id="${d}"
      no-margins
      compact
      ${n}${p}${m}${y}>
      <ids-trigger-button id="${u}" slot="trigger-end"${h}>
        <ids-icon part="icon"></ids-icon>
        ${l}
      </ids-trigger-button>
    </ids-trigger-field>`}#c(e,t){let i=`${this.#e(t)}-${e}`,r=this.#u(e,t),d=t.filterOptions||{},u=d.label||"Filter Dropdown",s=d.disabled?" disabled":"",h=d.readonly?" readonly":"",l=null;if(this.#i.length){let o=this.#i.filter(f=>f.columnId===t.id)[0];l=r.filter(f=>f.label===o?.value)[0]}l||(l=r.filter(o=>o.selected)[0]);let a="",{value:n,label:p}=this.#n(t),m=()=>{l||(l={value:n}),a=`<ids-list-box-option id="${i}-opt-not-filtered" value="${n}">${p}</ids-list-box-option>`};r.length?(r.some(f=>f.value===n)||m(),r.forEach((f,$)=>{a+=`<ids-list-box-option id="${i}-opt-${$}" value="${f.value}">${f.label}</ids-list-box-option>`})):m(),l||(l=r[0]);let y=l?.value||l?.value===""?` value="${l.value}"`:"",g=(()=>typeof t?.uppercase=="function"?t.uppercase("header-cell",t):t?.uppercase==="true"||t?.uppercase===!0)()?" uppercase":"";return this.#t[t.id]=this.#t[t.id]||{},this.#t[t.id].dropdown||(this.#t[t.id].dropdown={...l}),`
      <ids-dropdown
        color-variant="${this.root.listStyle?"alternate-list-formatter":"alternate-formatter"}"
        label="${u}"
        label-state="collapsed"
        list="#${i}-list"
        no-margins
        compact
        data-filter-type="${e}"
        size="${d.size||"full"}"
        id="${i}"
        ${y}${s}${h}
      >
      </ids-dropdown>
      <ids-dropdown-list id="${i}-list">
        <ids-list-box${g}>${a}</ids-list-box>
      </ids-dropdown-list>
    `}get filterNodes(){return this.root?.shadowRoot?.querySelectorAll(".ids-data-grid-header-cell-filter-wrapper")}#n(e){let t=e?.filterOptions?.notFilteredItem||{};return{value:t.value||"not-filtered",label:t.label||""}}#e(e){return`ids-data-grid-filter-${e?.id?`${e.id}-`:""}${D}`}#u(e,t){if(t?.filterConditions?.constructor===Array)return t.filterConditions;let i=this.#h,r=[],d=()=>{let u=this.root.datasource.allData.map(s=>I(s[t.id]));return[...new Set(u)].map(s=>({value:s||"",label:s||""}))};switch(e){case"text":r=[i.contains,i.doesNotContain,i.equals,i.doesNotEqual,i.isEmpty,i.isNotEmpty,i.endsWith,i.doesNotEndWith,i.startsWith,i.doesNotStartWith];break;case"decimal":case"integer":case"time":r=[i.equals,i.doesNotEqual,i.isEmpty,i.isNotEmpty,i.lessThan,i.lessOrEquals,i.greaterThan,i.greaterOrEquals];break;case"checkbox":r=[i.all,i.selected,i.notSelected];break;case"contents":r=d();break;case"date":r=[i.equals,i.doesNotEqual,i.isEmpty,i.isNotEmpty,i.inRange,i.lessThan,i.lessOrEquals,i.greaterThan,i.greaterOrEquals];break;default:break}return r}#h={contains:{value:"contains",label:"Contains",icon:"filter-contains"},doesNotContain:{value:"does-not-contain",label:"Does Not Contain",icon:"filter-does-not-contain"},equals:{value:"equals",label:"Equals",icon:"filter-equals"},doesNotEqual:{value:"does-not-equal",label:"Does Not Equals",icon:"filter-does-not-equal"},isEmpty:{value:"is-empty",label:"Is Empty",icon:"filter-is-empty"},isNotEmpty:{value:"is-not-empty",label:"Is Not Empty",icon:"filter-is-not-empty"},endsWith:{value:"end-with",label:"Ends With",icon:"filter-end-with"},doesNotEndWith:{value:"does-not-end-with",label:"Does Not End With",icon:"filter-does-not-end-with"},startsWith:{value:"start-with",label:"Starts With",icon:"filter-start-with"},doesNotStartWith:{value:"does-not-start-with",label:"Does Not Start With",icon:"filter-does-not-start-with"},lessThan:{value:"less-than",label:"Less Than",icon:"filter-less-than"},lessOrEquals:{value:"less-equals",label:"Less Or Equals",icon:"filter-less-equals"},greaterThan:{value:"greater-than",label:"Greater Than",icon:"filter-greater-than"},greaterOrEquals:{value:"greater-equals",label:"Greater Or Equals",icon:"filter-greater-equals"},inRange:{value:"in-range",label:"In Range",icon:"filter-in-range"},all:{value:"selected-notselected",label:"All",icon:"filter-selected-notselected"},selected:{value:"selected",label:"Selected",icon:"filter-selected"},notSelected:{value:"not-selected",label:"Not Selected",icon:"filter-not-selected"}}};export{q as a};
