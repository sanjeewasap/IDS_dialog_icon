import{b as u}from"./ids-chunk-UR2NLGN4.js";var o=class{#a=[];#t=[];#e=null;#u=1;#o;#h;#s=!1;#f=!1;get allData(){return this.#e?this.flatten?this.#r(this.#e):this.#e:this.#t}set data(e){this.#t=this.#r(u(e)),this.#a=e,this.#h=this.#t?.length||0}get data(){return this.pageSize&&this.pageSize<this.total?this.paginate(this.pageNumber,this.pageSize):this.#t}get currentData(){return this.#n(this.#t)}set currentData(e){this.#t=e}get originalData(){return this.#a}get flatten(){return this.#s}set flatten(e){this.#s=e}get filtered(){return this.#f}set filtered(e){this.#f=e}#r(e){if(!this.#s)return e;let s=[],n=(i,t,r,h)=>{i.map((a,l)=>{a.parentElement="",a.ariaLevel=r,a.ariaSetSize=t,a.ariaPosinset=l+1,r===1&&(a.originalElement=l,this.pageNumber>1&&(a.originalElement=l+(this.pageNumber-1)*this.pageSize)),r>1&&(a.parentElement=h),s.push(a),a.children&&(this.pageNumber>1&&(l+=(this.pageNumber-1)*this.pageSize),n(a.children,a.children.length,r+1,`${a.parentElement?`${a.parentElement} `:""}${a.id}`))})};return n(e,e.length,1,""),s}#n(e){if(!this.#s)return e;let s={};return e.forEach(i=>{s[i?.id]=i}),e.filter(i=>{delete i.ariaSetSize,delete i.ariaPosinset;let t=i.ariaLevel;return delete i.ariaLevel,s[i.id]=i,i.children?.forEach((r,h)=>{i.children[h]=s[r?.id]}),t===1})}get total(){return this.#h}set total(e){this.#h=e}set pageNumber(e){this.#u=e}get pageNumber(){return this.#u}set pageSize(e){this.#o=e}get pageSize(){return this.#o}#i={pageNumber:-1,pageSize:-1,data:null};#l(){this.#i={pageNumber:-1,pageSize:-1,data:null}}#g(e,s){let{pageNumber:n,pageSize:i}=this.#i;return n===Number(e)&&i===Number(s)}paginate(e=1,s=10){if(this.#g(e,s))return this.#i.data;this.#i.pageNumber=Number(e),this.#i.pageSize=Number(s),e=Math.max(e||1,1),s=s||1;let i=e*s-s,t;if(this.flatten){let r=this.#n(u(this.#t));t=this.#r(r.slice(i,i+s))}else t=this.#t.slice(i,i+s);return this.#i.data=t,t}forEach(e){this.#t.forEach(e)}sort(e,s){let n=this.sortFunction(e,s);if(this.#l(),this.flatten){let i=this.#n(this.#t);i.sort(n),this.#t=this.#r(i);return}this.#t.sort(n),this.#a.sort(n)}sortFunction(e,s){let n=t=>{if(t=t??"",typeof t=="string"){t=t.toUpperCase();let r=Number(t);t!==""&&!Number.isNaN(r)&&Number.isFinite(r)&&(t=r)}return t},i=t=>n(t[e]);return s=s?1:-1,(t,r)=>(t=i(t),r=i(r),typeof t=="number"&&typeof r=="string"&&r!==""?s*-1:typeof t=="string"&&typeof r=="number"&&t!==""?s:t===""?r===""?0:1:r===""?t===""?0:-1:(typeof t!=typeof r&&(t=t.toString().toLowerCase(),r=r.toString().toLowerCase()),s*(+(t>r)-+(r>t))))}filter(e){let s=i=>{this.#t=this.flatten?this.#r(i):i,this.total=this.#t.length,this.pageNumber=1},n=()=>{s(this.#e),this.#e=null,this.#l(),this.filtered=!1};if(typeof e=="function"){let i=this.flatten?this.#n(this.#t):this.#t;if(this.#e=this.#e||i,this.#e.forEach((t,r)=>{t.isFilteredOut=e(t,r)}),this.#e.some(t=>t.isFilteredOut)){let t=this.#e.filter(r=>{let h=!r.isFilteredOut;return delete r.isFilteredOut,h});s(t),this.#l(),this.filtered=!0}else n()}else this.#e&&n()}},c=o;export{c as a};
