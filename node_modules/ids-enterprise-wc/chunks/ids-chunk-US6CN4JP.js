import{a as ee}from"./ids-chunk-XTFPDMVV.js";import{a as J,b as Q}from"./ids-chunk-NK2ZM7ZI.js";import{e as B,f as g}from"./ids-chunk-PE6ORWIR.js";import{a as K,b as y,c as A,d as z,e as _,f as V}from"./ids-chunk-XRNL7W52.js";import{a as $,b as D,c as N,d as j,e as h,f as b,g as O,h as d,i as k,j as P}from"./ids-chunk-7JFFU6WU.js";import{a as p,b as F,c as Y,d as U,e as W,f as G,g as X,h as Z}from"./ids-chunk-E7NYV7CW.js";import{a as M}from"./ids-chunk-DF3OTTVT.js";import{a as H}from"./ids-chunk-I4KVLUTU.js";import{a as I}from"./ids-chunk-SEZJIM5Z.js";import{a as m}from"./ids-chunk-ONPEMRJP.js";import{a as E}from"./ids-chunk-M7IB5XSG.js";import{a as C}from"./ids-chunk-N7RNTKMO.js";import{a as R}from"./ids-chunk-AKCO43TX.js";import{a as S,b as L}from"./ids-chunk-XE4WFW5M.js";import{a as q}from"./ids-chunk-GFV2Z7F5.js";import{e as u}from"./ids-chunk-QPDOZZIG.js";import{a as n}from"./ids-chunk-EQJWBFQ2.js";import{a as T}from"./ids-chunk-U7OOVFXE.js";var te=`
@charset "UTF-8";
/* Ids Editor Component */
.icon-dirty {
  position: absolute;
  color: var(--ids-color-caution-30);
  top: 1px;
}
.icon-dirty[dir=rtl] {
  transform: rotate(90deg);
  top: 0;
}

.ids-color-picker .icon-dirty {
  margin-inline-start: 35px;
}

.ids-color-picker.compact .icon-dirty {
  margin-inline-start: 27px;
}

.ids-radio-group .icon-dirty {
  margin-inline-start: -1px;
  margin-block-start: 9px;
  top: auto;
  z-index: 1;
}

.ids-checkbox .icon-dirty {
  margin-inline-start: -25px;
}
.ids-checkbox .icon-dirty[dir=rtl] {
  margin-inline-start: -20px;
  transform: none;
  top: -1px;
}
.ids-checkbox.hitbox .icon-dirty {
  margin-inline-start: -30px;
}
.ids-checkbox.hitbox .icon-dirty[dir=rtl] {
  margin-inline-start: -26px;
}

.ids-textarea .icon-dirty {
  top: 0;
  margin-inline-start: 1px;
}
.ids-textarea .icon-dirty[dir=rtl] {
  top: 1px;
}

.validation-message {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  display: flex;
  font-family: var(--ids-font-family-default);
  margin-top: var(--ids-space-30);
}
.validation-message.has-custom-icon {
  color: var(--ids-icon-color-default);
}
.validation-message.disabled {
  color: var(--ids-input-color-text-disabled);
}
.validation-message .ids-icon {
  margin-inline-end: var(--ids-space-30);
}
.validation-message.alert {
  color: var(--ids-color-caution-default);
}
.validation-message.alert.disabled {
  color: var(--ids-color-caution-30);
}
.validation-message.warning {
  color: var(--ids-color-warning-default);
}
.validation-message.warning.disabled {
  color: var(--ids-color-warning-30);
}
.validation-message.error {
  color: var(--ids-color-error-default);
}
.validation-message.error.disabled {
  color: var(--ids-color-error-30);
}
.validation-message.info {
  color: var(--ids-color-info-default);
}
.validation-message.info.disabled {
  color: var(--ids-color-info-30);
}
.validation-message.success {
  color: var(--ids-color-success-default);
}
.validation-message.success.disabled {
  color: var(--ids-color-success-30);
}

.ids-editor .hidden {
  display: none;
}
.ids-editor .audible {
  clip: rect(0, 0, 0, 0);
  height: 0;
  line-height: 0;
  min-height: 0;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}
.ids-editor .editor-label {
  display: flex;
  align-items: baseline;
  margin-block-end: var(--ids-space-40);
}
.ids-editor .editor-label.required::after {
  content: "*";
  color: var(--ids-input-required-indicator-color-text-default);
  font-family: var(--ids-editor-font-family);
  font-size: var(--ids-font-size-50);
  margin-inline: var(--ids-space-20);
  margin-top: -10px;
  position: relative;
  top: 1px;
}
.ids-editor .editor-label.required.no-required-indicator::after, .ids-editor .editor-label.required:empty::after {
  content: "";
}
.ids-editor.label-state-hidden .editor-label {
  margin-block-end: var(--ids-space-40);
}
.ids-editor.label-state-hidden .editor-label::before {
  content: "\xA0";
}
.ids-editor.label-state-collapsed .editor-label {
  margin-block-end: var(--ids-space-none);
}
.ids-editor.label-state-collapsed .editor-label.required::after {
  content: "";
}
.ids-editor .main-container {
  border-color: var(--ids-editor-color-border-default);
  border-radius: var(--ids-editor-border-radius-default);
  border-style: var(--ids-editor-border-style-default);
  border-width: var(--ids-editor-border-width-default);
}
.ids-editor .main-container:focus-within {
  border-color: var(--ids-editor-color-border-focus);
  outline: var(--ids-editor-outline-focus);
  box-shadow: var(--ids-editor-focus-border-shadow);
}
.ids-editor .main-container:hover, .ids-editor .main-container:active {
  border-color: var(--ids-editor-color-border-hover);
}
.ids-editor .main-container.error, .ids-editor .main-container.error:hover, .ids-editor .main-container.error:active {
  border-color: var(--ids-editor-color-border-error);
  color: var(--ids-editor-color-text-error);
}
.ids-editor .main-container.error:focus-within, .ids-editor .main-container.error:hover:focus-within, .ids-editor .main-container.error:active:focus-within {
  border-color: var(--ids-editor-color-border-error);
  box-shadow: var(--ids-editor-error-border-shadow);
}
.ids-editor .toolbar-container {
  border-top-left-radius: var(--ids-space-10);
  border-top-right-radius: var(--ids-space-10);
}
.ids-editor ::slotted(ids-toolbar),
.ids-editor .ids-toolbar {
  max-width: 100%;
}
.ids-editor .editor-content {
  position: relative;
}
.ids-editor[readonly] .editor-label.required::after {
  content: "";
}
.ids-editor[readonly] .toolbar-container {
  display: none;
}
.ids-editor[readonly] .main-container {
  border-color: var(--ids-editor-color-border-readonly);
  color: var(--ids-editor-color-text-readonly);
}
.ids-editor[readonly] .editor-container,
.ids-editor[readonly] .source-container {
  background-color: var(--ids-editor-color-background-readonly);
}
.ids-editor[readonly] .editor-container a,
.ids-editor[readonly] .source-container a {
  pointer-events: none;
}
.ids-editor[readonly] .source-wrapper .line-numbers {
  background-color: var(--ids-editor-source-color-background-readonly);
}
.ids-editor[disabled] .editor-label.required::after {
  color: var(--ids-input-required-indicator-color-text-disabled);
}
.ids-editor[disabled] .toolbar-container {
  display: none;
}
.ids-editor[disabled] .main-container,
.ids-editor[disabled] .main-container * {
  border-color: var(--ids-editor-color-border-disabled);
  color: var(--ids-editor-color-text-disabled);
  cursor: var(--ids-editor-cursor-disabled);
  pointer-events: none;
  user-select: none;
}
.ids-editor[disabled] .main-container:hover, .ids-editor[disabled] .main-container:active,
.ids-editor[disabled] .main-container *:hover,
.ids-editor[disabled] .main-container *:active {
  color: var(--ids-editor-color-text-disabled);
}
.ids-editor[disabled] .main-container:focus, .ids-editor[disabled] .main-container:focus-within,
.ids-editor[disabled] .main-container *:focus,
.ids-editor[disabled] .main-container *:focus-within {
  border-color: var(--ids-editor-color-border-disabled);
  box-shadow: none;
}
.ids-editor .source-container,
.ids-editor .editor-container {
  background-color: var(--ids-editor-background-color);
  font-family: var(--ids-editor-font-family);
  outline: var(--ids-editor-outline);
  line-height: var(--ids-editor-font-line-height);
  font-size: var(--ids-editor-font-size);
  overflow: auto;
}
.ids-editor .source-container {
  height: 317px;
}
.ids-editor .editor-container {
  height: 285px;
  padding: var(--ids-editor-padding);
  user-select: text;
}
.ids-editor .editor-container a {
  color: var(--ids-editor-link-color-text-link);
  padding: var(--ids-editor-link-padding);
}
.ids-editor .editor-container a:hover, .ids-editor .editor-container a:active {
  color: var(--ids-editor-link-color-text-hover);
}
.ids-editor .editor-container a:focus {
  border-color: var(--ids-editor-link-color-border-focus);
  border-radius: var(--ids-editor-link-border-radius-focus);
  border-style: var(--ids-editor-link-border-style-focus);
  border-width: var(--ids-editor-link-border-width-focus);
  outline: var(--ids-editor-link-outline-focus);
  box-shadow: var(--ids-editor-shadow-focus);
}
.ids-editor .editor-container blockquote {
  border-inline-start: var(--ids-editor-blockquote-border-inline-start);
  margin-inline-start: var(--ids-editor-blockquote-margin-inline-start);
  margin-inline-end: var(--ids-editor-blockquote-margin-inline-end);
  padding-inline-start: var(--ids-editor-blockquote-padding-inline-start);
}
.ids-editor .editor-container :is(h1, h2, h3, h4, h5, h6, p, pre, blockquote):first-child {
  margin-block-start: 0;
}
.ids-editor .editor-container[placeholder]:empty::before {
  content: attr(placeholder);
  display: inline-block;
  opacity: 0.7;
}
.ids-editor .editor-container[placeholder]:empty:focus::before {
  content: "";
}
.ids-editor .source-wrapper {
  display: flex;
  min-height: 100%;
  padding: var(--ids-editor-source-padding);
  margin: var(--ids-editor-source-margin);
}
.ids-editor .source-wrapper .line-numbers {
  background-color: var(--ids-editor-source-color-background-default);
  color: var(--ids-editor-source-line-color-text);
  font-family: var(--ids-editor-font-family);
  font-weight: var(--ids-editor-source-line-font-weight);
  margin: var(--ids-editor-source-line-margin);
  padding-block-start: var(--ids-editor-source-line-padding-block-start);
  padding-inline: var(--ids-editor-source-line-padding-inline);
  line-height: var(--ids-editor-source-font-line-height);
  list-style: none;
  text-align: end;
}
.ids-editor .source-wrapper .source-textarea {
  background-color: var(--ids-editor-textarea-color-background);
  color: var(--ids-editor-source-color-text);
  border: var(--ids-editor-source-border);
  font-family: var(--ids-editor-font-family);
  font-size: var(--ids-editor-font-size);
  line-height: var(--ids-editor-source-textarea-font-line-height);
  padding-block-start: var(--ids-editor-source-padding-block-start);
  padding-inline: var(--ids-editor-source-padding-inline);
  outline: var(--ids-editor-source-textarea-outline);
  overflow: hidden;
  resize: none;
  height: 100%;
  width: 100%;
}`;var ie=0,de=H(M(I(C(R(q))))),v=class extends de{constructor(){super()}validationElems;reqInitialize;isFormComponent=!0;connectedCallback(){super.connectedCallback(),this.#g(),this.#A(),this.modalElementsValue(),this.#c(),this.#q(),this.#v()}disconnectedCallback(){super.disconnectedCallback?.(),[...k("#errormessage-modal, #hyperlink-modal, #insertimage-modal",this.shadowRoot),...k(`ids-button,
        ids-separator,
        ids-menu-button,
        ids-popup-menu,
        ids-toolbar-section,
        ids-toolbar-more-actions,
        ids-toolbar`,this)].flat().forEach(e=>e?.remove())}static get attributes(){return[...super.attributes,...O]}template(){this.reqInitialize=!0,ie++;let e=this.hasAttribute(n.LABEL_STATE)&&this.label?`aria-label="${this.label}"`:"",i=!this.label.length||this.labelState==="hidden"?" empty":"",t=this.labelRequired?"":` ${h.labelRequired}`;return p(F,{ariaLabel:e,disabled:this.disabled?" disabled":"",readonly:this.readonly?" readonly":"",contenteditable:!this.disabled&&!this.readonly?' contenteditable="true"':"",labelClass:"editor-label",requiredLabelCss:t,hiddenLabelCss:i,placeholder:this.placeholder?` placeholder="${this.placeholder}"`:"",hiddenClass:h.hidden,labelText:this.label,sourceTextareaLabel:this.sourceTextareaLabel()})}vetoableEventTypes=["beforesourcemode","beforeeditormode","beforepaste"];modalElementsValue(e){let i=E(e)?e:{},t=b.modals,o=[];return i.hyperlink?.targets?.constructor===Array?i.hyperlink.targets.forEach(r=>{if(E(r)&&r.text){let s={text:r.text,value:r.value};r.selected&&(s.selected=!0),o.push(s)}}):o=[...t.hyperlink.targets],this.#t.defaults={hyperlink:{url:i.hyperlink?.url??t.hyperlink.url,classes:i.hyperlink?.classes??t.hyperlink.classes,targets:o,targetSelected:o.find(r=>r.selected),isClickable:i.hyperlink?.isClickable??t.hyperlink.isClickable,showIsClickable:i.hyperlink?.showIsClickable??t.hyperlink.showIsClickable},insertimage:{url:i.insertimage?.url??t.insertimage.url,alt:i.insertimage?.alt??t.insertimage.alt}},this.#x(),this}sourceTextareaLabel(){return`${this.label} - HTML Source View`}#t={};#l;#r;#e={};input;labelEl;#i={bold:{action:"bold",keyid:"KeyB"},italic:{action:"italic",keyid:"KeyI"},underline:{action:"underline",keyid:"KeyU"},strikethrough:{action:"strikeThrough",keyid:"KeyS|shift"},superscript:{action:"superscript",keyid:"Equal|shift"},subscript:{action:"subscript",keyid:"Equal"},formatblock:{action:"formatBlock",value:[...N]},fontsize:{action:"fontSize",value:[...j]},forecolor:{action:"foreColor",keyid:"KeyK|shift|alt"},backcolor:{action:"backColor"},orderedlist:{action:"insertOrderedList",keyid:"KeyO|shift"},unorderedlist:{action:"insertUnorderedList",keyid:"KeyU|shift"},insertimage:{action:"insertImage",keyid:"KeyI|shift"},hyperlink:{action:"createLink",keyid:"KeyK"},unlink:{action:"unlink",keyid:"KeyK|shift"},inserthtml:{action:"insertHTML"},inserthorizontalrule:{action:"insertHorizontalRule",keyid:"KeyL|shift"},alignleft:{action:"justifyLeft",keyid:"KeyL"},alignright:{action:"justifyRight",keyid:"KeyR"},aligncenter:{action:"justifyCenter",keyid:"KeyE"},alignjustify:{action:"justifyFull",keyid:"KeyJ"},clearformatting:{action:"removeFormat",keyid:"Space|shift"},redo:{action:"redo",keyid:"KeyY"},undo:{action:"undo",keyid:"KeyZ"},editormode:{action:"editorMode",keyid:"Backquote|shift"},sourcemode:{action:"sourceMode",keyid:"Backquote"}};#d=new ResizeObserver(()=>this.#y());#o(e,i=this,t={}){return this.triggerEvent(e,i,{detail:{elem:this,value:this.value,...t}}),this}#v(){return this.#e[this.view]?.classList?.contains(h.hidden)&&(/source/i.test(this.view)?this.#b():this.#u()),window.requestAnimationFrame(()=>{this.#n(),this.resetDirtyTracker(),this.#o("initialize")}),this}#g(){return this.querySelector('[slot="toolbar"]')||this.insertAdjacentHTML("afterbegin",p(W,{instanceCounter:ie})),this}#s(){return this.shadowRoot?.getSelection?this.shadowRoot?.getSelection():document.getSelection()}#c(){return document.execCommand("defaultParagraphSeparator",!1,this.paragraphSeparator),this.#l=this.paragraphSeparator!=="br"?this.paragraphSeparator:b.paragraphSeparator,this}#a(){window.requestAnimationFrame(()=>{let e=parseInt(getComputedStyle(this.#e.textarea).lineHeight,10),i=0;this.#e.textarea.style.height="";let t=this.#e.textarea.scrollHeight,o=Math.floor((t-i)/e),r=this.#e.lineNumbers,s=r.querySelectorAll("li").length,l="",a=0,c;if(!this.#e.lineNumberCount||o!==this.#e.lineNumberCount){if(this.#e.lineNumberCount)if(this.#e.lineNumberCount<o){for(c=o-this.#e.lineNumberCount;a<c;a++)l+=`<li role="presentation"><span>${s+a+1}</span></li>`;r.insertAdjacentHTML("beforeend",l)}else this.#e.lineNumberCount>o&&(a=this.#e.lineNumberCount-o,[...r.querySelectorAll("li")].slice(-a).forEach(f=>f?.remove()));else{for(this.#e.lineNumberCount=o,c=this.#e.lineNumberCount;a<c;a++)l+=`<li role="presentation"><span>${a+1}</span></li>`;r.insertAdjacentHTML("beforeend",l)}this.#e.lineNumberCount=o}this.#e.textarea.style.height=`${r.scrollHeight}px`})}#h(e){let{editor:i,textarea:t}=this.#e,o=g(e||t.value);return o=B(o),i.innerHTML!==o&&(i.innerHTML=o),this}#n(e){let{editor:i,textarea:t}=this.#e;i.textContent.replace(`
`,"")===""&&(i.innerHTML="");let o=g(e||i.innerHTML);return o=this.sourceFormatter?ee(o):o,t.value!==o&&(t.value=o),this}#u(e){this.#e.reqviewchange=!0;let i={value:this.value,view:this.view};if(!this.triggerVetoableEvent("beforeeditormode",i))return this.#o("rejectviewchange"),!1;this.#h(e);let t=this.#e;return t.btnSource.hidden=!1,t.btnEditor.hidden=!0,t.source.classList.add(h.hidden),t.editor.classList.remove(h.hidden),t.toolbar.disabled=!1,t.editor.focus(),this}#b(e){this.#e.reqviewchange=!0;let i={value:this.value,view:this.view};if(!this.triggerVetoableEvent("beforesourcemode",i))return this.#o("rejectviewchange"),!1;this.#n(e),this.#a();let t=this.#e;return t.btnSource.hidden=!0,t.btnEditor.hidden=!1,t.source.classList.remove(h.hidden),t.editor.classList.add(h.hidden),t.toolbar.disabled=!0,t.btnEditor.disabled=!1,t.textarea.focus(),this}#y(){return this.view==="source"&&this.#a(),this}#m(){let e=!this.disabled&&!this.readonly;return this.#e?.editor?.setAttribute("contenteditable",e),this}#E(){return window.requestAnimationFrame(()=>{this.disabled?this.#e?.editor?.querySelectorAll("a").forEach(e=>{let i=e.getAttribute("tabindex");i!==null&&(e.dataset.idsTabindex=i),e.setAttribute("tabindex","-1")}):this.#e?.editor?.querySelectorAll("a").forEach(e=>{typeof e.dataset.idsTabindex>"u"?e.removeAttribute("tabindex"):(e.setAttribute("tabindex",e.dataset.idsTabindex),delete e.dataset.idsTabindex)})}),this}#k(){return this.disabled?(this.container?.setAttribute(n.DISABLED,""),this.#e?.textarea?.setAttribute(n.DISABLED,""),this.labelEl?.setAttribute(n.DISABLED,"")):(this.container?.removeAttribute(n.DISABLED),this.#e?.textarea?.removeAttribute(n.DISABLED),this.labelEl?.removeAttribute(n.DISABLED)),this.#m(),this.#E(),this}#A(){this.#i.formatblock?.value.forEach(o=>{this.#i[o]={value:o,action:"formatBlock"}}),["h1","h2","h3","h4","h5","h6"].forEach(o=>{this.#i[o]&&(this.#i[o].keyid=`Digit${o.replace("h","")}|alt`)}),this.#i.fontsize?.value.forEach(o=>{this.#i[`fontsize${o}`]={value:o,action:"fontSize"}});let e=o=>{let r=this.querySelector(`[editor-action="${o}"]`);if(r){let s=this.querySelector(`.${o}-input`);if(!s){let a=document.createElement("input");a.setAttribute("type","color"),a.classList.add(`${o}-input`),r.after(a),s=this.querySelector(`.${o}-input`)}let l="border:0;padding:0;margin:0;height:0;width:0;visibility:hidden;";s&&(s.style.cssText=l),this.#e[`${o}Input`]=s}};e("forecolor"),e("backcolor");let i=this.querySelector('[editor-action="sourcemode"]'),t=this.querySelector('[editor-action="editormode"]');if(i||t){if(!t){let o=document.createElement("template");o.innerHTML=Y,i?.after(o.content.cloneNode(!0)),t=this.querySelector('[editor-action="editormode"]')}if(!i){let o=document.createElement("template");o.innerHTML=U,t?.after(o.content.cloneNode(!0)),i=this.querySelector('[editor-action="sourcemode"]')}this.view==="source"?(i?.setAttribute(n.HIDDEN,"true"),t?.setAttribute(n.HIDDEN,"false")):(i?.setAttribute(n.HIDDEN,"false"),t?.setAttribute(n.HIDDEN,"true"))}return this.#e.main=d(".main-container",this.shadowRoot),this.#e.editor=d(".editor-container",this.shadowRoot),this.#e.source=d(".source-container",this.shadowRoot),this.#e.lineNumbers=d(".line-numbers",this.shadowRoot),this.#e.textarea=d("#source-textarea",this.shadowRoot),this.#e.toolbar=this.querySelector("ids-toolbar"),this.#e.btnSource=this.querySelector('[editor-action="sourcemode"]'),this.#e.btnEditor=this.querySelector('[editor-action="editormode"]'),this.#e.toolbarElms=this.querySelectorAll("[editor-action]"),this.#e.forecolorBtn=this.querySelector('[editor-action="forecolor"]'),this.#e.backcolorBtn=this.querySelector('[editor-action="backcolor"]'),this.#e.blockquoteBtn=this.querySelector('[editor-action="blockquote"]'),this.#e.hyperlinkBtn=this.querySelector('[editor-action="hyperlink"]'),this.#e.formatblock={btn:this.querySelector('[editor-action="formatblock"]'),items:{}},this.#e.formatblock.btn?.configureMenu(),this.#e.formatblock.btn?.menuEl?.items?.forEach(o=>{let r=o.text||o.textContent?.trim();this.#e.formatblock.items[o.value]={text:r,value:o.value}}),this.input=this.#e.textarea,this.labelEl=d("#editor-label",this.shadowRoot),this.validate&&(this.validationEvents="change.editorvalidation input.editorvalidation blur.editorvalidation",this.validationElems={main:this.#e.main,editor:this.#e.editor}),this}#x(){let e=(r,s,l)=>{let a=document.createElement("template");a.innerHTML=l,this.container?.appendChild(a.content.cloneNode(!0)),this.#t[r]={btn:s,modal:d(`#${r}-modal`,this.shadowRoot)}},i=this.querySelector('[editor-action="hyperlink"]'),t=this.querySelector('[editor-action="insertimage"]');if([d("#errormessage-modal",this.shadowRoot),d("#hyperlink-modal",this.shadowRoot),d("#insertimage-modal",this.shadowRoot)].forEach(r=>r?.remove()),e("errormessage",null,G),this.#t.errormessage.btn=d("#errormessage-modal-ok",this.shadowRoot),i){let r="hyperlink",s=i,{url:l,classes:a,targets:c,targetSelected:f,isClickable:oe,showIsClickable:re}=this.#t.defaults.hyperlink,se=re?`<ids-checkbox id="${r}-modal-checkbox-clickable" label="Clickable in editor"${oe?' checked="true"':""}></ids-checkbox>`:"",x="";if(c.length){let ne=c.map(w=>`<ids-list-box-option value="${w.value}">${w.text}</ids-list-box-option>`).join(""),le=f?.value??"";x=`
          <ids-dropdown id="${r}-modal-dropdown-targets" label="Target" value="${le}">
            <ids-list-box>${ne}</ids-list-box>
          </ids-dropdown>`}let ae=p(X,{key:r,url:l,clickableElemHtml:se,classes:a,targetDropdownHtml:x,hiddenClass:h.hidden});e(r,s,ae),this.#t[r].elems={url:d(`#${r}-modal-input-url`,this.shadowRoot),clickable:d(`#${r}-modal-checkbox-clickable`,this.shadowRoot),classes:d(`#${r}-modal-input-classes`,this.shadowRoot),targets:d(`#${r}-modal-dropdown-targets`,this.shadowRoot),removeContainer:d(`#${r}-modal-checkbox-remove-container`,this.shadowRoot),removeElem:d(`#${r}-modal-checkbox-remove`,this.shadowRoot)}}if(t){let r="insertimage",s=t,{url:l,alt:a}=this.#t.defaults.insertimage,c=p(Z,{key:r,url:l,alt:a});e(r,s,c)}return["errormessage","insertimage","hyperlink"].forEach(r=>{this.#t[r]?.modal&&this.#I(r)}),this}#f(){this.#e.toolbarElms?.forEach(e=>{e&&(e.cssClass=[])})}#w(e){if(!e||this.view!=="editor")return;e.preventDefault();let i=J(e),t=Q(e),o={asHtml:t,asPlainText:i,value:this.value,view:this.view};if(!this.triggerVetoableEvent("beforepaste",o)){this.#o("rejectpaste",this,o);return}document.queryCommandSupported("insertText")&&(document.execCommand("insertHTML",!1,this.pasteAsPlainText?i:t),m(()=>this.#o("afterpaste"),410)())}#T(){let e=this.#s(),i=this.#e,t=_(e,i.editor),o=l=>{l&&(l.cssClass=["is-active"])},r=new RegExp(`^(${Object.keys(i.formatblock.items).join("|")})$`,"i"),s=i?.editor===this.shadowRoot?.activeElement;this.#f(),s&&Object.entries(this.#i).forEach(([l,a])=>{l==="forecolor"&&t.font?.node?.hasAttribute("color")&&o(i.forecolorBtn),l==="backcolor"&&t.span?.node?.style?.backgroundColor&&o(i.backcolorBtn),l==="blockquote"&&t.blockquote&&o(i.blockquoteBtn),l==="hyperlink"&&t.a&&o(i.hyperlinkBtn),i.formatblock?.btn&&r.test(l)&&t[l]&&(i.formatblock.btn.text=i.formatblock.items[l].text),document.queryCommandState(a.action)&&o(this.querySelector(`[editor-action="${l}"]`))})}#S(e){if(!e?.detail?.elem)return;let i=e.detail.elem,t=null;/^ids-menu-item$/i.test(i.nodeName)&&(t=i.menu?.target),/^ids-button$/i.test(i.nodeName)&&(t=i);let o=t?.getAttribute("editor-action");if(this.#i[o]){let r=null;if(o==="formatblock"){let s=i.menu?.target;s&&(s.text=i.text||i.textContent?.trim()),r=e.detail.value}/^(hyperlink|insertimage)$/i.test(o)?this.#t[o]?.modal?.show():this.#p(o,r),this.#o("input",this.#e.editor)}}#L(e){if(e&&/forecolor-input|backcolor-input/i.test(e.target.className)){let i=/forecolor-input/i.test(e.target.className)?"forecolor":"backcolor",t={...this.#i[i],value:e.target.value};document.execCommand(t.action,!1,t.value)}}#C(e){let i=this.#s();if(this.#r=A(i),!this.#r)return!1;if(this.#t.beforeShowValues={},e==="hyperlink"){let t={...this.#t.defaults.hyperlink,hideRemoveContainer:!0},o={...this.#t.hyperlink.elems},r=V(i,this.#e.editor,"a");r&&(t.currentLink=r,t.hideRemoveContainer=!1,t.url=r?.getAttribute("href")??"",t.classes=r?.getAttribute("class")??"",t.isClickable=r?.getAttribute("contenteditable")==="false",t.targetSelected={value:r?.getAttribute("target")??""});let s=t.hideRemoveContainer?"add":"remove";o.removeContainer?.classList[s](h.hidden),o.url&&(o.url.value=t.url,o.url.checkValidation()),o.classes&&(o.classes.value=t.classes),o.targets&&(o.targets.value=t.targetSelected?.value??""),o.clickable&&(o.clickable.checked=t.isClickable),this.#t.beforeShowValues.hyperlink={...t}}return!0}#p(e,i){let t={...this.#i[e]},o=this.#s();if(t.action==="formatBlock"){let r=i??t.value;t={...this.#i[r]},t.value==="blockquote"&&K(o).tagName==="blockquote"&&(t={...this.#i[this.#l]}),y(o,this.#e.editor).forEach(s=>{let l=new RegExp(`<(/?)${s.tagName}((?:[^>"']|"[^"]*"|'[^']*')*)>`,"gi"),a=s.outerHTML.replace(l,`<$1${t.value}$2>`);s.outerHTML=a});return}if(/^(alignleft|alignright|aligncenter|alignjustify)$/i.test(e)){let r=this.localeAPI?.isRTL()?"right":"left",s=e.replace("align","");y(o,this.#e.editor).forEach(l=>{s===r?l?.removeAttribute("style"):l?.style.setProperty("text-align",s)});return}if(/^(forecolor|backcolor)$/i.test(e)){if(this.#r=A(o),this.#r&&this.#e[`${e}Input`]){let r=e==="backcolor"?o?.focusNode?.parentNode?.style?.getProperty?.("background-color"):document.queryCommandValue(t.action);this.#e[`${e}Input`].value=/rgb/i.test(r)?P(r):r,this.#e[`${e}Input`].click()}return}if(/^(orderedlist|unorderedlist)$/i.test(e)){let r=!0;y(o,this.#e.editor).forEach(s=>{s.innerHTML.includes(e==="orderedlist"?"<ol>":"<ul>")&&(r=!1),s.innerHTML=s.innerHTML.replaceAll("</ul>","").replaceAll("</ol>","").replaceAll("</li>","").replaceAll("<ul>","").replaceAll("<ol>","").replaceAll("<li>","")}),r&&document.execCommand(t.action,!1,t.value);return}if(/^(editormode|sourcemode)$/i.test(e)){this.view=e.replace(/mode/i,"");return}t.value=t.value??i,document.execCommand(t.action,!1,t.value)}#R(e){let i={...this.#i[e]};if(typeof i>"u")return;z(this.#s(),this.#r);let t=this.#s(),o=t.getRangeAt(0);if(e==="insertimage"&&(i.value=d(`#${e}-modal-input-src`,this.shadowRoot)?.value??"",i.value!=="")){t.type==="Caret"&&(o.insertNode(document.createTextNode(" ")),t.removeAllRanges(),t.addRange(o));let r=d(`#${e}-modal-input-alt`,this.shadowRoot).value??"";r!==""&&(i={...this.#i.inserthtml,value:`<img src="${i.value}" alt="${r}" />`}),document.execCommand(i.action,!1,i.value)}if(e==="hyperlink"){let r={...this.#t.hyperlink.elems},{currentLink:s,hideRemoveContainer:l}=this.#t.beforeShowValues.hyperlink;if(l){if(r.url?.value){i.value="EDITOR_CREATED_NEW_HYPERLINK",document.execCommand(i.action,!1,i.value);let a=d(`a[href="${i.value}"`,this.shadowRoot);a.setAttribute("href",r.url.value),a.innerHTML=a.innerHTML.replace(i.value,r.url.value),r.classes?.value!==""&&a.setAttribute("class",r.classes.value),r.targets?.value!==""&&a.setAttribute("target",r.targets.value),r.clickable?.checked&&a.setAttribute("contenteditable","false")}}else if(r.removeElem?.checked||r.url?.value==="")s.outerHTML=s.innerHTML;else{let a=(c,f)=>{f!==""?s?.setAttribute(c,f):s?.removeAttribute(c)};a("href",r.url?.value),a("class",r.classes?.value),a("target",r.targets?.value),a("contenteditable",r.clickable?.checked?"false":"")}r.removeElem.checked=!1,Object.entries(r).filter(([a])=>!/^(removeElem|removeContainer)$/.test(a)).map(a=>a[1]).forEach(a=>{a&&(a.disabled=!1)})}}#q(){this.onEvent("selectionchange.editor",document,m(()=>{this.#T()},400)),this.onEvent("selected.editor-toolbar",this.#e.toolbar,i=>{this.#S(i)}),this.onEvent("input.editor-toolbar",this.#e.toolbar,i=>{this.#L(i)}),this.onEvent("focusin.editor-toolbar",this.#e.toolbar,()=>{this.#f()}),this.onEvent("input.editor-editcontainer",this.#e.editor,m(()=>{this.#e.reqviewchange||(this.#n(),this.#o("change",this.#e.textarea))},400)),this.onEvent("blur.editor-editcontainer",this.#e.editor,()=>{this.#o("blur",this.#e.textarea)}),this.onEvent("paste.editor-editcontainer",this.#e.editor,i=>{this.#w(i)}),this.onEvent("input.editor-textarea",this.#e.textarea,()=>{this.#a(),m(()=>{this.#e.reqviewchange||this.#o("change",this.#e.textarea)},400)()}),this.onEvent("change.editor-textarea",this.#e.textarea,()=>{this.#o("change")}),this.#M(),this.#H(),this.#d.disconnect(),this.container&&this.#d.observe(this.container);let e=this.querySelector("ids-toolbar-more-actions");return this.onEvent("beforeshow.more-actions",e,()=>{let i=e?.menu?.popup?.container;!i?.style.width&&i&&(i.style.width="175px")}),this.onEvent("viewchange.editor-reqviewchange",this,m(()=>{delete this.#e.reqviewchange},410)),this.onEvent("rejectviewchange.editor-reqviewchange",this,m(()=>{delete this.#e.reqviewchange},410)),this.onEvent("initialize.editor-initialize",this,m(()=>{delete this.reqInitialize},410)),this}#I(e){let i=this.#t[e].modal;if(i.onButtonClick=()=>{i?.hide()},!!this.#t[e].btn&&(this.offEvent(`beforeshow.editor-modal-${e}`,i),this.onEvent(`beforeshow.editor-modal-${e}`,i,t=>{!this.#C(e)&&e!=="errormessage"&&(t.detail.response(!1),this.#t.errormessage?.modal?.show())}),this.offEvent(`click.editor-modal-${e}`,i),this.onEvent(`click.editor-modal-${e}`,i,t=>{t.target.getAttribute("id")===`${e}-modal-apply-btn`&&this.#R(e)}),e==="hyperlink")){let t=this.#t[e].elems,o=t.removeElem,r=Object.entries(t).filter(([s])=>!/^(removeElem|removeContainer)$/.test(s)).map(s=>s[1]);this.offEvent(`change.editor-modal-${e}-checkbox-remove`,o),this.onEvent(`change.editor-modal-${e}-checkbox-remove`,o,s=>{r.forEach(l=>{l&&(l.disabled=s.detail.checked)})})}}#M(){return this.onEvent("slotchange.editor-content",this.container,e=>{let i=e.target;if(i?.name===""){let t=i.assignedElements().map(o=>o.outerHTML).join("");this.#h(t),this.reqInitialize||this.#o("input",this.#e.editor)}}),this}#H(){let e=(s,l)=>new RegExp(l,"i").test(s[1].keyid),i=s=>s[1].keyid.replace(/\|.*$/g,""),t=Object.entries(this.#i).filter(([,s])=>s.keyid),o=[...new Set(t.map(s=>i(s)))],r={};return o.forEach(s=>{r[s]=t.filter(l=>i(l)===s)}),this.onEvent("keydown.editor-container",this.container,s=>{if(this.disabled||this.readonly)return;let l=s.code;if(o.indexOf(l)>-1&&(s.ctrlKey||s.metaKey)){let a=r[l]?.filter(c=>s.shiftKey===e(c,"shift")&&s.altKey===e(c,"alt")).flat();if(a?.length){if(this.view==="source"&&a[0]!=="editormode")return;["hyperlink","insertimage"].includes(a[0])?this.#t[a[0]]?.modal?.show():(this.#p(a[0]),this.#o("input",this.#e.editor)),s.preventDefault()}}}),this}get value(){return g?.(this.#e.textarea.value)}set disabled(e){u(e)?this.setAttribute(n.DISABLED,""):this.removeAttribute(n.DISABLED),this.#k?.()}get disabled(){let e=this.getAttribute(n.DISABLED);return e!==null?u(e):b.disabled}setLabelText(e=this.state?.label){let i=this.labelEl??d("#editor-label",this.shadowRoot),t=d('[for="source-textarea"]',this.shadowRoot),o=this.labelState===null;i&&(i.innerHTML=o?e:""),t&&(t.innerHTML=o?this.sourceTextareaLabel():"")}set paragraphSeparator(e){D.indexOf(e)>-1?this.setAttribute(n.PARAGRAPH_SEPARATOR,e):this.removeAttribute(n.PARAGRAPH_SEPARATOR),this.#c?.()}get paragraphSeparator(){return this.getAttribute(n.PARAGRAPH_SEPARATOR)||b.paragraphSeparator}set pasteAsPlainText(e){u(e)?this.setAttribute(n.PASTE_AS_PLAIN_TEXT,""):this.removeAttribute(n.PASTE_AS_PLAIN_TEXT)}get pasteAsPlainText(){let e=this.getAttribute(n.PASTE_AS_PLAIN_TEXT);return e!==null?u(e):b.pasteAsPlainText}set placeholder(e){e?(this.setAttribute(n.PLACEHOLDER,e),this.#e?.editor?.setAttribute(n.PLACEHOLDER,e),this.#e?.textarea?.setAttribute(n.PLACEHOLDER,e)):(this.removeAttribute(n.PLACEHOLDER),this.#e?.editor?.removeAttribute(n.PLACEHOLDER),this.#e?.textarea?.removeAttribute(n.PLACEHOLDER))}get placeholder(){return this.getAttribute(n.PLACEHOLDER)}set readonly(e){u(e)?(this.setAttribute(n.READONLY,""),this.container?.setAttribute(n.READONLY,""),this.#e?.textarea?.setAttribute(n.READONLY,""),this.labelEl?.setAttribute(n.READONLY,"")):(this.removeAttribute(n.READONLY),this.container?.removeAttribute(n.READONLY),this.#e?.textarea?.removeAttribute(n.READONLY),this.labelEl?.removeAttribute(n.READONLY)),this.#m?.()}get readonly(){let e=this.getAttribute(n.READONLY);return e!==null?u(e):b.readonly}set sourceFormatter(e){u(e)?this.setAttribute(n.SOURCE_FORMATTER,""):this.removeAttribute(n.SOURCE_FORMATTER)}get sourceFormatter(){let e=this.getAttribute(n.SOURCE_FORMATTER);return e!==null?u(e):b.sourceFormatter}set view(e){if($.indexOf(e)>-1){let i=this.getAttribute(n.VIEW),t=null;this.view!==e&&(t=/source/i.test(e)?this.#b():this.#u()),(t||t===null&&i!==e)&&this.setAttribute(n.VIEW,e),t&&(this.#o(`after${e}mode`),this.#o("viewchange",this,{view:e}))}else this.removeAttribute(n.VIEW)}get view(){return this.getAttribute(n.VIEW)||b.view}};v=T([S("ids-editor"),L(te)],v);export{v as a};
