import{a as A}from"./ids-chunk-XDOP7ZEW.js";import{a as T}from"./ids-chunk-N7RNTKMO.js";import{a as v}from"./ids-chunk-XE4WFW5M.js";import{d as g,e as w,h as E}from"./ids-chunk-QPDOZZIG.js";import{a as r}from"./ids-chunk-EQJWBFQ2.js";import{a as p}from"./ids-chunk-U7OOVFXE.js";var m=`[${r.MORE_ACTIONS}]`,d=class extends T(A){constructor(){super()}static get attributes(){return[...super.attributes,r.OVERFLOW]}connectedCallback(){super.connectedCallback(),this.#s(),this.renderOverflowedItems(),this.#n()}template(){let n=E("ids-tab","more",this.selected,this.orientation),t=this.selected?' font-weight="semi-bold"':"";return`<div id="tab-more" ${n} tabindex="-1" part="container">
      <span class="tab-more-text">
        <ids-text id="count">4</ids-text>
        <ids-text id="more-text" size="22"${t} translate-text="true">More</ids-text>
        <ids-icon icon="dropdown"></ids-icon>
      </span>
      <ids-popup-menu id="tab-more-menu" target="#tab-more">
        <slot></slot>
      </ids-popup-menu>
    </div>`}get menu(){return this.shadowRoot?.querySelector("ids-popup-menu")}get moreActionsGroup(){return this.querySelector(m)}get predefinedMenuItems(){return[...this.querySelectorAll(`:scope > ids-menu-group:not(${m}) > ids-menu-item`)]}get overflowMenuItems(){let e=this.moreActionsGroup;return e?[...e.children]:[]}get availableOverflowTabs(){return this.parentElement?.tabListElements}#t(){let n=this.availableOverflowTabs?.map(t=>this.#e(t)).join("")||"";return`<ids-menu-group ${r.MORE_ACTIONS}>
      ${n}
    </ids-menu-group>`}#e(e,n=!1){let t="",o="",c="",l="",a="",i="",h="";n||(i=this.isOverflowed(e)?"":" hidden");let f=s=>{t=s.textContent,s.disabled&&(l=" disabled"),s.value&&(h=` value="${s.value}"`);let u=s.querySelector("ids-icon");u&&(o=` icon="${u.icon}"`)},b=s=>{let u=n?"submenu":"menuEl";s[u]&&(a=`<ids-popup-menu slot="submenu">
          ${s[u].items.map(y=>this.#e(y,!0)).join("")||""}
        </ids-popup-menu>`)},O=s=>{s.disabled&&(l=" disabled"),s.icon&&(o=` icon="${s.icon}"`),s.hidden&&(c=" hidden"),t=s.text,s.submenu&&b(s)};switch(e.tagName){case"IDS-TAB-DROPDOWN":f(e),b(e);break;case"IDS-MENU-ITEM":O(e);break;case"IDS-TAB":f(e);break;default:t=e.textContent;break}return t=g(t)?.trim(),`<ids-menu-item${l}${o}${c||i}${h}>
      ${t}
      ${a}
    </ids-menu-item>`}refreshOverflowedItems(){let e=0;this.hidden=!1,this.overflowMenuItems.forEach(t=>{let o=!this.isOverflowed(t.overflowTarget);t.hidden=o,o?t.overflowTarget.removeAttribute(r.OVERFLOWED):(t.overflowTarget.setAttribute(r.OVERFLOWED,""),e++)});let n=this.container?.querySelector("#count");n&&(n.innerHTML=`${e}`),this.hidden=!this.hasVisibleActions(),this.hasVisibleActions()||this.menu?.hide(),this.disabled=!this.hasEnabledActions()}renderOverflowedItems(){let e=this.querySelector(m);if(e&&!this.overflow){e.remove();return}this.innerHTML="",this.insertAdjacentHTML("afterbegin",this.#t());let n=(l,a)=>{a&&[...l.submenu.children].forEach((i,h)=>{i.overflowTarget=a.items[h],i.submenu&&n(i,i.overflowTarget.submenu)})},t=this.moreActionsGroup,o=this.availableOverflowTabs,c=this.overflowMenuItems;o?.length&&o.forEach((l,a)=>{let i=c[a];i||(t.insertAdjacentHTML("beforeend",this.#e(l)),i=t[t.length-1]),i.overflowTarget=l,i.submenu&&n(i,i.overflowTarget.menuEl)})}set overflow(e){let n=w(e),t=this.overflow;n!==t&&(n?this.setAttribute(r.OVERFLOW,""):this.removeAttribute(r.OVERFLOW))}get overflow(){return this.hasAttribute(r.OVERFLOW)}hasVisibleActions(){return this.querySelectorAll(":scope > ids-menu-group > ids-menu-item:not([hidden])").length>0}hasEnabledActions(){return this.querySelectorAll(":scope > ids-menu-group > ids-menu-item:not([disabled])").length>0}isOverflowed(e){if(!this.parentElement?.contains(e)||e.isEqualNode(this)||e.hidden)return!1;let n=e.getBoundingClientRect(),t=this.parentElement?.moreContainer?.getBoundingClientRect();return this.localeAPI?.isRTL()?n.left<t.right-1:n.right>t.left+1}#n(){this.menu.width="100%",this.menu.popup.align="bottom, left",this.menu.popup.y=-10,this.menu.popup.alignTarget=this.container}#s(){this.onEvent("beforeshow",this.menu,e=>{this.triggerEvent("beforeshow",this,{bubbles:e.bubbles,detail:e.detail}),this.refreshOverflowedItems()}),this.onEvent("click",this,()=>{this.menu.visible?this.menu.hide():this.menu.show()}),this.onEvent("selected",this.menu,e=>{let n=e.detail.elem;n.overflowTarget&&n.overflowTarget.click()})}};d=p([v("ids-tab-more")],d);export{d as a};
