import{b as u}from"./ids-chunk-ODGLGMPF.js";import{e as o}from"./ids-chunk-QPDOZZIG.js";import{a as n}from"./ids-chunk-EQJWBFQ2.js";var r="keydown.focus-capture",a=l=>class extends l{constructor(...t){super(...t)}static get attributes(){return[...l.attributes,n.CAPTURES_FOCUS,n.CYCLES_FOCUS,n.FOCUS_INLINE]}#t=document;connectedCallback(){super.connectedCallback?.(),this.hasAttribute(n.FOCUS_INLINE)&&this.syncInline(!0)}disconnectedCallback(){super.disconnectedCallback?.(),this.#i(),this.#t=void 0,this.#e=null}#s=!1;set capturesFocus(t){let e=this.#s,s=o(t);e!==s&&(this.#s=s,s?this.setAttribute(n.CAPTURES_FOCUS,`${s}`):this.removeAttribute(n.CAPTURES_FOCUS),this.#l())}get capturesFocus(){return this.#s}#n=!0;set cyclesFocus(t){let e=this.#n,s=o(t);e!==s&&(this.#n=s,s?(this.setAttribute(n.CYCLES_FOCUS,`${s}`),this.gainFocus()):this.removeAttribute(n.CYCLES_FOCUS))}get cyclesFocus(){return this.#n}#c(){let t=e=>{let s=this.#t.activeElement?.isEqualNode(this.firstFocusableElement),c=this.#t.activeElement?.isEqualNode(this.lastFocusableElement);switch(e.key){case"Tab":s&&e.shiftKey&&(e.preventDefault(),requestAnimationFrame(()=>{(this.cyclesFocus?this.lastFocusableElement:this.firstFocusableElement).focus()})),c&&!e.shiftKey&&(e.preventDefault(),requestAnimationFrame(()=>{(this.cyclesFocus?this.firstFocusableElement:this.lastFocusableElement).focus()}));break;default:break}return!0};this.onEvent(r,this.#t,t.bind(this))}#i(){this.offEvent(r)}#l(){this.#i(),this.capturesFocus&&(this.gainFocus(),this.#c())}#o=["button","ids-button","ids-dropdown","ids-menu-button","ids-modal-button","ids-toggle-button","[href]","input","ids-input","ids-checkbox","ids-radio","ids-switch","select","textarea","ids-textarea",'[tabindex]:not([tabindex="-1"]'];get focusableSelectors(){return this.#o}set focusableSelectors(t){Array.isArray(t)&&(this.#o=t)}#e=[];get focusableElementsInDocument(){return!this.#e.length&&this.focusableSelectors.length&&this.refreshFocusableElements(),this.#e}refreshFocusableElements(){let t=this.focusableSelectors.join(", ");this.#e=[...this.#t.querySelectorAll(t)].filter(e=>!e.hasAttribute(n.HIDDEN))}get focusableElements(){return this.focusInline?this.focusableElementsInDocument:this.focusableElementsInDocument.filter(t=>this.contains(t))}get firstFocusableElement(){return this.focusableElements[0]}get nextFocusableElement(){if(!this.focusableElements.length)return;let t=this.focusableElementsInDocument.indexOf(this.#t.activeElement),e=this.focusableElementsInDocument[t+1];return!this.contains(e)&&this.cyclesFocus?this.firstFocusableElement:e}get previousFocusableElement(){if(!this.focusableElements.length)return;let t=this.focusableElementsInDocument.indexOf(this.#t.activeElement),e=this.focusableElementsInDocument[t-1];return!this.contains(e)&&this.cyclesFocus?this.lastFocusableElement:e}get lastFocusableElement(){return this.focusableElements.slice(-1)[0]}setFocus(t=0){let e=this.focusableElements,s=this.#t.activeElement,c=this.focusableElements.indexOf(s),i=0;if(e.length){switch(t){case"last":i=e.length-1;break;case"first":case"":break;default:i=typeof t=="string"?parseInt(t):t;break}requestAnimationFrame(()=>{e[i].focus()})}return c===i}gainFocus(t=0){this.contains(this.#t.activeElement)||this.setFocus(t)}syncInline(t){t?this.#t=this.shadowRoot:this.#t=u(this)}set focusInline(t){let e=o(t);e?this.setAttribute(n.FOCUS_INLINE,"true"):this.removeAttribute(n.FOCUS_INLINE),this.syncInline(e)}get focusInline(){return this.hasAttribute(n.FOCUS_INLINE)}},b=a;export{b as a};
