import{e as n}from"./ids-chunk-QPDOZZIG.js";import{a as r}from"./ids-chunk-EQJWBFQ2.js";var o=a=>class extends a{constructor(...t){super(...t)}connectedCallback(){super.connectedCallback?.(),this.handleDirtyTracker(),window.requestAnimationFrame(()=>{this.resetDirtyTracker()})}static get attributes(){return[...a.attributes,r.DIRTY_TRACKER]}dirty={original:""};isDirty=!1;isCheckbox=!1;isEditor=!1;isRadioGroup=!1;dirtyContainer;handleDirtyTracker(){let t=this;if(this.isCheckbox=t.input?.getAttribute("type")==="checkbox",this.isEditor=!!t.input?.classList.contains("source-textarea"),this.isRadioGroup=!!t.input?.classList.contains("ids-radio-group"),`${this.dirtyTracker}`.toLowerCase()==="true"){if(t.input){let e=this.valMethod(t.input);this.dirty={original:e},this.dirtyTrackerEvents()}}else this.destroyDirtyTracker()}appendDirtyTrackerIcon(){let t=this,e=this.shadowRoot?.querySelector(".icon-dirty");if(!e)if(e=document.createElement("ids-icon"),e.setAttribute("icon","dirty-filled"),e.setAttribute("size",this.tagName==="IDS-CHECKBOX"||this.tagName==="IDS-RADIO-GROUP"?"xsmall":"small"),e.setAttribute("part","dirty-tracker-icon"),e.className="icon-dirty",this.localeAPI?.isRTL()&&e?.setAttribute("dir","rtl"),this.isCheckbox)t.labelEl?.appendChild(e),this.dirtyContainer=t.labelEl;else if(this.isRadioGroup){let i=this.shadowRoot?.querySelector("slot");t.input?.insertBefore(e,i),this.dirtyContainer=t.input}else this.isEditor?(this.dirtyContainer=this.shadowRoot?.querySelector(".editor-content"),this.dirtyContainer?.appendChild(e)):this.tagName==="IDS-DROPDOWN"||this.tagName==="IDS-MULTISELECT"?(this.dirtyContainer=t.input?.fieldContainer,this.dirtyContainer?.prepend(e)):(t.fieldContainer?.prepend(e),this.dirtyContainer=t.fieldContainer)}removeDirtyTrackerIcon(){let t=this.dirtyContainer?.querySelector(".icon-dirty");t&&t.remove()}appendDirtyTrackerMsg(){let t=this.labelEl?.querySelector(".msg-dirty");t||(t=document.createElement("ids-text"),t.setAttribute("audible","true"),t.className="msg-dirty",t.innerHTML=", Modified",this.labelEl?.appendChild(t))}removeDirtyTrackerMsg(){let t=this.labelEl?.querySelector(".msg-dirty");t&&t.remove(),t=this.input?.shadowRoot?.querySelector(".icon-dirty"),t&&t.remove()}valMethod(t){let e=this,i;return this.isRadioGroup?i=e.checked:this.isCheckbox?i=`${e.checked}`.toLowerCase()==="true":this.isEditor?i=e.value:i=t?.value,i}setDirtyTracker(t){if(typeof t>"u"){this.handleDirtyTracker();return}this.isDirty=this.dirty?.original!==t,this.isDirty?(this.appendDirtyTrackerMsg(),this.appendDirtyTrackerIcon()):(this.removeDirtyTrackerMsg(),this.removeDirtyTrackerIcon())}dirtyTrackerEvents(t=""){let e=this;if(this.input){let i="change.dirtytrackermixin";if(t==="remove"){let s=this?.handledEvents?.get(i);s&&s.target===e.input&&this.offEvent(i,e.input)}else this.offEvent(i),this.onEvent(i,e.input,()=>{let s=this.valMethod(e.input);this.setDirtyTracker(s)})}}onLanguageChange=()=>{let t=this.dirtyContainer?.querySelector(".icon-dirty");this.localeAPI?.isRTL()?t?.setAttribute("dir","rtl"):t?.removeAttribute("dir")};resetDirtyTracker(){this.dirty?(this.removeDirtyTrackerIcon(),this.removeDirtyTrackerMsg(),this.dirty={original:this.valMethod(this.input)}):this.handleDirtyTracker(),this.isDirty=!1}destroyDirtyTracker(){this.dirtyTrackerEvents("remove"),this.removeDirtyTrackerIcon(),this.removeDirtyTrackerMsg(),this.dirty=null}#t(){typeof this.onDirtyTrackerChange=="function"&&this.onDirtyTrackerChange(this.dirtyTracker)}set dirtyTracker(t){let e=n(t);e?this.setAttribute(r.DIRTY_TRACKER,e.toString()):this.removeAttribute(r.DIRTY_TRACKER),this.#t(),this.handleDirtyTracker()}get dirtyTracker(){return n(this.getAttribute(r.DIRTY_TRACKER))}},h=o;export{h as a};
