import{a as l}from"./ids-chunk-QPDOZZIG.js";var h=class extends HTMLElement{constructor(e){super();this.args=e;e?.noShadowRoot||(this.#e(),this.#t())}name;state={};cachedNonce="";container=null;hasStyles=!1;connectedCallback(){this.args?.noShadowRoot||this.render()}#e(){this.name=this.nodeName?.toLowerCase()}attributeChangedCallback(e,t,n){if(t===n)return;let s=this,c={id:s.onIdChange,hidden:s.onHiddenChange,title:s.onTitleChange}[e];if(typeof c=="function"){c.call(this,n);return}let o=i=>{switch(i){case"tabindex":return typeof this.tabIndex=="number"?"tabIndex":"tabindex";default:return l(i)}};this[o(e)]=n}disconnectedCallback(){this.cssStyles=null,this.popupOpenEventsTarget=null}static get observedAttributes(){return this.attributes}static get attributes(){return[]}render(e){if((!this.template||this.shadowRoot)&&!e)return this;let t=this.template();if(!t)return this;let n=document.createElement("template");if(this.shadowRoot?.innerHTML)for(let s of this.shadowRoot.children)s.nodeName!=="STYLE"&&s.remove();return this.shadowRoot||this.attachShadow({mode:"open"}),this.appendStyles(),n.innerHTML=t,this.shadowRoot?.appendChild(n.content.cloneNode(!0)),this.container=this.shadowRoot?.querySelector(`.${this.name}`),this.shadowRoot?.firstElementChild?.nodeName==="STYLE"&&!this.container&&(this.container=this.shadowRoot?.firstElementChild.nextElementSibling),this.shadowRoot?.firstElementChild?.nodeName!=="STYLE"&&!this.container&&(this.container=this.shadowRoot?.firstElementChild),this}template(){return""}get nonce(){let e=document;if(!e.nonce){let t=document.querySelector('meta[http-equiv="Content-Security-Policy"]');if(t){let n=t.getAttribute("content").match(/'nonce-(.*?)'/g);n=n?n[0]?.replace("'nonce-","").replace("'",""):void 0,e.nonce=n}}return e.nonce||"0a59a005"}appendStyles(){if(this.hasStyles||this.args?.noStyles)return;let e=document.createElement("style");e.textContent=this.cssStyles,this.nonce&&e.setAttribute("nonce",this.nonce),this.shadowRoot?.appendChild(e),this.hasStyles=!0}#t(){let e=window;e.idsStylesAdded||(e.idsStylesAdded=!0,this.theme="default-light")}set theme(e){this.loadTheme(e),document.body.querySelector("ids-theme-switcher")?.setAttribute("theme",e)}lastTheme="";async loadTheme(e){if(this.lastTheme===e)return;this.lastTheme=e,document.querySelector("ids-container")?.setAttribute("hidden","");let t=document.querySelector('link[href*="ids-theme"]');if(t){let a=t.getAttribute("href"),d=a?.replace(/^.*[\\/]/,"")||"";t.setAttribute("href",a?.replace(d,`ids-theme-${e}.css`)||"");return}if(document.querySelector("ids-theme-switcher[self-managed]"))return;let c=await(await fetch(`../themes/ids-theme-${e}.css`,{cache:"reload"})).text(),o=document.head,i=document.querySelector("#ids-theme"),r=i||document.createElement("style");if(r.textContent=c,r.id="ids-theme",this.nonce&&r.setAttribute("nonce",this.nonce),!i){let a=o.querySelector("title");a?o.insertBefore(r,a.nextElementSibling):o.insertAdjacentHTML("beforeend",r)}this.loadLegacyTheme(e),document.querySelector("ids-container")?.setAttribute("animated",""),setTimeout(()=>{document.querySelector("ids-container")?.removeAttribute("hidden")},150)}loadLegacyTheme(e){let t=document.querySelector("#stylesheet");if(t||(t=document.querySelector("#sohoxi-stylesheet")),!t)return;let n=t?.getAttribute("href"),s=e.replace("default","theme-new");n&&t?.setAttribute("href",n.replace("theme-new-light",s).replace("theme-new-dark",s).replace("theme-new-contrast",s))}};export{h as a};
