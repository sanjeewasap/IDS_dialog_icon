import{a as d,b as p}from"./ids-chunk-5RRSUJN3.js";import{a as h,b as c}from"./ids-chunk-XE4WFW5M.js";import{e as n}from"./ids-chunk-QPDOZZIG.js";import{a as i,b as l}from"./ids-chunk-EQJWBFQ2.js";import{a as u}from"./ids-chunk-U7OOVFXE.js";var o=class extends p{constructor(){super()}static get attributes(){return[...super.attributes,i.DISABLED,i.DISPLAY_SELECTED_TEXT,i.DROPDOWN_ICON,i.FORMATTER_WIDTH,i.ID,i.MENU]}connectedCallback(){super.connectedCallback(),this.hasAttribute(i.DROPDOWN_ICON)&&this.#t(!0),this.#e()}disconnectedCallback(){super.disconnectedCallback(),this.dropdownIcon=null}get protoClasses(){let t=this.querySelector("span:not(.audible), ids-text:not(.audible)");return(this.querySelector("ids-icon[slot]")||this.querySelector("ids-icon"))&&!t?["ids-menu-button","ids-icon-button"]:["ids-menu-button"]}set disabled(t){super.disabled=t;let e=n(t);this.menuEl.disabled=e}get disabled(){return super.disabled}#t(t){let e=this.dropdownIconEl,s=this.dropdownIcon&&this.dropdownIcon.length?this.dropdownIcon:"dropdown";t?e?e.icon=s:this.container?.insertAdjacentHTML("beforeend",`<ids-icon icon="${s}" class="ids-icon dropdown-icon"></ids-icon>`):e&&e.remove()}set displaySelectedText(t){n(t)?this.setAttribute(i.DISPLAY_SELECTED_TEXT,`${t}`):this.removeAttribute(i.DISPLAY_SELECTED_TEXT),this.configureMenu()}get displaySelectedText(){return n(this.getAttribute(i.DISPLAY_SELECTED_TEXT))}set dropdownIcon(t){let e=n(t);e?this.setAttribute(i.DROPDOWN_ICON,typeof t=="string"&&t.length?`${t}`:"dropdown"):this.removeAttribute(i.DROPDOWN_ICON),this.#t(e),this.setPopupArrow()}get dropdownIcon(){return this.getAttribute(i.DROPDOWN_ICON)}get dropdownIconEl(){return this.container?.querySelector("ids-icon:not([slot])")}get menu(){return this.getAttribute(i.MENU)}set menu(t){this.setAttribute(i.MENU,`${t}`),this.configureMenu()}get value(){return this.menuEl?.getSelectedValues()}set value(t){typeof this.menuEl?.setSelectedValues=="function"&&this.menuEl.setSelectedValues(t)}get menuEl(){let t=s=>s?.querySelector(`ids-popup-menu[id="${this.menu}"]`)||s?.querySelector(`ids-action-sheet[id="${this.menu}"]`),e=t(this.parentElement);return e||(e=t(this.getRootNode())),e}#e(){this.configureMenu(),this.menuEl?.popup||requestAnimationFrame(()=>this.configureMenu())}configureMenu(){if(!this.menuEl||!this.menuEl.popup)return;this.resizeMenu(),this.menuEl.triggerType="click",this.menuEl.target=this,this.setAttribute(l.ARIA_HASPOPUP,"menu"),this.menuEl.popup&&(this.menuEl.popup.align="bottom, left",this.menuEl.popup.y=8,this.setPopupArrow()),this?.handledEvents?.get("beforeshow")||this.onEvent("beforeshow",this.menuEl,()=>{this.setActiveState(!0),this.resizeMenu()}),this?.handledEvents?.get("hide")||this.onEvent("hide",this.menuEl,()=>{this.setActiveState(!1)}),this.offEvent("selected.menu"),this.menuEl&&this.displaySelectedText&&this.onEvent("selected.menu",this.menuEl,s=>{let r=this.querySelector("ids-text, span");r||(r=this),r.textContent=s.detail.elem.textContent.trim()})}setActiveState(t){t?this.button?.classList.add("is-active"):this.button?.classList.remove("is-active")}resizeMenu(){!this.menuEl||!this.menuEl.popup||(this.menuEl.popup.container.style.minWidth=`${this.button?.clientWidth}px`)}setPopupArrow(){!this.menuEl||!this.menuEl.popup||(this.menuEl.popup.arrowTarget=this.dropdownIconEl||this,this.menuEl.popup.arrow="bottom")}set formatterWidth(t){let e=null;if(typeof t=="number"&&!Number.isNaN(t))e=`${t}px`;else if(typeof t=="string"){let s=parseInt(t.slice(-1),10);typeof s=="number"&&!Number.isNaN(s)?e=`${t}px`:/(px|em|vw|vh|ch|%)$/g.test(t)&&!Number.isNaN(parseInt(t,10))&&(this.container?.classList[/%$/g.test(t)?"add":"remove"]("formatter-width-percentage"),e=t)}e?(this.setAttribute(i.FORMATTER_WIDTH,String(t)),this.container?.classList.add(i.FORMATTER_WIDTH),this.container&&(this.container.style.minWidth=e)):(this.removeAttribute(i.FORMATTER_WIDTH),this.container?.classList.remove(i.FORMATTER_WIDTH),this.container&&(this.container.style.minWidth=""))}};o=u([h("ids-menu-button"),c(d)],o);export{o as a};
